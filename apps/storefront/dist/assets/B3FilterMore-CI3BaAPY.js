import{j as l,B as h,f as J,o as Q,z as W,I as O,ab as X,d as Z}from"./mui-BLXOPN2Y.js";import{r as s}from"./reactVendor-BTcQ-GDs.js";import{u as $}from"./form-hNmOEDBo.js";import{u as k}from"./lang-DZEhsX8V.js";import{G as P,bU as ee,r as le,C as te,k as oe,a as se,h as _,ab as ae,ad as ne}from"./react-setup-CIpmLpp1.js";import"./load-functions-BRbpFqwb.js";import"./base-BCVDEF8S.js";import{s as ue,L as re,A as ie,D as fe,B as ce}from"./B3CustomForm-Byn3vSHD.js";import{g as de,s as me}from"./dateFns-CXOS6Mtj.js";const A=(e=0,t="yyyy-MM-dd")=>de(me(new Date,e),t);function I({onChange:e,variant:t,value:n,label:i,disableOpenPicker:b=!0,formatInput:C="YYYY-MM-DD",size:F="small"}){const u=s.useRef(null),f=s.useRef(null),{state:{bcLanguage:g}}=s.useContext(P),c=ue(g||"en"),[j,p]=s.useState(!1),y=()=>{var o;p(!j),(o=u==null?void 0:u.current)!=null&&o.blur&&u.current.blur()},x=o=>{if(typeof o!="string"){const V=ee(o).format(C);e(V)}else e(o)};return l.jsxs(l.Fragment,{children:[l.jsx(h,{ref:f}),l.jsx(re,{dateAdapter:ie,adapterLocale:c,children:l.jsx(fe,{label:i,DialogProps:{container:f.current},onChange:o=>o&&x(o),onClose:()=>{p(!1)},value:n||null,open:j,inputRef:u,disableOpenPicker:b,renderInput:o=>l.jsx(J,{...o,size:F,onMouseDown:()=>{y()},variant:t})})})]})}var w={},pe=Q;Object.defineProperty(w,"__esModule",{value:!0});var E=w.default=void 0,xe=pe(le()),he=l;E=w.default=(0,xe.default)((0,he.jsx)("path",{d:"M10 18h4v-2h-4zM3 6v2h18V6zm3 7h12v-2H6z"}),"FilterList");function ge({startPicker:e,endPicker:t,handleChange:n,isMonthlySpacing:i=!1,xs:b={},customWidth:C},F){const[u,f]=s.useState((e==null?void 0:e.defaultValue)||""),[g,c]=s.useState((t==null?void 0:t.defaultValue)||""),j=()=>{f(i?A(30):""),c(i?A():"")};s.useEffect(()=>{f((e==null?void 0:e.defaultValue)||"")},[e==null?void 0:e.defaultValue]),s.useEffect(()=>{c((t==null?void 0:t.defaultValue)||"")},[t==null?void 0:t.defaultValue]);const p=()=>{const o={startValue:u,endValue:g};return e!=null&&e.isEnabled?o:{}};s.useImperativeHandle(F,()=>({setClearPickerValue:j,getPickerValue:p}));const y=o=>{f(o),n&&n((e==null?void 0:e.pickerKey)||"start",o)},x=o=>{c(o),n&&n((t==null?void 0:t.pickerKey)||"end",o)};return l.jsxs(h,{sx:{display:"flex",width:C||"auto"},children:[(e==null?void 0:e.isEnabled)&&l.jsx(h,{sx:{width:"49%",mt:"16px",mr:"1%",cursor:"pointer","& > .MuiFormControl-root":{width:"100%"},...b},children:l.jsx(I,{onChange:y,value:u,label:e==null?void 0:e.label,variant:"filled"})}),(t==null?void 0:t.isEnabled)&&l.jsx(h,{sx:{width:"49%",mt:"16px",ml:"1%","& > .MuiFormControl-root":{width:"100%"},cursor:"pointer",...b},children:l.jsx(I,{onChange:x,value:g,label:t==null?void 0:t.label,variant:"filled"})})]})}const be=s.forwardRef(ge),Ce=["roleAutocomplete"];function Me({startPicker:e,endPicker:t,filterMoreInfo:n,onChange:i,isShowMore:b=!1,resetFilterInfo:C}){const{state:{portalStyle:{backgroundColor:F="#FEF9F5"}}}=s.useContext(te),u=oe(F),[f,g]=s.useState(!1),[c,j]=s.useState(!1),[p,y]=s.useState(0),[x,o]=s.useState(null),V=s.useRef(null),{control:T,handleSubmit:H,getValues:S,formState:{errors:Y},setValue:D}=$({mode:"onSubmit"}),[M]=se(),v=k(),q=W().palette.primary.main;s.useEffect(()=>{x&&Object.keys(x).forEach(a=>{D(a,x[a])})},[x,f]);const G=()=>{g(!0)},K=s.useMemo(()=>{if(!p)return 0;const a=S();return n.reduce((d,m)=>{const B=m;return Ce.includes(B.fieldType)&&a[B.name]&&(d-=1),d},p)},[p]),L=()=>{g(!1)},R=a=>{if(a){const r=[],d=Object.keys(a).every(m=>a[m]==="");Object.keys(a).forEach(m=>{a[m]!==""&&r.push(m)}),j(!d),y(r.length)}},N=a=>{H(r=>{var m;const d=(m=V.current)==null?void 0:m.getPickerValue();if(i){const B={...d,...r};R(B),i(B),o({...r})}L()})(a)},z=()=>{var a;Object.keys(S()).forEach(r=>{D(r,"")}),C&&C(),(a=V.current)==null||a.setClearPickerValue()},U=()=>{const a=e!=null&&e.isEnabled?{startValue:"",endValue:""}:{};z();const r=S();if(i){const d={...a,...r};R(d),i(d),o({...r})}};return l.jsxs(h,{sx:{ml:3,cursor:"pointer"},children:[(n&&n.length||b)&&l.jsxs(h,{sx:{display:"flex",alignItems:"center"},children:[l.jsxs(h,{onClick:G,children:[!c&&l.jsx(O,{"aria-label":"edit",size:"medium",sx:{color:u,":hover":{backgroundColor:_("#FFFFFF",.1)},"& svg":{width:"32px",height:"32px"}},children:l.jsx(E,{})}),c&&l.jsx(O,{"aria-label":"edit",size:"medium",sx:{color:u,":hover":{backgroundColor:_("#FFFFFF",.1)}},children:l.jsx(X,{badgeContent:K,sx:{"& .MuiBadge-badge.MuiBadge-standard.MuiBadge-anchorOriginTopRight":{bgcolor:q,borderRadius:"50%"}},children:l.jsx(E,{})})})]}),c&&!M&&l.jsx(Z,{"aria-label":"clear-edit",size:"small",sx:{marginLeft:"5px",color:"#1976D2"},onClick:U,children:v("global.filter.clearFilters")})]}),l.jsxs(ae,{isOpen:f,leftSizeBtn:v("global.filter.cancel"),rightSizeBtn:v("global.filter.apply"),title:v("global.filter.title"),handleLeftClick:L,handRightClick:N,children:[l.jsxs(h,{sx:{width:M?"100%":"450px"},children:[l.jsx(ce,{formFields:n,errors:Y,control:T,getValues:S,setValue:D}),l.jsx(be,{ref:V,startPicker:e,endPicker:t})]}),l.jsx(ne,{sx:{mt:1},onClick:z,size:"small",children:v("global.filter.clearFilters")})]})]})}export{Me as B,be as a,A as d};
//# sourceMappingURL=B3FilterMore-CI3BaAPY.js.map
