import{j as e,B as f,a1 as ee,a6 as ye,o as _,a7 as A,a8 as R,X as be,Y as Ce,C as je,G as H,x as we,d as T,T as ve,z as Ie,a9 as Se,aa as X,ab as E,ac as ke}from"./mui-Cw0dwOiN.js";import{r as c}from"./reactVendor-BTcQ-GDs.js";import{u as M}from"./lang-6J3-0YIA.js";import{j as Be,u,Q as De,a as L,G as W,R as Me,S as Le,U as Pe,V as Fe,r as q,W as Ne,i as te,C as $,q as He,X as z,Y as P,_ as Re,$ as Te,t as se,a0 as oe,k as G,a1 as ne,a2 as ie,a3 as O,a4 as ae,a5 as Q,a6 as Oe,a7 as Ae,a8 as Ee,a9 as ze,aa as _e,ab as We}from"./react-setup-DSYWb28G.js";import"./load-functions-DL5N0fkL.js";import"./base-BCVDEF8S.js";import{u as N,a as re,m as qe}from"./router-DEI8QtBD.js";import{d as $e}from"./useB2BCallback-DOyIFx1A.js";import{b as Ge}from"./b3TriggerCartNumber-6ZWpUTGT.js";import{H as Ue}from"./HierarchyDialog-C6ceVNTM.js";import{u as Ke}from"./useBlockPendingAccountViewPrice-DHifFlSn.js";import{a as Ve,S as Xe,C as Qe}from"./muiIcon-BiFRwRtm.js";import"./intl-CKipw3rV.js";import"./eCache-BdHG5F0B.js";import"./redux-D7_Lh1Zo.js";import"./toolkit-C5fVsw89.js";import"./lodashEs-DKEtmQJE.js";import"../index.hStmN1DJ.js";import"./global-D7Yn0gGb.js";import"./dateFns-CeqDayOU.js";import"./dropzone-Cizh2goU.js";const Ye=[0,1,2];function ce(){const m=M(),[x,n]=c.useState(!1),[t,l]=Be("sf-isCloseCompanyCredit",!1,sessionStorage),g=u(({company:i})=>i.customer.role),d=u(({b2bFeatures:i})=>i.masqueradeCompany.isAgenting);c.useEffect(()=>{(async()=>{if(!t&&(Ye.includes(Number(g))||Number(g)===3&&d)){const{companyCreditConfig:{creditHold:r,creditEnabled:a}}=await De();n(r&&a)}})()},[g,d,t]);const h=()=>{l(!0),n(!1)};return x?e.jsx(f,{sx:{margin:"1rem 0"},children:e.jsx(ee,{variant:"filled",onClose:()=>h(),severity:"warning",children:m("global.companyCredit.alert")})}):null}function le(){const[m]=L(),x=u(({global:d})=>d.setOpenPageFn),{state:{isCloseGotoBCHome:n}}=c.useContext(W),t=N(),l=()=>{n?window.location.href="/":(t("/"),x==null||x({isOpen:!1,openUrl:""})),window.history.replaceState(null,"",window.location.pathname||"/")},g=m?Me:Le;return e.jsx(g,{children:e.jsx(Pe,{sx:{color:"#757371"},onClick:l})})}function pe(){const{state:{logo:m}}=c.useContext(W),x=u(({company:l})=>l.companyInfo.id);let n=m;switch(x){case"8333329":n="https://store-g2rtbg88n2.mybigcommerce.com/content/retailco.png";break;case"8333327":n="https://store-g2rtbg88n2.mybigcommerce.com/content/bbros.png";break;case"8311697":n="https://s3-us-west-2.amazonaws.com/bundleb2b-v3.0-media-files-prod/logo-candcgroup_d3c2c167-a757-40b3-99b6-2fadd54b8a34.png";break;case"8333328":n="https://store-g2rtbg88n2.mybigcommerce.com/content/pubpartners.png";break}const[t]=L();return e.jsx(f,{sx:t?{height:"40px",width:"140px","& li":{height:"40px",display:"flex",alignItems:"center",justifyContent:"center",marginLeft:"1rem"},"& img":{maxHeight:"40px"}}:{width:"200px",height:"65px",display:"flex",alignItems:"center","& img":{maxHeight:"65px"}},children:e.jsx(ye,{sx:{maxWidth:"200px",cursor:"pointer","& .MuiImageListItem-img":{objectFit:"contain",width:"auto"}},onClick:()=>{window.location.href="/"},children:e.jsx("img",{src:n||Fe,alt:"logo"})})})}var U={},Je=_;Object.defineProperty(U,"__esModule",{value:!0});var de=U.default=void 0,Ze=Je(q()),et=e;de=U.default=(0,Ze.default)((0,et.jsx)("path",{d:"m7 10 5 5 5-5z"}),"ArrowDropDown");var K={},tt=_;Object.defineProperty(K,"__esModule",{value:!0});var ue=K.default=void 0,st=tt(q()),ot=e;ue=K.default=(0,st.default)((0,ot.jsx)("path",{d:"m7 14 5-5 5 5z"}),"ArrowDropUp");function nt({width:m,list:x,title:n,value:t,handleItemClick:l,menuRenderItemName:g=i=>i.name,...d},h){const[i]=L(),[r,a]=c.useState(!1),b=c.useRef(null);c.useImperativeHandle(h,()=>({setOpenDropDown:()=>a(!0)}));const C=()=>{a(!1)};return e.jsxs(f,{sx:{width:m||"auto"},children:[Ne?e.jsx(R,{primary:n,sx:{"& span":{fontWeight:i?400:700,color:"#333333"}}}):e.jsxs(A,{ref:b,onClick:()=>a(!0),sx:{pr:0},children:[e.jsx(R,{primary:n,sx:{"& span":{fontWeight:i?400:700,color:"#333333"}}}),r?e.jsx(ue,{}):e.jsx(de,{})]}),e.jsx(be,{anchorEl:b.current,open:r,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},id:"customized-menu",keepMounted:!0,onClose:C,sx:{"& .MuiList-root.MuiList-padding.MuiMenu-list":{pt:i?0:"8px",pb:i?0:"8px",maxHeight:i?"auto":"200px"}},...d||{},children:x.length&&x.map(w=>{const{key:y}=w,p=t===y?"#3385d6":"black";return e.jsx(Ce,{sx:{color:p,minWidth:i?"auto":m||"155px"},onClick:()=>{C(),l&&l(y)},children:g(w)},y)})})]})}const me=c.forwardRef(nt),Y=[{name:"Log out",key:"logout",idLang:"global.button.logout"}];function xe({closeSidebar:m}){const[x]=L(),n=u(({company:r})=>r.customer.firstName),t=u(({company:r})=>r.customer.lastName),l=N(),g=M(),d=async r=>{const a=Y.find(b=>b.key===r);a&&(a.key==="logout"?l("/login?loginFlag=loggedOutLogin"):a.type==="path"&&a.key&&l(a.key),m&&m(!1))},h="".concat(n,"  ").concat(t),i=c.useMemo(()=>Y.map(r=>({key:r.key,name:g(r.idLang)})),[g]);return e.jsx(f,{sx:{minWidth:"150px",display:"flex",justifyContent:x?"start":"end",mr:"-5px",fontSize:"16px",color:"#333333",textAlign:"center",alignItems:"center"},children:e.jsx(me,{title:h,handleItemClick:d,list:i})})}var V={},it=_;Object.defineProperty(V,"__esModule",{value:!0});var ge=V.default=void 0,at=it(q()),rt=e;ge=V.default=(0,at.default)((0,rt.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check");const J={currentInfo:{langId:"companyHierarchy.chip.currentCompany"},representingInfo:{langId:"companyHierarchy.chip.selectCompany"}};function ct(){var j;const m=M(),x=te(),[n,t]=c.useState(!1),[l,g]=c.useState(null),d=c.useRef(null),{state:{switchAccountButton:{color:h="#ED6C02"}}}=c.useContext($),{id:i}=u(({company:o})=>o.companyInfo),r=u(({b2bFeatures:o})=>o.masqueradeCompany.id),{pagesSubsidiariesPermission:a}=u(({company:o})=>o),{selectCompanyHierarchyId:b,companyHierarchyList:C}=u(({company:o})=>o.companyHierarchyInfo),{isOpenCompanyHierarchyDropDown:w}=u(({global:o})=>o),y=c.useMemo(()=>Object.keys(a).some(o=>a[o]),[a]);c.useEffect(()=>{var o;w&&(d!=null&&d.current)&&((o=d.current)==null||o.setOpenDropDown())},[w]);const p=c.useMemo(()=>{var v;const o=b||i||r,k=(v=C.find(I=>Number(I.companyId)===Number(o)))==null?void 0:v.companyName,D=C.map(I=>({name:I.companyName,key:I.companyId}));return{title:k,list:D}},[b,i,C,r]),S=()=>{t(!1),x(He(!1))},F=o=>{const k=p.list.find(D=>Number(D.key)===o);k&&(g({companyId:Number(k.key),companyName:k.name}),t(!0))},B=o=>{const{name:k,key:D}=o,v=b||i||r;return e.jsxs(H,{container:!0,direction:"row",sx:{justifyContent:"space-between"},children:[e.jsx(H,{sx:{mr:2},children:k}),e.jsx(H,{sx:{width:"20px",display:"flex",justifyContent:"center"},children:D===Number(v)&&e.jsx(ge,{sx:{fontSize:"1.2rem"}})})]})},{langId:s}=b?J.representingInfo:J.currentInfo;return!((j=p==null?void 0:p.list)!=null&&j.length)||!y||!i&&!r?null:e.jsxs(e.Fragment,{children:[e.jsxs(f,{sx:{minWidth:"100px",display:"flex",justifyContent:"start",alignItems:"center",fontSize:"1rem",color:"#333333","& .MuiListItemButton-root":{paddingLeft:"0"}},children:[e.jsx(me,{ref:d,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},menuRenderItemName:B,title:(p==null?void 0:p.title)||"",handleItemClick:o=>F(Number(o)),list:(p==null?void 0:p.list)||[]}),e.jsx(je,{label:m(s),size:"small",sx:{backgroundColor:b?h:"primary.main",color:"white",height:24,"& .MuiChip-label":{px:1}}})]}),e.jsx(Ue,{open:n,handleClose:S,currentRow:l})]})}const lt=we(f)(()=>({"& svg":{color:"#FFFFFF"}}));function pt(m){const{title:x}=m,n=te(),t=M(),l=u(({company:s})=>s.customer.loginType),g=u(({company:s})=>s.customer.role),d=u(({company:s})=>s.companyInfo.status),h=z.get("blockPendingAccountOrderCreation"),[i]=Ke(),[r,a]=c.useState(""),[b,C]=c.useState(!1),[w,y]=c.useState("success"),[p,S]=c.useState("#2E7D32"),F=()=>{n(Re(Te.WAITING_LOGIN)),C(!1)},B={};return Number(d)!==0&&(B.onClose=F),c.useEffect(()=>{const s=Number(d)===0?!0:l===1,j=g===100?!1:s;C(j),j&&(Number(d)===0&&(h&&i&&a(t(P.pendingOrderingAndViewPriceBlocked)),h&&!i&&a(t(P.pendingOrderingBlocked)),!h&&i&&a(t(P.pendingViewPriceBlocked)),!h&&!i&&a(t(P.pendingOrderingNotBlocked)),y("info"),S("#0288D1")),Number(d)===1&&(a(t(P.approvedTip)),y("success"),S("#2E7D32")),Number(d)===2&&(a(P.rejectedTip),y("warning"),S("#ED6C02")))},[h,i,d,l,g,t]),b?e.jsx(lt,{sx:{mb:x?"20px":"0"},children:e.jsx(ee,{...B,severity:w||"success",sx:{color:"#FFFFFF",backgroundColor:p},children:r})}):null}function dt({title:m}){const x=u(se),n=u(({company:p})=>p.customer.role),t=u(({company:p})=>p.companyInfo),l=u(({b2bFeatures:p})=>p.masqueradeCompany.companyName),g=u(({global:p})=>p.cartNumber),d=N(),h=M(),[i]=L(),{state:{portalStyle:{backgroundColor:r="#FEF9F5"}}}=c.useContext($),{purchasabilityPermission:a}=u(oe),{isEnabledCompanyHierarchy:b}=u(({company:p})=>p.companyHierarchyInfo),C=x?a:!0,w=G(r),y=()=>{$e("on-click-cart-button")&&(window.location.href=ne)};return c.useEffect(()=>{Ge()},[]),e.jsxs(f,{children:[e.jsxs(f,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",height:"70px",alignItems:"center"},children:[e.jsxs(H,{sx:{alignItems:"center",flexDirection:"row",display:"flex"},children:[e.jsx(f,{component:"h4",sx:{fontSize:"20px",fontWeight:"500",color:w||"#333333",ml:0},children:Number(n)===3&&((t==null?void 0:t.companyName)||l||h("global.B3MainHeader.superAdmin"))}),b&&e.jsx(ct,{})]}),e.jsxs(f,{sx:{display:"flex",alignItems:"center"},children:[n!==100&&e.jsx(xe,{}),e.jsxs(f,{sx:{marginLeft:"8px"},children:[n===100&&e.jsx(T,{sx:{color:"#333333",fontWeight:700,fontSize:"16px"},onClick:()=>{d("/login")},children:h("global.B3MainHeader.signIn")}),e.jsx(T,{sx:{color:"#333333",fontWeight:700,fontSize:"16px"},onClick:()=>{window.location.href="/"},children:h("global.B3MainHeader.home")}),C&&e.jsxs(T,{sx:{color:"#333333",fontWeight:700,fontSize:"16px"},onClick:y,children:[h("global.B3MainHeader.cart"),g>0?e.jsx(ve,{id:"cart-number-icon",sx:{backgroundColor:"#1976D2",minWidth:"21px",height:"20px",color:"#FFFFFF",borderRadius:"64px",fontSize:"12px",fontWeight:"500",lineHeight:"20px",marginLeft:"3px",padding:"0px 6.5px"},children:g}):null]})]})]})]}),m&&e.jsx(f,{component:"h3",sx:{height:"40px",m:"0",fontSize:"34px",fontWeight:400,lineHeight:"42px",display:"flex",alignItems:"end",mb:"24px",mt:i?0:"24px",color:w},children:m}),e.jsx(pt,{title:m})]})}const Z=m=>m.reduce((n,t)=>{var l;if(t!=null&&t.subsidiariesCompanyKey){const g=(l=t.permissionCodes)!=null&&l.includes(",")?t.permissionCodes.split(",")[0].trim():t.permissionCodes;n[t.subsidiariesCompanyKey]=ae({level:3,code:g})}return n},{});function he({closeSidebar:m}){const[x]=L(),n=N(),t=re(),l=M(),{dispatch:g}=c.useContext(ie),d=u(({company:s})=>s.customer.role),{selectCompanyHierarchyId:h,isEnabledCompanyHierarchy:i}=u(({company:s})=>s.companyHierarchyInfo),{permissions:r}=u(({company:s})=>s),{state:a}=c.useContext(W),{quoteDetailHasNewMessages:b,registerEnabled:C}=a,y=Ie().palette.primary.main,p=()=>{n("/register"),g({type:"common",payload:{globalMessageDialog:{open:!1,title:"",message:"",cancelText:"Cancel"}}})},S=s=>{if(d===100){g({type:"common",payload:{globalMessageDialog:{open:!0,title:"Registration",message:s.configKey==="shoppingLists"?"Please create an account, or login to create a shopping list.":"To receive full access to buyer portal, please register. It will take 2 minutes.",cancelText:"Cancel",saveText:C?"Register":"",saveFn:p}}});return}n(s.path),x&&m&&m(!1)};c.useEffect(()=>{let s=!1;const{hash:j}=window.location,o=j.split("#")[1]||"",k=O(a).filter(v=>v.isMenuItem);if(o){const v=O(a).find(I=>qe(I.path,o));if(v&&(v!=null&&v.subsidiariesCompanyKey)){const{permissionCodes:I}=v,fe=I!=null&&I.includes(",")?I.split(",")[0].trim():I;s=ae({code:fe,level:3})}}const D=Z(k);Q.dispatch(Oe(D)),Q.dispatch(Ae({isHasCurrentPagePermission:s}))},[h,a,n]);const F=c.useMemo(()=>{let s=O(a).filter(o=>o.isMenuItem);const j=Z(s);return h?s=s.filter(o=>o!=null&&o.subsidiariesCompanyKey?j[o.subsidiariesCompanyKey]:!1):s=s.filter(o=>(o==null?void 0:o.subsidiariesCompanyKey)==="companyHierarchy"?i&&j[o.subsidiariesCompanyKey]:!0),s},[h,r,a,i]),B=s=>{if(t.pathname===s)return z.set("prevPath",s),!0;if(t.pathname.includes("orderDetail")){const j=z.get("prevPath")==="/company-orders"?"/company-orders":"/orders";if(s===j)return!0}return!!(t.pathname.includes("shoppingList")&&s==="/shoppingLists"||(t.pathname.includes("/quoteDetail")||t.pathname.includes("/quoteDraft"))&&s==="/quotes")};return e.jsx(Se,{sx:{width:"100%",maxWidth:360,bgcolor:x?"background.paper":"background.default",color:y||"info.main","& .MuiListItem-root":{"& .MuiButtonBase-root.Mui-selected":{color:G(y)||"#fff",bgcolor:"primary.main",borderRadius:"4px"},"& .MuiButtonBase-root:hover:not(.Mui-selected)":{bgcolor:Ee(y,.12),borderRadius:"4px"}}},component:"nav","aria-labelledby":"nested-list-subheader",children:F.map(s=>{if(s.name==="Quotes"){const{pathname:j}=t;return e.jsx(X,{disablePadding:!0,children:e.jsx(E,{badgeContent:b&&j.includes("quoteDetail")?"":0,variant:"dot",sx:{width:"100%","& .MuiBadge-badge.MuiBadge-dot":{width:8,height:8,bgcolor:"#FFFFFF",right:14,top:22}},children:e.jsx(A,{onClick:()=>S(s),selected:B(s.path),children:e.jsx(R,{primary:l(s.idLang)})})})},s.path)}return e.jsx(X,{disablePadding:!0,children:e.jsx(A,{onClick:()=>S(s),selected:B(s.path),children:e.jsx(R,{primary:l(s.idLang)})})},s.path)})})}function ut({children:m,title:x}){const n=u(se),[t,l]=c.useState(!1),g=u(({global:C})=>C.cartNumber),d=u(({b2bFeatures:C})=>C.masqueradeCompany.isAgenting),{purchasabilityPermission:h}=u(oe),i=n?h:!0,{state:{portalStyle:{backgroundColor:r="#FEF9F5"}}}=c.useContext($),a=()=>{l(!0)},b=G(r);return e.jsxs(f,{sx:{height:"70vh",p:"4vw",display:"flex",flexDirection:"column"},children:[e.jsxs(f,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",mb:"4.5vw"},children:[e.jsx(E,{badgeContent:0,color:"secondary",children:e.jsx(Ve,{onClick:a,sx:{color:b}})}),e.jsx(pe,{}),e.jsxs(f,{sx:{display:"flex",justifyContent:"space-between","& span":{marginRight:"1.5rem"}},children:[i&&e.jsx(E,{badgeContent:g,max:1e3,sx:{"& .MuiBadge-badge":{color:"#FFFFFF",backgroundColor:"#1976D2",fontWeight:500,fontSize:"12px",minWidth:"18px",height:"18px",top:"8px",right:"3px",marginRight:"-0.5rem"}},children:e.jsx(Xe,{sx:{color:"rgba(0, 0, 0, 0.54)",marginRight:"-0.5rem"},onClick:()=>{window.location.href=ne}})}),e.jsx(f,{sx:{marginLeft:"2px",height:"24px"},children:e.jsx(le,{})})]})]}),e.jsx(f,{component:"h1",sx:{p:0,m:0,mb:"6vw",fontSize:"34px",fontWeight:"400",color:b||"#263238"},children:x}),e.jsx(ce,{}),e.jsx(f,{sx:{flex:1,display:"flex",paddingBottom:d?"52px":"0"},children:m}),t&&e.jsxs(f,{sx:{height:"100vh",position:"fixed",width:"92vw",zIndex:1e3,left:0,top:0,p:"4vw",backgroundColor:"white",boxShadow:"0px 7px 8px -4px #00000033, 0px 12px 17px 2px #00000024, 0px 5px 22px 4px #0000001f"},children:[e.jsxs(f,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",pb:"4vw"},children:[e.jsx(xe,{closeSidebar:l}),e.jsx(Qe,{onClick:()=>l(!1)})]}),e.jsx(he,{closeSidebar:l})]})]})}const mt={"/purchased-products":"global.purchasedProducts.title","/orders":"global.orders.title","/company-orders":"global.companyOrders.title"};function Rt({children:m}){const[x]=L(),n=ke("(min-width:1775px)"),t=re(),[l,g]=c.useState(""),d=M(),h=u(({company:y})=>y.customer.emailAddress),i=u(({company:y})=>y.customer.id),{state:{globalMessageDialog:r},dispatch:a}=c.useContext(ie),b=N();c.useEffect(()=>{(!h||!i)&&!ze(t.pathname)&&b("/login")},[h,i,t,b]),c.useEffect(()=>{const y=_e.find(p=>p.path===t.pathname);if(y&&t.pathname!=="/quoteDraft"){const p=Object.entries(mt).find(([S])=>S===t.pathname);g(d(p?p[1]:y.idLang))}else g("");a({type:"common",payload:{tipMessage:{msgs:[]}}})},[t]);const C=()=>{a({type:"common",payload:{globalMessageDialog:{open:!1,title:"",message:"",cancelText:"Cancel"}}})},w=c.useMemo(()=>["/invoice"].includes(t.pathname)?{overflowX:"hidden"}:{},[t]);return e.jsxs(f,{children:[x?e.jsx(ut,{title:l,children:m}):e.jsxs(f,{id:"app-mainPage-layout",sx:{display:"flex",minHeight:"100vh",margin:"auto",width:n?1775:"100%",minWidth:n?1775:"100%",maxWidth:n?1775:"100%",flexDirection:"row",p:"32px 63px 70px 63px"},children:[e.jsx(le,{}),e.jsxs(f,{sx:{display:"flex",flexDirection:"column",width:"200px",displayPrint:"none"},children:[e.jsx(pe,{}),e.jsx(f,{sx:{pt:"24px"},children:e.jsx(he,{})})]}),e.jsxs(f,{sx:{flex:1,display:"flex",flexDirection:"column",maxWidth:"1450px",width:"100%",p:"0 0px 0px 50px",...w},children:[e.jsx(dt,{title:l}),e.jsx(ce,{}),e.jsx(f,{component:"main",sx:{mt:!x&&!l?"24px":"0"},children:m})]})]}),e.jsx(We,{isOpen:r.open,title:r.title,leftSizeBtn:r.cancelText,rightSizeBtn:r.saveText,handleLeftClick:r.cancelFn||C,handRightClick:r.saveFn,showRightBtn:!!r.saveText,children:e.jsx(f,{sx:{display:"flex",justifyContent:x?"center":"start",width:x?"100%":"450px",height:"100%"},children:r.message})})]})}export{Rt as default};
//# sourceMappingURL=B3Layout-6TO1um1x.js.map
