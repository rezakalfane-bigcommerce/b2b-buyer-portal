import{j as e,B as g,a1 as ee,a6 as be,a7 as A,T as te,o as W,a8 as E,a9 as H,X as Ce,Y as je,C as we,G as R,x as ve,d as T,z as Ie,aa as Se,ab as z,ac as ke}from"./mui-BLXOPN2Y.js";import{r as c}from"./reactVendor-BTcQ-GDs.js";import{u as M}from"./lang-DZEhsX8V.js";import{j as Be,u as d,Q as De,a as L,G as q,R as Me,S as Le,U as Pe,V as Fe,r as $,W as Ne,i as se,C as G,q as Re,X as _,Y as P,_ as He,$ as Te,t as oe,a0 as ne,k as U,a1 as ie,a2 as ae,a3 as O,a4 as re,a5 as Q,a6 as Oe,a7 as Ae,a8 as Ee,a9 as ze,aa as _e,ab as We}from"./react-setup-Dk2lMx-W.js";import"./load-functions-adwiw1MZ.js";import"./base-BCVDEF8S.js";import{u as N,a as ce,m as qe}from"./router-DEI8QtBD.js";import{d as $e}from"./useB2BCallback-DOyIFx1A.js";import{b as Ge}from"./b3TriggerCartNumber-B0UwwOWg.js";import{H as Ue}from"./HierarchyDialog-DCrK6Agp.js";import{u as Ke}from"./useBlockPendingAccountViewPrice-MKwmy1a9.js";import{a as Ve,S as Xe,C as Qe}from"./muiIcon-DcrdeM0-.js";import"./intl-CKipw3rV.js";import"./eCache-BdHG5F0B.js";import"./redux-D7_Lh1Zo.js";import"./toolkit-C5fVsw89.js";import"./lodashEs-DKEtmQJE.js";import"../index.COFs9ak5.js";import"./global-D7Yn0gGb.js";import"./dateFns-CXOS6Mtj.js";import"./dropzone-BOmS2zFM.js";const Ye=[0,1,2];function le(){const x=M(),[h,p]=c.useState(!1),[t,l]=Be("sf-isCloseCompanyCredit",!1,sessionStorage),a=d(({company:n})=>n.customer.role),m=d(({b2bFeatures:n})=>n.masqueradeCompany.isAgenting);c.useEffect(()=>{(async()=>{if(!t&&(Ye.includes(Number(a))||Number(a)===3&&m)){const{companyCreditConfig:{creditHold:r,creditEnabled:i}}=await De();p(r&&i)}})()},[a,m,t]);const f=()=>{l(!0),p(!1)};return h?e.jsx(g,{sx:{margin:"1rem 0"},children:e.jsx(ee,{variant:"filled",onClose:()=>f(),severity:"warning",children:x("global.companyCredit.alert")})}):null}function pe(){const[x]=L(),h=d(({global:m})=>m.setOpenPageFn),{state:{isCloseGotoBCHome:p}}=c.useContext(q),t=N(),l=()=>{p?window.location.href="/":(t("/"),h==null||h({isOpen:!1,openUrl:""})),window.history.replaceState(null,"",window.location.pathname||"/")},a=x?Me:Le;return e.jsx(a,{children:e.jsx(Pe,{sx:{color:"#757371"},onClick:l})})}function de(){const{state:{logo:x}}=c.useContext(q),h=d(({company:a})=>a.customer),p=d(({company:a})=>a.companyInfo.companyName),t=d(({company:a})=>a.companyInfo.id),[l]=L();return e.jsxs(g,{sx:l?{height:"40px",width:"140px","& li":{height:"40px",display:"flex",alignItems:"center",justifyContent:"center",marginLeft:"1rem"},"& img":{maxHeight:"40px"}}:{width:"200px",height:"65px",display:"flex",alignItems:"center","& img":{maxHeight:"65px"}},children:[e.jsx(be,{sx:{maxWidth:"200px",cursor:"pointer","& .MuiImageListItem-img":{objectFit:"contain",width:"auto"}},onClick:()=>{window.location.href="/"},children:e.jsx("img",{src:x||Fe,alt:"logo"})}),e.jsx(A,{sx:{minWidth:"300px",ml:12},children:e.jsxs(te,{children:[h.companyRoleName," - ",p," (",t,")"]})})]})}var K={},Je=W;Object.defineProperty(K,"__esModule",{value:!0});var ue=K.default=void 0,Ze=Je($()),et=e;ue=K.default=(0,Ze.default)((0,et.jsx)("path",{d:"m7 10 5 5 5-5z"}),"ArrowDropDown");var V={},tt=W;Object.defineProperty(V,"__esModule",{value:!0});var me=V.default=void 0,st=tt($()),ot=e;me=V.default=(0,st.default)((0,ot.jsx)("path",{d:"m7 14 5-5 5 5z"}),"ArrowDropUp");function nt({width:x,list:h,title:p,value:t,handleItemClick:l,menuRenderItemName:a=n=>n.name,...m},f){const[n]=L(),[r,i]=c.useState(!1),b=c.useRef(null);c.useImperativeHandle(f,()=>({setOpenDropDown:()=>i(!0)}));const C=()=>{i(!1)};return e.jsxs(g,{sx:{width:x||"auto"},children:[Ne?e.jsx(H,{primary:p,sx:{"& span":{fontWeight:n?400:700,color:"#333333"}}}):e.jsxs(E,{ref:b,onClick:()=>i(!0),sx:{pr:0},children:[e.jsx(H,{primary:p,sx:{"& span":{fontWeight:n?400:700,color:"#333333"}}}),r?e.jsx(me,{}):e.jsx(ue,{})]}),e.jsx(Ce,{anchorEl:b.current,open:r,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},id:"customized-menu",keepMounted:!0,onClose:C,sx:{"& .MuiList-root.MuiList-padding.MuiMenu-list":{pt:n?0:"8px",pb:n?0:"8px",maxHeight:n?"auto":"200px"}},...m||{},children:h.length&&h.map(w=>{const{key:y}=w,u=t===y?"#3385d6":"black";return e.jsx(je,{sx:{color:u,minWidth:n?"auto":x||"155px"},onClick:()=>{C(),l&&l(y)},children:a(w)},y)})})]})}const xe=c.forwardRef(nt),Y=[{name:"Log out",key:"logout",idLang:"global.button.logout"}];function he({closeSidebar:x}){const[h]=L(),p=d(({company:r})=>r.customer.firstName),t=d(({company:r})=>r.customer.lastName),l=N(),a=M(),m=async r=>{const i=Y.find(b=>b.key===r);i&&(i.key==="logout"?l("/login?loginFlag=loggedOutLogin"):i.type==="path"&&i.key&&l(i.key),x&&x(!1))},f="".concat(p,"  ").concat(t),n=c.useMemo(()=>Y.map(r=>({key:r.key,name:a(r.idLang)})),[a]);return e.jsx(g,{sx:{minWidth:"150px",display:"flex",justifyContent:h?"start":"end",mr:"-5px",fontSize:"16px",color:"#333333",textAlign:"center",alignItems:"center"},children:e.jsx(xe,{title:f,handleItemClick:m,list:n})})}var X={},it=W;Object.defineProperty(X,"__esModule",{value:!0});var fe=X.default=void 0,at=it($()),rt=e;fe=X.default=(0,at.default)((0,rt.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check");const J={currentInfo:{langId:"companyHierarchy.chip.currentCompany"},representingInfo:{langId:"companyHierarchy.chip.selectCompany"}};function ct(){var j;const x=M(),h=se(),[p,t]=c.useState(!1),[l,a]=c.useState(null),m=c.useRef(null),{state:{switchAccountButton:{color:f="#ED6C02"}}}=c.useContext(G),{id:n}=d(({company:o})=>o.companyInfo),r=d(({b2bFeatures:o})=>o.masqueradeCompany.id),{pagesSubsidiariesPermission:i}=d(({company:o})=>o),{selectCompanyHierarchyId:b,companyHierarchyList:C}=d(({company:o})=>o.companyHierarchyInfo),{isOpenCompanyHierarchyDropDown:w}=d(({global:o})=>o),y=c.useMemo(()=>Object.keys(i).some(o=>i[o]),[i]);c.useEffect(()=>{var o;w&&(m!=null&&m.current)&&((o=m.current)==null||o.setOpenDropDown())},[w]);const u=c.useMemo(()=>{var v;const o=b||n||r,k=(v=C.find(I=>Number(I.companyId)===Number(o)))==null?void 0:v.companyName,D=C.map(I=>({name:I.companyName,key:I.companyId}));return{title:k,list:D}},[b,n,C,r]),S=()=>{t(!1),h(Re(!1))},F=o=>{const k=u.list.find(D=>Number(D.key)===o);k&&(a({companyId:Number(k.key),companyName:k.name}),t(!0))},B=o=>{const{name:k,key:D}=o,v=b||n||r;return e.jsxs(R,{container:!0,direction:"row",sx:{justifyContent:"space-between"},children:[e.jsx(R,{sx:{mr:2},children:k}),e.jsx(R,{sx:{width:"20px",display:"flex",justifyContent:"center"},children:D===Number(v)&&e.jsx(fe,{sx:{fontSize:"1.2rem"}})})]})},{langId:s}=b?J.representingInfo:J.currentInfo;return!((j=u==null?void 0:u.list)!=null&&j.length)||!y||!n&&!r?null:e.jsxs(e.Fragment,{children:[e.jsxs(g,{sx:{minWidth:"100px",display:"flex",justifyContent:"start",alignItems:"center",fontSize:"1rem",color:"#333333","& .MuiListItemButton-root":{paddingLeft:"0"}},children:[e.jsx(xe,{ref:m,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},menuRenderItemName:B,title:(u==null?void 0:u.title)||"",handleItemClick:o=>F(Number(o)),list:(u==null?void 0:u.list)||[]}),e.jsx(we,{label:x(s),size:"small",sx:{backgroundColor:b?f:"primary.main",color:"white",height:24,"& .MuiChip-label":{px:1}}})]}),e.jsx(Ue,{open:p,handleClose:S,currentRow:l})]})}const lt=ve(g)(()=>({"& svg":{color:"#FFFFFF"}}));function pt(x){const{title:h}=x,p=se(),t=M(),l=d(({company:s})=>s.customer.loginType),a=d(({company:s})=>s.customer.role),m=d(({company:s})=>s.companyInfo.status),f=_.get("blockPendingAccountOrderCreation"),[n]=Ke(),[r,i]=c.useState(""),[b,C]=c.useState(!1),[w,y]=c.useState("success"),[u,S]=c.useState("#2E7D32"),F=()=>{p(He(Te.WAITING_LOGIN)),C(!1)},B={};return Number(m)!==0&&(B.onClose=F),c.useEffect(()=>{const s=Number(m)===0?!0:l===1,j=a===100?!1:s;C(j),j&&(Number(m)===0&&(f&&n&&i(t(P.pendingOrderingAndViewPriceBlocked)),f&&!n&&i(t(P.pendingOrderingBlocked)),!f&&n&&i(t(P.pendingViewPriceBlocked)),!f&&!n&&i(t(P.pendingOrderingNotBlocked)),y("info"),S("#0288D1")),Number(m)===1&&(i(t(P.approvedTip)),y("success"),S("#2E7D32")),Number(m)===2&&(i(P.rejectedTip),y("warning"),S("#ED6C02")))},[f,n,m,l,a,t]),b?e.jsx(lt,{sx:{mb:h?"20px":"0"},children:e.jsx(ee,{...B,severity:w||"success",sx:{color:"#FFFFFF",backgroundColor:u},children:r})}):null}function dt({title:x}){const h=d(oe),p=d(({company:u})=>u.customer.role),t=d(({company:u})=>u.companyInfo),l=d(({b2bFeatures:u})=>u.masqueradeCompany.companyName),a=d(({global:u})=>u.cartNumber),m=N(),f=M(),[n]=L(),{state:{portalStyle:{backgroundColor:r="#FEF9F5"}}}=c.useContext(G),{purchasabilityPermission:i}=d(ne),{isEnabledCompanyHierarchy:b}=d(({company:u})=>u.companyHierarchyInfo),C=h?i:!0,w=U(r),y=()=>{$e("on-click-cart-button")&&(window.location.href=ie)};return c.useEffect(()=>{Ge()},[]),e.jsxs(g,{children:[e.jsxs(g,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",height:"70px",alignItems:"center"},children:[e.jsxs(R,{sx:{alignItems:"center",flexDirection:"row",display:"flex"},children:[e.jsx(g,{component:"h4",sx:{fontSize:"20px",fontWeight:"500",color:w||"#333333",ml:0},children:Number(p)===3&&((t==null?void 0:t.companyName)||l||f("global.B3MainHeader.superAdmin"))}),b&&e.jsx(ct,{})]}),e.jsxs(g,{sx:{display:"flex",alignItems:"center"},children:[p!==100&&e.jsx(he,{}),e.jsxs(g,{sx:{marginLeft:"8px"},children:[p===100&&e.jsx(T,{sx:{color:"#333333",fontWeight:700,fontSize:"16px"},onClick:()=>{m("/login")},children:f("global.B3MainHeader.signIn")}),e.jsx(T,{sx:{color:"#333333",fontWeight:700,fontSize:"16px"},onClick:()=>{window.location.href="/"},children:f("global.B3MainHeader.home")}),C&&e.jsxs(T,{sx:{color:"#333333",fontWeight:700,fontSize:"16px"},onClick:y,children:[f("global.B3MainHeader.cart"),a>0?e.jsx(te,{id:"cart-number-icon",sx:{backgroundColor:"#1976D2",minWidth:"21px",height:"20px",color:"#FFFFFF",borderRadius:"64px",fontSize:"12px",fontWeight:"500",lineHeight:"20px",marginLeft:"3px",padding:"0px 6.5px"},children:a}):null]})]})]})]}),x&&e.jsx(g,{component:"h3",sx:{height:"40px",m:"0",fontSize:"34px",fontWeight:400,lineHeight:"42px",display:"flex",alignItems:"end",mb:"24px",mt:n?0:"24px",color:w},children:x}),e.jsx(pt,{title:x})]})}const Z=x=>x.reduce((p,t)=>{var l;if(t!=null&&t.subsidiariesCompanyKey){const a=(l=t.permissionCodes)!=null&&l.includes(",")?t.permissionCodes.split(",")[0].trim():t.permissionCodes;p[t.subsidiariesCompanyKey]=re({level:3,code:a})}return p},{});function ge({closeSidebar:x}){const[h]=L(),p=N(),t=ce(),l=M(),{dispatch:a}=c.useContext(ae),m=d(({company:s})=>s.customer.role),{selectCompanyHierarchyId:f,isEnabledCompanyHierarchy:n}=d(({company:s})=>s.companyHierarchyInfo),{permissions:r}=d(({company:s})=>s),{state:i}=c.useContext(q),{quoteDetailHasNewMessages:b,registerEnabled:C}=i,y=Ie().palette.primary.main,u=()=>{p("/register"),a({type:"common",payload:{globalMessageDialog:{open:!1,title:"",message:"",cancelText:"Cancel"}}})},S=s=>{if(m===100){a({type:"common",payload:{globalMessageDialog:{open:!0,title:"Registration",message:s.configKey==="shoppingLists"?"Please create an account, or login to create a shopping list.":"To receive full access to buyer portal, please register. It will take 2 minutes.",cancelText:"Cancel",saveText:C?"Register":"",saveFn:u}}});return}p(s.path),h&&x&&x(!1)};c.useEffect(()=>{let s=!1;const{hash:j}=window.location,o=j.split("#")[1]||"",k=O(i).filter(v=>v.isMenuItem);if(o){const v=O(i).find(I=>qe(I.path,o));if(v&&(v!=null&&v.subsidiariesCompanyKey)){const{permissionCodes:I}=v,ye=I!=null&&I.includes(",")?I.split(",")[0].trim():I;s=re({code:ye,level:3})}}const D=Z(k);Q.dispatch(Oe(D)),Q.dispatch(Ae({isHasCurrentPagePermission:s}))},[f,i,p]);const F=c.useMemo(()=>{let s=O(i).filter(o=>o.isMenuItem);const j=Z(s);return f?s=s.filter(o=>o!=null&&o.subsidiariesCompanyKey?j[o.subsidiariesCompanyKey]:!1):s=s.filter(o=>(o==null?void 0:o.subsidiariesCompanyKey)==="companyHierarchy"?n&&j[o.subsidiariesCompanyKey]:!0),s},[f,r,i,n]),B=s=>{if(t.pathname===s)return _.set("prevPath",s),!0;if(t.pathname.includes("orderDetail")){const j=_.get("prevPath")==="/company-orders"?"/company-orders":"/orders";if(s===j)return!0}return!!(t.pathname.includes("shoppingList")&&s==="/shoppingLists"||(t.pathname.includes("/quoteDetail")||t.pathname.includes("/quoteDraft"))&&s==="/quotes")};return e.jsx(Se,{sx:{width:"100%",maxWidth:360,bgcolor:h?"background.paper":"background.default",color:y||"info.main","& .MuiListItem-root":{"& .MuiButtonBase-root.Mui-selected":{color:U(y)||"#fff",bgcolor:"primary.main",borderRadius:"4px"},"& .MuiButtonBase-root:hover:not(.Mui-selected)":{bgcolor:Ee(y,.12),borderRadius:"4px"}}},component:"nav","aria-labelledby":"nested-list-subheader",children:F.map(s=>{if(s.name==="Quotes"){const{pathname:j}=t;return e.jsx(A,{disablePadding:!0,children:e.jsx(z,{badgeContent:b&&j.includes("quoteDetail")?"":0,variant:"dot",sx:{width:"100%","& .MuiBadge-badge.MuiBadge-dot":{width:8,height:8,bgcolor:"#FFFFFF",right:14,top:22}},children:e.jsx(E,{onClick:()=>S(s),selected:B(s.path),children:e.jsx(H,{primary:l(s.idLang)})})})},s.path)}return e.jsx(A,{disablePadding:!0,children:e.jsx(E,{onClick:()=>S(s),selected:B(s.path),children:e.jsx(H,{primary:l(s.idLang)})})},s.path)})})}function ut({children:x,title:h}){const p=d(oe),[t,l]=c.useState(!1),a=d(({global:C})=>C.cartNumber),m=d(({b2bFeatures:C})=>C.masqueradeCompany.isAgenting),{purchasabilityPermission:f}=d(ne),n=p?f:!0,{state:{portalStyle:{backgroundColor:r="#FEF9F5"}}}=c.useContext(G),i=()=>{l(!0)},b=U(r);return e.jsxs(g,{sx:{height:"70vh",p:"4vw",display:"flex",flexDirection:"column"},children:[e.jsxs(g,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",mb:"4.5vw"},children:[e.jsx(z,{badgeContent:0,color:"secondary",children:e.jsx(Ve,{onClick:i,sx:{color:b}})}),e.jsx(de,{}),e.jsxs(g,{sx:{display:"flex",justifyContent:"space-between","& span":{marginRight:"1.5rem"}},children:[n&&e.jsx(z,{badgeContent:a,max:1e3,sx:{"& .MuiBadge-badge":{color:"#FFFFFF",backgroundColor:"#1976D2",fontWeight:500,fontSize:"12px",minWidth:"18px",height:"18px",top:"8px",right:"3px",marginRight:"-0.5rem"}},children:e.jsx(Xe,{sx:{color:"rgba(0, 0, 0, 0.54)",marginRight:"-0.5rem"},onClick:()=>{window.location.href=ie}})}),e.jsx(g,{sx:{marginLeft:"2px",height:"24px"},children:e.jsx(pe,{})})]})]}),e.jsx(g,{component:"h1",sx:{p:0,m:0,mb:"6vw",fontSize:"34px",fontWeight:"400",color:b||"#263238"},children:h}),e.jsx(le,{}),e.jsx(g,{sx:{flex:1,display:"flex",paddingBottom:m?"52px":"0"},children:x}),t&&e.jsxs(g,{sx:{height:"100vh",position:"fixed",width:"92vw",zIndex:1e3,left:0,top:0,p:"4vw",backgroundColor:"white",boxShadow:"0px 7px 8px -4px #00000033, 0px 12px 17px 2px #00000024, 0px 5px 22px 4px #0000001f"},children:[e.jsxs(g,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",pb:"4vw"},children:[e.jsx(he,{closeSidebar:l}),e.jsx(Qe,{onClick:()=>l(!1)})]}),e.jsx(ge,{closeSidebar:l})]})]})}const mt={"/purchased-products":"global.purchasedProducts.title","/orders":"global.orders.title","/company-orders":"global.companyOrders.title"};function Ht({children:x}){const[h]=L(),p=ke("(min-width:1775px)"),t=ce(),[l,a]=c.useState(""),m=M(),f=d(({company:y})=>y.customer.emailAddress),n=d(({company:y})=>y.customer.id),{state:{globalMessageDialog:r},dispatch:i}=c.useContext(ae),b=N();c.useEffect(()=>{(!f||!n)&&!ze(t.pathname)&&b("/login")},[f,n,t,b]),c.useEffect(()=>{const y=_e.find(u=>u.path===t.pathname);if(y&&t.pathname!=="/quoteDraft"){const u=Object.entries(mt).find(([S])=>S===t.pathname);a(m(u?u[1]:y.idLang))}else a("");i({type:"common",payload:{tipMessage:{msgs:[]}}})},[t]);const C=()=>{i({type:"common",payload:{globalMessageDialog:{open:!1,title:"",message:"",cancelText:"Cancel"}}})},w=c.useMemo(()=>["/invoice"].includes(t.pathname)?{overflowX:"hidden"}:{},[t]);return e.jsxs(g,{children:[h?e.jsx(ut,{title:l,children:x}):e.jsxs(g,{id:"app-mainPage-layout",sx:{display:"flex",minHeight:"100vh",margin:"auto",width:p?1775:"100%",minWidth:p?1775:"100%",maxWidth:p?1775:"100%",flexDirection:"row",p:"32px 63px 70px 63px"},children:[e.jsx(pe,{}),e.jsxs(g,{sx:{display:"flex",flexDirection:"column",width:"200px",displayPrint:"none"},children:[e.jsx(de,{}),e.jsx(g,{sx:{pt:"24px"},children:e.jsx(ge,{})})]}),e.jsxs(g,{sx:{flex:1,display:"flex",flexDirection:"column",maxWidth:"1450px",width:"100%",p:"0 0px 0px 50px",...w},children:[e.jsx(dt,{title:l}),e.jsx(le,{}),e.jsx(g,{component:"main",sx:{mt:!h&&!l?"24px":"0"},children:x})]})]}),e.jsx(We,{isOpen:r.open,title:r.title,leftSizeBtn:r.cancelText,rightSizeBtn:r.saveText,handleLeftClick:r.cancelFn||C,handRightClick:r.saveFn,showRightBtn:!!r.saveText,children:e.jsx(g,{sx:{display:"flex",justifyContent:h?"center":"start",width:h?"100%":"450px",height:"100%"},children:r.message})})]})}export{Ht as default};
//# sourceMappingURL=B3Layout-COZAxAeM.js.map
