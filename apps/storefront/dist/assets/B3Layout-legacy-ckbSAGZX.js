System.register(["./mui-legacy-CLOaLEk9.js","./reactVendor-legacy-CtYIj4Ma.js","./lang-legacy-TODaA4m_.js","./react-setup-legacy-0xe2iPqH.js","./load-functions-legacy-PJaV-5hU.js","./base-legacy-D2P4nFX7.js","./router-legacy-s4T0V6vG.js","./useB2BCallback-legacy-BNykb3hy.js","./b3TriggerCartNumber-legacy-SFqh7aNw.js","./HierarchyDialog-legacy-UMrKCQ_z.js","./useBlockPendingAccountViewPrice-legacy-DgU7VYhR.js","./muiIcon-legacy-D-EcFXKh.js","./intl-legacy-B7uNycgM.js","./eCache-legacy-CW-H9Ud9.js","./redux-legacy-D5ZHjMNV.js","./toolkit-legacy-uWyLsHZ1.js","./lodashEs-legacy-5FC1NR51.js","../index-legacy.BB7DfOW7.js","./global-legacy-B1EgakWG.js","./dateFns-legacy-C2RUCIEF.js","./dropzone-legacy-CIQbZZBD.js"],(function(e,t){"use strict";var n,i,o,s,a,r,l,c,d,p,m,x,u,h,g,y,f,j,b,C,w,k,v,F,I,M,S,D,N,H,B,z,L,W,O,P,E,R,T,A,q,K,_,V,G,X,U,Y,$,Q,J,Z,ee,te,ne,ie,oe,se,ae,re,le,ce,de;return{setters:[e=>{n=e.j,i=e.B,o=e.a1,s=e.a6,a=e.a7,r=e.T,l=e.o,c=e.a8,d=e.a9,p=e.X,m=e.Y,x=e.C,u=e.G,h=e.x,g=e.d,y=e.z,f=e.aa,j=e.ab,b=e.ac},e=>{C=e.r},e=>{w=e.u},e=>{k=e.j,v=e.u,F=e.Q,I=e.a,M=e.G,S=e.R,D=e.S,N=e.U,H=e.V,B=e.r,z=e.W,L=e.i,W=e.C,O=e.q,P=e.X,E=e.Y,R=e._,T=e.$,A=e.t,q=e.a0,K=e.k,_=e.a1,V=e.a2,G=e.a3,X=e.a4,U=e.a5,Y=e.a6,$=e.a7,Q=e.a8,J=e.a9,Z=e.aa,ee=e.ab},null,null,e=>{te=e.u,ne=e.a,ie=e.m},e=>{oe=e.d},e=>{se=e.b},e=>{ae=e.H},e=>{re=e.u},e=>{le=e.a,ce=e.S,de=e.C},null,null,null,null,null,null,null,null,null],execute:function(){e("default",(function({children:e}){const[t]=I(),o=b("(min-width:1775px)"),s=ne(),[a,r]=C.useState(""),l=w(),c=v((({company:e})=>e.customer.emailAddress)),d=v((({company:e})=>e.customer.id)),{state:{globalMessageDialog:p},dispatch:m}=C.useContext(V),x=te();C.useEffect((()=>{c&&d||J(s.pathname)||x("/login")}),[c,d,s,x]),C.useEffect((()=>{const e=Z.find((e=>e.path===s.pathname));if(e&&"/quoteDraft"!==s.pathname){const t=Object.entries(Te).find((([e])=>e===s.pathname));r(l(t?t[1]:e.idLang))}else r("");m({type:"common",payload:{tipMessage:{msgs:[]}}})}),[s]);const u=C.useMemo((()=>["/invoice"].includes(s.pathname)?{overflowX:"hidden"}:{}),[s]);return n.jsxs(i,{children:[t?n.jsx(Re,{title:a,children:e}):n.jsxs(i,{id:"app-mainPage-layout",sx:{display:"flex",minHeight:"100vh",margin:"auto",width:o?1775:"100%",minWidth:o?1775:"100%",maxWidth:o?1775:"100%",flexDirection:"row",p:"32px 63px 70px 63px"},children:[n.jsx(me,{}),n.jsxs(i,{sx:{display:"flex",flexDirection:"column",width:"200px",displayPrint:"none"},children:[n.jsx(xe,{}),n.jsx(i,{sx:{pt:"24px"},children:n.jsx(Ee,{})})]}),n.jsxs(i,{sx:{flex:1,display:"flex",flexDirection:"column",maxWidth:"1450px",width:"100%",p:"0 0px 0px 50px",...u},children:[n.jsx(Oe,{title:a}),n.jsx(pe,{}),n.jsx(i,{component:"main",sx:{mt:t||a?"0":"24px"},children:e})]})]}),n.jsx(ee,{isOpen:p.open,title:p.title,leftSizeBtn:p.cancelText,rightSizeBtn:p.saveText,handleLeftClick:p.cancelFn||(()=>{m({type:"common",payload:{globalMessageDialog:{open:!1,title:"",message:"",cancelText:"Cancel"}}})}),handRightClick:p.saveFn,showRightBtn:!!p.saveText,children:n.jsx(i,{sx:{display:"flex",justifyContent:t?"center":"start",width:t?"100%":"450px",height:"100%"},children:p.message})})]})}));const t=[0,1,2];function pe(){const e=w(),[s,a]=C.useState(!1),[r,l]=k("sf-isCloseCompanyCredit",!1,sessionStorage),c=v((({company:e})=>e.customer.role)),d=v((({b2bFeatures:e})=>e.masqueradeCompany.isAgenting));return C.useEffect((()=>{(async()=>{if(!r&&(t.includes(Number(c))||3===Number(c)&&d)){const{companyCreditConfig:{creditHold:e,creditEnabled:t}}=await F();a(e&&t)}})()}),[c,d,r]),s?n.jsx(i,{sx:{margin:"1rem 0"},children:n.jsx(o,{variant:"filled",onClose:()=>(l(!0),void a(!1)),severity:"warning",children:e("global.companyCredit.alert")})}):null}function me(){const[e]=I(),t=v((({global:e})=>e.setOpenPageFn)),{state:{isCloseGotoBCHome:i}}=C.useContext(M),o=te(),s=e?S:D;return n.jsx(s,{children:n.jsx(N,{sx:{color:"#757371"},onClick:()=>{i?window.location.href="/":(o("/"),t?.({isOpen:!1,openUrl:""})),window.history.replaceState(null,"",window.location.pathname||"/")}})})}function xe(){const{state:{logo:e}}=C.useContext(M),t=v((({company:e})=>e.customer)),o=v((({company:e})=>e.companyInfo.companyName)),l=v((({company:e})=>e.companyInfo.id)),[c]=I();return n.jsxs(i,{sx:c?{height:"40px",width:"140px","& li":{height:"40px",display:"flex",alignItems:"center",justifyContent:"center",marginLeft:"1rem"},"& img":{maxHeight:"40px"}}:{width:"200px",height:"65px",display:"flex",alignItems:"center","& img":{maxHeight:"65px"}},children:[n.jsx(s,{sx:{maxWidth:"200px",cursor:"pointer","& .MuiImageListItem-img":{objectFit:"contain",width:"auto"}},onClick:()=>{window.location.href="/"},children:n.jsx("img",{src:e||H,alt:"logo"})}),n.jsx(a,{sx:{minWidth:"300px",ml:12},children:n.jsxs(r,{children:[t.companyRoleName," - ",o," (",l,")"]})})]})}var ue={},he=l;Object.defineProperty(ue,"__esModule",{value:!0});var ge=ue.default=void 0,ye=he(B()),fe=n;ge=ue.default=(0,ye.default)((0,fe.jsx)("path",{d:"m7 10 5 5 5-5z"}),"ArrowDropDown");var je={},be=l;Object.defineProperty(je,"__esModule",{value:!0});var Ce=je.default=void 0,we=be(B()),ke=n;Ce=je.default=(0,we.default)((0,ke.jsx)("path",{d:"m7 14 5-5 5 5z"}),"ArrowDropUp");const ve=C.forwardRef((function({width:e,list:t,title:o,value:s,handleItemClick:a,menuRenderItemName:r=(e=>e.name),...l},x){const[u]=I(),[h,g]=C.useState(!1),y=C.useRef(null);C.useImperativeHandle(x,(()=>({setOpenDropDown:()=>g(!0)})));const f=()=>{g(!1)};return n.jsxs(i,{sx:{width:e||"auto"},children:[z?n.jsx(d,{primary:o,sx:{"& span":{fontWeight:u?400:700,color:"#333333"}}}):n.jsxs(c,{ref:y,onClick:()=>g(!0),sx:{pr:0},children:[n.jsx(d,{primary:o,sx:{"& span":{fontWeight:u?400:700,color:"#333333"}}}),h?n.jsx(Ce,{}):n.jsx(ge,{})]}),n.jsx(p,{anchorEl:y.current,open:h,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},id:"customized-menu",keepMounted:!0,onClose:f,sx:{"& .MuiList-root.MuiList-padding.MuiMenu-list":{pt:u?0:"8px",pb:u?0:"8px",maxHeight:u?"auto":"200px"}},...l||{},children:t.length&&t.map((t=>{const{key:i}=t,o=s===i?"#3385d6":"black";return n.jsx(m,{sx:{color:o,minWidth:u?"auto":e||"155px"},onClick:()=>{f(),a&&a(i)},children:r(t)},i)}))})]})})),Fe=[{name:"Log out",key:"logout",idLang:"global.button.logout"}];function Ie({closeSidebar:e}){const[t]=I(),o=v((({company:e})=>e.customer.firstName)),s=v((({company:e})=>e.customer.lastName)),a=te(),r=w(),l=`${o}  ${s}`,c=C.useMemo((()=>Fe.map((e=>({key:e.key,name:r(e.idLang)})))),[r]);return n.jsx(i,{sx:{minWidth:"150px",display:"flex",justifyContent:t?"start":"end",mr:"-5px",fontSize:"16px",color:"#333333",textAlign:"center",alignItems:"center"},children:n.jsx(ve,{title:l,handleItemClick:async t=>{const n=Fe.find((e=>e.key===t));n&&("logout"===n.key?a("/login?loginFlag=loggedOutLogin"):"path"===n.type&&n.key&&a(n.key),e&&e(!1))},list:c})})}var Me={},Se=l;Object.defineProperty(Me,"__esModule",{value:!0});var De=Me.default=void 0,Ne=Se(B()),He=n;De=Me.default=(0,Ne.default)((0,He.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check");const Be={currentInfo:{langId:"companyHierarchy.chip.currentCompany"},representingInfo:{langId:"companyHierarchy.chip.selectCompany"}};function ze(){const e=w(),t=L(),[o,s]=C.useState(!1),[a,r]=C.useState(null),l=C.useRef(null),{state:{switchAccountButton:{color:c="#ED6C02"}}}=C.useContext(W),{id:d}=v((({company:e})=>e.companyInfo)),p=v((({b2bFeatures:e})=>e.masqueradeCompany.id)),{pagesSubsidiariesPermission:m}=v((({company:e})=>e)),{selectCompanyHierarchyId:h,companyHierarchyList:g}=v((({company:e})=>e.companyHierarchyInfo)),{isOpenCompanyHierarchyDropDown:y}=v((({global:e})=>e)),f=C.useMemo((()=>Object.keys(m).some((e=>m[e]))),[m]);C.useEffect((()=>{y&&l?.current&&l.current?.setOpenDropDown()}),[y]);const j=C.useMemo((()=>{const e=h||d||p,t=g.find((t=>Number(t.companyId)===Number(e)))?.companyName;return{title:t,list:g.map((e=>({name:e.companyName,key:e.companyId})))}}),[h,d,g,p]),{langId:b}=h?Be.representingInfo:Be.currentInfo;return j?.list?.length&&f&&(d||p)?n.jsxs(n.Fragment,{children:[n.jsxs(i,{sx:{minWidth:"100px",display:"flex",justifyContent:"start",alignItems:"center",fontSize:"1rem",color:"#333333","& .MuiListItemButton-root":{paddingLeft:"0"}},children:[n.jsx(ve,{ref:l,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},menuRenderItemName:e=>{const{name:t,key:i}=e,o=h||d||p;return n.jsxs(u,{container:!0,direction:"row",sx:{justifyContent:"space-between"},children:[n.jsx(u,{sx:{mr:2},children:t}),n.jsx(u,{sx:{width:"20px",display:"flex",justifyContent:"center"},children:i===Number(o)&&n.jsx(De,{sx:{fontSize:"1.2rem"}})})]})},title:j?.title||"",handleItemClick:e=>(e=>{const t=j.list.find((t=>Number(t.key)===e));t&&(r({companyId:Number(t.key),companyName:t.name}),s(!0))})(Number(e)),list:j?.list||[]}),n.jsx(x,{label:e(b),size:"small",sx:{backgroundColor:h?c:"primary.main",color:"white",height:24,"& .MuiChip-label":{px:1}}})]}),n.jsx(ae,{open:o,handleClose:()=>{s(!1),t(O(!1))},currentRow:a})]}):null}const Le=h(i)((()=>({"& svg":{color:"#FFFFFF"}})));function We(e){const{title:t}=e,i=L(),s=w(),a=v((({company:e})=>e.customer.loginType)),r=v((({company:e})=>e.customer.role)),l=v((({company:e})=>e.companyInfo.status)),c=P.get("blockPendingAccountOrderCreation"),[d]=re(),[p,m]=C.useState(""),[x,u]=C.useState(!1),[h,g]=C.useState("success"),[y,f]=C.useState("#2E7D32"),j=()=>{i(R(T.WAITING_LOGIN)),u(!1)},b={};return 0!==Number(l)&&(b.onClose=j),C.useEffect((()=>{const e=0===Number(l)||1===a,t=100!==r&&e;u(t),t&&(0===Number(l)&&(c&&d&&m(s(E.pendingOrderingAndViewPriceBlocked)),c&&!d&&m(s(E.pendingOrderingBlocked)),!c&&d&&m(s(E.pendingViewPriceBlocked)),c||d||m(s(E.pendingOrderingNotBlocked)),g("info"),f("#0288D1")),1===Number(l)&&(m(s(E.approvedTip)),g("success"),f("#2E7D32")),2===Number(l)&&(m(E.rejectedTip),g("warning"),f("#ED6C02")))}),[c,d,l,a,r,s]),x?n.jsx(Le,{sx:{mb:t?"20px":"0"},children:n.jsx(o,{...b,severity:h||"success",sx:{color:"#FFFFFF",backgroundColor:y},children:p})}):null}function Oe({title:e}){const t=v(A),o=v((({company:e})=>e.customer.role)),s=v((({company:e})=>e.companyInfo)),a=v((({b2bFeatures:e})=>e.masqueradeCompany.companyName)),l=v((({global:e})=>e.cartNumber)),c=te(),d=w(),[p]=I(),{state:{portalStyle:{backgroundColor:m="#FEF9F5"}}}=C.useContext(W),{purchasabilityPermission:x}=v(q),{isEnabledCompanyHierarchy:h}=v((({company:e})=>e.companyHierarchyInfo)),y=!t||x,f=K(m);return C.useEffect((()=>{se()}),[]),n.jsxs(i,{children:[n.jsxs(i,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",height:"70px",alignItems:"center"},children:[n.jsxs(u,{sx:{alignItems:"center",flexDirection:"row",display:"flex"},children:[n.jsx(i,{component:"h4",sx:{fontSize:"20px",fontWeight:"500",color:f||"#333333",ml:0},children:3===Number(o)&&(s?.companyName||a||d("global.B3MainHeader.superAdmin"))}),h&&n.jsx(ze,{})]}),n.jsxs(i,{sx:{display:"flex",alignItems:"center"},children:[100!==o&&n.jsx(Ie,{}),n.jsxs(i,{sx:{marginLeft:"8px"},children:[100===o&&n.jsx(g,{sx:{color:"#333333",fontWeight:700,fontSize:"16px"},onClick:()=>{c("/login")},children:d("global.B3MainHeader.signIn")}),n.jsx(g,{sx:{color:"#333333",fontWeight:700,fontSize:"16px"},onClick:()=>{window.location.href="/"},children:d("global.B3MainHeader.home")}),y&&n.jsxs(g,{sx:{color:"#333333",fontWeight:700,fontSize:"16px"},onClick:()=>{oe("on-click-cart-button")&&(window.location.href=_)},children:[d("global.B3MainHeader.cart"),l>0?n.jsx(r,{id:"cart-number-icon",sx:{backgroundColor:"#1976D2",minWidth:"21px",height:"20px",color:"#FFFFFF",borderRadius:"64px",fontSize:"12px",fontWeight:"500",lineHeight:"20px",marginLeft:"3px",padding:"0px 6.5px"},children:l}):null]})]})]})]}),e&&n.jsx(i,{component:"h3",sx:{height:"40px",m:"0",fontSize:"34px",fontWeight:400,lineHeight:"42px",display:"flex",alignItems:"end",mb:"24px",mt:p?0:"24px",color:f},children:e}),n.jsx(We,{title:e})]})}const Pe=e=>e.reduce(((e,t)=>{if(t?.subsidiariesCompanyKey){const n=t.permissionCodes?.includes(",")?t.permissionCodes.split(",")[0].trim():t.permissionCodes;e[t.subsidiariesCompanyKey]=X({level:3,code:n})}return e}),{});function Ee({closeSidebar:e}){const[t]=I(),i=te(),o=ne(),s=w(),{dispatch:r}=C.useContext(V),l=v((({company:e})=>e.customer.role)),{selectCompanyHierarchyId:p,isEnabledCompanyHierarchy:m}=v((({company:e})=>e.companyHierarchyInfo)),{permissions:x}=v((({company:e})=>e)),{state:u}=C.useContext(M),{quoteDetailHasNewMessages:h,registerEnabled:g}=u,b=y().palette.primary.main,k=()=>{i("/register"),r({type:"common",payload:{globalMessageDialog:{open:!1,title:"",message:"",cancelText:"Cancel"}}})},F=n=>{100!==l?(i(n.path),t&&e&&e(!1)):r({type:"common",payload:{globalMessageDialog:{open:!0,title:"Registration",message:"shoppingLists"===n.configKey?"Please create an account, or login to create a shopping list.":"To receive full access to buyer portal, please register. It will take 2 minutes.",cancelText:"Cancel",saveText:g?"Register":"",saveFn:k}}})};C.useEffect((()=>{let e=!1;const{hash:t}=window.location,n=t.split("#")[1]||"",i=G(u).filter((e=>e.isMenuItem));if(n){const t=G(u).find((e=>ie(e.path,n)));if(t&&t?.subsidiariesCompanyKey){const{permissionCodes:n}=t,i=n?.includes(",")?n.split(",")[0].trim():n;e=X({code:i,level:3})}}const o=Pe(i);U.dispatch(Y(o)),U.dispatch($({isHasCurrentPagePermission:e}))}),[p,u,i]);const S=C.useMemo((()=>{let e=G(u).filter((e=>e.isMenuItem));const t=Pe(e);return e=p?e.filter((e=>!!e?.subsidiariesCompanyKey&&t[e.subsidiariesCompanyKey])):e.filter((e=>"companyHierarchy"!==e?.subsidiariesCompanyKey||m&&t[e.subsidiariesCompanyKey])),e}),[p,x,u,m]),D=e=>o.pathname===e?(P.set("prevPath",e),!0):!(!o.pathname.includes("orderDetail")||e!==("/company-orders"===P.get("prevPath")?"/company-orders":"/orders"))||(!(!o.pathname.includes("shoppingList")||"/shoppingLists"!==e)||!(!o.pathname.includes("/quoteDetail")&&!o.pathname.includes("/quoteDraft")||"/quotes"!==e));return n.jsx(f,{sx:{width:"100%",maxWidth:360,bgcolor:t?"background.paper":"background.default",color:b||"info.main","& .MuiListItem-root":{"& .MuiButtonBase-root.Mui-selected":{color:K(b)||"#fff",bgcolor:"primary.main",borderRadius:"4px"},"& .MuiButtonBase-root:hover:not(.Mui-selected)":{bgcolor:Q(b,.12),borderRadius:"4px"}}},component:"nav","aria-labelledby":"nested-list-subheader",children:S.map((e=>{if("Quotes"===e.name){const{pathname:t}=o;return n.jsx(a,{disablePadding:!0,children:n.jsx(j,{badgeContent:h&&t.includes("quoteDetail")?"":0,variant:"dot",sx:{width:"100%","& .MuiBadge-badge.MuiBadge-dot":{width:8,height:8,bgcolor:"#FFFFFF",right:14,top:22}},children:n.jsx(c,{onClick:()=>F(e),selected:D(e.path),children:n.jsx(d,{primary:s(e.idLang)})})})},e.path)}return n.jsx(a,{disablePadding:!0,children:n.jsx(c,{onClick:()=>F(e),selected:D(e.path),children:n.jsx(d,{primary:s(e.idLang)})})},e.path)}))})}function Re({children:e,title:t}){const o=v(A),[s,a]=C.useState(!1),r=v((({global:e})=>e.cartNumber)),l=v((({b2bFeatures:e})=>e.masqueradeCompany.isAgenting)),{purchasabilityPermission:c}=v(q),d=!o||c,{state:{portalStyle:{backgroundColor:p="#FEF9F5"}}}=C.useContext(W),m=K(p);return n.jsxs(i,{sx:{height:"70vh",p:"4vw",display:"flex",flexDirection:"column"},children:[n.jsxs(i,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",mb:"4.5vw"},children:[n.jsx(j,{badgeContent:0,color:"secondary",children:n.jsx(le,{onClick:()=>{a(!0)},sx:{color:m}})}),n.jsx(xe,{}),n.jsxs(i,{sx:{display:"flex",justifyContent:"space-between","& span":{marginRight:"1.5rem"}},children:[d&&n.jsx(j,{badgeContent:r,max:1e3,sx:{"& .MuiBadge-badge":{color:"#FFFFFF",backgroundColor:"#1976D2",fontWeight:500,fontSize:"12px",minWidth:"18px",height:"18px",top:"8px",right:"3px",marginRight:"-0.5rem"}},children:n.jsx(ce,{sx:{color:"rgba(0, 0, 0, 0.54)",marginRight:"-0.5rem"},onClick:()=>{window.location.href=_}})}),n.jsx(i,{sx:{marginLeft:"2px",height:"24px"},children:n.jsx(me,{})})]})]}),n.jsx(i,{component:"h1",sx:{p:0,m:0,mb:"6vw",fontSize:"34px",fontWeight:"400",color:m||"#263238"},children:t}),n.jsx(pe,{}),n.jsx(i,{sx:{flex:1,display:"flex",paddingBottom:l?"52px":"0"},children:e}),s&&n.jsxs(i,{sx:{height:"100vh",position:"fixed",width:"92vw",zIndex:1e3,left:0,top:0,p:"4vw",backgroundColor:"white",boxShadow:"0px 7px 8px -4px #00000033, 0px 12px 17px 2px #00000024, 0px 5px 22px 4px #0000001f"},children:[n.jsxs(i,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",pb:"4vw"},children:[n.jsx(Ie,{closeSidebar:a}),n.jsx(de,{onClick:()=>a(!1)})]}),n.jsx(Ee,{closeSidebar:a})]})]})}const Te={"/purchased-products":"global.purchasedProducts.title","/orders":"global.orders.title","/company-orders":"global.companyOrders.title"}}}}));
//# sourceMappingURL=B3Layout-legacy-ckbSAGZX.js.map
