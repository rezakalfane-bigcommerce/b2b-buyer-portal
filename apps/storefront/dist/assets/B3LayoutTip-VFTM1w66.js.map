{"version":3,"file":"B3LayoutTip-VFTM1w66.js","sources":["../../src/components/layout/B3LayoutTip.tsx"],"sourcesContent":["import { useContext, useEffect } from 'react';\nimport { flushSync } from 'react-dom';\n\nimport { DynamicallyVariableContext } from '@/shared/dynamicallyVariable';\nimport { MsgsProps } from '@/shared/dynamicallyVariable/context/config';\n\nimport B3Tip from '../B3Tip';\n\nfunction B3LayoutTip() {\n  const {\n    state: { tipMessage },\n    dispatch,\n  } = useContext(DynamicallyVariableContext);\n\n  useEffect(() => {\n    window.tipDispatch = dispatch;\n    // disabling as dispatch does not need to be in the deps\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const setMsgs = (msgs: [] | Array<MsgsProps> = []) => {\n    dispatch({\n      type: 'common',\n      payload: {\n        tipMessage: {\n          ...tipMessage,\n          msgs,\n        },\n      },\n    });\n  };\n\n  const { msgs = [], autoHideDuration = 5000, vertical = 'top', horizontal = 'right' } = tipMessage;\n\n  const handleClose = (id: number | string) => {\n    const newMsgs = msgs.filter((msg) => msg.id !== id);\n\n    setMsgs(newMsgs);\n  };\n\n  const closeMsgs = (id: number | string, reason: string) => {\n    if (reason === 'clickaway') return;\n\n    flushSync(() => {\n      if (msgs.length) {\n        const newMsgs = msgs.filter((item: MsgsProps) => item.id !== id);\n\n        dispatch({\n          type: 'common',\n          payload: {\n            tipMessage: {\n              ...tipMessage,\n              msgs: newMsgs,\n            },\n          },\n        });\n      }\n    });\n  };\n\n  return (\n    <B3Tip\n      msgs={msgs}\n      handleAllClose={closeMsgs}\n      autoHideDuration={autoHideDuration}\n      handleItemClose={handleClose}\n      // handleItemClose={isClose ? handleClose : undefined}\n      vertical={vertical}\n      horizontal={horizontal}\n    />\n  );\n}\n\nexport default B3LayoutTip;\n"],"names":["B3LayoutTip","tipMessage","dispatch","useContext","DynamicallyVariableContext","useEffect","setMsgs","msgs","autoHideDuration","vertical","horizontal","handleClose","id","newMsgs","msg","closeMsgs","reason","flushSync","item","jsx","B3Tip"],"mappings":"2kBAQA,SAASA,GAAc,CACf,KAAA,CACJ,MAAO,CAAE,WAAAC,CAAW,EACpB,SAAAC,CAAA,EACEC,EAAAA,WAAWC,CAA0B,EAEzCC,EAAAA,UAAU,IAAM,CACd,OAAO,YAAcH,CAGvB,EAAG,EAAE,EAEL,MAAMI,EAAU,CAACC,EAA8B,KAAO,CAC3CL,EAAA,CACP,KAAM,SACN,QAAS,CACP,WAAY,CACV,GAAGD,EACH,KAAAM,CAAA,CACF,CACF,CACD,CACH,EAEM,CAAE,KAAAA,EAAO,CAAI,EAAA,iBAAAC,EAAmB,IAAM,SAAAC,EAAW,MAAO,WAAAC,EAAa,OAAA,EAAYT,EAEjFU,EAAeC,GAAwB,CAC3C,MAAMC,EAAUN,EAAK,OAAQO,GAAQA,EAAI,KAAOF,CAAE,EAElDN,EAAQO,CAAO,CACjB,EAEME,EAAY,CAACH,EAAqBI,IAAmB,CACrDA,IAAW,aAEfC,EAAAA,UAAU,IAAM,CACd,GAAIV,EAAK,OAAQ,CACf,MAAMM,EAAUN,EAAK,OAAQW,GAAoBA,EAAK,KAAON,CAAE,EAEtDV,EAAA,CACP,KAAM,SACN,QAAS,CACP,WAAY,CACV,GAAGD,EACH,KAAMY,CAAA,CACR,CACF,CACD,CAAA,CACH,CACD,CACH,EAGE,OAAAM,EAAA,IAACC,EAAA,CACC,KAAAb,EACA,eAAgBQ,EAChB,iBAAAP,EACA,gBAAiBG,EAEjB,SAAAF,EACA,WAAAC,CAAA,CACF,CAEJ"}