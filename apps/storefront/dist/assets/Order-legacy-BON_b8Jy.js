System.register(["./mui-legacy-nJi-LPwx.js","./reactVendor-legacy-CtYIj4Ma.js","./lang-legacy-1f-gtWXv.js","./react-setup-legacy-DuBzGPOI.js","./load-functions-legacy-Cd9k4nWw.js","./base-legacy-D2P4nFX7.js","./OrderStatus-legacy-Cs2kKQkD.js","./useSort-legacy-CfCrn6Eb.js","./B2BAutoCompleteCheckbox-legacy-BgCZYlUq.js","./B3Filter-legacy-Dn314qq4.js","./router-legacy-s4T0V6vG.js"],(function(e,t){"use strict";var a,r,s,n,o,l,d,i,c,m,u,y,p,b,x,h,g,f,I,j,N,C,B,S,w,A,D,L,P;return{setters:[e=>{a=e.z,r=e.j,s=e.L,n=e.ae,o=e.x,l=e.B,d=e.T},e=>{i=e.r},e=>{c=e.u},e=>{m=e.aj,u=e.u,y=e.t,p=e.aw,b=e.au,x=e.a,h=e.aU,g=e.ac,f=e.ak},null,null,e=>{I=e.O,j=e.f,N=e.d,C=e.e,B=e.o,S=e.g,w=e.a},e=>{A=e.u},e=>{D=e.B},e=>{L=e.B},e=>{P=e.u}],execute:function(){e("O",(function({isCompanyOrder:e=!1}){const a=c(),[s]=x(),{role:n,isAgenting:o,companyId:d,isB2BUser:O,orderSubViewPermission:$,selectCompanyHierarchyId:E,isEnabledCompanyHierarchy:R,currentCompanyId:V}=function(){const e=u(y),t=u((({company:e})=>e.companyInfo.id)),a=u((({company:e})=>e.customer.role)),r=u((({b2bFeatures:e})=>e.masqueradeCompany.id)),s=u((({b2bFeatures:e})=>e.masqueradeCompany.isAgenting)),{order:n}=u((({company:e})=>e.pagesSubsidiariesPermission)),{selectCompanyHierarchyId:o,isEnabledCompanyHierarchy:l}=u((({company:e})=>e.companyHierarchyInfo)),d=a===m.SUPER_ADMIN&&s?Number(r):Number(t),i=t||r;return{role:a,isAgenting:s,isB2BUser:e,orderSubViewPermission:n,selectCompanyHierarchyId:o,isEnabledCompanyHierarchy:l,currentCompanyId:d,companyId:i}}(),[U,F]=i.useState(!1),[M,z]=i.useState(0),[W,K]=i.useState(null),[J,_]=i.useState([]),[G,Q]=i.useState([]),[X,Y]=i.useState(!1),[Z,ee,te]=A(k,t,W,K);i.useEffect((()=>{const t=T(e,O);O&&(t.companyIds=[Number(E)||Number(V)]),K(t),Y(!0),100!==n&&(async()=>{const t=O&&e?await j(Number(d),0):{},r=O?await N():await C(),s=v(O,n,e,o,t,r);Q(r);const l=s.map((e=>{const t=e;return t.label=a(e.idLang),"orderStatus"===e.name&&(t.options=e.options.map((e=>{const t=B[e.systemLabel],r=e;return r.customLabel=a(t)===r.systemLabel?r.customLabel:a(t),e}))),e}));_(l)})()}),[E]);const ae=P(),re=[{key:"orderId",title:a("orders.order"),width:"10%",isSortable:!0},{key:"companyName",title:a("orders.company"),width:"10%",isSortable:!1,render:e=>{const{companyInfo:t}=e;return r.jsx(l,{children:t?.companyName||"–"})}},{key:"poNumber",title:a("orders.poReference"),render:e=>r.jsx(l,{children:e.poNumber?e.poNumber:"–"}),width:"10%",isSortable:!0},{key:"totalIncTax",title:a("orders.grandTotal"),render:e=>e?.money?h(JSON.parse(JSON.parse(e.money)),e.totalIncTax):p(e.totalIncTax),width:"8%",style:{textAlign:"right"},isSortable:!0},{key:"status",title:a("orders.orderStatus"),render:e=>r.jsx(I,{text:q(e.status,G),code:e.status}),width:"10%",isSortable:!0},{key:"placedBy",title:a("orders.placedBy"),render:e=>`${e.firstName} ${e.lastName}`,width:"10%",isSortable:!0},{key:"createdAt",title:a("orders.createdOn"),render:e=>`${b(Number(e.createdAt))}`,width:"10%",isSortable:!0}],se=re.filter((t=>{const{key:a}=t;return!(!O&&"companyName"===a||(!O||3===Number(n)&&!o)&&"placedBy"===a||"companyId"===a&&O&&(3!==Number(n)||o)||!("companyId"!==a&&"placedBy"!==a||3===Number(n)&&!o||e))}));return r.jsx(g,{isSpinning:U,children:r.jsxs(l,{sx:{display:"flex",flexDirection:"column",flex:1,width:"100%"},children:[r.jsxs(l,{sx:{width:s?"100%":"auto",display:"flex",justifyContent:"flex-start",alignItems:s?"flex-start":"center",flexDirection:s?"column":"row","& > div":{width:s?"100%":"auto"}},children:[R&&$&&r.jsx(l,{sx:{mr:s?0:"10px",mb:"30px"},children:r.jsx(D,{handleChangeCompanyIds:e=>{const t=e.includes(-1)?[]:e;K({...W,companyIds:t})}})}),r.jsx(L,{startPicker:{isEnabled:!0,label:a("orders.from"),defaultValue:W?.beginDateAt||null,pickerKey:"start"},endPicker:{isEnabled:!0,label:a("orders.to"),defaultValue:W?.endDateAt||null,pickerKey:"end"},filterMoreInfo:J,handleChange:(e,t)=>{"search"===e&&K({...W,q:t})},handleFilterChange:e=>{let t=e?.orderStatus||"";if(t){const e=G.find((e=>e.customLabel===t||e.systemLabel===t));t=e?.systemLabel||t}const a={beginDateAt:e?.startValue||null,endDateAt:e?.endValue||null,createdBy:e?.PlacedBy||"",statusCode:t,companyName:e?.company||""};K({...W,...a})},pcTotalWidth:"100%",pcContainerWidth:"100%",pcSearchContainerWidth:"100%"})]}),r.jsx(f,{columnItems:se,rowsPerPageOptions:[10,20,30],getRequestList:async e=>{const{edges:t=[],totalCount:a}=O?await S(e):await w(e);return z(a),Y(!1),{edges:t,totalCount:a}},searchParams:W||{},isCustomRender:!1,requestLoading:F,tableKey:"orderId",pageType:"orderListPage",isAutoRefresh:X,sortDirection:ee,orderBy:te,sortByFn:Z,renderItem:(t,a)=>r.jsx(H,{item:t,index:a,allTotal:M,filterData:W,isCompanyOrder:e},t.orderId),onClickRow:(t,a)=>{void 0!==a&&((t,a)=>{ae(`/orderDetail/${t.orderId}`,{state:{currentIndex:a,searchParams:W,totalCount:M,isCompanyOrder:e,beginDateAt:W?.beginDateAt,endDateAt:W?.endDateAt}})})(t,a)},hover:!0})]})})}));const t="orderId",k={orderId:"bcOrderId",poNumber:"poNumber",totalIncTax:"totalIncTax",status:"status",placedBy:"placedBy",createdAt:"createdAt"},O={q:"",companyId:"",beginDateAt:null,endDateAt:null,companyName:"",orderBy:`-${k[t]}`,createdBy:"",orderNumber:"",poNumber:"",isShowMy:0,companyIds:[]},$={beginDateAt:null,endDateAt:null,orderBy:`-${k[t]}`,createdBy:"",q:""},v=(e,t,a,r,s,n=[])=>{const o=[{name:"company",label:"Company",required:!1,default:"",fieldType:"text",xs:12,variant:"filled",size:"small",idLang:"orders.company"},{name:"orderStatus",label:"Order status",required:!1,default:"",fieldType:"dropdown",options:n.filter((e=>"0"!==e.statusCode&&"1"!==e.statusCode)),replaceOptions:{label:"customLabel",value:"customLabel"},xs:12,variant:"filled",size:"small",idLang:"orders.orderStatus"},{name:"PlacedBy",label:"Placed by",required:!1,default:"",fieldType:"dropdown",options:s?.createdByUser?.results.map((e=>({createdBy:`${e.firstName} ${e.lastName} (${e.email})`})))||[],replaceOptions:{label:"createdBy",value:"createdBy"},xs:12,variant:"filled",size:"small",idLang:"orders.placedBy"}],l=e&&!(3===Number(t)&&!r);return o.filter((s=>!(!(e&&!l||a||"company"!==s.name&&"PlacedBy"!==s.name)||3===Number(t)&&!r&&"PlacedBy"===s.name||(e||Number(t)===m.SUPER_ADMIN&&r)&&a&&"company"===s.name)))},T=(e,t)=>(t&&(O.isShowMy=e?0:1),t?O:$),q=(e,t)=>t.find((t=>t.systemLabel===e))?.customLabel||"",E=o("div")((()=>({display:"flex",alignItems:"center","&.between-flex":{justifyContent:"space-between"}})));function H({item:e,allTotal:t,filterData:o,index:i=0,isCompanyOrder:c}){const m=a(),x=u(y),h=u((({company:e})=>e.customer)),g=P();return r.jsx(s,{children:r.jsxs(n,{sx:{color:"rgba(0, 0, 0, 0.6)"},onClick:()=>{g(`/orderDetail/${e.orderId}`,{state:{currentIndex:i||0,searchParams:o,totalCount:t,isCompanyOrder:c}})},children:[r.jsxs(E,{className:"between-flex",children:[r.jsxs(l,{sx:{display:"flex",alignItems:"center"},children:[r.jsx(d,{variant:"h5",sx:{color:"rgba(0, 0, 0, 0.87)"},children:`# ${e.orderId}`}),r.jsx(d,{sx:{ml:1},variant:"body2",children:e.poNumber?e.poNumber:"–"})]}),r.jsx(l,{children:r.jsx(I,{code:e.status})})]}),r.jsx(d,{variant:"h6",sx:{marginBottom:m.spacing(2.5),mt:m.spacing(1.5),minHeight:"1.43em"},children:p(e.totalIncTax)}),r.jsxs(l,{sx:{display:"flex",justifyContent:"space-between"},children:[r.jsx(d,{variant:"body2",sx:{fontWeight:"normal",marginRight:m.spacing(2)},children:(f=e,x?`by ${f.firstName} ${f.lastName}`:`by ${h.firstName} ${h.lastName}`)}),r.jsx(d,{children:`${b(e.createdAt)}`})]})]})},e.orderId);var f}}}}));
//# sourceMappingURL=Order-legacy-BON_b8Jy.js.map
