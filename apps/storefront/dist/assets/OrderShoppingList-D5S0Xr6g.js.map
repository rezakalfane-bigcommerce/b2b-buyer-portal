{"version":3,"file":"OrderShoppingList-D5S0Xr6g.js","sources":["../../../../node_modules/@mui/icons-material/Add.js","../../src/pages/OrderDetail/components/OrderShoppingList.tsx"],"sourcesContent":["\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z\"\n}), 'Add');","import { useEffect, useState } from 'react';\nimport { useB3Lang } from '@b3/lang';\nimport AddIcon from '@mui/icons-material/Add';\nimport { Box, ListItemText, MenuItem, MenuList, useTheme } from '@mui/material';\n\nimport B3Dialog from '@/components/B3Dialog';\nimport CustomButton from '@/components/button/CustomButton';\nimport { b3HexToRgb } from '@/components/outSideComponents/utils/b3CustomStyles';\nimport B3Spin from '@/components/spin/B3Spin';\nimport { useMobile } from '@/hooks';\nimport { getB2BShoppingList, getBcShoppingList } from '@/shared/service/b2b';\nimport { isB2BUserSelector, rolePermissionSelector, useAppSelector } from '@/store';\nimport { channelId } from '@/utils';\n\nimport { ShoppingListItem } from '../../../types';\n\ninterface OrderShoppingListProps {\n  isOpen: boolean;\n  dialogTitle?: string;\n  confirmText?: string;\n  onClose?: () => void;\n  onCreate?: () => void;\n  onConfirm?: (id: string) => void;\n  isLoading?: boolean;\n  setLoading?: (val: boolean) => void;\n}\n\ninterface ListItem {\n  node: ShoppingListItem;\n}\n\nconst noop = () => {};\n\nexport default function OrderShoppingList(props: OrderShoppingListProps) {\n  const b3Lang = useB3Lang();\n  const {\n    isOpen,\n    dialogTitle = b3Lang('global.orderShoppingList.confirm'),\n    confirmText = b3Lang('global.orderShoppingList.ok'),\n    onClose = noop,\n    onConfirm = noop,\n    onCreate = noop,\n    isLoading = false,\n    setLoading = noop,\n  } = props;\n\n  const isB2BUser = useAppSelector(isB2BUserSelector);\n  const role = useAppSelector(({ company }) => company.customer.role);\n  const b2bPermissions = useAppSelector(rolePermissionSelector);\n\n  const theme = useTheme();\n  const [isMobile] = useMobile();\n  const primaryColor = theme.palette.primary.main;\n\n  const [list, setList] = useState([]);\n  const [activeId, setActiveId] = useState('');\n\n  useEffect(() => {\n    if (!isOpen) return;\n    const getList = async () => {\n      setLoading(true);\n      setList([]);\n\n      try {\n        const { edges: list = [] } = isB2BUser\n          ? await getB2BShoppingList()\n          : await getBcShoppingList({ channelId });\n\n        if (!isB2BUser) {\n          setList(list);\n        } else {\n          const { submitShoppingListPermission } = b2bPermissions;\n\n          const newList = list.filter(\n            (item: CustomFieldItems) =>\n              item.node.status === Number(submitShoppingListPermission ? 30 : 0),\n          );\n          setList(newList);\n        }\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    getList();\n    // Disabling as the setLoading dispatcher does not need to be here\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isB2BUser, isOpen, role]);\n\n  const handleClose = () => {\n    onClose();\n  };\n\n  const handleConfirm = () => {\n    onConfirm(activeId);\n  };\n\n  const handleCreate = () => {\n    onCreate();\n  };\n\n  const handleListItemClicked = (item: ListItem) => () => {\n    setActiveId(item.node.id);\n  };\n\n  return (\n    <B3Dialog\n      fullWidth\n      isOpen={isOpen}\n      title={dialogTitle}\n      disabledSaveBtn={!activeId}\n      handleLeftClick={handleClose}\n      handRightClick={handleConfirm}\n      rightSizeBtn={confirmText}\n    >\n      <B3Spin isSpinning={isLoading} isFlex={false}>\n        <Box\n          sx={\n            isMobile\n              ? {\n                  height: '430px',\n                }\n              : {\n                  padding: isLoading ? '4rem 0' : 'unset',\n                  maxHeight: '430PX',\n                }\n          }\n        >\n          <MenuList\n            sx={{\n              maxHeight: '400px',\n              width: '100%',\n              overflowY: 'auto',\n            }}\n          >\n            {list.map((item: ListItem) => (\n              <MenuItem\n                key={item.node.id}\n                className={activeId === item.node.id ? 'active' : ''}\n                onClick={handleListItemClicked(item)}\n                sx={{\n                  '&:hover': {\n                    backgroundColor: b3HexToRgb(primaryColor, 0.12),\n                  },\n                  '&.active': {\n                    backgroundColor: b3HexToRgb(primaryColor, 0.12),\n                  },\n                }}\n              >\n                <ListItemText>{item.node.name}</ListItemText>\n              </MenuItem>\n            ))}\n          </MenuList>\n        </Box>\n\n        <CustomButton\n          variant=\"text\"\n          onClick={handleCreate}\n          sx={{\n            textTransform: 'none',\n          }}\n        >\n          <AddIcon\n            sx={{\n              fontSize: '17px',\n            }}\n          />\n          {` ${b3Lang('global.orderShoppingList.createNew')}`}\n        </CustomButton>\n      </B3Spin>\n    </B3Dialog>\n  );\n}\n"],"names":["_interopRequireDefault","require$$0","Add","default_1","_createSvgIcon","require$$1","_jsxRuntime","require$$2","noop","OrderShoppingList","props","b3Lang","useB3Lang","isOpen","dialogTitle","confirmText","onClose","onConfirm","onCreate","isLoading","setLoading","isB2BUser","useAppSelector","isB2BUserSelector","role","company","b2bPermissions","rolePermissionSelector","theme","useTheme","isMobile","useMobile","primaryColor","list","setList","useState","activeId","setActiveId","useEffect","getB2BShoppingList","getBcShoppingList","channelId","submitShoppingListPermission","newList","item","handleClose","handleConfirm","handleCreate","handleListItemClicked","jsx","B3Dialog","jsxs","B3Spin","Box","MenuList","MenuItem","b3HexToRgb","ListItemText","CustomButton","AddIcon"],"mappings":"srBAGIA,EAAyBC,EAC7B,OAAO,eAAeC,EAAS,aAAc,CAC3C,MAAO,EACT,CAAC,EACD,IAAeC,EAAAD,EAAA,QAAG,OACdE,GAAiBJ,EAAuBK,GAAgC,EACxEC,GAAcC,EACHJ,EAAeD,EAAA,WAAOE,GAAe,YAA2BE,GAAY,KAAK,OAAQ,CACtG,EAAG,mCACL,CAAC,EAAG,KAAK,ECmBT,MAAME,EAAO,IAAM,CAAC,EAEpB,SAAwBC,GAAkBC,EAA+B,CACvE,MAAMC,EAASC,EAAU,EACnB,CACJ,OAAAC,EACA,YAAAC,EAAcH,EAAO,kCAAkC,EACvD,YAAAI,EAAcJ,EAAO,6BAA6B,EAClD,QAAAK,EAAUR,EACV,UAAAS,EAAYT,EACZ,SAAAU,EAAWV,EACX,UAAAW,EAAY,GACZ,WAAAC,EAAaZ,CAAA,EACXE,EAEEW,EAAYC,EAAeC,CAAiB,EAC5CC,EAAOF,EAAe,CAAC,CAAE,QAAAG,KAAcA,EAAQ,SAAS,IAAI,EAC5DC,EAAiBJ,EAAeK,CAAsB,EAEtDC,EAAQC,EAAS,EACjB,CAACC,CAAQ,EAAIC,EAAU,EACvBC,EAAeJ,EAAM,QAAQ,QAAQ,KAErC,CAACK,EAAMC,CAAO,EAAIC,EAAAA,SAAS,CAAA,CAAE,EAC7B,CAACC,EAAUC,CAAW,EAAIF,EAAAA,SAAS,EAAE,EAE3CG,EAAAA,UAAU,IAAM,CACd,GAAI,CAACzB,EAAQ,QACG,SAAY,CAC1BO,EAAW,EAAI,EACfc,EAAQ,CAAA,CAAE,EAEN,GAAA,CACF,KAAM,CAAE,MAAOD,EAAO,CAAA,GAAOZ,EACzB,MAAMkB,IACN,MAAMC,EAAkB,CAAE,UAAAC,EAAW,EAEzC,GAAI,CAACpB,EACHa,EAAQD,CAAI,MACP,CACC,KAAA,CAAE,6BAAAS,GAAiChB,EAEnCiB,EAAUV,EAAK,OAClBW,GACCA,EAAK,KAAK,UAAkBF,EAA+B,GAAK,EACpE,EACAR,EAAQS,CAAO,CAAA,CACjB,QACA,CACAvB,EAAW,EAAK,CAAA,CAEpB,GAEQ,CAGP,EAAA,CAACC,EAAWR,EAAQW,CAAI,CAAC,EAE5B,MAAMqB,EAAc,IAAM,CAChB7B,EAAA,CACV,EAEM8B,EAAgB,IAAM,CAC1B7B,EAAUmB,CAAQ,CACpB,EAEMW,EAAe,IAAM,CAChB7B,EAAA,CACX,EAEM8B,EAAyBJ,GAAmB,IAAM,CAC1CP,EAAAO,EAAK,KAAK,EAAE,CAC1B,EAGE,OAAAK,EAAA,IAACC,EAAA,CACC,UAAS,GACT,OAAArC,EACA,MAAOC,EACP,gBAAiB,CAACsB,EAClB,gBAAiBS,EACjB,eAAgBC,EAChB,aAAc/B,EAEd,SAACoC,EAAAA,KAAAC,EAAA,CAAO,WAAYjC,EAAW,OAAQ,GACrC,SAAA,CAAA8B,EAAA,IAACI,EAAA,CACC,GACEvB,EACI,CACE,OAAQ,OAAA,EAEV,CACE,QAASX,EAAY,SAAW,QAChC,UAAW,OACb,EAGN,SAAA8B,EAAA,IAACK,EAAA,CACC,GAAI,CACF,UAAW,QACX,MAAO,OACP,UAAW,MACb,EAEC,SAAArB,EAAK,IAAKW,GACTK,EAAA,IAACM,EAAA,CAEC,UAAWnB,IAAaQ,EAAK,KAAK,GAAK,SAAW,GAClD,QAASI,EAAsBJ,CAAI,EACnC,GAAI,CACF,UAAW,CACT,gBAAiBY,EAAWxB,EAAc,GAAI,CAChD,EACA,WAAY,CACV,gBAAiBwB,EAAWxB,EAAc,GAAI,CAAA,CAElD,EAEA,SAACiB,EAAA,IAAAQ,EAAA,CAAc,SAAKb,EAAA,KAAK,IAAK,CAAA,CAAA,EAZzBA,EAAK,KAAK,EAclB,CAAA,CAAA,CAAA,CACH,CACF,EAEAO,EAAA,KAACO,EAAA,CACC,QAAQ,OACR,QAASX,EACT,GAAI,CACF,cAAe,MACjB,EAEA,SAAA,CAAAE,EAAA,IAACU,EAAA,CACC,GAAI,CACF,SAAU,MAAA,CACZ,CACF,EACC,IAAI,OAAAhD,EAAO,oCAAoC,EAAC,CAAA,CAAA,CACnD,CACF,CAAA,CAAA,CACF,CAEJ","x_google_ignoreList":[0]}