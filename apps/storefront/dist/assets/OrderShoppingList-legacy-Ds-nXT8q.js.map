{"version":3,"file":"OrderShoppingList-legacy-Ds-nXT8q.js","sources":["../../src/pages/OrderDetail/components/OrderShoppingList.tsx","../../../../node_modules/@mui/icons-material/Add.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { useB3Lang } from '@b3/lang';\nimport AddIcon from '@mui/icons-material/Add';\nimport { Box, ListItemText, MenuItem, MenuList, useTheme } from '@mui/material';\n\nimport B3Dialog from '@/components/B3Dialog';\nimport CustomButton from '@/components/button/CustomButton';\nimport { b3HexToRgb } from '@/components/outSideComponents/utils/b3CustomStyles';\nimport B3Spin from '@/components/spin/B3Spin';\nimport { useMobile } from '@/hooks';\nimport { getB2BShoppingList, getBcShoppingList } from '@/shared/service/b2b';\nimport { isB2BUserSelector, rolePermissionSelector, useAppSelector } from '@/store';\nimport { channelId } from '@/utils';\n\nimport { ShoppingListItem } from '../../../types';\n\ninterface OrderShoppingListProps {\n  isOpen: boolean;\n  dialogTitle?: string;\n  confirmText?: string;\n  onClose?: () => void;\n  onCreate?: () => void;\n  onConfirm?: (id: string) => void;\n  isLoading?: boolean;\n  setLoading?: (val: boolean) => void;\n}\n\ninterface ListItem {\n  node: ShoppingListItem;\n}\n\nconst noop = () => {};\n\nexport default function OrderShoppingList(props: OrderShoppingListProps) {\n  const b3Lang = useB3Lang();\n  const {\n    isOpen,\n    dialogTitle = b3Lang('global.orderShoppingList.confirm'),\n    confirmText = b3Lang('global.orderShoppingList.ok'),\n    onClose = noop,\n    onConfirm = noop,\n    onCreate = noop,\n    isLoading = false,\n    setLoading = noop,\n  } = props;\n\n  const isB2BUser = useAppSelector(isB2BUserSelector);\n  const role = useAppSelector(({ company }) => company.customer.role);\n  const b2bPermissions = useAppSelector(rolePermissionSelector);\n\n  const theme = useTheme();\n  const [isMobile] = useMobile();\n  const primaryColor = theme.palette.primary.main;\n\n  const [list, setList] = useState([]);\n  const [activeId, setActiveId] = useState('');\n\n  useEffect(() => {\n    if (!isOpen) return;\n    const getList = async () => {\n      setLoading(true);\n      setList([]);\n\n      try {\n        const { edges: list = [] } = isB2BUser\n          ? await getB2BShoppingList()\n          : await getBcShoppingList({ channelId });\n\n        if (!isB2BUser) {\n          setList(list);\n        } else {\n          const { submitShoppingListPermission } = b2bPermissions;\n\n          const newList = list.filter(\n            (item: CustomFieldItems) =>\n              item.node.status === Number(submitShoppingListPermission ? 30 : 0),\n          );\n          setList(newList);\n        }\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    getList();\n    // Disabling as the setLoading dispatcher does not need to be here\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isB2BUser, isOpen, role]);\n\n  const handleClose = () => {\n    onClose();\n  };\n\n  const handleConfirm = () => {\n    onConfirm(activeId);\n  };\n\n  const handleCreate = () => {\n    onCreate();\n  };\n\n  const handleListItemClicked = (item: ListItem) => () => {\n    setActiveId(item.node.id);\n  };\n\n  return (\n    <B3Dialog\n      fullWidth\n      isOpen={isOpen}\n      title={dialogTitle}\n      disabledSaveBtn={!activeId}\n      handleLeftClick={handleClose}\n      handRightClick={handleConfirm}\n      rightSizeBtn={confirmText}\n    >\n      <B3Spin isSpinning={isLoading} isFlex={false}>\n        <Box\n          sx={\n            isMobile\n              ? {\n                  height: '430px',\n                }\n              : {\n                  padding: isLoading ? '4rem 0' : 'unset',\n                  maxHeight: '430PX',\n                }\n          }\n        >\n          <MenuList\n            sx={{\n              maxHeight: '400px',\n              width: '100%',\n              overflowY: 'auto',\n            }}\n          >\n            {list.map((item: ListItem) => (\n              <MenuItem\n                key={item.node.id}\n                className={activeId === item.node.id ? 'active' : ''}\n                onClick={handleListItemClicked(item)}\n                sx={{\n                  '&:hover': {\n                    backgroundColor: b3HexToRgb(primaryColor, 0.12),\n                  },\n                  '&.active': {\n                    backgroundColor: b3HexToRgb(primaryColor, 0.12),\n                  },\n                }}\n              >\n                <ListItemText>{item.node.name}</ListItemText>\n              </MenuItem>\n            ))}\n          </MenuList>\n        </Box>\n\n        <CustomButton\n          variant=\"text\"\n          onClick={handleCreate}\n          sx={{\n            textTransform: 'none',\n          }}\n        >\n          <AddIcon\n            sx={{\n              fontSize: '17px',\n            }}\n          />\n          {` ${b3Lang('global.orderShoppingList.createNew')}`}\n        </CustomButton>\n      </B3Spin>\n    </B3Dialog>\n  );\n}\n","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z\"\n}), 'Add');"],"names":["props","b3Lang","useB3Lang","isOpen","dialogTitle","confirmText","onClose","noop","onConfirm","onCreate","isLoading","setLoading","isB2BUser","useAppSelector","isB2BUserSelector","role","company","customer","b2bPermissions","rolePermissionSelector","theme","useTheme","isMobile","useMobile","primaryColor","palette","primary","main","list","setList","useState","activeId","setActiveId","useEffect","async","edges","getB2BShoppingList","getBcShoppingList","channelId","submitShoppingListPermission","newList","filter","item","node","status","Number","getList","handleListItemClicked","id","jsx","B3Dialog","fullWidth","title","disabledSaveBtn","handleLeftClick","handleClose","handRightClick","handleConfirm","rightSizeBtn","children","jsxs","B3Spin","isSpinning","isFlex","Box","sx","height","padding","maxHeight","MenuList","width","overflowY","map","MenuItem","className","onClick","backgroundColor","b3HexToRgb","ListItemText","name","CustomButton","variant","handleCreate","textTransform","AddIcon","fontSize","_interopRequireDefault","require$$0","Object","defineProperty","Add","value","default_1","default","_createSvgIcon","require$$1","_jsxRuntime","require$$2","d"],"mappings":"u3BAiCA,SAA0CA,GACxC,MAAMC,EAASC,KACTC,OACJA,EAAAC,YACAA,EAAcH,EAAO,oCAAkCI,YACvDA,EAAcJ,EAAO,+BAA6BK,QAClDA,EAAUC,EAAAC,UACVA,EAAYD,EAAAE,SACZA,EAAWF,EAAAG,UACXA,GAAY,EAAAC,WACZA,EAAaJ,GACXP,EAEEY,EAAYC,EAAeC,GAC3BC,EAAOF,GAAe,EAAGG,aAAcA,EAAQC,SAASF,OACxDG,EAAiBL,EAAeM,GAEhCC,EAAQC,KACPC,GAAYC,IACbC,EAAeJ,EAAMK,QAAQC,QAAQC,MAEpCC,EAAMC,GAAWC,EAAAA,SAAS,KAC1BC,EAAUC,GAAeF,EAAAA,SAAS,IAEzCG,EAAAA,WAAU,KACH9B,GACW+B,WACdvB,GAAW,GACXkB,EAAQ,IAEJ,IACF,MAAQM,MAAOP,EAAO,IAAOhB,QACnBwB,UACAC,EAAkB,CAAEC,cAE9B,GAAK1B,EAEE,CACC,MAAA2B,6BAAEA,GAAiCrB,EAEnCsB,EAAUZ,EAAKa,QAClBC,GACCA,EAAKC,KAAKC,SAAWC,OAAON,EAA+B,GAAK,KAEpEV,EAAQW,EAAO,MARfX,EAAQD,EASV,CACA,QACAjB,GAAW,EAAK,GAIZmC,EAAA,GAGP,CAAClC,EAAWT,EAAQY,IAEvB,MAYMgC,EAAyBL,GAAmB,KACpCV,EAAAU,EAAKC,KAAKK,GAAE,EAIxB,OAAAC,EAAAA,IAACC,EAAA,CACCC,WAAS,EACThD,SACAiD,MAAOhD,EACPiD,iBAAkBtB,EAClBuB,gBAtBgBC,KACVjD,GAAA,EAsBNkD,eAnBkBC,KACpBjD,EAAUuB,EAAQ,EAmBhB2B,aAAcrD,EAEdsD,SAACC,EAAAA,KAAAC,EAAA,CAAOC,WAAYpD,EAAWqD,QAAQ,EACrCJ,SAAA,CAAAV,EAAAA,IAACe,EAAA,CACCC,GACE3C,EACI,CACE4C,OAAQ,SAEV,CACEC,QAASzD,EAAY,SAAW,QAChC0D,UAAW,SAInBT,SAAAV,EAAAA,IAACoB,EAAA,CACCJ,GAAI,CACFG,UAAW,QACXE,MAAO,OACPC,UAAW,QAGZZ,SAAA/B,EAAK4C,KAAK9B,GACTO,EAAAA,IAACwB,EAAA,CAECC,UAAW3C,IAAaW,EAAKC,KAAKK,GAAK,SAAW,GAClD2B,QAAS5B,EAAsBL,GAC/BuB,GAAI,CACF,UAAW,CACTW,gBAAiBC,EAAWrD,EAAc,MAE5C,WAAY,CACVoD,gBAAiBC,EAAWrD,EAAc,OAI9CmC,SAACV,EAAAA,IAAA6B,EAAA,CAAcnB,SAAKjB,EAAAC,KAAKoC,QAZpBrC,EAAKC,KAAKK,UAkBvBY,EAAAA,KAACoB,EAAA,CACCC,QAAQ,OACRN,QA5DaO,KACVzE,GAAA,EA4DHwD,GAAI,CACFkB,cAAe,QAGjBxB,SAAA,CAAAV,EAAAA,IAACmC,EAAA,CACCnB,GAAI,CACFoB,SAAU,UAGb,IAAIpF,EAAO,+CAKtB,aCzKIqF,EAAyBC,EAC7BC,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAET,IAAeC,EAAAF,EAAAG,aAAG,EACdC,EAAiBR,EAAuBS,KACxCC,EAAcC,EACHL,EAAeF,EAAAG,SAAG,EAAIC,EAAeD,UAAuB,EAAIG,EAAY/C,KAAK,OAAQ,CACtGiD,EAAG,sCACD,ODmBJ,MAAM3F,EAAOA","x_google_ignoreList":[1]}