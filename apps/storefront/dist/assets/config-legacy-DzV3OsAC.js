System.register(["./dateFns-legacy-DOBWQ-07.js","./react-setup-legacy-CqaUet8b.js","./load-functions-legacy-XoiKCmHm.js","./reactVendor-legacy-CtYIj4Ma.js","./base-legacy-D2P4nFX7.js","./validatorRules-legacy-BnvsI-jG.js"],(function(e,l){"use strict";var a,t,i,d,s,n;return{setters:[e=>{a=e.g},e=>{t=e.B,i=e.aH,d=e.ag},null,null,e=>{s=e.R},e=>{n=e.v}],execute:function(){const l=e("v",(e=>t.post("/api/v2/extra-fields/address/validate",s.B2BRest,{...e,storeHash:i}))),o=e("h",(e=>t.post("/api/v2/extra-fields/company/validate",s.B2BRest,{...e,storeHash:i,bcChannelId:d}))),r=(e("a",(e=>t.post("/api/v2/extra-fields/user/validate",s.B2BRest,{...e,storeHash:i}))),e("s",["register.step.account","register.step.details","register.step.finish"]),["text","multiline","number","dropdown"]),u=e("B",{encode:e=>window.btoa(encodeURIComponent(e)),decode:e=>decodeURIComponent(window.atob(e))}),m={text:["text","number","password","multiline"],checkbox:["checkbox"],dropdown:["dropdown"],radio:["radio"]},c=["country","state","email"],f=(e("c",["field_country","field_address_1","field_city","field_state","field_zip_code"]),{1:"contactInformation",2:"additionalInformation",3:"businessDetails",4:"address",5:"password"}),p=(e("d",(e=>c.includes(e)?e:u.decode(e))),e=>c.includes(e)?e:u.encode(e)),y=e=>{const l={id:e.id||e.fieldName,name:(a=e.name,("countryCode"===a?"country":"stateOrProvince"===a?"state":a)||p(e.fieldName)),label:e.label||e.labelName,required:e.required||e.isRequired,default:e.default||e.defaultValue||"",fieldType:e.fieldType,xs:12,visible:e?.visible||!1,custom:e?.custom||!1,bcLabel:e.label||"",type:e.type||""};var a;const t=e;"number"==typeof e.fieldType&&(t.fieldType=r[e.fieldType],l.fieldType=e.fieldType);const i=(e=>{let l={};if(m.text.includes(e.fieldType)&&(l={minlength:e.minlength||null,maxLength:e.maxLength||Number(e.maximumLength)||null,min:e.min||null,max:e.max||Number(e.maximumValue)||null,rows:e?.options?.rows||e.numberOfRows||null},l?.max&&(l.validate=n(["max"],{max:l?.max})),"password"===e.fieldType&&(l.validate=n(["password"])),"email"!==e?.fieldName&&"phone"!==e?.fieldName||(l.validate=n([e.fieldName])),("number"===e.fieldType||"text"===e.fieldType&&"integer"===e.type)&&(l.validate=n(["number"]))),m.checkbox.includes(e.fieldType)&&(l={default:e.default||[],options:e.options?.items||null}),m.dropdown.includes(e.fieldType)){const a=[];e.options?.helperLabel&&a.push({label:e.options.helperLabel,value:""});const t=[...a,...e.options?.items||[]];e.listOfValue&&e.listOfValue.forEach((e=>t.push({label:e,value:e}))),l={default:e.default||"",options:t||null}}return m.radio.includes(e.fieldType)&&(l={default:e.default||"",options:e.options?.items||[]}),l?.options&&l?.options.forEach((e=>{const l=e;e.value&&(l.value=e.label)})),"field_country"===e.fieldId&&(l.default=e.valueConfigs?.default||l.default),l})(e);return{...l,...i}},b=(e("t",(e=>e.replace(/_(\w)/g,((e,l)=>l.toUpperCase())))),e=>{const l={};return e.forEach((e=>{const t=f[e.groupId];l[t]?.length||(l[t]=[]);let i={};if(i=e.valueConfigs?.id?y(e.valueConfigs):y(e),i.required=e.isRequired,i.id=e.id,i.fieldId=e.fieldId,i.groupId=e.groupId,i.groupName=e.groupName,i.visible=e.visible,i.label=e.labelName,i.custom=i.custom||e?.custom,i.variant="filled","date"!==i.fieldType||i.default||(i.default=a(new Date,"yyyy-MM-dd")),"country"===i.name&&(i.replaceOptions={label:"countryName",value:"countryCode"}),"state"===i.name&&(i.replaceOptions={label:"stateName",value:"stateName"}),"field_confirm_password"===e.fieldId&&(i.name="confirmPassword"),"files"===i.fieldType&&(i.filesLimit=3,i.maxFileSize=10485760,i.default=[]),"checkbox"!==i.fieldType||i.options||(i.label="",i.options=[{label:e.labelName,value:e.labelName}]),"text"===i.fieldType&&"integer"===i.type&&(i.fieldType="number"),i.label.length>0){let e=25;const l=document.body.clientWidth<=750;let a=((e,l=14)=>{const a=document.body.clientWidth,t=a<=750?a+16-98:500,i=((e,l=14)=>e?e.replace(/[^\x00-\xff]/gi,"aa").length*l/2:null)(e,l);return null!==i?Math.ceil(i/t):1})(i.label,16);"multiline"===i.fieldType&&(e=0),"dropdown"===i.fieldType&&(e=0,a>1&&(a+=l?1.4:2),"field_state"===i.fieldId&&(a-=l?0:.8));const t=1===a?`${e}px`:e/16+(a-1)+"rem";a>0&&(i.extraPadding={paddingTop:t})}l[t].push(i)})),l});e("g",(e=>{if(e?.length){const l=e?e.filter((e=>!!e.visible||!!e.custom&&!!e.isRequired)):[];return l?b(l):{}}return{}})),e("f",(e=>[{name:"companyAttachments",label:e("register.label.companyAttachments"),default:[],fieldType:"file",required:!1,xs:12,filesLimit:3,maxFileSize:10485760}])),e("e",{2:"register.emailValidate.alreadyExitsBC",3:"global.emailValidate.multipleCustomer",4:"global.emailValidate.companyUsed",5:"global.emailValidate.alreadyExits",6:"global.emailValidate.usedSuperAdmin"}),e("b",(async({fields:e,data:a,type:t,setError:i})=>new Promise(((d,s)=>{(async()=>{const n=e.filter((e=>!!e.custom)),r=n.map((e=>({fieldName:u.decode(e.name),fieldValue:a[e.name]||e.default}))),m="company"===t?o:l,c=await m({extraFields:r});if(200!==c.code){const e=c.data?.errMsg||c.message||"",l=e.split(":");if(l.length>=2){const e=n.find((e=>u.decode(e.name)===l[0]));e&&i(e.name,{type:"manual",message:l[1]})}s(e)}d(c)})()}))))}}}));
//# sourceMappingURL=config-legacy-DzV3OsAC.js.map
