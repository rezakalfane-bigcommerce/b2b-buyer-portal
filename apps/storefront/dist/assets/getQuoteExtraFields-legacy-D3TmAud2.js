System.register(["./mui-legacy-nJi-LPwx.js","./reactVendor-legacy-CtYIj4Ma.js","./lang-legacy-1f-gtWXv.js","./react-setup-legacy-DuBzGPOI.js","./load-functions-legacy-Cd9k4nWw.js","./base-legacy-D2P4nFX7.js","./QuoteStatus-legacy-BjREXQ2Z.js","./lodashEs-legacy-5FC1NR51.js"],(function(e,t){"use strict";var i,a,l,o,s,n,r,d,c,f,u,x,p,m,h,g,b,j,y,q,w,v,I,N,S,D,z,C,F,E,L,$,k,T,U,A,B,M;return{setters:[e=>{i=e.o,a=e.j,l=e.B,o=e.T,s=e.W,n=e.z,r=e.x,d=e.am,c=e.L,f=e.ae,u=e.f},e=>{x=e.r},e=>{p=e.u},e=>{m=e.r,h=e.bC,g=e.ac,b=e.ai,j=e.bD,y=e.bE,q=e.af,w=e.bF,v=e.b2,I=e.i,N=e.u,S=e.bG,D=e.bt,z=e.bH,C=e.a,F=e.ad,E=e.t,L=e.a0,$=e.a5,k=e.bI},null,e=>{T=e.b},e=>{U=e.q,A=e.m,B=e.n},e=>{M=e.n}],execute:function(){e({B:J,Q:function({quoteAndExtraFieldsInfo:e,contactInfo:t,shippingAddress:i,billingAddress:o,handleEditInfoClick:s,status:n}){const r=p(),[d]=C();return a.jsxs(se,{flexDirection:"column",xs:{boxShadow:"0px 2px 1px -1px rgba(0, 0, 0, 0.2), 0px 1px 1px rgba(0, 0, 0, 0.14), 0px 1px 3px rgba(0, 0, 0, 0.12)",borderRadius:"4px"},children:[a.jsxs(l,{sx:{width:"100%",display:"flex",justifyContent:"space-between",flexDirection:d?"column":"row"},children:[a.jsxs(l,{sx:{width:d?"100%":"33.3%"},children:[a.jsx(fe,{title:r("quoteDraft.contactInfo.contact"),flag:"info",status:n,info:t}),a.jsx(ne,{status:n,quoteInfo:e})]}),a.jsx(fe,{title:r("global.quoteInfo.billing"),flag:"Billing",status:n,info:o}),a.jsx(fe,{title:r("global.quoteInfo.shipping"),flag:"Shipping",status:n,info:i})]}),s&&a.jsx(F,{sx:{mt:"10px",mb:"15px"},onClick:s,variant:"outlined",children:r("global.quoteInfo.editInfo")})]})},a:function(e){const t=p(),{quoteStatus:i,quoteNotes:s=""}=e,[n,r]=x.useState(""),[d,m]=x.useState(!1),h=N(E),g=N(L),b=!h||g.quotesCreateActionsPermission;return x.useEffect((()=>{const e=$.getState().quoteInfo.draftQuoteInfo.note||"";r(e)}),[]),x.useEffect((()=>{$.dispatch(k(n||""))}),[n]),x.useEffect((()=>{s&&m(!0)}),[s]),a.jsx(c,{children:a.jsx(f,{sx:{p:"16px !important"},children:a.jsx(J,{title:t(i&&"Draft"===i?"global.quoteNote.message":"global.quoteNote.notes"),defaultOpen:d,children:a.jsxs(l,{sx:{padding:"16px 0"},children:[i&&"Draft"===i&&a.jsx(l,{sx:{fontSize:"16px",color:"rgba(0, 0, 0, 0.38)",mb:"16px"},children:t("global.quoteNote.messageNote")}),s?a.jsx(o,{variant:"body1",style:{whiteSpace:"pre-line",maxHeight:"400px",overflow:"auto"},children:s}):a.jsx(l,{children:b?a.jsx(u,{multiline:!0,fullWidth:!0,rows:5,value:n,onChange:e=>{r(e?.target.value||""),$.dispatch(k(e?.target.value||""))},label:t("global.quoteNote.typeMessage"),size:"small",variant:"filled",sx:{"& .MuiFormLabel-root":{color:"rgba(0, 0, 0, 0.38)"}}}):null})]})})})})},b:function(e){const{allowUpload:t=!0,defaultFileList:i=[],status:o,quoteId:s}=e,n=p(),r=I(),d=N((({company:e})=>e.customer.firstName)),u=N((({company:e})=>e.customer.lastName)),m=N((({quoteInfo:e})=>e.draftQuoteInfo)),[h]=S(),[g,b]=x.useState([]),j=x.useRef(null);x.useEffect((()=>{if(0===o){const{fileInfo:e=[]}=m||{};b("object"!=typeof e?[]:e)}else i.length&&b(i)}),[i.length,o]);const y=e=>{if(m){const t={...m,fileInfo:e};r(D(t))}};return a.jsx(c,{children:a.jsx(f,{sx:{p:"16px !important"},children:a.jsx(J,{title:n("global.quoteAttachment.title"),children:a.jsx(l,{children:a.jsx(oe,{ref:j,requestType:"b2b"!==h?"customerQuoteAttachedFile":"quoteAttachedFile",isEndLoadding:!0,fileList:g,limitUploadFn:()=>g.filter((e=>e?.title&&e.title.includes("by customer"))).length>=3&&(q.error(n("global.quoteAttachment.maxFilesMessage")),!0),onchange:async e=>{try{let t=[];if(0!==o){const i={fileName:e.fileName,fileType:e.fileType,fileUrl:e.fileUrl,fileSize:e.fileSize},{quoteAttachFileCreate:{attachFiles:a}}=await U({fileList:[{...i}],quoteId:s});i.id=a[0].id,t=[{...i,title:n("global.quoteAttachment.uploadedByCustomer",{createdBy:a[0].createdBy}),hasDelete:!0},...g]}else t=[{...e,title:n("global.quoteAttachment.uploadedByCustomerWithName",{firstName:d,lastName:u}),hasDelete:!0},...g],y(t);b(t)}finally{j.current?.setUploadLoadding(!1)}},onDelete:async e=>{try{j.current?.setUploadLoadding(!0);const t=g.find((t=>t.id===e)),i=g.filter((t=>t.id!==e));0!==o&&t?await A({fileId:t?.id||"",quoteId:s}):y(i),b(i)}finally{j.current?.setUploadLoadding(!1)}},allowUpload:t})})})})})}});var t={},O=i;Object.defineProperty(t,"__esModule",{value:!0});var R=t.default=void 0,P=O(m()),W=a;R=t.default=(0,P.default)((0,W.jsx)("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess");var _={},H=i;Object.defineProperty(_,"__esModule",{value:!0});var Q=_.default=void 0,V=H(m()),G=a;function J(e){const{children:t,title:i="",header:n,defaultOpen:r=!1,handleOnChange:d}=e,[c,f]=x.useState(r);return x.useEffect((()=>{d&&d(c)}),[d,c]),x.useEffect((()=>{r&&f(r)}),[r]),a.jsxs(l,{children:[a.jsxs(l,{onClick:()=>{f(!c)},sx:{display:"flex",justifyContent:"space-between",cursor:"pointer",alignItems:"center"},children:[n||a.jsx(o,{variant:"h5",children:i}),c?a.jsx(R,{}):a.jsx(Q,{})]}),a.jsx(s,{in:c,timeout:"auto",unmountOnExit:!0,children:t})]})}Q=_.default=(0,V.default)((0,G.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");var K={},X=i;Object.defineProperty(K,"__esModule",{value:!0});var Y=K.default=void 0,Z=X(m()),ee=a;Y=K.default=(0,Z.default)((0,ee.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 17h-2v-2h2zm2.07-7.75-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25"}),"Help");const te=r(l)((({style:e})=>({"& .file-upload-area":{cursor:"pointer","& .MuiDropzoneArea-textContainer":{display:"flex",alignItems:"center",color:e?.color||"#1976D2"},"& .MuiDropzoneArea-text":{order:1,textTransform:"uppercase",fontWeight:500,fontSize:"14px",lineHeight:"24px"}}}))),ie=r(l)((e=>({display:"flex",background:"true"===e.hasdelete?"rgba(25, 118, 210, 0.3)":"rgba(0, 0, 0, 0.12)",borderRadius:"18px",padding:"6px 8px",alignItems:"center",margin:"0 0 2px",color:"rgba(0, 0, 0, 0.54)","& .fileList-name-area":{display:"flex",flex:1,alignItems:"center"},"& .fileList-name":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",flexGrow:1,flexBasis:"100px",maxWidth:"200px",color:"#313440",fontSize:"14px",cursor:"pointer"}}))),ae=r(o)({marginBottom:"16px",fontSize:"10px",color:"rgba(0, 0, 0, 0.38)",padding:"0 12px",textAlign:"right",wordBreak:"break-word"}),le=r(y)((()=>({transform:"rotate(45deg)",marginRight:"5px"}))),oe=x.forwardRef((function(e,t){const i=p(),{title:s=i("global.fileUpload.addAttachment"),tips:r=i("global.fileUpload.maxFileSizeMessage"),maxFileSize:c=2097152,fileNumber:f=3,limitUploadFn:u,acceptedFiles:m=h,onchange:y=M,fileList:I=[],allowUpload:N=!0,onDelete:S=M,isEndLoadding:D=!1,requestType:z="quoteAttachedFile"}=e,C=n().palette.primary.main,[F,E]=x.useState(!1);x.useImperativeHandle(t,(()=>({setUploadLoadding:e=>E(e)})));const L=e=>e/1048576>1?`${(e/1048576).toFixed(1)}MB`:e/1024>1?`${(e/1024).toFixed(1)}KB`:`${e}B`;return a.jsx(g,{isSpinning:F,children:a.jsxs(l,{sx:{padding:"12px 0 0",width:"100%"},children:[a.jsx(l,{children:I.map(((e,t)=>a.jsxs(l,{children:[a.jsxs(ie,{hasdelete:(e?.hasDelete||"").toString(),children:[a.jsxs(l,{className:"fileList-name-area",children:[a.jsx(le,{}),a.jsx(o,{className:"fileList-name",onClick:()=>{var t;(t=e.fileUrl)&&window.open(t,"_blank")},children:e.fileName})]}),e.hasDelete&&a.jsx(b,{sx:{cursor:"pointer"},onClick:()=>{S(e?.id||"")}})]}),a.jsx(ae,{children:e.title||""})]},e.id||t)))}),N&&a.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",marginTop:"10px"},children:[a.jsx(te,{style:{color:C},children:a.jsx(j,{dropzoneClass:"file-upload-area",Icon:le,filesLimit:1,onChange:async e=>{const t=e.length>0?e[0]:null;if(!(t&&u&&u()))if(!u&&t&&I.length>=f)q.error(i("global.fileUpload.maxFileNumber",{fileNumber:f}));else if(t)try{E(!0);const{code:e,data:i,message:a}=await w({file:t,type:z});200===e?y({...i,id:v()}):q.error(a)}finally{D||E(!1)}},showPreviews:!1,showPreviewsInDropzone:!1,maxFileSize:c,showAlerts:!1,dropzoneText:s,getDropRejectMessage:(e,t,a)=>{const{size:l,type:o}=e;let s=!1;t.forEach((e=>{s=new RegExp(e).test(o)||s}));let n="";return s||(n=i("global.fileUpload.fileTypeNotSupported")),l>a&&(n=i("global.fileUpload.fileSizeExceedsLimit",{maxFileSize:L(a)})),n&&q.error(n),n},getFileLimitExceedMessage:()=>(q.error(i("global.fileUpload.fileSizeExceedsLimit",{maxFileSize:L(c)})),""),acceptedFiles:m})}),a.jsx(d,{title:r,sx:{fontSize:"20px",color:"rgba(0, 0, 0, 0.54)"},children:a.jsx(Y,{})})]})]})})})),se=e("C",r("div")((({padding:e="1rem",alignItems:t="flex-start",flexDirection:i="row",backgroundColor:a="white",width:l="100%",xs:o})=>({display:"flex",flexDirection:i,alignItems:t,padding:e,width:l,backgroundColor:a,...o}))));function ne({status:e,quoteInfo:t}){const i=p(),{info:{quoteTitle:s,referenceNumber:n},extraFields:r=[],recipients:d}=t;return a.jsxs(l,{sx:{width:"100%"},children:[a.jsx(o,{sx:{fontWeight:400,fontSize:"24px",height:"32px"},children:i("quoteDraft.quoteInfo.title")}),a.jsxs(l,{sx:{p:"15px 0"},children:[(s||"Draft"===e)&&a.jsx(o,{children:`${i("quoteDraft.quoteInfo.titleText")} ${s}`}),(n||"Draft"===e)&&a.jsx(o,{children:`${i("quoteDraft.quoteInfo.referenceText")} ${n}`}),"Draft"!==e||d.length?d.map((e=>a.jsx(o,{sx:{wordBreak:"break-all"},children:`${i("quoteDraft.quoteInfo.ccEmailText")} ${e}`},`ccEmail-${z.encode(e)}`))):a.jsx(o,{children:i("quoteDraft.quoteInfo.ccEmailText")}),r.map((t=>(t.value||"Draft"===e)&&a.jsx(o,{children:`${t.fieldName}: ${t.value}`},`extraField-${t.fieldName}`)))]})]})}const re=["name","email","companyName","phoneNumber"],de=["label","firstName","lastName","company","address","apartment","city","state","zipCode","country","phoneNumber"],ce=["label",["firstName","lastName"],"company","address","apartment",["city","state","zipCode","country"],"phoneNumber"];function fe({flag:e,title:t,info:i,status:s}){const n="info"===e?re:ce,[r]=C(),d=p(),c="Draft"===s?`Please add ${"Billing"===e?"billing":"shipping"} address `:`No ${"Billing"===e?"billing":"shipping"} address`,f="info"!==e&&de.some((e=>i&&!!i[e])),u="info"===e||r?0:"10px";return a.jsxs(l,{sx:{width:r||"info"===e?"100%":"33.3%",paddingLeft:u},children:[a.jsx(o,{sx:{fontWeight:400,fontSize:"24px",height:"32px"},children:t}),a.jsxs(l,{sx:{p:"15px 0"},children:[(f||"info"===e)&&"{}"!==JSON.stringify(i)&&n.map((e=>"quoteTitle"===e?"Draft"===s?a.jsx(o,{sx:{wordBreak:"break-all"},variant:"body1",children:`${d("quoteDraft.quoteInfo.quoteTitle")}${i[e]||""}`},e):"":"string"==typeof e?a.jsx(o,{variant:"body1",children:i&&i[e]||""},e):a.jsx(o,{variant:"body1",children:e.map(((t,a)=>a===e.length-1?i[t]||"":"firstName"===t?`${i[t]||""} `:i[t]?`${i[t]||""}, `:""))},`${e}`))),!f&&"info"!==e&&a.jsx(l,{children:c})]})]})}e("g",(async()=>{let e=[];try{const{quoteExtraFieldsConfig:t}=await B(),i=t.filter((e=>e.visibleToEnduser));e=i.map((e=>{const{listOfValue:t}=e,i={isExtraFields:!0,name:e.fieldName||"",label:e.labelName||"",required:e.isRequired,default:e.defaultValue||"",fieldType:e.fieldCategory||"",xs:6,variant:"filled",size:"small",id:e.id};switch(e.fieldCategory){case"dropdown":if(t){const e=t?.map((e=>({label:e,value:e})));e.length>0&&(i.options=e)}break;case"number":i.max=e.maximumValue||"";break;case"multiline":i.rows=e.numberOfRows||"";break;default:i.maxLength=e.maximumLength||""}return i}))}catch(t){T.error(t)}return e}))}}}));
//# sourceMappingURL=getQuoteExtraFields-legacy-D3TmAud2.js.map
