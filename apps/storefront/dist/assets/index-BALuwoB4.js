import{j as e,K as P,ad as D,T as b,B as c,d as O,I as w,s as z,X as v,W}from"./mui-BOgrCzfx.js";import{r as m}from"./reactVendor-BTcQ-GDs.js";import{u as h}from"./lang-D1hDrxfH.js";import{an as K,ac as T,ak as U,u as f,L as X}from"./react-setup-Ceu1rkpw.js";import"./load-functions-BIyT0cKp.js";import"./base-BCVDEF8S.js";import{u as _}from"./useSort-CwDaxthI.js";import{e as $,s as G}from"./masquerade-DfgGkYcY.js";import{B as H}from"./B3FilterSearch-OtVT6Fm0.js";import{d as J}from"./MoreHoriz-O_f5fYLc.js";import{a as Q}from"./router-DEI8QtBD.js";import"./intl-CKipw3rV.js";import"./eCache-BdHG5F0B.js";import"./redux-D7_Lh1Zo.js";import"./toolkit-C5fVsw89.js";import"./lodashEs-DKEtmQJE.js";import"../index.Dxi-ailt.js";import"./global-D7Yn0gGb.js";import"./muiIcon-dPEugcco.js";import"./dateFns-DCN-lSH3.js";import"./dropzone-BroiqFaF.js";function V(){const a=h();return e.jsx(c,{sx:{fontWeight:400,fontSize:"13px",background:"#ED6C02",display:"inline-block",p:"2px 7px",color:"#FFFFFF",borderRadius:"10px"},children:a("dashboard.selected")})}function Y({companyName:a,email:r,isSelected:n,action:t}){return e.jsxs(P,{children:[e.jsxs(D,{sx:{color:"#313440"},children:[e.jsx(b,{sx:{fontWeight:400,fontSize:"24px",color:"rgba(0, 0, 0, 0.87)"},children:a}),n&&e.jsx(V,{}),e.jsxs(c,{sx:{display:"flex",fontSize:"16px",mt:"15px",gap:"5px"},children:[e.jsx(b,{sx:{fontWeight:500},children:"Email:"}),e.jsx(b,{variant:"body1",children:r})]})]}),e.jsx(O,{sx:{ml:"10px",mb:"10px"},variant:"text",onClick:()=>t.onClick(),children:t.label})]})}const Z=z(W)(()=>({"& .MuiPaper-elevation":{boxShadow:"0px 1px 0px -1px rgba(0, 0, 0, 0.1), 0px 1px 6px rgba(0, 0, 0, 0.07), 0px 1px 4px rgba(0, 0, 0, 0.06)",borderRadius:"4px"}}));function S({label:a,onClick:r}){const n=m.useRef(null),[t,l]=m.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(w,{onClick:()=>l(!0),ref:n,children:e.jsx(J,{})}),e.jsx(Z,{anchorEl:n.current,open:t,onClose:()=>l(!1),anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:e.jsx(v,{sx:{color:"primary.main"},onClick:()=>{r(),l(!1)},children:a})})]})}function ee(){const a=h();return e.jsx(c,{sx:{fontWeight:400,fontSize:"13px",background:"#ED6C02",ml:"16px",p:"2px 7px",color:"#FFFFFF",borderRadius:"10px"},children:a("dashboard.selected")})}function se({companyName:a,isSelected:r}){return e.jsxs(c,{sx:{display:"flex",alignItems:"center"},children:[a,r&&e.jsx(ee,{})]})}const k="companyName",F={companyName:"companyName",companyAdminName:"companyAdminName",companyEmail:"companyEmail"},te=[10,20,30];function ae(){const a=f(({company:t})=>t.customer.id),r=f(({company:t})=>t.customer.b2bId);return{salesRepCompanyId:Number(f(({b2bFeatures:t})=>t.masqueradeCompany.id)),b2bId:r,customerId:a}}function Ne(a){const r=K(),{salesRepCompanyId:n,b2bId:t,customerId:l}=ae(),{setOpenPage:N}=a,o=h(),[B,u]=m.useState(!1),[d,p]=m.useState({q:"",orderBy:F[k]}),[I,A,q]=_(F,k,d,p,"asc"),y=Q(),R=async s=>{let i={edges:[],totalCount:0};return typeof t=="number"&&(i=(await X(t,s)).superAdminCompanies),i},g=async s=>{try{u(!0),typeof t=="number"&&await G({customerId:l,companyId:s}),N({isOpen:!0,openUrl:"/dashboard"}),p({...d})}finally{u(!1)}},x=async()=>{try{r(!0),typeof t=="number"&&await $(),p({...d})}finally{r(!1)}};m.useEffect(()=>{const s={...y};s!=null&&s.state&&x()},[y]);const L=async s=>{p({...d,q:s})},M=[{key:"companyName",title:o("dashboard.company"),render:({companyName:s,companyId:i})=>e.jsx(se,{companyName:s,isSelected:Number(i)===Number(n)}),isSortable:!0},{key:"companyEmail",title:o("dashboard.email"),isSortable:!0},{key:"actions",title:o("dashboard.action"),render:({companyId:s})=>Number(s)===Number(n)?e.jsx(S,{label:o("dashboard.endMasqueradeAction"),onClick:()=>x()}):e.jsx(S,{label:o("dashboard.masqueradeAction"),onClick:()=>g(Number(s))})}];return e.jsx(T,{isSpinning:B,children:e.jsxs(c,{sx:{display:"flex",flexDirection:"column",flex:1},children:[e.jsx(c,{sx:{mb:"24px"},children:e.jsx(H,{handleChange:L})}),e.jsx(U,{columnItems:M,rowsPerPageOptions:te,getRequestList:R,searchParams:d||{},isCustomRender:!1,requestLoading:u,tableKey:"id",sortDirection:A,orderBy:q,sortByFn:I,renderItem:({companyName:s,companyEmail:i,companyId:j})=>{const C=Number(j)===Number(n),E=C?{label:o("dashboard.endMasqueradeAction"),onClick:()=>{x()}}:{label:o("dashboard.masqueradeAction"),onClick:()=>{g(Number(j))}};return e.jsx(Y,{companyName:s,email:i,isSelected:C,action:E})}})]})})}export{Ne as default,k as defaultSortKey,F as sortKeys};
//# sourceMappingURL=index-BALuwoB4.js.map
