import{j as s,B as m,a6 as K,T as g}from"./mui-BLXOPN2Y.js";import{r as e}from"./reactVendor-BTcQ-GDs.js";import{u as T}from"./form-hNmOEDBo.js";import{u as z}from"./lang-DZEhsX8V.js";import{B as E}from"./B3Card-j8IQEPIr.js";import{B as R}from"./B3CustomForm-WDZRXEWC.js";import{G as k,C as M,a as W,ac as A,ad as D}from"./react-setup-Dk2lMx-W.js";import"./load-functions-adwiw1MZ.js";import{b as f}from"./base-BCVDEF8S.js";import{C as G,g as q,r as V}from"./recaptcha-Dex3wZ2s.js";import{g as N,s as H}from"./config-GHowVM3_.js";import{L as J,B as Q}from"./styled-CN7ezH3h.js";import{u as U}from"./router-DEI8QtBD.js";import"./intl-CKipw3rV.js";import"./eCache-BdHG5F0B.js";import"./lodashEs-DKEtmQJE.js";import"./muiIcon-DcrdeM0-.js";import"./redux-D7_Lh1Zo.js";import"./toolkit-C5fVsw89.js";import"../index.COFs9ak5.js";import"./global-D7Yn0gGb.js";import"./dateFns-CXOS6Mtj.js";import"./dropzone-BOmS2zFM.js";import"./validatorRules-BRQ7DvFQ.js";function X({setOpenPage:c,isEnabledOnStorefront:t,storefrontSiteKey:p,logo:n}){const[l]=W(),[x,a]=e.useState(!1),o=z(),r=N(o),[j,u]=e.useState(!1),[i,C]=e.useState(""),{control:w,handleSubmit:S,getValues:F,formState:{errors:b},setValue:P,watch:B}=T({mode:"onSubmit"}),h=U(),y=B("emailAddress");e.useEffect(()=>{(i||!t)&&u(!1)},[i,t]);const L=async v=>{const{emailAddress:I}=v;if(t&&!i){u(!0);return}try{if(a(!0),t&&i)try{await V(i,y),h("/login?loginFlag=receivePassword"),a(!1)}catch(d){f.error(d)}t||(await H(I),a(!1),h("/login?loginFlag=receivePassword"))}catch(d){f.error(d)}};return s.jsx(E,{setOpenPage:c,children:s.jsxs(m,{sx:{bgcolor:"#FFFFFF",borderRadius:"4px",display:"flex",flexDirection:"column",mr:"auto",ml:"auto",maxWidth:"537px"},children:[s.jsx(m,{sx:{mt:"20px"},children:n&&s.jsx(J,{children:s.jsx(K,{sx:{maxWidth:l?"175px":"250px"},onClick:()=>{window.location.href="/"},children:s.jsx("img",{src:n,alt:o("global.tips.registerLogo"),loading:"lazy"})})})}),s.jsxs(m,{sx:{margin:"20px 0 0 0",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[s.jsx(g,{variant:"h5",sx:{margin:"16px 0"},children:o("forgotPassword.resetPassword")}),s.jsx(g,{variant:"body1",sx:{margin:"0 16px 16px 16px"},children:o("forgotPassword.requestEmail")}),s.jsx(R,{formFields:r,errors:b,control:w,getValues:F,setValue:P,sx:{margin:"0 16px",maxWidth:l?"311px":"505px"}}),t&&j?s.jsx(g,{variant:"body1",sx:{color:"red",display:"flex",alignSelf:"flex-start",marginLeft:"18px",marginTop:"2px",fontSize:"13px"},children:o("login.loginText.missingCaptcha")}):"",t?s.jsx(m,{sx:{marginTop:"20px"},children:s.jsx(G,{siteKey:p,size:"normal",email:y,handleGetKey:C})}):"",s.jsx(A,{isSpinning:x,size:20,isFlex:!1,children:s.jsx(Q,{children:s.jsx(D,{type:"submit",size:"medium",onClick:S(L),variant:"contained",sx:{width:"auto"},children:o("forgotPassword.resetPasswordBtn")})})})]})]})})}function js({setOpenPage:c}){const{logo:t}=e.useContext(k).state,{loginPageDisplay:p}=e.useContext(M).state,[n,l]=e.useState(!1),[x,a]=e.useState("");return e.useEffect(()=>{(async()=>{try{const r=await q();r&&(l(r.isEnabledOnStorefront),a(r.siteKey))}catch(r){f.error(r)}})()},[]),s.jsx(X,{setOpenPage:c,logo:p.displayStoreLogo?t:void 0,isEnabledOnStorefront:n,storefrontSiteKey:x})}export{X as ForgotPassword,js as default};
//# sourceMappingURL=index-Bd8hoQmQ.js.map
