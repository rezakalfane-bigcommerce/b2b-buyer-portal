{"version":3,"file":"index-CL4zZGJx.js","sources":["../../src/components/B3QuantityTextField.tsx","../../src/pages/ShoppingListDetails/components/AddToShoppingList.tsx","../../src/pages/ShoppingListDetails/components/ReAddToCart.tsx","../../src/pages/ShoppingListDetails/components/ShoppingDetailDeleteItems.tsx","../../src/pages/ShoppingListDetails/components/ShoppingDetailFooter.tsx","../../src/pages/ShoppingListDetails/components/ShoppingDetailHeader.tsx","../../src/pages/ShoppingListDetails/components/ShoppingDetailAddNotes.tsx","../../src/pages/ShoppingListDetails/components/ShoppingDetailCard.tsx","../../src/pages/ShoppingListDetails/components/ShoppingDetailTable.tsx","../../src/pages/ShoppingListDetails/index.tsx"],"sourcesContent":["import { useCallback, useEffect, useState } from 'react';\n\nimport { useMobile } from '@/hooks';\n\nimport { StyledNumberNoTopTextField } from './styled';\n\ninterface B3NumberTextFieldProps {\n  disabled?: boolean;\n  label?: string;\n  value?: number | string;\n  maxQuantity?: number;\n  minQuantity?: number;\n  isStock?: string;\n  stock?: number;\n  hiddenLabel?: boolean;\n  onChange?: (value: number | string, isValid: boolean) => void;\n  sx?: CustomFieldItems;\n}\n\nexport default function B3QuantityTextField(props: B3NumberTextFieldProps) {\n  const [isMobile] = useMobile();\n\n  const {\n    disabled = false,\n    label = isMobile ? 'Qty' : '',\n    value = '',\n    maxQuantity = 0,\n    minQuantity = 0,\n    isStock = '0',\n    stock = 0,\n    hiddenLabel = !isMobile,\n    onChange = () => {},\n    sx = {\n      width: isMobile ? '110px' : '72px',\n      '& .MuiFormHelperText-root': {\n        marginLeft: '0',\n        marginRight: '0',\n      },\n    },\n  } = props;\n\n  const [validMessage, setValidMessage] = useState('');\n\n  const validateQuantity = useCallback(\n    (value: number | string) => {\n      const quantity = parseInt(`${value}`, 10) || 0;\n\n      let validMessage = '';\n\n      if (isStock === '1' && stock === 0) {\n        validMessage = 'Out of stock';\n      } else if (isStock === '1' && quantity > stock) {\n        validMessage = `${stock} in stock`;\n      } else if (minQuantity !== 0 && quantity < minQuantity) {\n        validMessage = `Min is ${minQuantity}`;\n      } else if (maxQuantity !== 0 && quantity > maxQuantity) {\n        validMessage = `Max is ${maxQuantity}`;\n      }\n\n      setValidMessage(validMessage);\n\n      return validMessage;\n    },\n    [isStock, maxQuantity, minQuantity, stock],\n  );\n\n  const handleChange = (value: string) => {\n    onChange(value, !!validMessage);\n  };\n\n  const handleBlur = () => {\n    const quantity = parseInt(`${value}`, 10) || 0;\n\n    onChange(quantity, !validateQuantity(quantity));\n  };\n\n  useEffect(() => {\n    validateQuantity(value);\n  }, [validateQuantity, value]);\n\n  return (\n    <StyledNumberNoTopTextField\n      size=\"small\"\n      type=\"number\"\n      variant=\"filled\"\n      disabled={disabled}\n      hiddenLabel={hiddenLabel}\n      label={label}\n      value={value}\n      error={!!validMessage}\n      helperText={validMessage}\n      inputProps={{\n        inputMode: 'numeric',\n        pattern: '[0-9]*',\n      }}\n      onChange={(e) => {\n        handleChange(e.target.value);\n      }}\n      onBlur={() => {\n        handleBlur();\n      }}\n      sx={sx}\n    />\n  );\n}\n","import { useContext, useState } from 'react';\nimport { dispatchEvent } from '@b3/hooks';\nimport { useB3Lang } from '@b3/lang';\nimport UploadFileIcon from '@mui/icons-material/UploadFile';\nimport { Box, Card, CardContent, Divider, Typography } from '@mui/material';\n\nimport { B3Upload } from '@/components';\nimport CustomButton from '@/components/button/CustomButton';\nimport { useBlockPendingAccountViewPrice } from '@/hooks';\nimport { addProductToBcShoppingList, addProductToShoppingList } from '@/shared/service/b2b';\nimport { useAppSelector } from '@/store';\nimport { snackbar } from '@/utils';\nimport { getValidOptionsList } from '@/utils/b3Product/b3Product';\n\nimport { getAllModifierDefaultValue } from '../../../utils/b3Product/shared/config';\nimport { ShoppingListDetailsContext } from '../context/ShoppingListDetailsContext';\n\nimport QuickAdd from './QuickAdd';\nimport SearchProduct from './SearchProduct';\n\ninterface AddToListProps {\n  updateList: () => void;\n  isB2BUser: boolean;\n  type?: string;\n}\n\nexport default function AddToShoppingList(props: AddToListProps) {\n  const {\n    state: { id },\n  } = useContext(ShoppingListDetailsContext);\n\n  const companyStatus = useAppSelector(({ company }) => company.companyInfo.status);\n  const { updateList, isB2BUser, type: pageType = '' } = props;\n  const b3Lang = useB3Lang();\n\n  const [isOpenBulkLoadCSV, setIsOpenBulkLoadCSV] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n\n  const [blockPendingAccountViewPrice] = useBlockPendingAccountViewPrice();\n\n  const addItemsToShoppingList = isB2BUser ? addProductToShoppingList : addProductToBcShoppingList;\n\n  const addToList = async (products: CustomFieldItems[]) => {\n    try {\n      if (!dispatchEvent('on-add-to-shopping-list', products)) {\n        throw new Error();\n      }\n\n      const items = products.map((product) => {\n        const newOptionLists = getValidOptionsList(product.newSelectOptionList, product);\n        return {\n          optionList: newOptionLists,\n          productId: product.id,\n          quantity: product.quantity,\n          variantId: product.variantId,\n        };\n      });\n\n      const res = await addItemsToShoppingList({\n        shoppingListId: id,\n        items,\n      });\n\n      snackbar.success(b3Lang('shoppingList.addToShoppingList.productsAdded'), {\n        isClose: true,\n      });\n\n      return res;\n    } catch (e: any) {\n      if (e.message.length > 0) {\n        snackbar.error(e.message, { isClose: true });\n      }\n    }\n    return true;\n  };\n\n  const quickAddToList = async (products: CustomFieldItems[]) => {\n    const items = products.map((product) => {\n      const newOptionLists = getValidOptionsList(\n        product.newSelectOptionList || product.optionList,\n        product?.products || product,\n      );\n      return {\n        optionList: newOptionLists || [],\n        productId: parseInt(product.productId, 10) || 0,\n        quantity: product.quantity,\n        variantId: parseInt(product.variantId, 10) || 0,\n      };\n    });\n\n    const res = await addItemsToShoppingList({\n      shoppingListId: id,\n      items,\n    });\n\n    snackbar.success(b3Lang('shoppingList.addToShoppingList.productsAdded'), {\n      isClose: true,\n    });\n\n    return res;\n  };\n\n  const getValidProducts = (products: CustomFieldItems) => {\n    const notPurchaseSku: string[] = [];\n    const productItems: CustomFieldItems[] = [];\n    const notAddAble: string[] = [];\n\n    products.forEach((item: CustomFieldItems) => {\n      const { products: currentProduct, qty } = item;\n      const { option, purchasingDisabled, variantSku, variantId, productId, modifiers } =\n        currentProduct;\n\n      const defaultModifiers = getAllModifierDefaultValue(modifiers);\n      if (purchasingDisabled && pageType !== 'shoppingList') {\n        notPurchaseSku.push(variantSku);\n        return;\n      }\n\n      const notPassedModifier = defaultModifiers.filter(\n        (modifier: CustomFieldItems) => !modifier.isVerified,\n      );\n      if (notPassedModifier.length > 0) {\n        notAddAble.push(variantSku);\n\n        return;\n      }\n\n      const optionsList = option.map((item: CustomFieldItems) => ({\n        optionId: `attribute[${item.option_id}]`,\n        optionValue: item.id.toString(),\n      }));\n\n      defaultModifiers.forEach((modifier: CustomFieldItems) => {\n        const { type } = modifier;\n\n        if (type === 'date') {\n          const { defaultValue } = modifier;\n          Object.keys(defaultValue).forEach((key) => {\n            optionsList.push({\n              optionId: `attribute[${modifier.option_id}][${key}]`,\n              optionValue: `${modifier.defaultValue[key]}`,\n            });\n          });\n        } else {\n          optionsList.push({\n            optionId: `attribute[${modifier.option_id}]`,\n            optionValue: `${modifier.defaultValue}`,\n          });\n        }\n      });\n\n      productItems.push({\n        productId: parseInt(productId, 10) || 0,\n        variantId: parseInt(variantId, 10) || 0,\n        quantity: Number(qty),\n        optionList: optionsList,\n        products: item.products,\n      });\n    });\n\n    return {\n      notPurchaseSku,\n      productItems,\n      notAddAble,\n    };\n  };\n\n  const handleCSVAddToList = async (productsData: CustomFieldItems) => {\n    setIsLoading(true);\n    try {\n      const { validProduct } = productsData;\n\n      const { notPurchaseSku, productItems, notAddAble } = getValidProducts(validProduct);\n\n      if (productItems.length > 0) {\n        await quickAddToList(productItems);\n\n        updateList();\n      }\n\n      if (notAddAble.length > 0 && pageType !== 'shoppingList') {\n        snackbar.error(\n          b3Lang('shoppingList.addToShoppingList.skuNotAddable', {\n            notAddAble: notAddAble.join(', '),\n          }),\n          {\n            isClose: true,\n          },\n        );\n      }\n\n      if (notPurchaseSku.length > 0 && pageType !== 'shoppingList') {\n        snackbar.error(\n          b3Lang('shoppingList.addToShoppingList.skuNotPurchasable', {\n            notPurchaseSku: notPurchaseSku.join(', '),\n          }),\n          {\n            isClose: true,\n          },\n        );\n      }\n\n      setIsOpenBulkLoadCSV(false);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleOpenUploadDiag = () => {\n    if (blockPendingAccountViewPrice && companyStatus === 0) {\n      snackbar.info(\n        'Your business account is pending approval. This feature is currently disabled.',\n      );\n    } else {\n      setIsOpenBulkLoadCSV(true);\n    }\n  };\n\n  return (\n    <Card\n      sx={{\n        marginBottom: '50px',\n      }}\n    >\n      <CardContent>\n        <Box>\n          <Typography variant=\"h5\">{b3Lang('shoppingList.addToShoppingList.addToList')}</Typography>\n          <SearchProduct\n            updateList={updateList}\n            addToList={addToList}\n            isB2BUser={isB2BUser}\n            type=\"shoppingList\"\n          />\n\n          <Divider />\n\n          <QuickAdd type=\"shoppingList\" updateList={updateList} quickAddToList={quickAddToList} />\n\n          <Divider />\n\n          <Box\n            sx={{\n              margin: '20px 0 0',\n            }}\n          >\n            <CustomButton variant=\"text\" onClick={() => handleOpenUploadDiag()}>\n              <UploadFileIcon\n                sx={{\n                  marginRight: '8px',\n                }}\n              />\n              {b3Lang('shoppingList.addToShoppingList.bulkUploadCsv')}\n            </CustomButton>\n          </Box>\n\n          <B3Upload\n            isOpen={isOpenBulkLoadCSV}\n            setIsOpen={setIsOpenBulkLoadCSV}\n            handleAddToList={handleCSVAddToList}\n            isLoading={isLoading}\n            withModifiers\n          />\n        </Box>\n      </CardContent>\n    </Card>\n  );\n}\n","import { useEffect, useState } from 'react';\nimport { useB3Lang } from '@b3/lang';\nimport styled from '@emotion/styled';\nimport { Delete } from '@mui/icons-material';\nimport { Alert, Box, Grid, Typography } from '@mui/material';\n\nimport { B3QuantityTextField, successTip } from '@/components';\nimport B3Dialog from '@/components/B3Dialog';\nimport CustomButton from '@/components/button/CustomButton';\nimport B3Spin from '@/components/spin/B3Spin';\nimport { CART_URL, CHECKOUT_URL, PRODUCT_DEFAULT_IMAGE } from '@/constants';\nimport { useMobile } from '@/hooks';\nimport { activeCurrencyInfoSelector, rolePermissionSelector, useAppSelector } from '@/store';\nimport { currencyFormat, snackbar } from '@/utils';\nimport { setModifierQtyPrice } from '@/utils/b3Product/b3Product';\nimport {\n  addLineItems,\n  getProductOptionsFields,\n  ProductsProps,\n} from '@/utils/b3Product/shared/config';\nimport b3TriggerCartNumber from '@/utils/b3TriggerCartNumber';\nimport { callCart } from '@/utils/cartUtils';\n\ninterface ShoppingProductsProps {\n  shoppingListInfo: any;\n  role: string | number;\n  products: ProductsProps[];\n  successProducts: number;\n  allowJuniorPlaceOrder: boolean;\n  getProductQuantity?: (item: ProductsProps) => number;\n  onProductChange?: (products: ProductsProps[]) => void;\n  setValidateFailureProducts: (arr: ProductsProps[]) => void;\n  setValidateSuccessProducts: (arr: ProductsProps[]) => void;\n  textAlign?: string;\n}\n\ninterface FlexProps {\n  isHeader?: boolean;\n  isMobile?: boolean;\n}\n\ninterface FlexItemProps {\n  width?: string;\n  padding?: string;\n  flexBasis?: string;\n  alignItems?: string;\n  flexDirection?:\n    | 'column'\n    | 'inherit'\n    | '-moz-initial'\n    | 'initial'\n    | 'revert'\n    | 'unset'\n    | 'column-reverse'\n    | 'row'\n    | 'row-reverse';\n  textAlignLocation?: string;\n}\n\nconst Flex = styled('div')<FlexProps>(({ isHeader, isMobile }) => {\n  const headerStyle = isHeader\n    ? {\n        borderBottom: '1px solid #D9DCE9',\n        paddingBottom: '8px',\n        alignItems: 'center',\n      }\n    : {\n        alignItems: 'flex-start',\n      };\n\n  const mobileStyle = isMobile\n    ? {\n        borderTop: '1px solid #D9DCE9',\n        padding: '12px 0 12px',\n        '&:first-of-type': {\n          marginTop: '12px',\n        },\n      }\n    : {};\n\n  const flexWrap = isMobile ? 'wrap' : 'initial';\n\n  return {\n    display: 'flex',\n    wordBreak: 'break-word',\n    padding: '8px 0 0',\n    gap: '8px',\n    flexWrap,\n    ...headerStyle,\n    ...mobileStyle,\n  };\n});\n\nconst FlexItem = styled(Box)(\n  ({\n    width,\n    padding = '0',\n    flexBasis,\n    flexDirection = 'row',\n    alignItems,\n    textAlignLocation,\n  }: FlexItemProps) => ({\n    display: 'flex',\n    justifyContent: textAlignLocation === 'right' ? 'flex-end' : 'flex-start',\n    flexDirection,\n    flexGrow: width ? 0 : 1,\n    flexShrink: width ? 0 : 1,\n    alignItems: alignItems || 'flex-start',\n    flexBasis,\n    width,\n    padding,\n  }),\n);\n\nconst ProductHead = styled('div')(() => ({\n  fontSize: '0.875rem',\n  lineHeight: '1.5',\n  color: '#263238',\n}));\n\nconst ProductImage = styled('img')(() => ({\n  width: '60px',\n  borderRadius: '4px',\n  flexShrink: 0,\n}));\n\nconst defaultItemStyle = {\n  default: {\n    width: '15%',\n  },\n  qty: {\n    width: '80px',\n  },\n  delete: {\n    width: '30px',\n  },\n};\n\nconst mobileItemStyle = {\n  default: {\n    width: '100%',\n    padding: '0 0 0 76px',\n  },\n  qty: {\n    width: '100%',\n    padding: '0 0 0 76px',\n  },\n  delete: {\n    width: '100%',\n    padding: '0 0 0 76px',\n    display: 'flex',\n    flexDirection: 'row-reverse',\n  },\n};\n\nexport default function ReAddToCart(props: ShoppingProductsProps) {\n  const {\n    shoppingListInfo,\n    products,\n    successProducts,\n    allowJuniorPlaceOrder,\n    setValidateFailureProducts,\n    setValidateSuccessProducts,\n    textAlign = 'left',\n  } = props;\n\n  const { submitShoppingListPermission } = useAppSelector(rolePermissionSelector);\n\n  const b3Lang = useB3Lang();\n  const [isOpen, setOpen] = useState<boolean>(false);\n  const [loading, setLoading] = useState<boolean>(false);\n  const [isMobile] = useMobile();\n\n  const { decimal_places: decimalPlaces = 2 } = useAppSelector(activeCurrencyInfoSelector);\n\n  useEffect(() => {\n    if (products.length > 0) {\n      setOpen(true);\n    } else {\n      setOpen(false);\n    }\n  }, [products]);\n\n  const itemStyle = isMobile ? mobileItemStyle : defaultItemStyle;\n\n  const handleUpdateProductQty = async (\n    index: number,\n    value: number | string,\n    isValid: boolean,\n  ) => {\n    const newProduct: ProductsProps[] = [...products];\n    newProduct[index].node.quantity = Number(value);\n    newProduct[index].isValid = isValid;\n    const calculateProduct = await setModifierQtyPrice(newProduct[index].node, Number(value));\n    if (calculateProduct) {\n      (newProduct[index] as CustomFieldItems).node = calculateProduct;\n      setValidateFailureProducts(newProduct);\n    }\n  };\n\n  const handleCancelClicked = () => {\n    setOpen(false);\n    setValidateFailureProducts([]);\n    setValidateSuccessProducts([]);\n  };\n\n  const deleteProduct = (index: number) => {\n    const newProduct: ProductsProps[] = [...products];\n    newProduct.splice(index, 1);\n    setValidateFailureProducts(newProduct);\n  };\n\n  const handRightClick = async () => {\n    const isValidate = products.every((item: ProductsProps) => item.isValid);\n\n    if (!isValidate) {\n      snackbar.error(b3Lang('shoppingList.reAddToCart.fillCorrectQuantity'));\n      return;\n    }\n    try {\n      setLoading(true);\n\n      const lineItems = addLineItems(products);\n\n      const res = await callCart(lineItems);\n\n      if (!res.errors) {\n        handleCancelClicked();\n        if (\n          allowJuniorPlaceOrder &&\n          submitShoppingListPermission &&\n          shoppingListInfo?.status === 0\n        ) {\n          window.location.href = CHECKOUT_URL;\n        } else {\n          snackbar.success('', {\n            jsx: successTip({\n              message: b3Lang('shoppingList.reAddToCart.productsAdded'),\n              link: CART_URL,\n              linkText: b3Lang('shoppingList.reAddToCart.viewCart'),\n              isOutLink: true,\n              isCustomEvent: true,\n            }),\n            isClose: true,\n          });\n          b3TriggerCartNumber();\n        }\n      }\n\n      if (res.errors) {\n        snackbar.error(res.message, {\n          isClose: true,\n        });\n      }\n\n      b3TriggerCartNumber();\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleClearNoStock = async () => {\n    const newProduct = products.filter(\n      (item: ProductsProps) => item.isStock === '0' || item.stock !== 0,\n    );\n    const requestArr: Promise<any>[] = [];\n    newProduct.forEach((product) => {\n      const item = product;\n      const {\n        node: { quantity },\n        minQuantity = 0,\n        maxQuantity = 0,\n        isStock,\n        stock,\n      } = product;\n\n      const quantityNumber = parseInt(`${quantity}`, 10) || 0;\n      if (minQuantity !== 0 && quantityNumber < minQuantity) {\n        item.node.quantity = minQuantity;\n      } else if (maxQuantity !== 0 && quantityNumber > maxQuantity) {\n        item.node.quantity = maxQuantity;\n      }\n      if (isStock !== '0' && stock && (quantity ? Number(quantity) : 0) > stock) {\n        item.node.quantity = stock;\n      }\n\n      item.isValid = true;\n\n      const qty = product?.node?.quantity ? Number(product.node.quantity) : 0;\n\n      requestArr.push(setModifierQtyPrice(product.node, qty));\n    });\n\n    const productArr = await Promise.all(requestArr);\n\n    productArr.forEach((item, index) => {\n      newProduct[index].node = item;\n    });\n    setValidateFailureProducts(newProduct);\n  };\n\n  return (\n    <B3Dialog\n      isOpen={isOpen}\n      handleLeftClick={handleCancelClicked}\n      handRightClick={handRightClick}\n      title={\n        allowJuniorPlaceOrder\n          ? b3Lang('shoppingList.reAddToCart.proceedToCheckout')\n          : b3Lang('shoppingList.reAddToCart.addToCart')\n      }\n      rightSizeBtn={\n        allowJuniorPlaceOrder\n          ? b3Lang('shoppingList.reAddToCart.proceedToCheckout')\n          : b3Lang('shoppingList.reAddToCart.addToCart')\n      }\n      maxWidth=\"xl\"\n    >\n      <Grid>\n        <Box\n          sx={{\n            m: '0 0 1rem 0',\n          }}\n        >\n          <Alert variant=\"filled\" severity=\"success\">\n            {allowJuniorPlaceOrder\n              ? b3Lang('shoppingList.reAddToCart.productsCanCheckout', {\n                  successProducts,\n                })\n              : b3Lang('shoppingList.reAddToCart.productsAddedToCart', {\n                  successProducts,\n                })}\n          </Alert>\n        </Box>\n\n        <Box\n          sx={{\n            m: '1rem 0',\n          }}\n        >\n          <Alert variant=\"filled\" severity=\"error\">\n            {allowJuniorPlaceOrder\n              ? b3Lang('shoppingList.reAddToCart.productsCantCheckout', {\n                  quantity: products.length,\n                })\n              : b3Lang('shoppingList.reAddToCart.productsNotAddedToCart', {\n                  quantity: products.length,\n                })}\n          </Alert>\n        </Box>\n        <B3Spin isSpinning={loading} size={16} isFlex={false}>\n          <Box\n            sx={{\n              display: 'flex',\n              justifyContent: 'space-between',\n              margin: '0.5rem 0 1rem 0',\n            }}\n          >\n            <Box\n              sx={{\n                fontSize: '24px',\n              }}\n            >\n              {b3Lang('shoppingList.reAddToCart.productCount', {\n                quantity: products.length,\n              })}\n            </Box>\n            <CustomButton onClick={() => handleClearNoStock()}>\n              {b3Lang('shoppingList.reAddToCart.adjustQuantity')}\n            </CustomButton>\n          </Box>\n\n          {products.length > 0 ? (\n            <Box>\n              {!isMobile && (\n                <Flex isHeader isMobile={isMobile}>\n                  <FlexItem>\n                    <ProductHead>{b3Lang('shoppingList.reAddToCart.product')}</ProductHead>\n                  </FlexItem>\n                  <FlexItem {...itemStyle.default} textAlignLocation={textAlign}>\n                    <ProductHead>{b3Lang('shoppingList.reAddToCart.price')}</ProductHead>\n                  </FlexItem>\n                  <FlexItem\n                    sx={{\n                      justifyContent: 'center',\n                    }}\n                    {...itemStyle.default}\n                    textAlignLocation={textAlign}\n                  >\n                    <ProductHead>{b3Lang('shoppingList.reAddToCart.quantity')}</ProductHead>\n                  </FlexItem>\n                  <FlexItem {...itemStyle.default} textAlignLocation={textAlign}>\n                    <ProductHead>{b3Lang('shoppingList.reAddToCart.total')}</ProductHead>\n                  </FlexItem>\n                  <FlexItem {...itemStyle.delete}>\n                    <ProductHead> </ProductHead>\n                  </FlexItem>\n                </Flex>\n              )}\n              {products.map((product: ProductsProps, index: number) => {\n                const { isStock, maxQuantity, minQuantity, stock } = product;\n\n                const {\n                  quantity = 1,\n                  primaryImage,\n                  productName,\n                  variantSku,\n                  optionList,\n                  productsSearch,\n                  basePrice,\n                } = product.node;\n\n                const price = Number(basePrice);\n                const total = (price * (quantity ? Number(quantity) : 0)).toFixed(decimalPlaces);\n\n                const newProduct: any = {\n                  ...productsSearch,\n                  selectOptions: optionList,\n                };\n\n                const productFields = getProductOptionsFields(newProduct, {});\n\n                const newOptionList = JSON.parse(optionList);\n                const optionsValue: CustomFieldItems[] = productFields.filter(\n                  (item) => item.valueText,\n                );\n\n                return (\n                  <Flex isMobile={isMobile} key={variantSku}>\n                    <FlexItem>\n                      <ProductImage src={primaryImage || PRODUCT_DEFAULT_IMAGE} />\n                      <Box\n                        sx={{\n                          marginLeft: '16px',\n                        }}\n                      >\n                        <Typography variant=\"body1\" color=\"#212121\">\n                          {productName}\n                        </Typography>\n                        <Typography variant=\"body1\" color=\"#616161\">\n                          {variantSku}\n                        </Typography>\n                        {newOptionList.length > 0 &&\n                          optionsValue.length > 0 &&\n                          optionsValue.map((option: CustomFieldItems) => (\n                            <Typography\n                              sx={{\n                                fontSize: '0.75rem',\n                                lineHeight: '1.5',\n                                color: '#455A64',\n                              }}\n                              key={option.valueLabel}\n                            >\n                              {`${option.valueLabel}: ${option.valueText}`}\n                            </Typography>\n                          ))}\n                      </Box>\n                    </FlexItem>\n                    <FlexItem {...itemStyle.default} textAlignLocation={textAlign}>\n                      {isMobile && <span>Price: </span>}\n                      {currencyFormat(price)}\n                    </FlexItem>\n                    <FlexItem {...itemStyle.default} textAlignLocation={textAlign}>\n                      <B3QuantityTextField\n                        isStock={isStock}\n                        maxQuantity={maxQuantity}\n                        minQuantity={minQuantity}\n                        stock={stock}\n                        value={quantity}\n                        onChange={(value, isValid) => {\n                          handleUpdateProductQty(index, value, isValid);\n                        }}\n                      />\n                    </FlexItem>\n                    <FlexItem {...itemStyle.default} textAlignLocation={textAlign}>\n                      {isMobile && <div>Total: </div>}\n                      {currencyFormat(total)}\n                    </FlexItem>\n\n                    <FlexItem {...itemStyle.delete}>\n                      <Delete\n                        sx={{\n                          cursor: 'pointer',\n                          color: 'rgba(0, 0, 0, 0.54)',\n                        }}\n                        onClick={() => {\n                          deleteProduct(index);\n                        }}\n                      />\n                    </FlexItem>\n                  </Flex>\n                );\n              })}\n            </Box>\n          ) : null}\n        </B3Spin>\n      </Grid>\n    </B3Dialog>\n  );\n}\n","import { useB3Lang } from '@b3/lang';\nimport { Box } from '@mui/material';\n\nimport B3Dialog from '@/components/B3Dialog';\nimport { useMobile } from '@/hooks';\n\ninterface ShoppingDetailDeleteItemsProps {\n  open: boolean;\n  handleCancelClick: () => void;\n  handleDeleteProductClick: () => void;\n}\n\nfunction ShoppingDetailDeleteItems(props: ShoppingDetailDeleteItemsProps) {\n  const b3Lang = useB3Lang();\n  const [isMobile] = useMobile();\n  const { open, handleCancelClick, handleDeleteProductClick } = props;\n\n  return (\n    <B3Dialog\n      isOpen={open}\n      title={b3Lang('shoppingList.deleteItems.subtotal')}\n      leftSizeBtn={b3Lang('shoppingList.deleteItems.cancel')}\n      rightSizeBtn={b3Lang('shoppingList.deleteItems.delete')}\n      handleLeftClick={handleCancelClick}\n      handRightClick={handleDeleteProductClick}\n      rightStyleBtn={{\n        color: '#D32F2F',\n      }}\n    >\n      <Box\n        sx={{\n          display: 'flex',\n          justifyContent: isMobile ? 'center%' : 'start',\n          width: isMobile ? '100%' : '450px',\n          height: '100%',\n        }}\n      >\n        {b3Lang('shoppingList.deleteItems.confirmDelete')}\n      </Box>\n    </B3Dialog>\n  );\n}\n\nexport default ShoppingDetailDeleteItems;\n","import { useContext, useRef, useState } from 'react';\nimport { useB3Lang } from '@b3/lang';\nimport { ArrowDropDown, Delete } from '@mui/icons-material';\nimport { Box, Grid, Menu, MenuItem, Typography } from '@mui/material';\nimport Cookies from 'js-cookie';\nimport { v1 as uuid } from 'uuid';\n\nimport { successTip } from '@/components';\nimport CustomButton from '@/components/button/CustomButton';\nimport { CART_URL, CHECKOUT_URL, PRODUCT_DEFAULT_IMAGE } from '@/constants';\nimport { useMobile } from '@/hooks';\nimport { GlobalContext } from '@/shared/global';\nimport {\n  getB2BVariantInfoBySkus,\n  getBcVariantInfoBySkus,\n  searchB2BProducts,\n  searchBcProducts,\n} from '@/shared/service/b2b/graphql/product';\nimport { deleteCart, getCart } from '@/shared/service/bc/graphql/cart';\nimport { rolePermissionSelector, useAppSelector } from '@/store';\nimport { currencyFormat, snackbar } from '@/utils';\nimport b2bLogger from '@/utils/b3Logger';\nimport {\n  addQuoteDraftProducts,\n  calculateProductListPrice,\n  validProductQty,\n} from '@/utils/b3Product/b3Product';\nimport {\n  addLineItems,\n  conversionProductsList,\n  ProductsProps,\n} from '@/utils/b3Product/shared/config';\nimport b3TriggerCartNumber from '@/utils/b3TriggerCartNumber';\nimport { callCart, deleteCartData, updateCart } from '@/utils/cartUtils';\n\ninterface ShoppingDetailFooterProps {\n  shoppingListInfo: any;\n  allowJuniorPlaceOrder: boolean;\n  checkedArr: any;\n  selectedSubTotal: number;\n  setLoading: (val: boolean) => void;\n  setDeleteOpen: (val: boolean) => void;\n  setValidateFailureProducts: (arr: ProductsProps[]) => void;\n  setValidateSuccessProducts: (arr: ProductsProps[]) => void;\n  isB2BUser: boolean;\n  customColor: string;\n  isCanEditShoppingList: boolean;\n  role: string | number;\n}\n\ninterface ProductInfoProps {\n  basePrice: number | string;\n  baseSku: string;\n  createdAt: number;\n  discount: number | string;\n  enteredInclusive: boolean;\n  id: number | string;\n  itemId: number;\n  optionList: string;\n  primaryImage: string;\n  productId: number;\n  productName: string;\n  productUrl: string;\n  quantity: number | string;\n  tax: number | string;\n  updatedAt: number;\n  variantId: number;\n  variantSku: string;\n  productsSearch: CustomFieldItems;\n}\n\ninterface ListItemProps {\n  node: ProductInfoProps;\n}\n\nfunction ShoppingDetailFooter(props: ShoppingDetailFooterProps) {\n  const [isMobile] = useMobile();\n  const b3Lang = useB3Lang();\n\n  const {\n    state: { productQuoteEnabled = false },\n  } = useContext(GlobalContext);\n  const isAgenting = useAppSelector(({ b2bFeatures }) => b2bFeatures.masqueradeCompany.isAgenting);\n  const companyId = useAppSelector(({ company }) => company.companyInfo.id);\n  const customerGroupId = useAppSelector(({ company }) => company.customer.customerGroupId);\n  const {\n    shoppingListCreateActionsPermission,\n    purchasabilityPermission,\n    submitShoppingListPermission,\n  } = useAppSelector(rolePermissionSelector);\n  const ref = useRef<HTMLButtonElement | null>(null);\n  const [isOpen, setIsOpen] = useState(false);\n\n  const cartEntityId = Cookies.get('cartId');\n\n  const containerStyle = isMobile\n    ? {\n        alignItems: 'flex-start',\n        flexDirection: 'column',\n      }\n    : {\n        alignItems: 'center',\n      };\n\n  const {\n    shoppingListInfo,\n    allowJuniorPlaceOrder,\n    checkedArr,\n    selectedSubTotal,\n    setLoading,\n    setDeleteOpen,\n    setValidateFailureProducts,\n    setValidateSuccessProducts,\n    isB2BUser,\n    customColor,\n    isCanEditShoppingList,\n    role,\n  } = props;\n\n  const b2bShoppingListActionsPermission = isB2BUser ? shoppingListCreateActionsPermission : true;\n  const isCanAddToCart = isB2BUser ? purchasabilityPermission : true;\n  const b2bSubmitShoppingListPermission = isB2BUser\n    ? submitShoppingListPermission\n    : Number(role) === 2;\n\n  const handleOpenBtnList = () => {\n    if (checkedArr.length === 0) {\n      snackbar.error(b3Lang('shoppingList.footer.selectOneItem'));\n    } else {\n      setIsOpen(true);\n    }\n  };\n\n  const handleClose = () => {\n    setIsOpen(false);\n  };\n\n  const verifyInventory = (inventoryInfos: ProductsProps[]) => {\n    const validateFailureArr: ProductsProps[] = [];\n    const validateSuccessArr: ProductsProps[] = [];\n\n    checkedArr.forEach((item: ProductsProps) => {\n      const { node } = item;\n\n      const inventoryInfo: CustomFieldItems =\n        inventoryInfos.find((option: CustomFieldItems) => option.variantSku === node.variantSku) ||\n        {};\n\n      if (inventoryInfo) {\n        let isPassVerify = true;\n        if (\n          inventoryInfo.isStock === '1' &&\n          (node?.quantity ? Number(node.quantity) : 0) > inventoryInfo.stock\n        )\n          isPassVerify = false;\n\n        if (\n          inventoryInfo.minQuantity !== 0 &&\n          (node?.quantity ? Number(node.quantity) : 0) < inventoryInfo.minQuantity\n        )\n          isPassVerify = false;\n\n        if (\n          inventoryInfo.maxQuantity !== 0 &&\n          (node?.quantity ? Number(node.quantity) : 0) > inventoryInfo.maxQuantity\n        )\n          isPassVerify = false;\n\n        if (isPassVerify) {\n          validateSuccessArr.push({\n            node,\n          });\n        } else {\n          validateFailureArr.push({\n            node: {\n              ...node,\n            },\n            stock: inventoryInfo.stock,\n            isStock: inventoryInfo.isStock,\n            maxQuantity: inventoryInfo.maxQuantity,\n            minQuantity: inventoryInfo.minQuantity,\n          });\n        }\n      }\n    });\n\n    return {\n      validateFailureArr,\n      validateSuccessArr,\n    };\n  };\n\n  // Add selected product to cart\n  const handleAddProductsToCart = async () => {\n    if (checkedArr.length === 0) {\n      snackbar.error(b3Lang('shoppingList.footer.selectOneItem'));\n      return;\n    }\n\n    handleClose();\n    setLoading(true);\n    try {\n      const skus: string[] = [];\n\n      let cantPurchase = '';\n\n      checkedArr.forEach((item: ProductsProps) => {\n        const { node } = item;\n\n        if (node.productsSearch.availability === 'disabled') {\n          cantPurchase += `${node.variantSku},`;\n        }\n\n        skus.push(node.variantSku);\n      });\n\n      if (cantPurchase) {\n        snackbar.error(\n          b3Lang('shoppingList.footer.unavailableProducts', {\n            skus: cantPurchase.slice(0, -1),\n          }),\n          {\n            isClose: true,\n          },\n        );\n        return;\n      }\n\n      if (skus.length === 0) {\n        snackbar.error(\n          allowJuniorPlaceOrder\n            ? b3Lang('shoppingList.footer.selectItemsToCheckout')\n            : b3Lang('shoppingList.footer.selectItemsToAddToCart'),\n          {\n            isClose: true,\n          },\n        );\n        return;\n      }\n\n      const getVariantInfoBySku = isB2BUser ? getB2BVariantInfoBySkus : getBcVariantInfoBySkus;\n\n      const getInventoryInfos = await getVariantInfoBySku({\n        skus,\n      });\n\n      const { validateFailureArr, validateSuccessArr } = verifyInventory(\n        getInventoryInfos?.variantSku || [],\n      );\n\n      if (validateSuccessArr.length !== 0) {\n        const lineItems = addLineItems(validateSuccessArr);\n        const deleteCartObject = deleteCartData(cartEntityId);\n        const cartInfo = await getCart();\n        let res = null;\n        if (allowJuniorPlaceOrder && cartInfo.length) {\n          await deleteCart(deleteCartObject);\n          res = await updateCart(cartInfo, lineItems);\n        } else {\n          res = await callCart(lineItems);\n          b3TriggerCartNumber();\n        }\n        if (res && res.errors) {\n          snackbar.error(res.errors[0].message, {\n            isClose: true,\n          });\n        } else if (validateFailureArr.length === 0) {\n          if (\n            allowJuniorPlaceOrder &&\n            b2bSubmitShoppingListPermission &&\n            shoppingListInfo?.status === 0\n          ) {\n            window.location.href = CHECKOUT_URL;\n          } else {\n            snackbar.success('', {\n              jsx: successTip({\n                message: b3Lang('shoppingList.footer.productsAddedToCart'),\n                link: CART_URL,\n                linkText: b3Lang('shoppingList.footer.viewCart'),\n                isOutLink: true,\n                isCustomEvent: true,\n              }),\n              isClose: true,\n            });\n            b3TriggerCartNumber();\n          }\n        }\n      }\n\n      setValidateFailureProducts(validateFailureArr);\n      setValidateSuccessProducts(validateSuccessArr);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Add selected to quote\n  const getOptionsList = (options: []) => {\n    if (options?.length === 0) return [];\n\n    const option = options.map(\n      ({\n        option_id: optionId,\n        option_value: optionValue,\n      }: {\n        option_id: string | number;\n        option_value: string | number;\n      }) => ({\n        optionId,\n        optionValue,\n      }),\n    );\n\n    return option;\n  };\n\n  const handleAddSelectedToQuote = async () => {\n    if (checkedArr.length === 0) {\n      snackbar.error(b3Lang('shoppingList.footer.selectOneItem'));\n      return;\n    }\n    setLoading(true);\n    handleClose();\n    try {\n      const productsWithSku = checkedArr.filter((checkedItem: ListItemProps) => {\n        const {\n          node: { variantSku },\n        } = checkedItem;\n\n        return variantSku !== '' && variantSku !== null && variantSku !== undefined;\n      });\n\n      const noSkuProducts = checkedArr.filter((checkedItem: ListItemProps) => {\n        const {\n          node: { variantSku },\n        } = checkedItem;\n\n        return !variantSku;\n      });\n      if (noSkuProducts.length > 0) {\n        snackbar.error(b3Lang('shoppingList.footer.cantAddProductsNoSku'), {\n          isClose: true,\n        });\n      }\n      if (noSkuProducts.length === checkedArr.length) return;\n\n      const productIds: number[] = [];\n      productsWithSku.forEach((product: ListItemProps) => {\n        const { node } = product;\n\n        if (!productIds.includes(Number(node.productId))) {\n          productIds.push(Number(node.productId));\n        }\n      });\n\n      const getProducts = isB2BUser ? searchB2BProducts : searchBcProducts;\n\n      const { productsSearch } = await getProducts({\n        productIds,\n        companyId,\n        customerGroupId,\n      });\n\n      const newProductInfo: CustomFieldItems = conversionProductsList(productsSearch);\n      let isSuccess = false;\n      let errorMessage = '';\n      let isFondVariant = true;\n\n      const newProducts: CustomFieldItems[] = [];\n      productsWithSku.forEach((product: ListItemProps) => {\n        const {\n          node: {\n            basePrice,\n            optionList,\n            variantSku,\n            productId,\n            productName,\n            quantity,\n            variantId,\n            tax,\n          },\n        } = product;\n\n        const optionsList = getOptionsList(JSON.parse(optionList));\n\n        const currentProductSearch = newProductInfo.find(\n          (product: CustomFieldItems) => Number(product.id) === Number(productId),\n        );\n\n        const variantItem = currentProductSearch?.variants.find(\n          (item: CustomFieldItems) => item.sku === variantSku,\n        );\n\n        if (!variantItem) {\n          errorMessage = b3Lang('shoppingList.footer.notFoundSku', {\n            sku: variantSku,\n          });\n          isFondVariant = false;\n        }\n\n        const quoteListitem = {\n          node: {\n            id: uuid(),\n            variantSku: variantItem?.sku || variantSku,\n            variantId,\n            productsSearch: currentProductSearch,\n            primaryImage: variantItem?.image_url || PRODUCT_DEFAULT_IMAGE,\n            productName,\n            quantity: Number(quantity) || 1,\n            optionList: JSON.stringify(optionsList),\n            productId,\n            basePrice,\n            tax,\n          },\n        };\n\n        newProducts.push(quoteListitem);\n\n        isSuccess = true;\n      });\n\n      isSuccess = validProductQty(newProducts);\n\n      if (!isFondVariant) {\n        snackbar.error('', {\n          jsx: successTip({\n            message: errorMessage,\n            link: '',\n            linkText: '',\n            isOutLink: false,\n          }),\n          isClose: true,\n        });\n\n        return;\n      }\n\n      if (isSuccess) {\n        await calculateProductListPrice(newProducts, '2');\n        addQuoteDraftProducts(newProducts);\n        snackbar.success('', {\n          jsx: successTip({\n            message: b3Lang('shoppingList.footer.productsAddedToQuote'),\n            link: '/quoteDraft',\n            linkText: b3Lang('shoppingList.footer.viewQuote'),\n            isOutLink: false,\n          }),\n          isClose: true,\n        });\n      } else {\n        snackbar.error('', {\n          jsx: successTip({\n            message: b3Lang('shoppingList.footer.productsLimit'),\n            link: '/quoteDraft',\n            linkText: b3Lang('shoppingList.footer.viewQuote'),\n            isOutLink: false,\n          }),\n          isClose: true,\n        });\n      }\n    } catch (e) {\n      b2bLogger.error(e);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const buttons = {\n    adSelectedToCart: {\n      name: b3Lang('shoppingList.footer.addToCart'),\n      key: 'add-selected-to-cart',\n      handleClick: handleAddProductsToCart,\n      isDisabled: false,\n    },\n    proceedToCheckout: {\n      name: b3Lang('shoppingList.footer.proceedToCheckout'),\n      key: 'add-select-to-checkout',\n      handleClick: handleAddProductsToCart,\n      isDisabled: false,\n    },\n    addSelectedToQuote: {\n      name: b3Lang('shoppingList.footer.addToQuote'),\n      key: 'add-selected-to-quote',\n      handleClick: handleAddSelectedToQuote,\n      isDisabled: false,\n    },\n  };\n\n  const allowButtonList = () => {\n    if (!(shoppingListInfo?.status === 0 || !isB2BUser)) return [];\n\n    if (!isCanAddToCart && isB2BUser)\n      return productQuoteEnabled ? [buttons.addSelectedToQuote] : [];\n\n    if (b2bSubmitShoppingListPermission) {\n      if (allowJuniorPlaceOrder && productQuoteEnabled) {\n        return [buttons.proceedToCheckout, buttons.addSelectedToQuote];\n      }\n\n      if (allowJuniorPlaceOrder) return [buttons.proceedToCheckout];\n      if (productQuoteEnabled) {\n        return [buttons.addSelectedToQuote];\n      }\n      return [];\n    }\n\n    return productQuoteEnabled\n      ? [buttons.adSelectedToCart, buttons.addSelectedToQuote]\n      : [buttons.adSelectedToCart];\n  };\n\n  const buttonList = allowButtonList();\n\n  return (\n    <Grid\n      sx={{\n        position: 'fixed',\n        bottom: isMobile && isAgenting ? '52px' : 0,\n        left: 0,\n        backgroundColor: '#fff',\n        width: '100%',\n        padding: isMobile ? '0 0 1rem 0' : '0 40px 1rem 40px',\n        height: isMobile ? '8rem' : 'auto',\n        marginLeft: 0,\n        display: 'flex',\n        flexWrap: 'nowrap',\n        zIndex: '999',\n      }}\n      container\n      spacing={2}\n    >\n      <Grid\n        item\n        sx={{\n          display: isMobile ? 'none' : 'block',\n          width: '290px',\n          paddingLeft: '20px',\n        }}\n      />\n      <Grid\n        item\n        sx={\n          isMobile\n            ? {\n                flexBasis: '100%',\n              }\n            : {\n                flexBasis: '690px',\n                flexGrow: 1,\n              }\n        }\n      >\n        <Box\n          sx={{\n            width: '100%',\n            pr: '20px',\n            display: 'flex',\n            zIndex: '999',\n            justifyContent: 'space-between',\n            ...containerStyle,\n          }}\n        >\n          <Typography\n            sx={{\n              color: '#000000',\n              fontSize: '16px',\n              fontWeight: '400',\n            }}\n          >\n            {b3Lang('shoppingList.footer.selectedProducts', {\n              quantity: checkedArr.length,\n            })}\n          </Typography>\n          <Box\n            sx={{\n              display: 'flex',\n              alignItems: 'center',\n              flexWrap: isMobile ? 'wrap' : 'nowrap',\n            }}\n          >\n            <Typography\n              variant=\"h6\"\n              sx={{\n                fontSize: '16px',\n                fontWeight: '700',\n                color: '#000000',\n              }}\n            >\n              {b3Lang('shoppingList.footer.subtotal', {\n                subtotal: currencyFormat(selectedSubTotal),\n              })}\n            </Typography>\n            <Box\n              sx={{\n                display: 'flex',\n                alignItems: 'center',\n                marginTop: isMobile ? '0.5rem' : 0,\n                width: isMobile ? '100%' : 'auto',\n              }}\n            >\n              {!allowJuniorPlaceOrder &&\n                isCanEditShoppingList &&\n                b2bShoppingListActionsPermission && (\n                  <CustomButton\n                    sx={{\n                      padding: '5px',\n                      border: `1px solid ${customColor || '#1976d2'}`,\n                      margin: isMobile ? '0 1rem 0 0' : '0 1rem',\n                      minWidth: 'auto',\n                    }}\n                    disabled={shoppingListInfo?.status === 40}\n                  >\n                    <Delete\n                      color=\"primary\"\n                      sx={{\n                        color: customColor,\n                      }}\n                      onClick={() => {\n                        setDeleteOpen(true);\n                      }}\n                    />\n                  </CustomButton>\n                )}\n              {buttonList.length ? (\n                <Box\n                  sx={{\n                    display: 'flex',\n                    alignItems: 'center',\n                    marginTop: isMobile ? '0.5rem' : 0,\n                    marginLeft: isMobile ? 0 : '20px',\n                    width: isMobile ? '100%' : 'auto',\n                  }}\n                >\n                  {buttonList.length === 1 && buttonList[0] && (\n                    <CustomButton\n                      variant=\"contained\"\n                      onClick={buttonList[0].handleClick}\n                      sx={{\n                        marginRight: isMobile ? '1rem' : 0,\n                        width: isMobile ? '100%' : 'auto',\n                      }}\n                    >\n                      {buttonList[0].name}\n                    </CustomButton>\n                  )}\n                  {buttonList.length === 2 && (\n                    <>\n                      <CustomButton\n                        variant=\"contained\"\n                        onClick={handleOpenBtnList}\n                        ref={ref}\n                        sx={{\n                          marginRight: isMobile ? '1rem' : 0,\n                          width: isMobile ? '100%' : 'auto',\n                        }}\n                        endIcon={<ArrowDropDown />}\n                      >\n                        {b3Lang('shoppingList.footer.addSelectedTo')}\n                      </CustomButton>\n                      <Menu\n                        id=\"basic-menu\"\n                        anchorEl={ref.current}\n                        open={isOpen}\n                        onClose={handleClose}\n                        MenuListProps={{\n                          'aria-labelledby': 'basic-button',\n                        }}\n                      >\n                        {buttonList.length > 1 &&\n                          buttonList.map((button) => (\n                            <MenuItem\n                              key={button.key}\n                              onClick={() => {\n                                button.handleClick();\n                              }}\n                            >\n                              {button.name}\n                            </MenuItem>\n                          ))}\n                      </Menu>\n                    </>\n                  )}\n                </Box>\n              ) : null}\n            </Box>\n          </Box>\n        </Box>\n      </Grid>\n      <Grid\n        item\n        sx={\n          isMobile\n            ? {\n                flexBasis: '100%',\n                display: isMobile ? 'none' : 'block',\n              }\n            : {\n                flexBasis: '340px',\n                display: isMobile ? 'none' : 'block',\n              }\n        }\n      />\n    </Grid>\n  );\n}\n\nexport default ShoppingDetailFooter;\n","import { useContext, useMemo } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useB3Lang } from '@b3/lang';\nimport { ArrowBackIosNew } from '@mui/icons-material';\nimport { Box, Grid, styled, Typography } from '@mui/material';\n\nimport CustomButton from '@/components/button/CustomButton';\nimport { getContrastColor } from '@/components/outSideComponents/utils/b3CustomStyles';\nimport { useMobile } from '@/hooks';\nimport { type SetOpenPage } from '@/pages/SetOpenPage';\nimport { CustomStyleContext } from '@/shared/customStyleButton';\nimport { rolePermissionSelector, useAppSelector } from '@/store';\nimport { verifyLevelPermission, verifySubmitShoppingListSubsidiariesPermission } from '@/utils';\nimport { b2bPermissionsMap } from '@/utils/b3CheckPermissions/config';\n\nimport { ShoppingStatus } from '../../ShoppingLists/ShoppingStatus';\n\nconst StyledCreateName = styled('div')(() => ({\n  display: 'flex',\n  alignItems: 'center',\n}));\n\ninterface ShoppingDetailHeaderProps {\n  shoppingListInfo: any;\n  role: string | number;\n  customerInfo: any;\n  goToShoppingLists: () => void;\n  handleUpdateShoppingList: (status: number) => void;\n  isB2BUser: boolean;\n  setOpenPage: SetOpenPage;\n  isAgenting: boolean;\n  openAPPParams: {\n    shoppingListBtn: string;\n  };\n  customColor: string;\n}\n\nfunction ShoppingDetailHeader(props: ShoppingDetailHeaderProps) {\n  const b3Lang = useB3Lang();\n  const [isMobile] = useMobile();\n\n  const {\n    shoppingListInfo,\n    customerInfo,\n    handleUpdateShoppingList,\n    goToShoppingLists,\n    isB2BUser,\n    setOpenPage,\n    openAPPParams,\n    customColor,\n  } = props;\n\n  const {\n    state: {\n      portalStyle: { backgroundColor = '#FEF9F5' },\n    },\n  } = useContext(CustomStyleContext);\n  const navigate = useNavigate();\n\n  const { selectCompanyHierarchyId } = useAppSelector(\n    ({ company }) => company.companyHierarchyInfo,\n  );\n\n  const {\n    submitShoppingListPermission: submitShoppingList,\n    approveShoppingListPermission: approveShoppingList,\n  } = useAppSelector(rolePermissionSelector);\n\n  const shoppingListPermissions = useMemo(() => {\n    if (isB2BUser) {\n      const companyInfo = shoppingListInfo?.companyInfo || {};\n\n      const {\n        submitShoppingListPermission: submitShoppingListPermissionCode,\n        approveShoppingListPermission: approveShoppingListPermissionCode,\n      } = b2bPermissionsMap;\n      const submitShoppingListPermissionLevel = verifySubmitShoppingListSubsidiariesPermission({\n        code: submitShoppingListPermissionCode,\n        userId: Number(customerInfo?.userId || 0),\n        selectId: Number(selectCompanyHierarchyId),\n      });\n\n      const approveShoppingListPermissionLevel = verifyLevelPermission({\n        code: approveShoppingListPermissionCode,\n        companyId: Number(companyInfo?.companyId || 0),\n        userId: Number(customerInfo?.userId || 0),\n      });\n\n      return {\n        submitShoppingListPermission: submitShoppingListPermissionLevel,\n        approveShoppingListPermission: approveShoppingListPermissionLevel,\n      };\n    }\n\n    return {\n      submitShoppingListPermission: submitShoppingList,\n      approveShoppingListPermission: approveShoppingList,\n    };\n  }, [\n    customerInfo,\n    isB2BUser,\n    submitShoppingList,\n    approveShoppingList,\n    shoppingListInfo?.companyInfo,\n    selectCompanyHierarchyId,\n  ]);\n\n  const isDisabledBtn = shoppingListInfo?.products?.edges.length === 0;\n\n  const { submitShoppingListPermission, approveShoppingListPermission } = shoppingListPermissions;\n\n  const gridOptions = (xs: number) =>\n    isMobile\n      ? {}\n      : {\n          xs,\n        };\n  return (\n    <>\n      <Box\n        sx={{\n          marginBottom: '16px',\n          width: 'fit-content',\n        }}\n      >\n        <Box\n          sx={{\n            color: '#1976d2',\n            cursor: 'pointer',\n            display: 'flex',\n            alignItems: 'center',\n          }}\n          onClick={() => {\n            if (openAPPParams.shoppingListBtn !== 'add') {\n              goToShoppingLists();\n            } else {\n              navigate('/');\n              setOpenPage({\n                isOpen: false,\n                openUrl: '',\n              });\n            }\n          }}\n        >\n          <ArrowBackIosNew\n            fontSize=\"small\"\n            sx={{\n              fontSize: '12px',\n              marginRight: '0.5rem',\n              color: customColor,\n            }}\n          />\n          <Box\n            sx={{\n              margin: 0,\n              color: customColor,\n              m: '0',\n            }}\n          >\n            {openAPPParams.shoppingListBtn !== 'add'\n              ? b3Lang('shoppingList.header.backToShoppingLists')\n              : b3Lang('shoppingList.header.backToProduct')}\n          </Box>\n        </Box>\n      </Box>\n      <Grid\n        container\n        spacing={2}\n        sx={{\n          display: 'flex',\n          justifyContent: 'space-between',\n          flexDirection: isMobile ? 'column' : 'row',\n          mb: isMobile ? '16px' : '',\n        }}\n      >\n        <Grid\n          item\n          {...gridOptions(8)}\n          sx={{\n            color: getContrastColor(backgroundColor),\n          }}\n        >\n          <Box\n            sx={{\n              display: 'flex',\n              alignItems: isMobile ? 'start' : 'center',\n              flexDirection: isMobile ? 'column' : 'row',\n            }}\n          >\n            <Typography\n              variant=\"h4\"\n              sx={{\n                marginRight: '1rem',\n                wordBreak: 'break-all',\n              }}\n            >\n              {`${shoppingListInfo?.name || ''}`}\n            </Typography>\n            {isB2BUser &&\n              (submitShoppingListPermission ||\n                (approveShoppingListPermission && shoppingListInfo?.approvedFlag)) && (\n                <Typography\n                  sx={{\n                    m: isMobile ? '10px 0' : '0',\n                  }}\n                >\n                  {shoppingListInfo && <ShoppingStatus status={shoppingListInfo?.status} />}\n                </Typography>\n              )}\n          </Box>\n          <Box>\n            <Typography\n              sx={{\n                width: '100%',\n                wordBreak: 'break-all',\n              }}\n            >\n              {shoppingListInfo?.description}\n            </Typography>\n            {isB2BUser && (\n              <StyledCreateName>\n                <Typography\n                  variant=\"subtitle2\"\n                  sx={{\n                    marginRight: '0.5rem',\n                  }}\n                >\n                  {b3Lang('shoppingList.header.createdBy')}\n                </Typography>\n                <span>{`${customerInfo?.firstName || ''} ${customerInfo?.lastName || ''}`}</span>\n              </StyledCreateName>\n            )}\n          </Box>\n        </Grid>\n\n        <Grid\n          item\n          sx={{\n            textAlign: isMobile ? 'none' : 'end',\n          }}\n          {...gridOptions(4)}\n        >\n          {submitShoppingListPermission && shoppingListInfo?.status === 30 && (\n            <CustomButton\n              variant=\"outlined\"\n              disabled={isDisabledBtn}\n              onClick={() => {\n                handleUpdateShoppingList(40);\n              }}\n            >\n              {b3Lang('shoppingList.header.submitForApproval')}\n            </CustomButton>\n          )}\n          {approveShoppingListPermission && shoppingListInfo?.status === 40 && (\n            <Box>\n              <CustomButton\n                variant=\"outlined\"\n                sx={{\n                  marginRight: '1rem',\n                }}\n                onClick={() => {\n                  handleUpdateShoppingList(20);\n                }}\n              >\n                {b3Lang('shoppingList.header.reject')}\n              </CustomButton>\n              {approveShoppingListPermission && (\n                <CustomButton\n                  variant=\"outlined\"\n                  onClick={() => {\n                    handleUpdateShoppingList(0);\n                  }}\n                >\n                  {b3Lang('shoppingList.header.approve')}\n                </CustomButton>\n              )}\n            </Box>\n          )}\n        </Grid>\n      </Grid>\n    </>\n  );\n}\n\nexport default ShoppingDetailHeader;\n","import { useB3Lang } from '@b3/lang';\nimport { Box, TextField } from '@mui/material';\n\nimport B3Dialog from '@/components/B3Dialog';\nimport { useMobile } from '@/hooks';\n\ninterface ShoppingDetailAddNotesProps {\n  open: boolean;\n  notes: string;\n  setNotes: (value: string) => void;\n  handleCancelAddNotesClick: () => void;\n  handleAddItemNotesClick: () => void;\n}\n\nfunction ShoppingDetailAddNotes(props: ShoppingDetailAddNotesProps) {\n  const b3Lang = useB3Lang();\n\n  const [isMobile] = useMobile();\n  const { open, notes, setNotes, handleCancelAddNotesClick, handleAddItemNotesClick } = props;\n\n  return (\n    <B3Dialog\n      isOpen={open}\n      title={b3Lang('shoppingList.addItemNotes.title')}\n      leftSizeBtn={b3Lang('shoppingList.addItemNotes.cancel')}\n      rightSizeBtn={b3Lang('shoppingList.addItemNotes.save')}\n      handleLeftClick={handleCancelAddNotesClick}\n      handRightClick={handleAddItemNotesClick}\n      isShowBordered={false}\n    >\n      <Box\n        sx={{\n          display: 'flex',\n          justifyContent: isMobile ? 'center%' : 'start',\n          width: isMobile ? '100%' : '450px',\n          height: '100%',\n        }}\n      >\n        <TextField\n          multiline\n          rows={6}\n          defaultValue={notes}\n          onChange={(e) => setNotes(e.target.value)}\n          variant=\"filled\"\n          fullWidth\n          placeholder={b3Lang('shoppingList.addItemNotes.placeholder')}\n        />\n      </Box>\n    </B3Dialog>\n  );\n}\n\nexport default ShoppingDetailAddNotes;\n","import { ReactElement } from 'react';\nimport { useB3Lang } from '@b3/lang';\nimport { Delete, Edit, StickyNote2 } from '@mui/icons-material';\nimport { Box, CardContent, styled, TextField, Typography } from '@mui/material';\n\nimport { PRODUCT_DEFAULT_IMAGE } from '@/constants';\nimport { currencyFormat } from '@/utils';\nimport b2bGetVariantImageByVariantInfo from '@/utils/b2bGetVariantImageByVariantInfo';\nimport { getBCPrice } from '@/utils/b3Product/b3Product';\n\nimport { getProductOptionsFields } from '../../../utils/b3Product/shared/config';\n\ninterface ShoppingDetailCardProps {\n  item: any;\n  onEdit: (item: any, variantId: number | string, itemId: number | string) => void;\n  onDelete: (itemId: number) => void;\n  handleUpdateProductQty: (id: number | string, value: number | string) => void;\n  handleUpdateShoppingListItem: (itemId: number | string) => void;\n  checkBox?: () => ReactElement;\n  isReadForApprove: boolean;\n  len: number;\n  itemIndex?: number;\n  setDeleteOpen: (value: boolean) => void;\n  setAddNoteItemId: (itemId: number) => void;\n  setAddNoteOpen: (open: boolean) => void;\n  setNotes: (value: string) => void;\n  showPrice: (price: string, row: CustomFieldItems) => string | number;\n  b2bAndBcShoppingListActionsPermissions: boolean;\n}\n\nconst StyledImage = styled('img')(() => ({\n  maxWidth: '60px',\n  height: 'auto',\n  marginRight: '0.5rem',\n}));\n\nfunction ShoppingDetailCard(props: ShoppingDetailCardProps) {\n  const b3Lang = useB3Lang();\n  const {\n    item: shoppingDetail,\n    onEdit,\n    onDelete,\n    checkBox,\n    handleUpdateProductQty,\n    handleUpdateShoppingListItem,\n    isReadForApprove,\n    len,\n    itemIndex,\n    setDeleteOpen,\n    setAddNoteOpen,\n    setAddNoteItemId,\n    setNotes,\n    showPrice,\n    b2bAndBcShoppingListActionsPermissions,\n  } = props;\n\n  const {\n    basePrice,\n    quantity,\n    itemId,\n    variantId,\n    primaryImage,\n    productName,\n    variantSku,\n    productsSearch,\n    productUrl,\n    taxPrice = 0,\n    productNote,\n  } = shoppingDetail;\n\n  const price = getBCPrice(Number(basePrice), Number(taxPrice));\n\n  const total = price * Number(quantity);\n\n  const product: any = {\n    ...shoppingDetail.productsSearch,\n    selectOptions: shoppingDetail.optionList,\n  };\n\n  const productFields = getProductOptionsFields(product, {});\n\n  const optionList = JSON.parse(shoppingDetail.optionList);\n  const optionsValue: CustomFieldItems[] = productFields.filter((item) => item.valueText);\n\n  const canChangeOption =\n    optionList.length > 0 && !isReadForApprove && b2bAndBcShoppingListActionsPermissions;\n\n  const currentVariants = product.variants || [];\n\n  const currentImage =\n    b2bGetVariantImageByVariantInfo(currentVariants, { variantId, variantSku }) || primaryImage;\n\n  return (\n    <Box\n      key={shoppingDetail.id}\n      sx={{\n        borderTop: '1px solid #D9DCE9',\n        borderBottom: itemIndex === len - 1 ? '1px solid #D9DCE9' : '',\n      }}\n    >\n      <CardContent\n        sx={{\n          color: '#313440',\n          display: 'flex',\n          pl: 0,\n        }}\n      >\n        <Box>{checkBox && checkBox()}</Box>\n        <Box>\n          <StyledImage\n            src={currentImage || PRODUCT_DEFAULT_IMAGE}\n            alt=\"Product-img\"\n            loading=\"lazy\"\n          />\n        </Box>\n        <Box\n          sx={{\n            flex: 1,\n          }}\n        >\n          <Typography\n            variant=\"body1\"\n            color=\"#212121\"\n            onClick={() => {\n              const {\n                location: { origin },\n              } = window;\n\n              window.location.href = `${origin}${productUrl}`;\n            }}\n            sx={{\n              cursor: 'pointer',\n            }}\n          >\n            {productName}\n          </Typography>\n          <Typography variant=\"body1\" color=\"#616161\">\n            {variantSku}\n          </Typography>\n          <Box\n            sx={{\n              margin: '0 0 0.5rem 0',\n            }}\n          >\n            {optionList.length > 0 && optionsValue.length > 0 && (\n              <Box>\n                {optionsValue.map((option: any) => (\n                  <Typography\n                    sx={{\n                      fontSize: '0.75rem',\n                      lineHeight: '1.5',\n                      color: '#455A64',\n                    }}\n                    key={option.valueLabel}\n                  >\n                    {`${option.valueLabel}: ${option.valueText}`}\n                  </Typography>\n                ))}\n              </Box>\n            )}\n          </Box>\n\n          {productNote && productNote.trim().length > 0 && (\n            <Typography\n              sx={{\n                fontSize: '0.75rem',\n                color: '#ED6C02',\n                marginTop: '0.3rem',\n                marginBottom: '0.3rem',\n              }}\n            >\n              {productNote}\n            </Typography>\n          )}\n\n          <Typography\n            sx={{\n              color: '#212121',\n              fontSize: '14px',\n            }}\n          >\n            {b3Lang('shoppingList.shoppingDetailCard.price', {\n              price: showPrice(currencyFormat(price), shoppingDetail),\n            })}\n          </Typography>\n\n          <TextField\n            size=\"small\"\n            type=\"number\"\n            variant=\"filled\"\n            label={b3Lang('shoppingList.shoppingDetailCard.quantity')}\n            disabled={b2bAndBcShoppingListActionsPermissions ? isReadForApprove : true}\n            inputProps={{\n              inputMode: 'numeric',\n              pattern: '[0-9]*',\n            }}\n            value={quantity}\n            sx={{\n              margin: '0.5rem 0',\n              width: '60%',\n              maxWidth: '100px',\n              '& label': {\n                zIndex: 0,\n                fontSize: '14px',\n              },\n              '& input': {\n                fontSize: '14px',\n              },\n            }}\n            onChange={(e) => {\n              handleUpdateProductQty(shoppingDetail.id, e.target.value);\n            }}\n            onBlur={() => {\n              handleUpdateShoppingListItem(itemId);\n            }}\n          />\n          <Typography\n            sx={{\n              color: '#212121',\n              fontSize: '14px',\n            }}\n          >\n            {b3Lang('shoppingList.shoppingDetailCard.total', {\n              total: showPrice(currencyFormat(total), shoppingDetail),\n            })}\n          </Typography>\n          <Box\n            sx={{\n              marginTop: '11px',\n              textAlign: 'end',\n            }}\n            id=\"shoppingList-actionList-mobile\"\n          >\n            {b2bAndBcShoppingListActionsPermissions && (\n              <StickyNote2\n                sx={{\n                  marginRight: '0.5rem',\n                  cursor: 'pointer',\n                  color: 'rgba(0, 0, 0, 0.54)',\n                }}\n                onClick={() => {\n                  setAddNoteOpen(true);\n                  setAddNoteItemId(Number(itemId));\n\n                  if (productNote) {\n                    setNotes(productNote);\n                  }\n                }}\n              />\n            )}\n\n            {canChangeOption && (\n              <Edit\n                sx={{\n                  marginRight: canChangeOption ? '0.5rem' : '',\n                  marginLeft: canChangeOption ? '0.3rem' : '',\n                  cursor: 'pointer',\n                  color: 'rgba(0, 0, 0, 0.54)',\n                }}\n                onClick={() => {\n                  onEdit(\n                    {\n                      ...productsSearch,\n                      selectOptions: optionList,\n                      quantity,\n                    },\n                    variantId,\n                    itemId,\n                  );\n                }}\n              />\n            )}\n            {b2bAndBcShoppingListActionsPermissions && !isReadForApprove && (\n              <Delete\n                sx={{\n                  marginLeft: '0.3rem',\n                  cursor: 'pointer',\n                  color: 'rgba(0, 0, 0, 0.54)',\n                }}\n                onClick={() => {\n                  setDeleteOpen(true);\n                  onDelete(Number(itemId));\n                }}\n              />\n            )}\n          </Box>\n        </Box>\n      </CardContent>\n    </Box>\n  );\n}\n\nexport default ShoppingDetailCard;\n","import {\n  Dispatch,\n  forwardRef,\n  Ref,\n  SetStateAction,\n  useEffect,\n  useImperativeHandle,\n  useRef,\n  useState,\n} from 'react';\nimport { useB3Lang } from '@b3/lang';\nimport { Delete, Edit, StickyNote2 } from '@mui/icons-material';\nimport { Box, Grid, styled, TextField, Typography } from '@mui/material';\nimport cloneDeep from 'lodash-es/cloneDeep';\n\nimport { B3PaginationTable, GetRequestList } from '@/components/table/B3PaginationTable';\nimport { TableColumnItem } from '@/components/table/B3Table';\nimport { PRODUCT_DEFAULT_IMAGE } from '@/constants';\nimport { useMobile, useSort } from '@/hooks';\nimport { updateB2BShoppingListsItem, updateBcShoppingListsItem } from '@/shared/service/b2b';\nimport { rolePermissionSelector, useAppSelector } from '@/store';\nimport { currencyFormat, snackbar } from '@/utils';\nimport b2bGetVariantImageByVariantInfo from '@/utils/b2bGetVariantImageByVariantInfo';\nimport { getBCPrice, getDisplayPrice, getValidOptionsList } from '@/utils/b3Product/b3Product';\nimport { getProductOptionsFields } from '@/utils/b3Product/shared/config';\n\nimport B3FilterSearch from '../../../components/filter/B3FilterSearch';\n\nimport ChooseOptionsDialog from './ChooseOptionsDialog';\nimport ShoppingDetailAddNotes from './ShoppingDetailAddNotes';\nimport ShoppingDetailCard from './ShoppingDetailCard';\n\ninterface ListItem {\n  [key: string]: string;\n}\n\ninterface ProductInfoProps {\n  basePrice: number | string;\n  baseSku: string;\n  createdAt: number;\n  discount: number | string;\n  enteredInclusive: boolean;\n  id: number | string;\n  itemId: number;\n  optionList: string;\n  primaryImage: string;\n  productId: number;\n  productName: string;\n  productUrl: string;\n  quantity: number | string;\n  tax: number | string;\n  updatedAt: number;\n  variantId: number;\n  variantSku: string;\n  productsSearch: CustomFieldItems;\n  productNote: string;\n  disableCurrentCheckbox?: boolean;\n}\n\ninterface ListItemProps {\n  node: ProductInfoProps;\n}\n\ninterface ShoppingDetailTableProps {\n  shoppingListInfo: any;\n  isRequestLoading: boolean;\n  setIsRequestLoading: Dispatch<SetStateAction<boolean>>;\n  shoppingListId: number | string;\n  getShoppingListDetails: GetRequestList<SearchProps, CustomFieldItems>;\n  setCheckedArr: (values: CustomFieldItems) => void;\n  isReadForApprove: boolean;\n  isJuniorApprove: boolean;\n  allowJuniorPlaceOrder: boolean;\n  setDeleteItemId: (itemId: number | string) => void;\n  setDeleteOpen: (open: boolean) => void;\n  isB2BUser: boolean;\n  productQuoteEnabled: boolean;\n  isCanEditShoppingList: boolean;\n  role: number | string;\n}\n\ninterface SearchProps {\n  search?: string;\n  first?: number;\n  offset?: number;\n  orderBy: string;\n}\n\ninterface PaginationTableRefProps extends HTMLInputElement {\n  getList: () => void;\n  setList: (items?: ListItemProps[]) => void;\n  getSelectedValue: () => void;\n  refresh: () => void;\n}\n\nconst StyledShoppingListTableContainer = styled('div')(() => ({\n  backgroundColor: '#FFFFFF',\n  padding: '1rem',\n  borderRadius: '4px',\n  boxShadow:\n    '0px 2px 1px -1px rgba(0, 0, 0, 0.2), 0px 1px 1px rgba(0, 0, 0, 0.14), 0px 1px 3px rgba(0, 0, 0, 0.12)',\n\n  '& tbody': {\n    '& tr': {\n      '& td': {\n        verticalAlign: 'top',\n      },\n      '& td: first-of-type': {\n        paddingTop: '25px',\n      },\n    },\n    '& tr: hover': {\n      '& #shoppingList-actionList': {\n        opacity: 1,\n      },\n    },\n  },\n}));\n\nconst StyledImage = styled('img')(() => ({\n  maxWidth: '60px',\n  height: 'auto',\n  marginRight: '0.5rem',\n}));\n\nconst StyledTextField = styled(TextField)(() => ({\n  '& input': {\n    paddingTop: '12px',\n    paddingRight: '6px',\n  },\n}));\n\nconst defaultSortKey = 'updatedAt';\n\nconst sortKeys = {\n  Product: 'productName',\n  updatedAt: 'updatedAt',\n  Qty: 'quantity',\n};\n\nfunction ShoppingDetailTable(props: ShoppingDetailTableProps, ref: Ref<unknown>) {\n  const [isMobile] = useMobile();\n  const b3Lang = useB3Lang();\n\n  const {\n    shoppingListInfo,\n    isRequestLoading,\n    setIsRequestLoading,\n    shoppingListId,\n    getShoppingListDetails,\n    setCheckedArr,\n    isReadForApprove,\n    setDeleteItemId,\n    setDeleteOpen,\n    isJuniorApprove,\n    isB2BUser,\n    allowJuniorPlaceOrder,\n    productQuoteEnabled,\n    isCanEditShoppingList,\n    role,\n  } = props;\n\n  const showInclusiveTaxPrice = useAppSelector(({ global }) => global.showInclusiveTaxPrice);\n\n  const { shoppingListCreateActionsPermission, submitShoppingListPermission } =\n    useAppSelector(rolePermissionSelector);\n\n  const canShoppingListActions = isB2BUser\n    ? shoppingListCreateActionsPermission && isCanEditShoppingList\n    : true;\n  const b2bAndBcShoppingListActionsPermissions = isB2BUser ? canShoppingListActions : true;\n  const b2bSubmitShoppingListPermission = isB2BUser\n    ? submitShoppingListPermission\n    : Number(role) === 2;\n\n  const paginationTableRef = useRef<PaginationTableRefProps | null>(null);\n\n  const [chooseOptionsOpen, setSelectedOptionsOpen] = useState(false);\n  const [optionsProduct, setOptionsProduct] = useState<any>(null);\n  const [editProductItemId, setEditProductItemId] = useState<number | string | null>(null);\n  const [search, setSearch] = useState<SearchProps>({\n    orderBy: `-${sortKeys[defaultSortKey]}`,\n  });\n  const [qtyNotChangeFlag, setQtyNotChangeFlag] = useState<boolean>(true);\n  const [originProducts, setOriginProducts] = useState<ListItemProps[]>([]);\n  const [shoppingListTotalPrice, setShoppingListTotalPrice] = useState<number>(0.0);\n\n  const [addNoteOpen, setAddNoteOpen] = useState<boolean>(false);\n  const [addNoteItemId, setAddNoteItemId] = useState<number | string>('');\n  const [notes, setNotes] = useState<string>('');\n  const [disabledSelectAll, setDisabledSelectAll] = useState<boolean>(false);\n\n  const [priceHidden, setPriceHidden] = useState<boolean>(false);\n\n  const [handleSetOrderBy, order, orderBy] = useSort(sortKeys, defaultSortKey, search, setSearch);\n\n  const handleUpdateProductQty = (id: number | string, value: number | string) => {\n    if (Number(value) < 0) return;\n    const currentItem = originProducts.find((item: ListItemProps) => {\n      const { node } = item;\n\n      return node.id === id;\n    });\n\n    const currentQty = currentItem?.node?.quantity || '';\n    setQtyNotChangeFlag(Number(currentQty) === Number(value));\n\n    const listItems: ListItemProps[] = paginationTableRef.current?.getList() || [];\n    const newListItems = listItems?.map((item: ListItemProps) => {\n      const { node } = item;\n      if (node?.id === id) {\n        node.quantity = `${Number(value)}`;\n        node.disableCurrentCheckbox = Number(value) === 0;\n      }\n\n      return item;\n    });\n\n    const nonNumberProducts = newListItems.filter(\n      (item: ListItemProps) => Number(item.node.quantity) === 0,\n    );\n    setDisabledSelectAll(nonNumberProducts.length === newListItems.length);\n    paginationTableRef.current?.setList([...newListItems]);\n  };\n\n  const initSearch = () => {\n    paginationTableRef.current?.refresh();\n  };\n\n  useImperativeHandle(ref, () => ({\n    initSearch,\n    getList: () => paginationTableRef.current?.getList(),\n    setList: () => paginationTableRef.current?.setList(),\n    getSelectedValue: () => paginationTableRef.current?.getSelectedValue(),\n  }));\n\n  const handleSearchProduct = async (q: string) => {\n    setSearch({\n      ...search,\n      search: q,\n    });\n  };\n\n  const handleChooseOptionsDialogCancel = () => {\n    setEditProductItemId('');\n    setSelectedOptionsOpen(false);\n  };\n\n  const handleOpenProductEdit = (product: any, _: number | string, itemId: number | string) => {\n    setEditProductItemId(itemId);\n    setOptionsProduct(product);\n    setSelectedOptionsOpen(true);\n  };\n\n  const handleChooseOptionsDialogConfirm = async (products: CustomFieldItems[]) => {\n    setIsRequestLoading(true);\n    const updateShoppingListItem = isB2BUser\n      ? updateB2BShoppingListsItem\n      : updateBcShoppingListsItem;\n    try {\n      const newOptionLists = getValidOptionsList(products[0].newSelectOptionList, products[0]);\n      const data = {\n        itemId: editProductItemId,\n        shoppingListId,\n        itemData: {\n          variantId: products[0].variantId,\n          quantity: products[0].quantity,\n          optionList: newOptionLists || [],\n        },\n      };\n\n      await updateShoppingListItem(data);\n      setSelectedOptionsOpen(false);\n      setEditProductItemId('');\n      snackbar.success(b3Lang('shoppingList.table.productUpdated'));\n      initSearch();\n    } finally {\n      setIsRequestLoading(false);\n    }\n  };\n\n  const handleUpdateShoppingListItem = async (itemId: number | string) => {\n    const listItems: ListItemProps[] = paginationTableRef.current?.getList() || [];\n    const currentItem = listItems.find((item: ListItemProps) => {\n      const { node } = item;\n\n      return node.itemId === itemId;\n    });\n    let currentNode;\n\n    if (currentItem) {\n      currentNode = currentItem.node;\n    }\n\n    const options = JSON.parse(currentNode?.optionList || '[]');\n\n    const optionsList = options.map(\n      (option: { option_id: number | string; option_value: number | string }) => ({\n        optionId: option.option_id,\n        optionValue: option.option_value,\n      }),\n    );\n\n    const itemData: CustomFieldItems = {\n      variantId: currentNode?.variantId,\n      quantity: currentNode?.quantity ? Number(currentNode.quantity) : 0,\n      optionList: optionsList || [],\n      productNote: notes,\n    };\n\n    const data = {\n      itemId,\n      shoppingListId,\n      itemData,\n    };\n\n    const updateShoppingListItem = isB2BUser\n      ? updateB2BShoppingListsItem\n      : updateBcShoppingListsItem;\n\n    await updateShoppingListItem(data);\n  };\n\n  const handleUpdateShoppingListItemQty = async (itemId: number | string) => {\n    if (qtyNotChangeFlag) return;\n    setIsRequestLoading(true);\n    try {\n      await handleUpdateShoppingListItem(itemId);\n      snackbar.success(b3Lang('shoppingList.table.quantityUpdated'));\n      setQtyNotChangeFlag(true);\n      initSearch();\n    } finally {\n      setIsRequestLoading(false);\n    }\n  };\n\n  const getSelectCheckbox = (selectCheckbox: Array<string | number>) => {\n    if (selectCheckbox.length > 0) {\n      const productList = paginationTableRef.current?.getList() || [];\n      const checkedItems: CustomFieldItems[] = [];\n      selectCheckbox.forEach((item: number | string) => {\n        const newItems = productList.find((product: ListItemProps) => {\n          const { node } = product;\n\n          return node.id === item;\n        });\n\n        if (newItems) checkedItems.push(newItems);\n      });\n\n      setCheckedArr([...checkedItems]);\n    } else {\n      setCheckedArr([]);\n    }\n  };\n\n  const handleCancelAddNotesClick = () => {\n    setAddNoteOpen(false);\n    setAddNoteItemId('');\n    setNotes('');\n  };\n\n  const handleAddItemNotesClick = async () => {\n    setIsRequestLoading(true);\n    try {\n      handleCancelAddNotesClick();\n      await handleUpdateShoppingListItem(addNoteItemId);\n      snackbar.success(b3Lang('shoppingList.table.productNotesUpdated'));\n      initSearch();\n    } finally {\n      setIsRequestLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (shoppingListInfo) {\n      const {\n        products: { edges },\n        grandTotal,\n        totalTax,\n      } = shoppingListInfo;\n\n      const NewShoppingListTotalPrice = showInclusiveTaxPrice\n        ? Number(grandTotal)\n        : Number(grandTotal) - Number(totalTax) || 0.0;\n\n      const isPriceHidden = edges.some((item: CustomFieldItems) => {\n        if (item?.node?.productsSearch) {\n          return item.node.productsSearch?.isPriceHidden || false;\n        }\n\n        return false;\n      });\n\n      setPriceHidden(isPriceHidden);\n      setOriginProducts(cloneDeep(edges));\n      setShoppingListTotalPrice(NewShoppingListTotalPrice);\n    }\n  }, [shoppingListInfo, showInclusiveTaxPrice]);\n\n  useEffect(() => {\n    if (shoppingListInfo) {\n      const {\n        products: { edges },\n      } = shoppingListInfo;\n      const nonNumberProducts = edges.filter((item: ListItemProps) => item.node.quantity === 0);\n      setDisabledSelectAll(nonNumberProducts.length === edges.length);\n    }\n  }, [shoppingListInfo]);\n\n  const showPrice = (price: string, row: CustomFieldItems): string | number => {\n    const {\n      productsSearch: { isPriceHidden },\n    } = row;\n    if (isPriceHidden) return '';\n    return getDisplayPrice({\n      price,\n      productInfo: row,\n      showText: isPriceHidden ? '' : price,\n      forcedSkip: true,\n    });\n  };\n\n  const columnItems: TableColumnItem<ListItem>[] = [\n    {\n      key: 'Product',\n      title: b3Lang('shoppingList.table.product'),\n      render: (row: CustomFieldItems) => {\n        const product: any = {\n          ...row.productsSearch,\n          selectOptions: row.optionList,\n        };\n        const productFields = getProductOptionsFields(product, {});\n\n        const optionList = JSON.parse(row.optionList);\n        const optionsValue: CustomFieldItems[] = productFields.filter((item) => item.valueText);\n\n        const currentVariants = product.variants || [];\n        const currentImage =\n          b2bGetVariantImageByVariantInfo(currentVariants, {\n            variantId: row.variantId,\n            variantSku: row.variantSku,\n          }) || row.primaryImage;\n\n        return (\n          <Box\n            sx={{\n              display: 'flex',\n              alignItems: 'flex-start',\n            }}\n          >\n            <StyledImage\n              src={currentImage || PRODUCT_DEFAULT_IMAGE}\n              alt=\"Product-img\"\n              loading=\"lazy\"\n            />\n            <Box>\n              <Typography\n                variant=\"body1\"\n                color=\"#212121\"\n                onClick={() => {\n                  const {\n                    location: { origin },\n                  } = window;\n\n                  window.location.href = `${origin}${row.productUrl}`;\n                }}\n                sx={{\n                  cursor: 'pointer',\n                }}\n              >\n                {row.productName}\n              </Typography>\n              <Typography variant=\"body1\" color=\"#616161\">\n                {row.variantSku}\n              </Typography>\n              {optionList.length > 0 && optionsValue.length > 0 && (\n                <Box>\n                  {optionsValue.map((option: any) => (\n                    <Typography\n                      sx={{\n                        fontSize: '0.75rem',\n                        lineHeight: '1.5',\n                        color: '#455A64',\n                      }}\n                      key={option.valueLabel}\n                    >\n                      {`${option.valueLabel}: ${option.valueText}`}\n                    </Typography>\n                  ))}\n                </Box>\n              )}\n\n              {row?.productNote && row?.productNote.trim().length > 0 && (\n                <Typography\n                  sx={{\n                    fontSize: '0.75rem',\n                    color: '#ED6C02',\n                    marginTop: '0.3rem',\n                  }}\n                >\n                  {row.productNote}\n                </Typography>\n              )}\n            </Box>\n          </Box>\n        );\n      },\n      width: '45%',\n      isSortable: true,\n    },\n    {\n      key: 'Price',\n      title: b3Lang('shoppingList.table.price'),\n      render: (row: CustomFieldItems) => {\n        const { basePrice, taxPrice = 0 } = row;\n        const inTaxPrice = getBCPrice(Number(basePrice), Number(taxPrice));\n\n        return (\n          <Typography\n            sx={{\n              padding: '12px 0',\n            }}\n          >\n            {showPrice(currencyFormat(inTaxPrice), row)}\n          </Typography>\n        );\n      },\n      width: '15%',\n      style: {\n        textAlign: 'right',\n      },\n    },\n    {\n      key: 'Qty',\n      title: b3Lang('shoppingList.table.quantity'),\n      render: (row) => (\n        <StyledTextField\n          size=\"small\"\n          type=\"number\"\n          variant=\"filled\"\n          sx={{\n            width: '72px',\n          }}\n          disabled={\n            b2bAndBcShoppingListActionsPermissions ? isReadForApprove || isJuniorApprove : true\n          }\n          value={row.quantity}\n          inputProps={{\n            inputMode: 'numeric',\n            pattern: '[0-9]*',\n          }}\n          onChange={(e) => {\n            handleUpdateProductQty(row.id, e.target.value);\n          }}\n          onBlur={() => {\n            handleUpdateShoppingListItemQty(row.itemId);\n          }}\n        />\n      ),\n      width: '15%',\n      style: {\n        textAlign: 'right',\n      },\n      isSortable: true,\n    },\n    {\n      key: 'Total',\n      title: b3Lang('shoppingList.table.total'),\n      render: (row: CustomFieldItems) => {\n        const {\n          basePrice,\n          quantity,\n          itemId,\n          productsSearch: { options },\n          taxPrice = 0,\n        } = row;\n\n        const inTaxPrice = getBCPrice(Number(basePrice), Number(taxPrice));\n\n        const totalPrice = inTaxPrice * Number(quantity);\n\n        const optionList = options || JSON.parse(row.optionList);\n\n        const canChangeOption =\n          optionList.length > 0 &&\n          !isReadForApprove &&\n          !isJuniorApprove &&\n          b2bAndBcShoppingListActionsPermissions;\n\n        return (\n          <Box>\n            <Typography\n              sx={{\n                padding: '12px 0',\n              }}\n            >\n              {showPrice(currencyFormat(totalPrice), row)}\n            </Typography>\n            <Box\n              sx={{\n                marginTop: '1rem',\n                opacity: 0,\n                textAlign: isMobile ? 'end' : 'start',\n                display: 'flex',\n                justifyContent: 'flex-end',\n              }}\n              id=\"shoppingList-actionList\"\n            >\n              {canShoppingListActions && (\n                <>\n                  <Grid\n                    item\n                    sx={{\n                      marginRight: '0.5rem',\n                      minWidth: '32px',\n                    }}\n                  >\n                    <StickyNote2\n                      sx={{\n                        cursor: 'pointer',\n                        color: 'rgba(0, 0, 0, 0.54)',\n                      }}\n                      onClick={() => {\n                        setAddNoteOpen(true);\n                        setAddNoteItemId(Number(itemId));\n\n                        if (row.productNote) {\n                          setNotes(row.productNote);\n                        }\n                      }}\n                    />\n                  </Grid>\n\n                  <Grid\n                    item\n                    sx={{\n                      marginRight: canChangeOption ? '0.5rem' : '',\n                      marginLeft: canChangeOption ? '0.3rem' : '',\n                    }}\n                  >\n                    {canChangeOption && (\n                      <Edit\n                        sx={{\n                          cursor: 'pointer',\n                          color: 'rgba(0, 0, 0, 0.54)',\n                        }}\n                        onClick={() => {\n                          const { productsSearch, variantId, itemId, optionList, quantity } = row;\n\n                          handleOpenProductEdit(\n                            {\n                              ...productsSearch,\n                              selectOptions: optionList,\n                              quantity,\n                            },\n                            variantId,\n                            itemId,\n                          );\n                        }}\n                      />\n                    )}\n                  </Grid>\n                  <Grid\n                    item\n                    sx={{\n                      marginLeft: '0.3rem',\n                    }}\n                  >\n                    {b2bAndBcShoppingListActionsPermissions &&\n                      !isReadForApprove &&\n                      !isJuniorApprove && (\n                        <Delete\n                          sx={{\n                            cursor: 'pointer',\n                            color: 'rgba(0, 0, 0, 0.54)',\n                          }}\n                          onClick={() => {\n                            setDeleteOpen(true);\n                            setDeleteItemId(Number(itemId));\n                          }}\n                        />\n                      )}\n                  </Grid>\n                </>\n              )}\n            </Box>\n          </Box>\n        );\n      },\n      width: '15%',\n      style: {\n        textAlign: 'right',\n      },\n    },\n  ];\n\n  return (\n    <StyledShoppingListTableContainer>\n      <Box\n        sx={{\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'space-between',\n          margin: '0 0 1rem 0',\n        }}\n      >\n        <Typography\n          sx={{\n            fontSize: '24px',\n          }}\n        >\n          {b3Lang('shoppingList.table.totalProductCount', {\n            quantity: shoppingListInfo?.products?.totalCount || 0,\n          })}\n        </Typography>\n        <Typography\n          sx={{\n            fontSize: '24px',\n          }}\n        >\n          {priceHidden ? '' : currencyFormat(shoppingListTotalPrice || 0.0)}\n        </Typography>\n      </Box>\n      <Box\n        sx={{\n          marginBottom: '5px',\n        }}\n      >\n        <B3FilterSearch\n          searchBGColor=\"rgba(0, 0, 0, 0.06)\"\n          handleChange={(e) => {\n            handleSearchProduct(e);\n          }}\n        />\n      </Box>\n\n      <B3PaginationTable\n        ref={paginationTableRef}\n        columnItems={columnItems}\n        rowsPerPageOptions={[10, 20, 50]}\n        getRequestList={getShoppingListDetails}\n        searchParams={search}\n        isCustomRender={false}\n        showCheckbox\n        showSelectAllCheckbox\n        applyAllDisableCheckbox={false}\n        disableCheckbox={\n          disabledSelectAll ||\n          (b2bSubmitShoppingListPermission\n            ? !(allowJuniorPlaceOrder || productQuoteEnabled)\n            : (isReadForApprove || isJuniorApprove) && b2bAndBcShoppingListActionsPermissions)\n        }\n        hover\n        labelRowsPerPage={b3Lang('shoppingList.table.itemsPerPage')}\n        showBorder={false}\n        requestLoading={setIsRequestLoading}\n        getSelectCheckbox={getSelectCheckbox}\n        itemIsMobileSpacing={0}\n        noDataText={b3Lang('shoppingList.table.noProductsFound')}\n        sortDirection={order}\n        orderBy={orderBy}\n        sortByFn={handleSetOrderBy}\n        pageType=\"shoppingListDetailsTable\"\n        renderItem={(row, index, checkBox) => (\n          <ShoppingDetailCard\n            len={shoppingListInfo?.products?.edges.length || 0}\n            item={row}\n            itemIndex={index}\n            showPrice={showPrice}\n            onEdit={handleOpenProductEdit}\n            onDelete={setDeleteItemId}\n            checkBox={checkBox}\n            setDeleteOpen={setDeleteOpen}\n            setAddNoteOpen={setAddNoteOpen}\n            setAddNoteItemId={setAddNoteItemId}\n            setNotes={setNotes}\n            handleUpdateProductQty={handleUpdateProductQty}\n            handleUpdateShoppingListItem={handleUpdateShoppingListItemQty}\n            isReadForApprove={isReadForApprove || isJuniorApprove}\n            b2bAndBcShoppingListActionsPermissions={b2bAndBcShoppingListActionsPermissions}\n          />\n        )}\n      />\n\n      <ChooseOptionsDialog\n        isOpen={chooseOptionsOpen}\n        isLoading={isRequestLoading}\n        setIsLoading={setIsRequestLoading}\n        product={optionsProduct}\n        type=\"shoppingList\"\n        onCancel={handleChooseOptionsDialogCancel}\n        onConfirm={handleChooseOptionsDialogConfirm}\n        isEdit\n        isB2BUser={isB2BUser}\n      />\n\n      <ShoppingDetailAddNotes\n        open={addNoteOpen}\n        notes={notes}\n        setNotes={setNotes}\n        handleCancelAddNotesClick={handleCancelAddNotesClick}\n        handleAddItemNotesClick={handleAddItemNotesClick}\n      />\n    </StyledShoppingListTableContainer>\n  );\n}\n\nexport default forwardRef(ShoppingDetailTable);\n","import { useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { useB3Lang } from '@b3/lang';\nimport { Box, Grid, useTheme } from '@mui/material';\n\nimport B3Spin from '@/components/spin/B3Spin';\nimport { useMobile } from '@/hooks';\nimport { GlobalContext } from '@/shared/global';\nimport {\n  deleteB2BShoppingListItem,\n  deleteBcShoppingListItem,\n  getB2BJuniorPlaceOrder,\n  getB2BShoppingListDetails,\n  getBcShoppingListDetails,\n  searchB2BProducts,\n  searchBcProducts,\n  updateB2BShoppingList,\n  updateBcShoppingList,\n} from '@/shared/service/b2b';\nimport {\n  activeCurrencyInfoSelector,\n  isB2BUserSelector,\n  rolePermissionSelector,\n  useAppSelector,\n} from '@/store';\nimport { CustomerRole } from '@/types';\nimport { channelId, snackbar, verifyLevelPermission } from '@/utils';\nimport { b2bPermissionsMap } from '@/utils/b3CheckPermissions/config';\nimport { calculateProductListPrice, getBCPrice } from '@/utils/b3Product/b3Product';\nimport {\n  conversionProductsList,\n  CustomerInfoProps,\n  ListItemProps,\n  ProductsProps,\n  SearchProps,\n  ShoppingListInfoProps,\n} from '@/utils/b3Product/shared/config';\n\nimport { type PageProps } from '../PageProps';\n\nimport AddToShoppingList from './components/AddToShoppingList';\nimport ReAddToCart from './components/ReAddToCart';\nimport ShoppingDetailDeleteItems from './components/ShoppingDetailDeleteItems';\nimport ShoppingDetailFooter from './components/ShoppingDetailFooter';\nimport ShoppingDetailHeader from './components/ShoppingDetailHeader';\nimport ShoppingDetailTable from './components/ShoppingDetailTable';\nimport {\n  ShoppingListDetailsContext,\n  ShoppingListDetailsProvider,\n} from './context/ShoppingListDetailsContext';\n\ninterface TableRefProps extends HTMLInputElement {\n  initSearch: () => void;\n}\n\ninterface UpdateShoppingListParamsProps {\n  id: number;\n  name: string;\n  description: string;\n  status?: number;\n  channelId?: number;\n}\n\nconst calculateSubTotal = (checkedArr: CustomFieldItems) => {\n  if (checkedArr.length > 0) {\n    let total = 0.0;\n\n    checkedArr.forEach((item: ListItemProps) => {\n      const {\n        node: { quantity, basePrice, taxPrice },\n      } = item;\n\n      const price = getBCPrice(Number(basePrice), Number(taxPrice));\n\n      total += price * Number(quantity);\n    });\n\n    return (1000 * total) / 1000;\n  }\n  return 0.0;\n};\n\nfunction useData() {\n  const { id = '' } = useParams();\n  const {\n    state: { openAPPParams, productQuoteEnabled = false },\n  } = useContext(GlobalContext);\n  const isB2BUser = useAppSelector(isB2BUserSelector);\n  const { currency_code: currencyCode } = useAppSelector(activeCurrencyInfoSelector);\n  const role = useAppSelector(({ company }) => company.customer.role);\n  const companyId = useAppSelector(({ company }) => company.companyInfo.id);\n  const customerGroupId = useAppSelector(({ company }) => company.customer.customerGroupId);\n\n  const isAgenting = useAppSelector(({ b2bFeatures }) => b2bFeatures.masqueradeCompany.isAgenting);\n\n  const theme = useTheme();\n  const primaryColor = theme.palette.primary.main;\n\n  const {\n    shoppingListCreateActionsPermission,\n    purchasabilityPermission,\n    submitShoppingListPermission,\n  } = useAppSelector(rolePermissionSelector);\n\n  const isCanAddToCart = isB2BUser ? purchasabilityPermission : true;\n\n  const getProducts = async (productIds: number[]) => {\n    const options = { productIds, currencyCode, companyId, customerGroupId };\n    const { productsSearch } = isB2BUser\n      ? await searchB2BProducts(options)\n      : await searchBcProducts(options);\n\n    return conversionProductsList(productsSearch);\n  };\n\n  const getShoppingList = (params: SearchProps) => {\n    const options = { ...params, id };\n\n    return isB2BUser ? getB2BShoppingListDetails(options) : getBcShoppingListDetails(options);\n  };\n\n  const deleteShoppingListItem = (itemId: string | number) => {\n    const options = { itemId, shoppingListId: id };\n\n    return isB2BUser ? deleteB2BShoppingListItem(options) : deleteBcShoppingListItem(options);\n  };\n\n  return {\n    id,\n    openAPPParams,\n    productQuoteEnabled,\n    isB2BUser,\n    role,\n    isAgenting,\n    primaryColor,\n    shoppingListCreateActionsPermission,\n    submitShoppingListPermission,\n    isCanAddToCart,\n    getProducts,\n    getShoppingList,\n    deleteShoppingListItem,\n  };\n}\n\n// shoppingList status: 0 -- Approved; 20 -- Rejected; 30 -- Draft; 40 -- Ready for approval\n// 0: Admin, 1: Senior buyer, 2: Junior buyer, 3: Super admin\n\nfunction ShoppingListDetails({ setOpenPage }: PageProps) {\n  const {\n    id,\n    openAPPParams,\n    productQuoteEnabled,\n    isB2BUser,\n    role,\n    isAgenting,\n    primaryColor,\n    shoppingListCreateActionsPermission,\n    submitShoppingListPermission,\n    isCanAddToCart,\n    getProducts,\n    getShoppingList,\n    deleteShoppingListItem,\n  } = useData();\n  const navigate = useNavigate();\n  const [isMobile] = useMobile();\n  const { dispatch } = useContext(ShoppingListDetailsContext);\n\n  const b3Lang = useB3Lang();\n\n  const tableRef = useRef<TableRefProps | null>(null);\n\n  const [checkedArr, setCheckedArr] = useState<CustomFieldItems>([]);\n  const [shoppingListInfo, setShoppingListInfo] = useState<null | ShoppingListInfoProps>(null);\n  const [customerInfo, setCustomerInfo] = useState<null | CustomerInfoProps>(null);\n  const [isRequestLoading, setIsRequestLoading] = useState(false);\n\n  const [deleteOpen, setDeleteOpen] = useState<boolean>(false);\n  const [deleteItemId, setDeleteItemId] = useState<number | string>('');\n\n  const [validateSuccessProducts, setValidateSuccessProducts] = useState<ProductsProps[]>([]);\n  const [validateFailureProducts, setValidateFailureProducts] = useState<ProductsProps[]>([]);\n\n  const [allowJuniorPlaceOrder, setAllowJuniorPlaceOrder] = useState<boolean>(false);\n  const [isCanEditShoppingList, setIsCanEditShoppingList] = useState<boolean>(true);\n\n  const b2bAndBcShoppingListActionsPermissions = isB2BUser\n    ? shoppingListCreateActionsPermission && isCanEditShoppingList\n    : true;\n\n  const submitShoppingList = useMemo(() => {\n    if (isB2BUser && shoppingListInfo) {\n      const { companyInfo, customerInfo } = shoppingListInfo;\n      const { submitShoppingListPermission: submitShoppingListPermissionCode } = b2bPermissionsMap;\n      const submitShoppingListPermissionLevel = verifyLevelPermission({\n        code: submitShoppingListPermissionCode,\n        companyId: Number(companyInfo?.companyId || 0),\n        userId: Number(customerInfo?.userId || 0),\n      });\n\n      return submitShoppingListPermissionLevel;\n    }\n\n    return submitShoppingListPermission;\n  }, [submitShoppingListPermission, isB2BUser, shoppingListInfo]);\n  const b2bSubmitShoppingListPermission = isB2BUser\n    ? submitShoppingList\n    : role === CustomerRole.JUNIOR_BUYER;\n\n  const isJuniorApprove = shoppingListInfo?.status === 0 && b2bSubmitShoppingListPermission;\n\n  const isReadForApprove = shoppingListInfo?.status === 40 || shoppingListInfo?.status === 20;\n\n  const goToShoppingLists = () => {\n    navigate('/shoppingLists');\n  };\n\n  useEffect(() => {\n    dispatch({\n      type: 'init',\n      payload: {\n        id: parseInt(id, 10) || 0,\n      },\n    });\n    // disabling as we don't need a dispatcher here\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [id]);\n\n  const handleGetProductsById = async (listProducts: ListItemProps[]) => {\n    if (listProducts.length > 0) {\n      try {\n        const productIds: number[] = [];\n        listProducts.forEach((item) => {\n          const { node } = item;\n          if (!productIds.includes(node.productId)) {\n            productIds.push(node.productId);\n          }\n        });\n\n        const newProductsSearch = await getProducts(productIds);\n\n        listProducts.forEach((item) => {\n          const { node } = item;\n\n          const productInfo = newProductsSearch.find((search: CustomFieldItems) => {\n            const { id: productId } = search;\n\n            return node.productId === productId;\n          });\n\n          node.productsSearch = productInfo || {};\n          node.productName = productInfo?.name || node.productName;\n          node.productUrl = productInfo?.productUrl || node.productUrl;\n\n          node.disableCurrentCheckbox = false;\n          if (node.quantity === 0) {\n            node.disableCurrentCheckbox = true;\n          }\n        });\n\n        return listProducts;\n      } catch (err: any) {\n        snackbar.error(err);\n      }\n    }\n\n    return [];\n  };\n\n  const getShoppingListDetails = async (params: SearchProps) => {\n    const shoppingListDetailInfo = await getShoppingList(params);\n\n    const {\n      products: { edges, totalCount },\n    } = shoppingListDetailInfo;\n\n    const listProducts = await handleGetProductsById(edges);\n\n    await calculateProductListPrice(listProducts, '2');\n\n    if (isB2BUser) setCustomerInfo(shoppingListDetailInfo.customerInfo);\n    setShoppingListInfo(shoppingListDetailInfo);\n\n    if (!listProducts) {\n      return {\n        edges: [],\n        totalCount: 0,\n      };\n    }\n\n    return {\n      edges: listProducts,\n      totalCount,\n    };\n  };\n\n  const handleUpdateShoppingList = async (status: number) => {\n    setIsRequestLoading(true);\n    try {\n      const params: UpdateShoppingListParamsProps = {\n        id: Number(id),\n        name: shoppingListInfo?.name || '',\n        description: shoppingListInfo?.description || '',\n      };\n\n      if (isB2BUser) {\n        await updateB2BShoppingList({\n          ...params,\n          status,\n        });\n      } else {\n        await updateBcShoppingList({\n          ...params,\n          channelId,\n        });\n      }\n\n      snackbar.success(b3Lang('shoppingList.shoppingListStatusUpdated'), {\n        isClose: true,\n      });\n      tableRef.current?.initSearch();\n    } finally {\n      setIsRequestLoading(false);\n    }\n  };\n\n  const updateList = () => {\n    tableRef.current?.initSearch();\n  };\n\n  const handleCancelClick = () => {\n    setDeleteOpen(false);\n    setDeleteItemId('');\n  };\n\n  const handleDeleteItems = async (itemId: number | string = '') => {\n    setIsRequestLoading(true);\n\n    try {\n      if (itemId) {\n        await deleteShoppingListItem(itemId);\n\n        if (checkedArr.length > 0) {\n          const newCheckedArr = checkedArr.filter((item: ListItemProps) => {\n            const { itemId: checkedItemId } = item.node;\n\n            return itemId !== checkedItemId;\n          });\n\n          setCheckedArr([...newCheckedArr]);\n        }\n      } else {\n        if (checkedArr.length === 0) return;\n        checkedArr.forEach(async (item: ListItemProps) => {\n          const { node } = item;\n\n          await deleteShoppingListItem(node.itemId);\n        });\n\n        setCheckedArr([]);\n      }\n\n      snackbar.success(b3Lang('shoppingList.productRemoved'));\n    } finally {\n      setIsRequestLoading(false);\n      updateList();\n    }\n  };\n\n  const handleDeleteProductClick = async () => {\n    await handleDeleteItems(Number(deleteItemId));\n    await handleCancelClick();\n  };\n\n  const getJuniorPlaceOrder = async () => {\n    const {\n      storeConfigSwitchStatus: { isEnabled },\n    } = await getB2BJuniorPlaceOrder();\n\n    setAllowJuniorPlaceOrder(isEnabled === '1' && isCanAddToCart);\n  };\n\n  useEffect(() => {\n    if (isJuniorApprove) getJuniorPlaceOrder();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isJuniorApprove]);\n\n  useEffect(() => {\n    if (isB2BUser && shoppingListInfo) {\n      const { companyInfo, customerInfo } = shoppingListInfo;\n\n      const { shoppingListCreateActionsPermission } = b2bPermissionsMap;\n      const shoppingListActionsPermission = verifyLevelPermission({\n        code: shoppingListCreateActionsPermission,\n        companyId: Number(companyInfo?.companyId || 0),\n        userId: Number(customerInfo?.userId || 0),\n      });\n\n      setIsCanEditShoppingList(shoppingListActionsPermission);\n    }\n  }, [shoppingListInfo, isB2BUser]);\n\n  return (\n    <>\n      <Box\n        sx={{\n          display: 'flex',\n          flexDirection: 'column',\n          flex: 1,\n        }}\n      >\n        <ShoppingDetailHeader\n          isB2BUser={isB2BUser}\n          shoppingListInfo={shoppingListInfo}\n          customerInfo={customerInfo}\n          role={role}\n          goToShoppingLists={goToShoppingLists}\n          handleUpdateShoppingList={handleUpdateShoppingList}\n          setOpenPage={setOpenPage}\n          isAgenting={isAgenting}\n          openAPPParams={openAPPParams}\n          customColor={primaryColor}\n        />\n\n        <Grid\n          container\n          spacing={2}\n          sx={{\n            marginTop: '0',\n            overflow: 'auto',\n            flexWrap: isMobile ? 'wrap' : 'nowrap',\n            paddingBottom: '20px',\n            marginBottom: isMobile ? '6rem' : 0,\n          }}\n        >\n          <Box\n            sx={\n              isMobile\n                ? {\n                    flexBasis: '100%',\n                    pl: '16px',\n                  }\n                : {\n                    flexBasis: '690px',\n                    flexGrow: 1,\n                    ml: '16px',\n                    pt: '16px',\n                  }\n            }\n          >\n            <B3Spin isSpinning={isRequestLoading} spinningHeight=\"auto\">\n              <Grid\n                item\n                sx={\n                  isMobile\n                    ? {\n                        flexBasis: '100%',\n                      }\n                    : {\n                        flexBasis: '690px',\n                        flexGrow: 1,\n                      }\n                }\n              >\n                <ShoppingDetailTable\n                  ref={tableRef}\n                  isReadForApprove={isReadForApprove}\n                  isJuniorApprove={isJuniorApprove}\n                  allowJuniorPlaceOrder={allowJuniorPlaceOrder}\n                  setCheckedArr={setCheckedArr}\n                  shoppingListInfo={shoppingListInfo}\n                  isRequestLoading={isRequestLoading}\n                  setIsRequestLoading={setIsRequestLoading}\n                  shoppingListId={id}\n                  getShoppingListDetails={getShoppingListDetails}\n                  setDeleteOpen={setDeleteOpen}\n                  setDeleteItemId={setDeleteItemId}\n                  isB2BUser={isB2BUser}\n                  productQuoteEnabled={productQuoteEnabled}\n                  isCanEditShoppingList={isCanEditShoppingList}\n                  role={role}\n                />\n              </Grid>\n            </B3Spin>\n          </Box>\n\n          <Grid\n            item\n            sx={\n              isMobile\n                ? {\n                    flexBasis: '100%',\n                  }\n                : {\n                    flexBasis: '340px',\n                  }\n            }\n          >\n            {b2bAndBcShoppingListActionsPermissions && !isReadForApprove && !isJuniorApprove && (\n              <AddToShoppingList\n                updateList={updateList}\n                type=\"shoppingList\"\n                isB2BUser={isB2BUser}\n              />\n            )}\n          </Grid>\n        </Grid>\n\n        {!isReadForApprove &&\n          (allowJuniorPlaceOrder || productQuoteEnabled || !isJuniorApprove) && (\n            <ShoppingDetailFooter\n              shoppingListInfo={shoppingListInfo}\n              allowJuniorPlaceOrder={allowJuniorPlaceOrder}\n              checkedArr={checkedArr}\n              selectedSubTotal={calculateSubTotal(checkedArr)}\n              setLoading={setIsRequestLoading}\n              setDeleteOpen={setDeleteOpen}\n              setValidateFailureProducts={setValidateFailureProducts}\n              setValidateSuccessProducts={setValidateSuccessProducts}\n              isB2BUser={isB2BUser}\n              customColor={primaryColor}\n              isCanEditShoppingList={isCanEditShoppingList}\n              role={role}\n            />\n          )}\n      </Box>\n\n      <ReAddToCart\n        shoppingListInfo={shoppingListInfo}\n        role={role}\n        products={validateFailureProducts}\n        successProducts={validateSuccessProducts.length}\n        allowJuniorPlaceOrder={allowJuniorPlaceOrder}\n        setValidateFailureProducts={setValidateFailureProducts}\n        setValidateSuccessProducts={setValidateSuccessProducts}\n        textAlign={isMobile ? 'left' : 'right'}\n      />\n\n      <ShoppingDetailDeleteItems\n        open={deleteOpen}\n        handleCancelClick={handleCancelClick}\n        handleDeleteProductClick={handleDeleteProductClick}\n      />\n    </>\n  );\n}\n\nfunction ShoppingListDetailsContent({ setOpenPage }: PageProps) {\n  return (\n    <ShoppingListDetailsProvider>\n      <ShoppingListDetails setOpenPage={setOpenPage} />\n    </ShoppingListDetailsProvider>\n  );\n}\n\nexport default ShoppingListDetailsContent;\n"],"names":["B3QuantityTextField","props","isMobile","useMobile","disabled","label","value","maxQuantity","minQuantity","isStock","stock","hiddenLabel","onChange","sx","validMessage","setValidMessage","useState","validateQuantity","useCallback","quantity","handleChange","handleBlur","useEffect","jsx","StyledNumberNoTopTextField","e","AddToShoppingList","id","useContext","ShoppingListDetailsContext","companyStatus","useAppSelector","company","updateList","isB2BUser","pageType","b3Lang","useB3Lang","isOpenBulkLoadCSV","setIsOpenBulkLoadCSV","isLoading","setIsLoading","blockPendingAccountViewPrice","useBlockPendingAccountViewPrice","addItemsToShoppingList","addProductToShoppingList","addProductToBcShoppingList","addToList","products","dispatchEvent","items","product","getValidOptionsList","res","snackbar","quickAddToList","getValidProducts","notPurchaseSku","productItems","notAddAble","item","currentProduct","qty","option","purchasingDisabled","variantSku","variantId","productId","modifiers","defaultModifiers","getAllModifierDefaultValue","modifier","optionsList","type","defaultValue","key","handleCSVAddToList","productsData","validProduct","handleOpenUploadDiag","Card","CardContent","jsxs","Box","Typography","SearchProduct","Divider","QuickAdd","CustomButton","UploadFileIcon","B3Upload","Flex","styled","isHeader","FlexItem","width","padding","flexBasis","flexDirection","alignItems","textAlignLocation","ProductHead","ProductImage","defaultItemStyle","mobileItemStyle","ReAddToCart","shoppingListInfo","successProducts","allowJuniorPlaceOrder","setValidateFailureProducts","setValidateSuccessProducts","textAlign","submitShoppingListPermission","rolePermissionSelector","isOpen","setOpen","loading","setLoading","decimalPlaces","activeCurrencyInfoSelector","itemStyle","handleUpdateProductQty","index","isValid","newProduct","calculateProduct","setModifierQtyPrice","handleCancelClicked","deleteProduct","handRightClick","lineItems","addLineItems","callCart","CHECKOUT_URL","successTip","CART_URL","b3TriggerCartNumber","handleClearNoStock","requestArr","quantityNumber","_a","B3Dialog","Grid","Alert","B3Spin","primaryImage","productName","optionList","productsSearch","basePrice","price","total","productFields","getProductOptionsFields","newOptionList","optionsValue","PRODUCT_DEFAULT_IMAGE","currencyFormat","Delete","ShoppingDetailDeleteItems","open","handleCancelClick","handleDeleteProductClick","ShoppingDetailFooter","productQuoteEnabled","GlobalContext","isAgenting","b2bFeatures","companyId","customerGroupId","shoppingListCreateActionsPermission","purchasabilityPermission","ref","useRef","setIsOpen","cartEntityId","Cookies","containerStyle","checkedArr","selectedSubTotal","setDeleteOpen","customColor","isCanEditShoppingList","role","b2bShoppingListActionsPermission","isCanAddToCart","b2bSubmitShoppingListPermission","handleOpenBtnList","handleClose","verifyInventory","inventoryInfos","validateFailureArr","validateSuccessArr","node","inventoryInfo","isPassVerify","handleAddProductsToCart","skus","cantPurchase","getInventoryInfos","getB2BVariantInfoBySkus","getBcVariantInfoBySkus","deleteCartObject","deleteCartData","cartInfo","getCart","deleteCart","updateCart","getOptionsList","options","optionId","optionValue","handleAddSelectedToQuote","productsWithSku","checkedItem","noSkuProducts","productIds","getProducts","searchB2BProducts","searchBcProducts","newProductInfo","conversionProductsList","isSuccess","errorMessage","isFondVariant","newProducts","tax","currentProductSearch","variantItem","quoteListitem","uuid","validProductQty","calculateProductListPrice","addQuoteDraftProducts","b2bLogger","buttons","buttonList","Fragment","ArrowDropDown","Menu","button","MenuItem","StyledCreateName","ShoppingDetailHeader","customerInfo","handleUpdateShoppingList","goToShoppingLists","setOpenPage","openAPPParams","backgroundColor","CustomStyleContext","navigate","useNavigate","selectCompanyHierarchyId","submitShoppingList","approveShoppingList","shoppingListPermissions","useMemo","companyInfo","submitShoppingListPermissionCode","approveShoppingListPermissionCode","b2bPermissionsMap","submitShoppingListPermissionLevel","verifySubmitShoppingListSubsidiariesPermission","approveShoppingListPermissionLevel","verifyLevelPermission","isDisabledBtn","approveShoppingListPermission","gridOptions","xs","ArrowBackIosNew","getContrastColor","ShoppingStatus","ShoppingDetailAddNotes","notes","setNotes","handleCancelAddNotesClick","handleAddItemNotesClick","TextField","StyledImage","ShoppingDetailCard","shoppingDetail","onEdit","onDelete","checkBox","handleUpdateShoppingListItem","isReadForApprove","len","itemIndex","setAddNoteOpen","setAddNoteItemId","showPrice","b2bAndBcShoppingListActionsPermissions","itemId","productUrl","taxPrice","productNote","getBCPrice","canChangeOption","currentVariants","currentImage","b2bGetVariantImageByVariantInfo","origin","StickyNote2","Edit","StyledShoppingListTableContainer","StyledTextField","defaultSortKey","sortKeys","ShoppingDetailTable","isRequestLoading","setIsRequestLoading","shoppingListId","getShoppingListDetails","setCheckedArr","setDeleteItemId","isJuniorApprove","showInclusiveTaxPrice","global","canShoppingListActions","paginationTableRef","chooseOptionsOpen","setSelectedOptionsOpen","optionsProduct","setOptionsProduct","editProductItemId","setEditProductItemId","search","setSearch","qtyNotChangeFlag","setQtyNotChangeFlag","originProducts","setOriginProducts","shoppingListTotalPrice","setShoppingListTotalPrice","addNoteOpen","addNoteItemId","disabledSelectAll","setDisabledSelectAll","priceHidden","setPriceHidden","handleSetOrderBy","order","orderBy","useSort","currentItem","currentQty","listItems","_b","newListItems","nonNumberProducts","_c","initSearch","useImperativeHandle","handleSearchProduct","q","handleChooseOptionsDialogCancel","handleOpenProductEdit","_","handleChooseOptionsDialogConfirm","updateShoppingListItem","updateB2BShoppingListsItem","updateBcShoppingListsItem","newOptionLists","data","currentNode","itemData","handleUpdateShoppingListItemQty","getSelectCheckbox","selectCheckbox","productList","checkedItems","newItems","edges","grandTotal","totalTax","NewShoppingListTotalPrice","isPriceHidden","cloneDeep","row","getDisplayPrice","columnItems","inTaxPrice","totalPrice","B3FilterSearch","B3PaginationTable","ChooseOptionsDialog","forwardRef","calculateSubTotal","useData","useParams","isB2BUserSelector","currencyCode","primaryColor","useTheme","params","getB2BShoppingListDetails","getBcShoppingListDetails","deleteB2BShoppingListItem","deleteBcShoppingListItem","ShoppingListDetails","getShoppingList","deleteShoppingListItem","dispatch","tableRef","setShoppingListInfo","setCustomerInfo","deleteOpen","deleteItemId","validateSuccessProducts","validateFailureProducts","setAllowJuniorPlaceOrder","setIsCanEditShoppingList","CustomerRole","handleGetProductsById","listProducts","newProductsSearch","productInfo","err","shoppingListDetailInfo","totalCount","status","updateB2BShoppingList","updateBcShoppingList","channelId","handleDeleteItems","newCheckedArr","checkedItemId","getJuniorPlaceOrder","isEnabled","getB2BJuniorPlaceOrder","shoppingListActionsPermission","ShoppingListDetailsContent","ShoppingListDetailsProvider"],"mappings":"g1DAmBA,SAAwBA,GAAoBC,EAA+B,CACnE,KAAA,CAACC,CAAQ,EAAIC,GAAU,EAEvB,CACJ,SAAAC,EAAW,GACX,MAAAC,EAAQH,EAAW,MAAQ,GAC3B,MAAAI,EAAQ,GACR,YAAAC,EAAc,EACd,YAAAC,EAAc,EACd,QAAAC,EAAU,IACV,MAAAC,EAAQ,EACR,YAAAC,EAAc,CAACT,EACf,SAAAU,EAAW,IAAM,CAAC,EAClB,GAAAC,EAAK,CACH,MAAOX,EAAW,QAAU,OAC5B,4BAA6B,CAC3B,WAAY,IACZ,YAAa,GAAA,CACf,CACF,EACED,EAEE,CAACa,EAAcC,CAAe,EAAIC,EAAAA,SAAS,EAAE,EAE7CC,EAAmBC,EAAA,YACtBZ,GAA2B,CAC1B,MAAMa,EAAW,SAAS,GAAGb,OAAAA,GAAS,EAAE,GAAK,EAE7C,IAAIQ,EAAe,GAEf,OAAAL,IAAY,KAAOC,IAAU,EAC/BI,EAAe,eACNL,IAAY,KAAOU,EAAWT,EACvCI,EAAe,GAAG,OAAAJ,EAAK,aACdF,IAAgB,GAAKW,EAAWX,EACzCM,EAAe,UAAU,OAAAN,GAChBD,IAAgB,GAAKY,EAAWZ,IACzCO,EAAe,UAAU,OAAAP,IAG3BQ,EAAgBD,CAAY,EAErBA,CACT,EACA,CAACL,EAASF,EAAaC,EAAaE,CAAK,CAC3C,EAEMU,EAAgBd,GAAkB,CAC7BA,EAAAA,EAAO,CAAC,CAACQ,CAAY,CAChC,EAEMO,EAAa,IAAM,CACvB,MAAMF,EAAW,SAAS,GAAG,OAAAb,GAAS,EAAE,GAAK,EAE7CM,EAASO,EAAU,CAACF,EAAiBE,CAAQ,CAAC,CAChD,EAEAG,OAAAA,EAAAA,UAAU,IAAM,CACdL,EAAiBX,CAAK,CAAA,EACrB,CAACW,EAAkBX,CAAK,CAAC,EAG1BiB,EAAA,IAACC,GAAA,CACC,KAAK,QACL,KAAK,SACL,QAAQ,SACR,SAAApB,EACA,YAAAO,EACA,MAAAN,EACA,MAAAC,EACA,MAAO,CAAC,CAACQ,EACT,WAAYA,EACZ,WAAY,CACV,UAAW,UACX,QAAS,QACX,EACA,SAAWW,GAAM,CACFL,EAAAK,EAAE,OAAO,KAAK,CAC7B,EACA,OAAQ,IAAM,CACDJ,EAAA,CACb,EACA,GAAAR,CAAA,CACF,CAEJ,CC9EA,SAAwBa,GAAkBzB,EAAuB,CACzD,KAAA,CACJ,MAAO,CAAE,GAAA0B,CAAG,CAAA,EACVC,EAAAA,WAAWC,EAA0B,EAEnCC,EAAgBC,GAAe,CAAC,CAAE,QAAAC,KAAcA,EAAQ,YAAY,MAAM,EAC1E,CAAE,WAAAC,EAAY,UAAAC,EAAW,KAAMC,EAAW,IAAOlC,EACjDmC,EAASC,GAAU,EAEnB,CAACC,EAAmBC,CAAoB,EAAIvB,EAAAA,SAAS,EAAK,EAC1D,CAACwB,EAAWC,CAAY,EAAIzB,EAAAA,SAAS,EAAK,EAE1C,CAAC0B,CAA4B,EAAIC,GAAgC,EAEjEC,EAAyBV,EAAYW,GAA2BC,GAEhEC,EAAY,MAAOC,GAAiC,CACpD,GAAA,CACF,GAAI,CAACC,GAAc,0BAA2BD,CAAQ,EACpD,MAAM,IAAI,MAGZ,MAAME,EAAQF,EAAS,IAAKG,IAEnB,CACL,WAFqBC,GAAoBD,EAAQ,oBAAqBA,CAAO,EAG7E,UAAWA,EAAQ,GACnB,SAAUA,EAAQ,SAClB,UAAWA,EAAQ,SACrB,EACD,EAEKE,EAAM,MAAMT,EAAuB,CACvC,eAAgBjB,EAChB,MAAAuB,CAAA,CACD,EAEQ,OAAAI,EAAA,QAAQlB,EAAO,8CAA8C,EAAG,CACvE,QAAS,EAAA,CACV,EAEMiB,QACA5B,EAAQ,CACXA,EAAE,QAAQ,OAAS,GACrB6B,EAAS,MAAM7B,EAAE,QAAS,CAAE,QAAS,GAAM,CAC7C,CAEK,MAAA,EACT,EAEM8B,EAAiB,MAAOP,GAAiC,CAC7D,MAAME,EAAQF,EAAS,IAAKG,IAKnB,CACL,WALqBC,GACrBD,EAAQ,qBAAuBA,EAAQ,YACvCA,GAAA,YAAAA,EAAS,WAAYA,CACvB,GAEgC,CAAC,EAC/B,UAAW,SAASA,EAAQ,UAAW,EAAE,GAAK,EAC9C,SAAUA,EAAQ,SAClB,UAAW,SAASA,EAAQ,UAAW,EAAE,GAAK,CAChD,EACD,EAEKE,EAAM,MAAMT,EAAuB,CACvC,eAAgBjB,EAChB,MAAAuB,CAAA,CACD,EAEQ,OAAAI,EAAA,QAAQlB,EAAO,8CAA8C,EAAG,CACvE,QAAS,EAAA,CACV,EAEMiB,CACT,EAEMG,EAAoBR,GAA+B,CACvD,MAAMS,EAA2B,CAAC,EAC5BC,EAAmC,CAAC,EACpCC,EAAuB,CAAC,EAErB,OAAAX,EAAA,QAASY,GAA2B,CAC3C,KAAM,CAAE,SAAUC,EAAgB,IAAAC,CAAQ,EAAAF,EACpC,CAAE,OAAAG,EAAQ,mBAAAC,EAAoB,WAAAC,EAAY,UAAAC,EAAW,UAAAC,GAAW,UAAAC,IACpEP,EAEIQ,EAAmBC,GAA2BF,EAAS,EACzD,GAAAJ,GAAsB7B,IAAa,eAAgB,CACrDsB,EAAe,KAAKQ,CAAU,EAC9B,MAAA,CAME,GAHsBI,EAAiB,OACxCE,GAA+B,CAACA,EAAS,UAC5C,EACsB,OAAS,EAAG,CAChCZ,EAAW,KAAKM,CAAU,EAE1B,MAAA,CAGF,MAAMO,EAAcT,EAAO,IAAKH,IAA4B,CAC1D,SAAU,aAAaA,OAAAA,EAAK,UAAS,KACrC,YAAaA,EAAK,GAAG,SAAS,CAAA,EAC9B,EAEeS,EAAA,QAASE,GAA+B,CACjD,KAAA,CAAE,KAAAE,IAASF,EAEjB,GAAIE,KAAS,OAAQ,CACb,KAAA,CAAE,aAAAC,GAAiBH,EACzB,OAAO,KAAKG,CAAY,EAAE,QAASC,GAAQ,CACzCH,EAAY,KAAK,CACf,SAAU,aAAa,OAAAD,EAAS,UAAS,MAAK,OAAAI,EAAG,KACjD,YAAa,GAAG,OAAAJ,EAAS,aAAaI,CAAG,EAAC,CAC3C,CAAA,CACF,CAAA,MAEDH,EAAY,KAAK,CACf,SAAU,aAAa,OAAAD,EAAS,UAAS,KACzC,YAAa,GAAG,OAAAA,EAAS,aAAY,CACtC,CACH,CACD,EAEDb,EAAa,KAAK,CAChB,UAAW,SAASS,GAAW,EAAE,GAAK,EACtC,UAAW,SAASD,EAAW,EAAE,GAAK,EACtC,SAAU,OAAOJ,CAAG,EACpB,WAAYU,EACZ,SAAUZ,EAAK,QAAA,CAChB,CAAA,CACF,EAEM,CACL,eAAAH,EACA,aAAAC,EACA,WAAAC,CACF,CACF,EAEMiB,EAAqB,MAAOC,GAAmC,CACnEpC,EAAa,EAAI,EACb,GAAA,CACI,KAAA,CAAE,aAAAqC,GAAiBD,EAEnB,CAAE,eAAApB,EAAgB,aAAAC,EAAc,WAAAC,CAAW,EAAIH,EAAiBsB,CAAY,EAE9EpB,EAAa,OAAS,IACxB,MAAMH,EAAeG,CAAY,EAEtBzB,EAAA,GAGT0B,EAAW,OAAS,GAAKxB,IAAa,gBAC/BmB,EAAA,MACPlB,EAAO,+CAAgD,CACrD,WAAYuB,EAAW,KAAK,IAAI,CAAA,CACjC,EACD,CACE,QAAS,EAAA,CAEb,EAGEF,EAAe,OAAS,GAAKtB,IAAa,gBACnCmB,EAAA,MACPlB,EAAO,mDAAoD,CACzD,eAAgBqB,EAAe,KAAK,IAAI,CAAA,CACzC,EACD,CACE,QAAS,EAAA,CAEb,EAGFlB,EAAqB,EAAK,CAAA,QAC1B,CACAE,EAAa,EAAK,CAAA,CAEtB,EAEMsC,EAAuB,IAAM,CAC7BrC,GAAgCZ,IAAkB,EAC3CwB,EAAA,KACP,gFACF,EAEAf,EAAqB,EAAI,CAE7B,EAGE,OAAAhB,EAAA,IAACyD,GAAA,CACC,GAAI,CACF,aAAc,MAChB,EAEA,SAAAzD,EAAA,IAAC0D,GACC,CAAA,SAAAC,OAACC,EACC,CAAA,SAAA,CAAA5D,MAAC6D,EAAW,CAAA,QAAQ,KAAM,SAAAhD,EAAO,0CAA0C,EAAE,EAC7Eb,EAAA,IAAC8D,GAAA,CACC,WAAApD,EACA,UAAAc,EACA,UAAAb,EACA,KAAK,cAAA,CACP,QAECoD,GAAQ,EAAA,EAER/D,EAAA,IAAAgE,GAAA,CAAS,KAAK,eAAe,WAAAtD,EAAwB,eAAAsB,EAAgC,QAErF+B,GAAQ,EAAA,EAET/D,EAAA,IAAC4D,EAAA,CACC,GAAI,CACF,OAAQ,UACV,EAEA,gBAACK,GAAa,CAAA,QAAQ,OAAO,QAAS,IAAMT,EAC1C,EAAA,SAAA,CAAAxD,EAAA,IAACkE,GAAA,CACC,GAAI,CACF,YAAa,KAAA,CACf,CACF,EACCrD,EAAO,8CAA8C,CAAA,CACxD,CAAA,CAAA,CACF,EAEAb,EAAA,IAACmE,GAAA,CACC,OAAQpD,EACR,UAAWC,EACX,gBAAiBqC,EACjB,UAAApC,EACA,cAAa,EAAA,CAAA,CACf,CAAA,CACF,CACF,CAAA,CAAA,CACF,CAEJ,CC/MA,MAAMmD,GAAOC,GAAO,KAAK,EAAa,CAAC,CAAE,SAAAC,EAAU,SAAA3F,MAuB1C,CACL,QAAS,OACT,UAAW,aACX,QAAS,UACT,IAAK,MACL,SAPeA,EAAW,OAAS,UAQnC,GA5BkB2F,EAChB,CACE,aAAc,oBACd,cAAe,MACf,WAAY,QAAA,EAEd,CACE,WAAY,YACd,EAqBF,GAnBkB3F,EAChB,CACE,UAAW,oBACX,QAAS,cACT,kBAAmB,CACjB,UAAW,MAAA,CACb,EAEF,CAAC,CAYL,EACD,EAEK4F,GAAWF,GAAOT,CAAG,EACzB,CAAC,CACC,MAAAY,EACA,QAAAC,EAAU,IACV,UAAAC,EACA,cAAAC,EAAgB,MAChB,WAAAC,EACA,kBAAAC,CAAA,KACoB,CACpB,QAAS,OACT,eAAgBA,IAAsB,QAAU,WAAa,aAC7D,cAAAF,EACA,SAAUH,EAAQ,EAAI,EACtB,WAAYA,EAAQ,EAAI,EACxB,WAAYI,GAAc,aAC1B,UAAAF,EACA,MAAAF,EACA,QAAAC,CACF,EACF,EAEMK,GAAcT,GAAO,KAAK,EAAE,KAAO,CACvC,SAAU,WACV,WAAY,MACZ,MAAO,SACT,EAAE,EAEIU,GAAeV,GAAO,KAAK,EAAE,KAAO,CACxC,MAAO,OACP,aAAc,MACd,WAAY,CACd,EAAE,EAEIW,GAAmB,CACvB,QAAS,CACP,MAAO,KACT,EAIA,OAAQ,CACN,MAAO,MAAA,CAEX,EAEMC,GAAkB,CACtB,QAAS,CACP,MAAO,OACP,QAAS,YACX,EAKA,OAAQ,CACN,MAAO,OACP,QAAS,aACT,QAAS,OACT,cAAe,aAAA,CAEnB,EAEA,SAAwBC,GAAYxG,EAA8B,CAC1D,KAAA,CACJ,iBAAAyG,EACA,SAAA1D,EACA,gBAAA2D,EACA,sBAAAC,EACA,2BAAAC,EACA,2BAAAC,EACA,UAAAC,EAAY,MAAA,EACV9G,EAEE,CAAE,6BAAA+G,CAAA,EAAiCjF,GAAekF,EAAsB,EAExE7E,EAASC,GAAU,EACnB,CAAC6E,EAAQC,CAAO,EAAInG,EAAAA,SAAkB,EAAK,EAC3C,CAACoG,EAASC,CAAU,EAAIrG,EAAAA,SAAkB,EAAK,EAC/C,CAACd,CAAQ,EAAIC,GAAU,EAEvB,CAAE,eAAgBmH,EAAgB,CAAE,EAAIvF,GAAewF,EAA0B,EAEvFjG,EAAAA,UAAU,IAAM,CACV0B,EAAS,OAAS,EACpBmE,EAAQ,EAAI,EAEZA,EAAQ,EAAK,CACf,EACC,CAACnE,CAAQ,CAAC,EAEP,MAAAwE,EAAYtH,EAAWsG,GAAkBD,GAEzCkB,EAAyB,MAC7BC,EACApH,EACAqH,IACG,CACG,MAAAC,EAA8B,CAAC,GAAG5E,CAAQ,EAChD4E,EAAWF,CAAK,EAAE,KAAK,SAAW,OAAOpH,CAAK,EACnCsH,EAAAF,CAAK,EAAE,QAAUC,EACtB,MAAAE,EAAmB,MAAMC,GAAoBF,EAAWF,CAAK,EAAE,KAAM,OAAOpH,CAAK,CAAC,EACpFuH,IACDD,EAAWF,CAAK,EAAuB,KAAOG,EAC/ChB,EAA2Be,CAAU,EAEzC,EAEMG,EAAsB,IAAM,CAChCZ,EAAQ,EAAK,EACbN,EAA2B,CAAA,CAAE,EAC7BC,EAA2B,CAAA,CAAE,CAC/B,EAEMkB,EAAiBN,GAAkB,CACjC,MAAAE,EAA8B,CAAC,GAAG5E,CAAQ,EACrC4E,EAAA,OAAOF,EAAO,CAAC,EAC1Bb,EAA2Be,CAAU,CACvC,EAEMK,EAAiB,SAAY,CAGjC,GAAI,CAFejF,EAAS,MAAOY,GAAwBA,EAAK,OAAO,EAEtD,CACNN,EAAA,MAAMlB,EAAO,8CAA8C,CAAC,EACrE,MAAA,CAEE,GAAA,CACFiF,EAAW,EAAI,EAET,MAAAa,EAAYC,GAAanF,CAAQ,EAEjCK,EAAM,MAAM+E,GAASF,CAAS,EAE/B7E,EAAI,SACa0E,EAAA,EAElBnB,GACAI,IACAN,GAAA,YAAAA,EAAkB,UAAW,EAE7B,OAAO,SAAS,KAAO2B,IAEvB/E,EAAS,QAAQ,GAAI,CACnB,IAAKgF,GAAW,CACd,QAASlG,EAAO,wCAAwC,EACxD,KAAMmG,GACN,SAAUnG,EAAO,mCAAmC,EACpD,UAAW,GACX,cAAe,EAAA,CAChB,EACD,QAAS,EAAA,CACV,EACmBoG,GAAA,IAIpBnF,EAAI,QACGC,EAAA,MAAMD,EAAI,QAAS,CAC1B,QAAS,EAAA,CACV,EAGiBmF,GAAA,CAAA,QACpB,CACAnB,EAAW,EAAK,CAAA,CAEpB,EAEMoB,EAAqB,SAAY,CACrC,MAAMb,EAAa5E,EAAS,OACzBY,GAAwBA,EAAK,UAAY,KAAOA,EAAK,QAAU,CAClE,EACM8E,EAA6B,CAAC,EACzBd,EAAA,QAASzE,GAAY,OAC9B,MAAMS,EAAOT,EACP,CACJ,KAAM,CAAE,SAAAhC,CAAS,EACjB,YAAAX,EAAc,EACd,YAAAD,GAAc,EACd,QAAAE,GACA,MAAAC,CAAA,EACEyC,EAEEwF,EAAiB,SAAS,GAAG,OAAAxH,GAAY,EAAE,GAAK,EAClDX,IAAgB,GAAKmI,EAAiBnI,EACxCoD,EAAK,KAAK,SAAWpD,EACZD,KAAgB,GAAKoI,EAAiBpI,KAC/CqD,EAAK,KAAK,SAAWrD,IAEnBE,KAAY,KAAOC,IAAUS,EAAW,OAAOA,CAAQ,EAAI,GAAKT,IAClEkD,EAAK,KAAK,SAAWlD,GAGvBkD,EAAK,QAAU,GAET,MAAAE,GAAM8E,EAAAzF,GAAA,YAAAA,EAAS,OAAT,MAAAyF,EAAe,SAAW,OAAOzF,EAAQ,KAAK,QAAQ,EAAI,EAEtEuF,EAAW,KAAKZ,GAAoB3E,EAAQ,KAAMW,CAAG,CAAC,CAAA,CACvD,GAEkB,MAAM,QAAQ,IAAI4E,CAAU,GAEpC,QAAQ,CAAC9E,EAAM8D,IAAU,CACvBE,EAAAF,CAAK,EAAE,KAAO9D,CAAA,CAC1B,EACDiD,EAA2Be,CAAU,CACvC,EAGE,OAAArG,EAAA,IAACsH,GAAA,CACC,OAAA3B,EACA,gBAAiBa,EACjB,eAAAE,EACA,MAEM7F,EADJwE,EACW,6CACA,oCAD4C,EAGzD,aAEMxE,EADJwE,EACW,6CACA,oCAD4C,EAGzD,SAAS,KAET,gBAACkC,GACC,CAAA,SAAA,CAAAvH,EAAA,IAAC4D,EAAA,CACC,GAAI,CACF,EAAG,YACL,EAEA,SAAA5D,EAAA,IAACwH,IAAM,QAAQ,SAAS,SAAS,UAC9B,SAAAnC,EACGxE,EAAO,+CAAgD,CACrD,gBAAAuE,CAAA,CACD,EACDvE,EAAO,+CAAgD,CACrD,gBAAAuE,CAAA,CACD,CACP,CAAA,CAAA,CACF,EAEApF,EAAA,IAAC4D,EAAA,CACC,GAAI,CACF,EAAG,QACL,EAEA,SAAA5D,EAAA,IAACwH,IAAM,QAAQ,SAAS,SAAS,QAC9B,SAAAnC,EACGxE,EAAO,gDAAiD,CACtD,SAAUY,EAAS,MAAA,CACpB,EACDZ,EAAO,kDAAmD,CACxD,SAAUY,EAAS,MAAA,CACpB,CACP,CAAA,CAAA,CACF,SACCgG,GAAO,CAAA,WAAY5B,EAAS,KAAM,GAAI,OAAQ,GAC7C,SAAA,CAAAlC,EAAA,KAACC,EAAA,CACC,GAAI,CACF,QAAS,OACT,eAAgB,gBAChB,OAAQ,iBACV,EAEA,SAAA,CAAA5D,EAAA,IAAC4D,EAAA,CACC,GAAI,CACF,SAAU,MACZ,EAEC,WAAO,wCAAyC,CAC/C,SAAUnC,EAAS,MACpB,CAAA,CAAA,CACH,EACAzB,MAACiE,IAAa,QAAS,IAAMiD,IAC1B,SAAArG,EAAO,yCAAyC,CACnD,CAAA,CAAA,CAAA,CACF,EAECY,EAAS,OAAS,EACjBkC,EAAA,KAACC,EACE,CAAA,SAAA,CAAA,CAACjF,GACAgF,EAAAA,KAACS,GAAK,CAAA,SAAQ,GAAC,SAAAzF,EACb,SAAA,CAAAqB,EAAAA,IAACuE,IACC,SAACvE,MAAA8E,GAAA,CAAa,SAAOjE,EAAA,kCAAkC,EAAE,CAC3D,CAAA,EACCb,EAAA,IAAAuE,GAAA,CAAU,GAAG0B,EAAU,QAAS,kBAAmBT,EAClD,SAAAxF,EAAAA,IAAC8E,GAAa,CAAA,SAAAjE,EAAO,gCAAgC,CAAE,CAAA,EACzD,EACAb,EAAA,IAACuE,GAAA,CACC,GAAI,CACF,eAAgB,QAClB,EACC,GAAG0B,EAAU,QACd,kBAAmBT,EAEnB,SAACxF,EAAA,IAAA8E,GAAA,CAAa,SAAOjE,EAAA,mCAAmC,CAAE,CAAA,CAAA,CAC5D,EACCb,EAAA,IAAAuE,GAAA,CAAU,GAAG0B,EAAU,QAAS,kBAAmBT,EAClD,SAAAxF,EAAAA,IAAC8E,GAAa,CAAA,SAAAjE,EAAO,gCAAgC,CAAE,CAAA,EACzD,EACAb,EAAAA,IAACuE,IAAU,GAAG0B,EAAU,OACtB,SAACjG,EAAA,IAAA8E,GAAA,CAAY,YAAC,CAAA,CAChB,CAAA,CAAA,EACF,EAEDrD,EAAS,IAAI,CAACG,EAAwBuE,IAAkB,CACvD,KAAM,CAAE,QAAAjH,EAAS,YAAAF,EAAa,YAAAC,EAAa,MAAAE,CAAU,EAAAyC,EAE/C,CACJ,SAAAhC,EAAW,EACX,aAAA8H,GACA,YAAAC,GACA,WAAAjF,EACA,WAAAkF,EACA,eAAAC,EACA,UAAAC,GACElG,EAAQ,KAENmG,GAAQ,OAAOD,CAAS,EACxBE,GAASD,IAASnI,EAAW,OAAOA,CAAQ,EAAI,IAAI,QAAQmG,CAAa,EAEzEM,EAAkB,CACtB,GAAGwB,EACH,cAAeD,CACjB,EAEMK,GAAgBC,GAAwB7B,EAAY,EAAE,EAEtD8B,EAAgB,KAAK,MAAMP,CAAU,EACrCQ,GAAmCH,GAAc,OACpD5F,GAASA,EAAK,SACjB,EAGE,OAAAsB,OAACS,IAAK,SAAAzF,EACJ,SAAA,CAAAgF,OAACY,GACC,CAAA,SAAA,CAACvE,EAAAA,IAAA+E,GAAA,CAAa,IAAK2C,IAAgBW,EAAuB,CAAA,EAC1D1E,EAAA,KAACC,EAAA,CACC,GAAI,CACF,WAAY,MACd,EAEA,SAAA,CAAA5D,MAAC6D,EAAW,CAAA,QAAQ,QAAQ,MAAM,UAC/B,SACH8D,GAAA,QACC9D,EAAW,CAAA,QAAQ,QAAQ,MAAM,UAC/B,SACHnB,EAAA,EACCyF,EAAc,OAAS,GACtBC,GAAa,OAAS,GACtBA,GAAa,IAAK5F,GAChBxC,EAAA,IAAC6D,EAAA,CACC,GAAI,CACF,SAAU,UACV,WAAY,MACZ,MAAO,SACT,EAGC,SAAG,GAAA,OAAArB,EAAO,WAAU,MAAK,OAAAA,EAAO,UAAS,EAFrCA,EAAO,UAIf,CAAA,CAAA,CAAA,CAAA,CACL,EACF,SACC+B,GAAU,CAAA,GAAG0B,EAAU,QAAS,kBAAmBT,EACjD,SAAA,CAAY7G,GAAAqB,EAAAA,IAAC,QAAK,SAAO,SAAA,CAAA,EACzBsI,GAAeP,EAAK,CAAA,EACvB,QACCxD,GAAU,CAAA,GAAG0B,EAAU,QAAS,kBAAmBT,EAClD,SAAAxF,EAAA,IAACvB,GAAA,CACC,QAAAS,EACA,YAAAF,EACA,YAAAC,EACA,MAAAE,EACA,MAAOS,EACP,SAAU,CAACb,EAAOqH,IAAY,CACLF,EAAAC,EAAOpH,EAAOqH,CAAO,CAAA,CAC9C,CAAA,EAEJ,SACC7B,GAAU,CAAA,GAAG0B,EAAU,QAAS,kBAAmBT,EACjD,SAAA,CAAY7G,GAAAqB,EAAAA,IAAC,OAAI,SAAO,SAAA,CAAA,EACxBsI,GAAeN,CAAK,CAAA,EACvB,EAEChI,EAAA,IAAAuE,GAAA,CAAU,GAAG0B,EAAU,OACtB,SAAAjG,EAAA,IAACuI,GAAA,CACC,GAAI,CACF,OAAQ,UACR,MAAO,qBACT,EACA,QAAS,IAAM,CACb9B,EAAcN,CAAK,CAAA,CACrB,CAAA,CAEJ,CAAA,CAAA,CAAA,EA7D6BzD,CA8D/B,CAEH,CAAA,CAAA,CAAA,CACH,EACE,IAAA,CACN,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAEJ,CCveA,SAAS8F,GAA0B9J,EAAuC,CACxE,MAAMmC,EAASC,GAAU,EACnB,CAACnC,CAAQ,EAAIC,GAAU,EACvB,CAAE,KAAA6J,EAAM,kBAAAC,EAAmB,yBAAAC,CAA6B,EAAAjK,EAG5D,OAAAsB,EAAA,IAACsH,GAAA,CACC,OAAQmB,EACR,MAAO5H,EAAO,mCAAmC,EACjD,YAAaA,EAAO,iCAAiC,EACrD,aAAcA,EAAO,iCAAiC,EACtD,gBAAiB6H,EACjB,eAAgBC,EAChB,cAAe,CACb,MAAO,SACT,EAEA,SAAA3I,EAAA,IAAC4D,EAAA,CACC,GAAI,CACF,QAAS,OACT,eAAgBjF,EAAW,UAAY,QACvC,MAAOA,EAAW,OAAS,QAC3B,OAAQ,MACV,EAEC,WAAO,wCAAwC,CAAA,CAAA,CAClD,CACF,CAEJ,CCkCA,SAASiK,GAAqBlK,EAAkC,CACxD,KAAA,CAACC,CAAQ,EAAIC,GAAU,EACvBiC,EAASC,GAAU,EAEnB,CACJ,MAAO,CAAE,oBAAA+H,EAAsB,EAAM,CAAA,EACnCxI,EAAAA,WAAWyI,EAAa,EACtBC,EAAavI,GAAe,CAAC,CAAE,YAAAwI,KAAkBA,EAAY,kBAAkB,UAAU,EACzFC,EAAYzI,GAAe,CAAC,CAAE,QAAAC,KAAcA,EAAQ,YAAY,EAAE,EAClEyI,EAAkB1I,GAAe,CAAC,CAAE,QAAAC,KAAcA,EAAQ,SAAS,eAAe,EAClF,CACJ,oCAAA0I,EACA,yBAAAC,EACA,6BAAA3D,CAAA,EACEjF,GAAekF,EAAsB,EACnC2D,EAAMC,SAAiC,IAAI,EAC3C,CAAC3D,EAAQ4D,CAAS,EAAI9J,EAAAA,SAAS,EAAK,EAEpC+J,EAAeC,GAAQ,IAAI,QAAQ,EAEnCC,EAAiB/K,EACnB,CACE,WAAY,aACZ,cAAe,QAAA,EAEjB,CACE,WAAY,QACd,EAEE,CACJ,iBAAAwG,EACA,sBAAAE,EACA,WAAAsE,EACA,iBAAAC,EACA,WAAA9D,EACA,cAAA+D,EACA,2BAAAvE,EACA,2BAAAC,EACA,UAAA5E,EACA,YAAAmJ,EACA,sBAAAC,EACA,KAAAC,CAAA,EACEtL,EAEEuL,EAAmCtJ,EAAYwI,EAAsC,GACrFe,EAAiBvJ,EAAYyI,EAA2B,GACxDe,GAAkCxJ,EACpC8E,EACA,OAAOuE,CAAI,IAAM,EAEfI,GAAoB,IAAM,CAC1BT,EAAW,SAAW,EACf5H,EAAA,MAAMlB,EAAO,mCAAmC,CAAC,EAE1D0I,EAAU,EAAI,CAElB,EAEMc,EAAc,IAAM,CACxBd,EAAU,EAAK,CACjB,EAEMe,EAAmBC,GAAoC,CAC3D,MAAMC,GAAsC,CAAC,EACvCC,EAAsC,CAAC,EAElC,OAAAd,EAAA,QAAStH,GAAwB,CACpC,KAAA,CAAE,KAAAqI,GAASrI,EAEXsI,EACJJ,EAAe,KAAM/H,GAA6BA,EAAO,aAAekI,EAAK,UAAU,GACvF,CAAC,EAEH,GAAIC,EAAe,CACjB,IAAIC,EAAe,GAEjBD,EAAc,UAAY,MACzBD,GAAA,MAAAA,EAAM,SAAW,OAAOA,EAAK,QAAQ,EAAI,GAAKC,EAAc,QAE9CC,EAAA,IAGfD,EAAc,cAAgB,IAC7BD,GAAA,MAAAA,EAAM,SAAW,OAAOA,EAAK,QAAQ,EAAI,GAAKC,EAAc,cAE9CC,EAAA,IAGfD,EAAc,cAAgB,IAC7BD,GAAA,MAAAA,EAAM,SAAW,OAAOA,EAAK,QAAQ,EAAI,GAAKC,EAAc,cAE9CC,EAAA,IAEbA,EACFH,EAAmB,KAAK,CACtB,KAAAC,CAAA,CACD,EAEDF,GAAmB,KAAK,CACtB,KAAM,CACJ,GAAGE,CACL,EACA,MAAOC,EAAc,MACrB,QAASA,EAAc,QACvB,YAAaA,EAAc,YAC3B,YAAaA,EAAc,WAAA,CAC5B,CACH,CACF,CACD,EAEM,CACL,mBAAAH,GACA,mBAAAC,CACF,CACF,EAGMI,EAA0B,SAAY,CACtC,GAAAlB,EAAW,SAAW,EAAG,CAClB5H,EAAA,MAAMlB,EAAO,mCAAmC,CAAC,EAC1D,MAAA,CAGUwJ,EAAA,EACZvE,EAAW,EAAI,EACX,GAAA,CACF,MAAMgF,EAAiB,CAAC,EAExB,IAAIC,GAAe,GAYnB,GAVWpB,EAAA,QAAStH,GAAwB,CACpC,KAAA,CAAE,KAAAqI,IAASrI,EAEbqI,GAAK,eAAe,eAAiB,aACvBK,IAAA,GAAG,OAAAL,GAAK,WAAU,MAG/BI,EAAA,KAAKJ,GAAK,UAAU,CAAA,CAC1B,EAEGK,GAAc,CACPhJ,EAAA,MACPlB,EAAO,0CAA2C,CAChD,KAAMkK,GAAa,MAAM,EAAG,EAAE,CAAA,CAC/B,EACD,CACE,QAAS,EAAA,CAEb,EACA,MAAA,CAGE,GAAAD,EAAK,SAAW,EAAG,CACZ/I,EAAA,MAEHlB,EADJwE,EACW,4CACA,4CAD2C,EAEtD,CACE,QAAS,EAAA,CAEb,EACA,MAAA,CAKI,MAAA2F,EAAoB,MAFErK,EAAYsK,GAA0BC,IAEd,CAClD,KAAAJ,CAAA,CACD,EAEK,CAAE,mBAAAN,EAAoB,mBAAAC,CAAA,EAAuBH,GACjDU,GAAA,YAAAA,EAAmB,aAAc,CAAA,CACnC,EAEI,GAAAP,EAAmB,SAAW,EAAG,CAC7B,MAAA9D,EAAYC,GAAa6D,CAAkB,EAC3CU,GAAmBC,GAAe5B,CAAY,EAC9C6B,GAAW,MAAMC,GAAQ,EAC/B,IAAIxJ,GAAM,KACNuD,GAAyBgG,GAAS,QACpC,MAAME,GAAWJ,EAAgB,EAC3BrJ,GAAA,MAAM0J,GAAWH,GAAU1E,CAAS,IAEpC7E,GAAA,MAAM+E,GAASF,CAAS,EACVM,GAAA,GAElBnF,IAAOA,GAAI,OACbC,EAAS,MAAMD,GAAI,OAAO,CAAC,EAAE,QAAS,CACpC,QAAS,EAAA,CACV,EACQ0I,EAAmB,SAAW,IAErCnF,GACA8E,KACAhF,GAAA,YAAAA,EAAkB,UAAW,EAE7B,OAAO,SAAS,KAAO2B,IAEvB/E,EAAS,QAAQ,GAAI,CACnB,IAAKgF,GAAW,CACd,QAASlG,EAAO,yCAAyC,EACzD,KAAMmG,GACN,SAAUnG,EAAO,8BAA8B,EAC/C,UAAW,GACX,cAAe,EAAA,CAChB,EACD,QAAS,EAAA,CACV,EACmBoG,GAAA,GAExB,CAGF3B,EAA2BkF,CAAkB,EAC7CjF,EAA2BkF,CAAkB,CAAA,QAC7C,CACA3E,EAAW,EAAK,CAAA,CAEpB,EAGM2F,EAAkBC,IAClBA,GAAA,YAAAA,EAAS,UAAW,EAAU,CAAC,EAEpBA,EAAQ,IACrB,CAAC,CACC,UAAWC,EACX,aAAcC,CAAA,KAIT,CACL,SAAAD,EACA,YAAAC,CACF,EACF,EAKIC,GAA2B,SAAY,CACvC,GAAAlC,EAAW,SAAW,EAAG,CAClB5H,EAAA,MAAMlB,EAAO,mCAAmC,CAAC,EAC1D,MAAA,CAEFiF,EAAW,EAAI,EACHuE,EAAA,EACR,GAAA,CACF,MAAMyB,EAAkBnC,EAAW,OAAQoC,IAA+B,CAClE,KAAA,CACJ,KAAM,CAAE,WAAArJ,EAAW,CAAA,EACjBqJ,GAEJ,OAAOrJ,KAAe,IAAMA,KAAe,MAAQA,KAAe,MAAA,CACnE,EAEKsJ,GAAgBrC,EAAW,OAAQoC,IAA+B,CAChE,KAAA,CACJ,KAAM,CAAE,WAAArJ,EAAW,CAAA,EACjBqJ,GAEJ,MAAO,CAACrJ,EAAA,CACT,EAMG,GALAsJ,GAAc,OAAS,GAChBjK,EAAA,MAAMlB,EAAO,0CAA0C,EAAG,CACjE,QAAS,EAAA,CACV,EAECmL,GAAc,SAAWrC,EAAW,OAAQ,OAEhD,MAAMsC,EAAuB,CAAC,EACdH,EAAA,QAASlK,IAA2B,CAC5C,KAAA,CAAE,KAAA8I,IAAS9I,GAEZqK,EAAW,SAAS,OAAOvB,GAAK,SAAS,CAAC,GAC7CuB,EAAW,KAAK,OAAOvB,GAAK,SAAS,CAAC,CACxC,CACD,EAEK,MAAAwB,EAAcvL,EAAYwL,GAAoBC,GAE9C,CAAE,eAAAvE,GAAmB,MAAMqE,EAAY,CAC3C,WAAAD,EACA,UAAAhD,EACA,gBAAAC,CAAA,CACD,EAEKmD,EAAmCC,GAAuBzE,CAAc,EAC9E,IAAI0E,EAAY,GACZC,GAAe,GACfC,GAAgB,GAEpB,MAAMC,GAAkC,CAAC,EAuDzC,GAtDgBZ,EAAA,QAASlK,IAA2B,CAC5C,KAAA,CACJ,KAAM,CACJ,UAAAkG,GACA,WAAAF,GACA,WAAAlF,GACA,UAAAE,EACA,YAAA+E,EACA,SAAA/H,EACA,UAAA+C,GACA,IAAAgK,CAAA,CACF,EACE/K,GAEEqB,GAAcwI,EAAe,KAAK,MAAM7D,EAAU,CAAC,EAEnDgF,GAAuBP,EAAe,KACzCzK,IAA8B,OAAOA,GAAQ,EAAE,IAAM,OAAOgB,CAAS,CACxE,EAEMiK,GAAcD,IAAA,YAAAA,GAAsB,SAAS,KAChDvK,IAA2BA,GAAK,MAAQK,IAGtCmK,KACHL,GAAe3L,EAAO,kCAAmC,CACvD,IAAK6B,EAAA,CACN,EACe+J,GAAA,IAGlB,MAAMK,GAAgB,CACpB,KAAM,CACJ,GAAIC,GAAK,EACT,YAAYF,IAAA,YAAAA,GAAa,MAAOnK,GAChC,UAAAC,GACA,eAAgBiK,GAChB,cAAcC,IAAA,YAAAA,GAAa,YAAaxE,GACxC,YAAAV,EACA,SAAU,OAAO/H,CAAQ,GAAK,EAC9B,WAAY,KAAK,UAAUqD,EAAW,EACtC,UAAAL,EACA,UAAAkF,GACA,IAAA6E,CAAA,CAEJ,EAEAD,GAAY,KAAKI,EAAa,EAElBP,EAAA,EAAA,CACb,EAEDA,EAAYS,GAAgBN,EAAW,EAEnC,CAACD,GAAe,CAClB1K,EAAS,MAAM,GAAI,CACjB,IAAKgF,GAAW,CACd,QAASyF,GACT,KAAM,GACN,SAAU,GACV,UAAW,EAAA,CACZ,EACD,QAAS,EAAA,CACV,EAED,MAAA,CAGED,GACI,MAAAU,GAA0BP,GAAa,GAAG,EAChDQ,GAAsBR,EAAW,EACjC3K,EAAS,QAAQ,GAAI,CACnB,IAAKgF,GAAW,CACd,QAASlG,EAAO,0CAA0C,EAC1D,KAAM,cACN,SAAUA,EAAO,+BAA+B,EAChD,UAAW,EAAA,CACZ,EACD,QAAS,EAAA,CACV,GAEDkB,EAAS,MAAM,GAAI,CACjB,IAAKgF,GAAW,CACd,QAASlG,EAAO,mCAAmC,EACnD,KAAM,cACN,SAAUA,EAAO,+BAA+B,EAChD,UAAW,EAAA,CACZ,EACD,QAAS,EAAA,CACV,QAEIX,EAAG,CACViN,GAAU,MAAMjN,CAAC,CAAA,QACjB,CACA4F,EAAW,EAAK,CAAA,CAEpB,EAEMsH,EAAU,CACd,iBAAkB,CAChB,KAAMvM,EAAO,+BAA+B,EAC5C,IAAK,uBACL,YAAagK,EACb,WAAY,EACd,EACA,kBAAmB,CACjB,KAAMhK,EAAO,uCAAuC,EACpD,IAAK,yBACL,YAAagK,EACb,WAAY,EACd,EACA,mBAAoB,CAClB,KAAMhK,EAAO,gCAAgC,EAC7C,IAAK,wBACL,YAAagL,GACb,WAAY,EAAA,CAEhB,EAyBMwB,IAtBElI,GAAA,YAAAA,EAAkB,UAAW,GAAK,CAACxE,EAErC,CAACuJ,GAAkBvJ,EACdkI,EAAsB,CAACuE,EAAQ,kBAAkB,EAAI,CAAC,EAE3DjD,GACE9E,GAAyBwD,EACpB,CAACuE,EAAQ,kBAAmBA,EAAQ,kBAAkB,EAG3D/H,EAA8B,CAAC+H,EAAQ,iBAAiB,EACxDvE,EACK,CAACuE,EAAQ,kBAAkB,EAE7B,CAAC,EAGHvE,EACH,CAACuE,EAAQ,iBAAkBA,EAAQ,kBAAkB,EACrD,CAACA,EAAQ,gBAAgB,EAnB+B,CAAC,EAyB7D,OAAAzJ,EAAA,KAAC4D,GAAA,CACC,GAAI,CACF,SAAU,QACV,OAAQ5I,GAAYoK,EAAa,OAAS,EAC1C,KAAM,EACN,gBAAiB,OACjB,MAAO,OACP,QAASpK,EAAW,aAAe,mBACnC,OAAQA,EAAW,OAAS,OAC5B,WAAY,EACZ,QAAS,OACT,SAAU,SACV,OAAQ,KACV,EACA,UAAS,GACT,QAAS,EAET,SAAA,CAAAqB,EAAA,IAACuH,GAAA,CACC,KAAI,GACJ,GAAI,CACF,QAAS5I,EAAW,OAAS,QAC7B,MAAO,QACP,YAAa,MAAA,CACf,CACF,EACAqB,EAAA,IAACuH,GAAA,CACC,KAAI,GACJ,GACE5I,EACI,CACE,UAAW,MAAA,EAEb,CACE,UAAW,QACX,SAAU,CACZ,EAGN,SAAAgF,EAAA,KAACC,EAAA,CACC,GAAI,CACF,MAAO,OACP,GAAI,OACJ,QAAS,OACT,OAAQ,MACR,eAAgB,gBAChB,GAAG8F,CACL,EAEA,SAAA,CAAA1J,EAAA,IAAC6D,EAAA,CACC,GAAI,CACF,MAAO,UACP,SAAU,OACV,WAAY,KACd,EAEC,WAAO,uCAAwC,CAC9C,SAAU8F,EAAW,MACtB,CAAA,CAAA,CACH,EACAhG,EAAA,KAACC,EAAA,CACC,GAAI,CACF,QAAS,OACT,WAAY,SACZ,SAAUjF,EAAW,OAAS,QAChC,EAEA,SAAA,CAAAqB,EAAA,IAAC6D,EAAA,CACC,QAAQ,KACR,GAAI,CACF,SAAU,OACV,WAAY,MACZ,MAAO,SACT,EAEC,WAAO,+BAAgC,CACtC,SAAUyE,GAAesB,CAAgB,CAC1C,CAAA,CAAA,CACH,EACAjG,EAAA,KAACC,EAAA,CACC,GAAI,CACF,QAAS,OACT,WAAY,SACZ,UAAWjF,EAAW,SAAW,EACjC,MAAOA,EAAW,OAAS,MAC7B,EAEC,SAAA,CAAC,CAAA0G,GACA0E,GACAE,GACEjK,EAAA,IAACiE,GAAA,CACC,GAAI,CACF,QAAS,MACT,OAAQ,aAAa,OAAA6F,GAAe,WACpC,OAAQnL,EAAW,aAAe,SAClC,SAAU,MACZ,EACA,UAAUwG,GAAA,YAAAA,EAAkB,UAAW,GAEvC,SAAAnF,EAAA,IAACuI,GAAA,CACC,MAAM,UACN,GAAI,CACF,MAAOuB,CACT,EACA,QAAS,IAAM,CACbD,EAAc,EAAI,CAAA,CACpB,CAAA,CACF,CACF,EAEHwD,GAAW,OACV1J,EAAA,KAACC,EAAA,CACC,GAAI,CACF,QAAS,OACT,WAAY,SACZ,UAAWjF,EAAW,SAAW,EACjC,WAAYA,EAAW,EAAI,OAC3B,MAAOA,EAAW,OAAS,MAC7B,EAEC,SAAA,CAAA0O,GAAW,SAAW,GAAKA,GAAW,CAAC,GACtCrN,EAAA,IAACiE,GAAA,CACC,QAAQ,YACR,QAASoJ,GAAW,CAAC,EAAE,YACvB,GAAI,CACF,YAAa1O,EAAW,OAAS,EACjC,MAAOA,EAAW,OAAS,MAC7B,EAEC,SAAA0O,GAAW,CAAC,EAAE,IAAA,CACjB,EAEDA,GAAW,SAAW,GAEnB1J,EAAA,KAAA2J,EAAA,SAAA,CAAA,SAAA,CAAAtN,EAAA,IAACiE,GAAA,CACC,QAAQ,YACR,QAASmG,GACT,IAAAf,EACA,GAAI,CACF,YAAa1K,EAAW,OAAS,EACjC,MAAOA,EAAW,OAAS,MAC7B,EACA,cAAU4O,GAAc,EAAA,EAEvB,WAAO,mCAAmC,CAAA,CAC7C,EACAvN,EAAA,IAACwN,GAAA,CACC,GAAG,aACH,SAAUnE,EAAI,QACd,KAAM1D,EACN,QAAS0E,EACT,cAAe,CACb,kBAAmB,cACrB,EAEC,YAAW,OAAS,GACnBgD,GAAW,IAAKI,GACdzN,EAAA,IAAC0N,GAAA,CAEC,QAAS,IAAM,CACbD,EAAO,YAAY,CACrB,EAEC,SAAOA,EAAA,IAAA,EALHA,EAAO,GAOf,CAAA,CAAA,CAAA,CACL,CACF,CAAA,CAAA,CAAA,CAAA,EAGF,IAAA,CAAA,CAAA,CACN,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CACF,EACAzN,EAAA,IAACuH,GAAA,CACC,KAAI,GACJ,GACE5I,EACI,CACE,UAAW,OACX,QAASA,EAAW,OAAS,OAAA,EAE/B,CACE,UAAW,QACX,QAASA,EAAW,OAAS,OAAA,CAC/B,CAAA,CAER,CAAA,CACF,CAEJ,CC/qBA,MAAMgP,GAAmBtJ,GAAO,KAAK,EAAE,KAAO,CAC5C,QAAS,OACT,WAAY,QACd,EAAE,EAiBF,SAASuJ,GAAqBlP,EAAkC,OAC9D,MAAMmC,EAASC,GAAU,EACnB,CAACnC,CAAQ,EAAIC,GAAU,EAEvB,CACJ,iBAAAuG,EACA,aAAA0I,EACA,yBAAAC,EACA,kBAAAC,EACA,UAAApN,EACA,YAAAqN,EACA,cAAAC,EACA,YAAAnE,CAAA,EACEpL,EAEE,CACJ,MAAO,CACL,YAAa,CAAE,gBAAAwP,EAAkB,SAAU,CAAA,CAC7C,EACE7N,EAAAA,WAAW8N,EAAkB,EAC3BC,EAAWC,GAAY,EAEvB,CAAE,yBAAAC,GAA6B9N,GACnC,CAAC,CAAE,QAAAC,CAAQ,IAAMA,EAAQ,oBAC3B,EAEM,CACJ,6BAA8B8N,EAC9B,8BAA+BC,CAAA,EAC7BhO,GAAekF,EAAsB,EAEnC+I,EAA0BC,EAAAA,QAAQ,IAAM,CAC5C,GAAI/N,EAAW,CACP,MAAAgO,GAAcxJ,GAAA,YAAAA,EAAkB,cAAe,CAAC,EAEhD,CACJ,6BAA8ByJ,EAC9B,8BAA+BC,CAAA,EAC7BC,GACEC,EAAoCC,GAA+C,CACvF,KAAMJ,EACN,OAAQ,QAAOf,GAAA,YAAAA,EAAc,SAAU,CAAC,EACxC,SAAU,OAAOS,CAAwB,CAAA,CAC1C,EAEKW,EAAqCC,GAAsB,CAC/D,KAAML,EACN,UAAW,QAAOF,GAAA,YAAAA,EAAa,YAAa,CAAC,EAC7C,OAAQ,QAAOd,GAAA,YAAAA,EAAc,SAAU,CAAC,CAAA,CACzC,EAEM,MAAA,CACL,6BAA8BkB,EAC9B,8BAA+BE,CACjC,CAAA,CAGK,MAAA,CACL,6BAA8BV,EAC9B,8BAA+BC,CACjC,CAAA,EACC,CACDX,EACAlN,EACA4N,EACAC,EACArJ,GAAA,YAAAA,EAAkB,YAClBmJ,CAAA,CACD,EAEKa,IAAgB9H,EAAAlC,GAAA,YAAAA,EAAkB,WAAlB,YAAAkC,EAA4B,MAAM,UAAW,EAE7D,CAAE,6BAAA5B,EAA8B,8BAAA2J,CAAA,EAAkCX,EAElEY,EAAeC,GACnB3Q,EACI,CAAA,EACA,CACE,GAAA2Q,CACF,EACN,OAEI3L,EAAA,KAAA2J,WAAA,CAAA,SAAA,CAAAtN,EAAA,IAAC4D,EAAA,CACC,GAAI,CACF,aAAc,OACd,MAAO,aACT,EAEA,SAAAD,EAAA,KAACC,EAAA,CACC,GAAI,CACF,MAAO,UACP,OAAQ,UACR,QAAS,OACT,WAAY,QACd,EACA,QAAS,IAAM,CACTqK,EAAc,kBAAoB,MAClBF,EAAA,GAElBK,EAAS,GAAG,EACAJ,EAAA,CACV,OAAQ,GACR,QAAS,EAAA,CACV,EAEL,EAEA,SAAA,CAAAhO,EAAA,IAACuP,GAAA,CACC,SAAS,QACT,GAAI,CACF,SAAU,OACV,YAAa,SACb,MAAOzF,CAAA,CACT,CACF,EACA9J,EAAA,IAAC4D,EAAA,CACC,GAAI,CACF,OAAQ,EACR,MAAOkG,EACP,EAAG,GACL,EAEC,WAAc,kBAAoB,MAC/BjJ,EAAO,yCAAyC,EAChDA,EAAO,mCAAmC,CAAA,CAAA,CAChD,CAAA,CAAA,CACF,CACF,EACA8C,EAAA,KAAC4D,GAAA,CACC,UAAS,GACT,QAAS,EACT,GAAI,CACF,QAAS,OACT,eAAgB,gBAChB,cAAe5I,EAAW,SAAW,MACrC,GAAIA,EAAW,OAAS,EAC1B,EAEA,SAAA,CAAAgF,EAAA,KAAC4D,GAAA,CACC,KAAI,GACH,GAAG8H,EAAY,CAAC,EACjB,GAAI,CACF,MAAOG,GAAiBtB,CAAe,CACzC,EAEA,SAAA,CAAAvK,EAAA,KAACC,EAAA,CACC,GAAI,CACF,QAAS,OACT,WAAYjF,EAAW,QAAU,SACjC,cAAeA,EAAW,SAAW,KACvC,EAEA,SAAA,CAAAqB,EAAA,IAAC6D,EAAA,CACC,QAAQ,KACR,GAAI,CACF,YAAa,OACb,UAAW,WACb,EAEC,SAAA,GAAG,QAAAsB,GAAA,YAAAA,EAAkB,OAAQ,GAAE,CAClC,EACCxE,IACE8E,GACE2J,IAAiCjK,GAAA,YAAAA,EAAkB,gBACpDnF,EAAA,IAAC6D,EAAA,CACC,GAAI,CACF,EAAGlF,EAAW,SAAW,GAC3B,EAEC,SAAoBwG,GAAAnF,MAACyP,GAAe,CAAA,OAAQtK,GAAA,YAAAA,EAAkB,MAAQ,CAAA,CAAA,CAAA,CACzE,CAAA,CAEN,SACCvB,EACC,CAAA,SAAA,CAAA5D,EAAA,IAAC6D,EAAA,CACC,GAAI,CACF,MAAO,OACP,UAAW,WACb,EAEC,SAAkBsB,GAAA,YAAAA,EAAA,WAAA,CACrB,EACCxE,UACEgN,GACC,CAAA,SAAA,CAAA3N,EAAA,IAAC6D,EAAA,CACC,QAAQ,YACR,GAAI,CACF,YAAa,QACf,EAEC,WAAO,+BAA+B,CAAA,CACzC,EACA7D,EAAAA,IAAC,OAAM,CAAA,SAAA,GAAG,QAAA6N,GAAA,YAAAA,EAAc,YAAa,GAAE,KAAI,QAAAA,GAAA,YAAAA,EAAc,WAAY,GAAK,CAAA,CAAA,CAC5E,CAAA,CAAA,CAEJ,CAAA,CAAA,CAAA,CACF,EAEAlK,EAAA,KAAC4D,GAAA,CACC,KAAI,GACJ,GAAI,CACF,UAAW5I,EAAW,OAAS,KACjC,EACC,GAAG0Q,EAAY,CAAC,EAEhB,SAAA,CAAgC5J,IAAAN,GAAA,YAAAA,EAAkB,UAAW,IAC5DnF,EAAA,IAACiE,GAAA,CACC,QAAQ,WACR,SAAUkL,EACV,QAAS,IAAM,CACbrB,EAAyB,EAAE,CAC7B,EAEC,WAAO,uCAAuC,CAAA,CACjD,EAEDsB,IAAiCjK,GAAA,YAAAA,EAAkB,UAAW,WAC5DvB,EACC,CAAA,SAAA,CAAA5D,EAAA,IAACiE,GAAA,CACC,QAAQ,WACR,GAAI,CACF,YAAa,MACf,EACA,QAAS,IAAM,CACb6J,EAAyB,EAAE,CAC7B,EAEC,WAAO,4BAA4B,CAAA,CACtC,EACCsB,GACCpP,EAAA,IAACiE,GAAA,CACC,QAAQ,WACR,QAAS,IAAM,CACb6J,EAAyB,CAAC,CAC5B,EAEC,WAAO,6BAA6B,CAAA,CAAA,CACvC,CAEJ,CAAA,CAAA,CAAA,CAAA,CAEJ,CAAA,CAAA,CACF,EACF,CAEJ,CC5QA,SAAS4B,GAAuBhR,EAAoC,CAClE,MAAMmC,EAASC,GAAU,EAEnB,CAACnC,CAAQ,EAAIC,GAAU,EACvB,CAAE,KAAA6J,EAAM,MAAAkH,EAAO,SAAAC,EAAU,0BAAAC,EAA2B,wBAAAC,GAA4BpR,EAGpF,OAAAsB,EAAA,IAACsH,GAAA,CACC,OAAQmB,EACR,MAAO5H,EAAO,iCAAiC,EAC/C,YAAaA,EAAO,kCAAkC,EACtD,aAAcA,EAAO,gCAAgC,EACrD,gBAAiBgP,EACjB,eAAgBC,EAChB,eAAgB,GAEhB,SAAA9P,EAAA,IAAC4D,EAAA,CACC,GAAI,CACF,QAAS,OACT,eAAgBjF,EAAW,UAAY,QACvC,MAAOA,EAAW,OAAS,QAC3B,OAAQ,MACV,EAEA,SAAAqB,EAAA,IAAC+P,GAAA,CACC,UAAS,GACT,KAAM,EACN,aAAcJ,EACd,SAAWzP,GAAM0P,EAAS1P,EAAE,OAAO,KAAK,EACxC,QAAQ,SACR,UAAS,GACT,YAAaW,EAAO,uCAAuC,CAAA,CAAA,CAC7D,CAAA,CACF,CACF,CAEJ,CCpBA,MAAMmP,GAAc3L,GAAO,KAAK,EAAE,KAAO,CACvC,SAAU,OACV,OAAQ,OACR,YAAa,QACf,EAAE,EAEF,SAAS4L,GAAmBvR,EAAgC,CAC1D,MAAMmC,EAASC,GAAU,EACnB,CACJ,KAAMoP,EACN,OAAAC,EACA,SAAAC,EACA,SAAAC,EACA,uBAAAnK,EACA,6BAAAoK,EACA,iBAAAC,EACA,IAAAC,EACA,UAAAC,EACA,cAAA5G,EACA,eAAA6G,EACA,iBAAAC,EACA,SAAAf,EACA,UAAAgB,EACA,uCAAAC,CAAA,EACEnS,EAEE,CACJ,UAAAoJ,EACA,SAAAlI,EACA,OAAAkR,EACA,UAAAnO,EACA,aAAA+E,EACA,YAAAC,EACA,WAAAjF,EACA,eAAAmF,EACA,WAAAkJ,EACA,SAAAC,EAAW,EACX,YAAAC,CAAA,EACEf,EAEEnI,EAAQmJ,GAAW,OAAOpJ,CAAS,EAAG,OAAOkJ,CAAQ,CAAC,EAEtDhJ,GAAQD,EAAQ,OAAOnI,CAAQ,EAE/BgC,GAAe,CACnB,GAAGsO,EAAe,eAClB,cAAeA,EAAe,UAChC,EAEMjI,EAAgBC,GAAwBtG,GAAS,EAAE,EAEnDgG,EAAa,KAAK,MAAMsI,EAAe,UAAU,EACjD9H,EAAmCH,EAAc,OAAQ5F,GAASA,EAAK,SAAS,EAEhF8O,EACJvJ,EAAW,OAAS,GAAK,CAAC2I,GAAoBM,EAE1CO,GAAkBxP,GAAQ,UAAY,CAAC,EAEvCyP,EACJC,GAAgCF,GAAiB,CAAE,UAAAzO,EAAW,WAAAD,CAAY,CAAA,GAAKgF,EAG/E,OAAA1H,EAAA,IAAC4D,EAAA,CAEC,GAAI,CACF,UAAW,oBACX,aAAc6M,IAAcD,EAAM,EAAI,oBAAsB,EAC9D,EAEA,SAAA7M,EAAA,KAACD,GAAA,CACC,GAAI,CACF,MAAO,UACP,QAAS,OACT,GAAI,CACN,EAEA,SAAA,CAAC1D,EAAA,IAAA4D,EAAA,CAAK,SAAYyM,GAAAA,EAAW,CAAA,CAAA,QAC5BzM,EACC,CAAA,SAAA5D,EAAA,IAACgQ,GAAA,CACC,IAAKqB,GAAgBhJ,GACrB,IAAI,cACJ,QAAQ,MAAA,CAAA,EAEZ,EACA1E,EAAA,KAACC,EAAA,CACC,GAAI,CACF,KAAM,CACR,EAEA,SAAA,CAAA5D,EAAA,IAAC6D,EAAA,CACC,QAAQ,QACR,MAAM,UACN,QAAS,IAAM,CACP,KAAA,CACJ,SAAU,CAAE,OAAA0N,CAAO,CAAA,EACjB,OAEJ,OAAO,SAAS,KAAO,GAAG,OAAAA,GAAS,OAAAR,EACrC,EACA,GAAI,CACF,OAAQ,SACV,EAEC,SAAApJ,CAAA,CACH,QACC9D,EAAW,CAAA,QAAQ,QAAQ,MAAM,UAC/B,SACHnB,EAAA,EACA1C,EAAA,IAAC4D,EAAA,CACC,GAAI,CACF,OAAQ,cACV,EAEC,SAAAgE,EAAW,OAAS,GAAKQ,EAAa,OAAS,GAC9CpI,EAAA,IAAC4D,EACE,CAAA,SAAAwE,EAAa,IAAK5F,GACjBxC,EAAA,IAAC6D,EAAA,CACC,GAAI,CACF,SAAU,UACV,WAAY,MACZ,MAAO,SACT,EAGC,SAAG,GAAA,OAAArB,EAAO,WAAU,MAAK,OAAAA,EAAO,UAAS,EAFrCA,EAAO,UAAA,CAIf,CACH,CAAA,CAAA,CAEJ,EAECyO,GAAeA,EAAY,KAAK,EAAE,OAAS,GAC1CjR,EAAA,IAAC6D,EAAA,CACC,GAAI,CACF,SAAU,UACV,MAAO,UACP,UAAW,SACX,aAAc,QAChB,EAEC,SAAAoN,CAAA,CACH,EAGFjR,EAAA,IAAC6D,EAAA,CACC,GAAI,CACF,MAAO,UACP,SAAU,MACZ,EAEC,WAAO,wCAAyC,CAC/C,MAAO+M,EAAUtI,GAAeP,CAAK,EAAGmI,CAAc,CACvD,CAAA,CAAA,CACH,EAEAlQ,EAAA,IAAC+P,GAAA,CACC,KAAK,QACL,KAAK,SACL,QAAQ,SACR,MAAOlP,EAAO,0CAA0C,EACxD,SAAUgQ,EAAyCN,EAAmB,GACtE,WAAY,CACV,UAAW,UACX,QAAS,QACX,EACA,MAAO3Q,EACP,GAAI,CACF,OAAQ,WACR,MAAO,MACP,SAAU,QACV,UAAW,CACT,OAAQ,EACR,SAAU,MACZ,EACA,UAAW,CACT,SAAU,MAAA,CAEd,EACA,SAAWM,GAAM,CACfgG,EAAuBgK,EAAe,GAAIhQ,EAAE,OAAO,KAAK,CAC1D,EACA,OAAQ,IAAM,CACZoQ,EAA6BQ,CAAM,CAAA,CACrC,CACF,EACA9Q,EAAA,IAAC6D,EAAA,CACC,GAAI,CACF,MAAO,UACP,SAAU,MACZ,EAEC,WAAO,wCAAyC,CAC/C,MAAO+M,EAAUtI,GAAeN,EAAK,EAAGkI,CAAc,CACvD,CAAA,CAAA,CACH,EACAvM,EAAA,KAACC,EAAA,CACC,GAAI,CACF,UAAW,OACX,UAAW,KACb,EACA,GAAG,iCAEF,SAAA,CACCiN,GAAA7Q,EAAA,IAACwR,GAAA,CACC,GAAI,CACF,YAAa,SACb,OAAQ,UACR,MAAO,qBACT,EACA,QAAS,IAAM,CACbd,EAAe,EAAI,EACFC,EAAA,OAAOG,CAAM,CAAC,EAE3BG,GACFrB,EAASqB,CAAW,CACtB,CACF,CACF,EAGDE,GACCnR,EAAA,IAACyR,GAAA,CACC,GAAI,CACF,YAAaN,EAAkB,SAAW,GAC1C,WAAYA,EAAkB,SAAW,GACzC,OAAQ,UACR,MAAO,qBACT,EACA,QAAS,IAAM,CACbhB,EACE,CACE,GAAGtI,EACH,cAAeD,EACf,SAAAhI,CACF,EACA+C,EACAmO,CACF,CAAA,CACF,CACF,EAEDD,GAA0C,CAACN,GAC1CvQ,EAAA,IAACuI,GAAA,CACC,GAAI,CACF,WAAY,SACZ,OAAQ,UACR,MAAO,qBACT,EACA,QAAS,IAAM,CACbsB,EAAc,EAAI,EACTuG,EAAA,OAAOU,CAAM,CAAC,CAAA,CACzB,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CAAA,CACF,EAjMKZ,EAAe,EAkMtB,CAEJ,CCnMA,MAAMwB,GAAmCrN,GAAO,KAAK,EAAE,KAAO,CAC5D,gBAAiB,UACjB,QAAS,OACT,aAAc,MACd,UACE,wGAEF,UAAW,CACT,OAAQ,CACN,OAAQ,CACN,cAAe,KACjB,EACA,sBAAuB,CACrB,WAAY,MAAA,CAEhB,EACA,cAAe,CACb,6BAA8B,CAC5B,QAAS,CAAA,CACX,CACF,CAEJ,EAAE,EAEI2L,GAAc3L,GAAO,KAAK,EAAE,KAAO,CACvC,SAAU,OACV,OAAQ,OACR,YAAa,QACf,EAAE,EAEIsN,GAAkBtN,GAAO0L,EAAS,EAAE,KAAO,CAC/C,UAAW,CACT,WAAY,OACZ,aAAc,KAAA,CAElB,EAAE,EAEI6B,GAAiB,YAEjBC,GAAW,CACf,QAAS,cACT,UAAW,YACX,IAAK,UACP,EAEA,SAASC,GAAoBpT,EAAiC2K,EAAmB,QACzE,KAAA,CAAC1K,CAAQ,EAAIC,GAAU,EACvBiC,EAASC,GAAU,EAEnB,CACJ,iBAAAqE,EACA,iBAAA4M,EACA,oBAAAC,EACA,eAAAC,EACA,uBAAAC,EACA,cAAAC,EACA,iBAAA5B,EACA,gBAAA6B,EACA,cAAAvI,EACA,gBAAAwI,EACA,UAAA1R,EACA,sBAAA0E,EACA,oBAAAwD,EACA,sBAAAkB,EACA,KAAAC,CAAA,EACEtL,EAEE4T,EAAwB9R,GAAe,CAAC,CAAE,OAAA+R,CAAO,IAAMA,EAAO,qBAAqB,EAEnF,CAAE,oCAAApJ,EAAqC,6BAAA1D,GAC3CjF,GAAekF,EAAsB,EAEjC8M,EAAyB7R,EAC3BwI,GAAuCY,EACvC,GACE8G,EAAyClQ,EAAY6R,EAAyB,GAC9ErI,EAAkCxJ,EACpC8E,EACA,OAAOuE,CAAI,IAAM,EAEfyI,EAAqBnJ,SAAuC,IAAI,EAEhE,CAACoJ,EAAmBC,CAAsB,EAAIlT,EAAAA,SAAS,EAAK,EAC5D,CAACmT,EAAgBC,EAAiB,EAAIpT,EAAAA,SAAc,IAAI,EACxD,CAACqT,GAAmBC,CAAoB,EAAItT,EAAAA,SAAiC,IAAI,EACjF,CAACuT,EAAQC,CAAS,EAAIxT,WAAsB,CAChD,QAAS,IAAI,OAAAoS,GAASD,EAAc,EAAC,CACtC,EACK,CAACsB,EAAkBC,EAAmB,EAAI1T,EAAAA,SAAkB,EAAI,EAChE,CAAC2T,EAAgBC,CAAiB,EAAI5T,EAAAA,SAA0B,CAAA,CAAE,EAClE,CAAC6T,GAAwBC,CAAyB,EAAI9T,EAAAA,SAAiB,CAAG,EAE1E,CAAC+T,GAAa9C,CAAc,EAAIjR,EAAAA,SAAkB,EAAK,EACvD,CAACgU,EAAe9C,CAAgB,EAAIlR,EAAAA,SAA0B,EAAE,EAChE,CAACkQ,EAAOC,CAAQ,EAAInQ,EAAAA,SAAiB,EAAE,EACvC,CAACiU,GAAmBC,EAAoB,EAAIlU,EAAAA,SAAkB,EAAK,EAEnE,CAACmU,GAAaC,EAAc,EAAIpU,EAAAA,SAAkB,EAAK,EAEvD,CAACqU,GAAkBC,GAAOC,EAAO,EAAIC,GAAQpC,GAAUD,GAAgBoB,EAAQC,CAAS,EAExF/M,EAAyB,CAAC9F,EAAqBrB,IAA2B,cAC1E,GAAA,OAAOA,CAAK,EAAI,EAAG,OACvB,MAAMmV,EAAcd,EAAe,KAAM/Q,IAAwB,CACzD,KAAA,CAAE,KAAAqI,IAASrI,GAEjB,OAAOqI,GAAK,KAAOtK,CAAA,CACpB,EAEK+T,IAAa9M,GAAA6M,GAAA,YAAAA,EAAa,OAAb,YAAA7M,GAAmB,WAAY,GAClD8L,GAAoB,OAAOgB,CAAU,IAAM,OAAOpV,CAAK,CAAC,EAExD,MAAMqV,KAA6BC,GAAA5B,EAAmB,UAAnB,YAAA4B,GAA4B,YAAa,CAAC,EACvEC,GAAeF,IAAA,YAAAA,GAAW,IAAK/R,IAAwB,CACrD,KAAA,CAAE,KAAAqI,IAASrI,GACb,OAAAqI,IAAA,YAAAA,GAAM,MAAOtK,IACfsK,GAAK,SAAW,GAAG,cAAO3L,CAAK,GAC1B2L,GAAA,uBAAyB,OAAO3L,CAAK,IAAM,GAG3CsD,EAAA,GAGHkS,GAAoBD,GAAa,OACpCjS,IAAwB,OAAOA,GAAK,KAAK,QAAQ,IAAM,CAC1D,EACqBsR,GAAAY,GAAkB,SAAWD,GAAa,MAAM,GACrEE,GAAA/B,EAAmB,UAAnB,MAAA+B,GAA4B,QAAQ,CAAC,GAAGF,EAAY,EACtD,EAEMG,EAAa,IAAM,QACvBpN,EAAAoL,EAAmB,UAAnB,MAAApL,EAA4B,SAC9B,EAEAqN,EAAA,oBAAoBrL,EAAK,KAAO,CAC9B,WAAAoL,EACA,QAAS,IAAM,OAAA,OAAApN,EAAAoL,EAAmB,UAAnB,YAAApL,EAA4B,WAC3C,QAAS,IAAM,OAAA,OAAAA,EAAAoL,EAAmB,UAAnB,YAAApL,EAA4B,WAC3C,iBAAkB,IAAA,OAAM,OAAAA,EAAAoL,EAAmB,UAAnB,YAAApL,EAA4B,mBAAiB,EACrE,EAEI,MAAAsN,EAAsB,MAAOC,GAAc,CACrC3B,EAAA,CACR,GAAGD,EACH,OAAQ4B,CAAA,CACT,CACH,EAEMC,GAAkC,IAAM,CAC5C9B,EAAqB,EAAE,EACvBJ,EAAuB,EAAK,CAC9B,EAEMmC,EAAwB,CAAClT,EAAcmT,EAAoBjE,IAA4B,CAC3FiC,EAAqBjC,CAAM,EAC3B+B,GAAkBjR,CAAO,EACzB+Q,EAAuB,EAAI,CAC7B,EAEMqC,GAAmC,MAAOvT,GAAiC,CAC/EuQ,EAAoB,EAAI,EAClB,MAAAiD,EAAyBtU,EAC3BuU,GACAC,GACA,GAAA,CACI,MAAAC,EAAiBvT,GAAoBJ,EAAS,CAAC,EAAE,oBAAqBA,EAAS,CAAC,CAAC,EACjF4T,EAAO,CACX,OAAQvC,GACR,eAAAb,EACA,SAAU,CACR,UAAWxQ,EAAS,CAAC,EAAE,UACvB,SAAUA,EAAS,CAAC,EAAE,SACtB,WAAY2T,GAAkB,CAAA,CAAC,CAEnC,EAEA,MAAMH,EAAuBI,CAAI,EACjC1C,EAAuB,EAAK,EAC5BI,EAAqB,EAAE,EACdhR,EAAA,QAAQlB,EAAO,mCAAmC,CAAC,EACjD4T,EAAA,CAAA,QACX,CACAzC,EAAoB,EAAK,CAAA,CAE7B,EAEM1B,GAA+B,MAAOQ,GAA4B,QAEtE,MAAMoD,KAD6B7M,GAAAoL,EAAmB,UAAnB,YAAApL,GAA4B,YAAa,CAAC,GAC/C,KAAMhF,IAAwB,CACpD,KAAA,CAAE,KAAAqI,IAASrI,GAEjB,OAAOqI,GAAK,SAAWoG,CAAA,CACxB,EACG,IAAAwE,EAEApB,IACFoB,EAAcpB,EAAY,MAK5B,MAAMjR,GAFU,KAAK,OAAMqS,GAAA,YAAAA,EAAa,aAAc,IAAI,EAE9B,IACzB9S,KAA2E,CAC1E,SAAUA,GAAO,UACjB,YAAaA,GAAO,YACtB,EACF,EAEM+S,GAA6B,CACjC,UAAWD,GAAA,YAAAA,EAAa,UACxB,SAAUA,GAAA,MAAAA,EAAa,SAAW,OAAOA,EAAY,QAAQ,EAAI,EACjE,WAAYrS,IAAe,CAAC,EAC5B,YAAa0M,CACf,EAYA,MAJ+BhP,EAC3BuU,GACAC,IARS,CACX,OAAArE,EACA,eAAAmB,EACA,SAAAsD,EACF,CAMiC,CACnC,EAEMC,GAAkC,MAAO1E,GAA4B,CACzE,GAAI,CAAAoC,EACJ,CAAAlB,EAAoB,EAAI,EACpB,GAAA,CACF,MAAM1B,GAA6BQ,CAAM,EAChC/O,EAAA,QAAQlB,EAAO,oCAAoC,CAAC,EAC7DsS,GAAoB,EAAI,EACbsB,EAAA,CAAA,QACX,CACAzC,EAAoB,EAAK,CAAA,EAE7B,EAEMyD,GAAqBC,GAA2C,OAChE,GAAAA,EAAe,OAAS,EAAG,CAC7B,MAAMC,IAActO,EAAAoL,EAAmB,UAAnB,YAAApL,EAA4B,YAAa,CAAC,EACxDuO,EAAmC,CAAC,EAC3BF,EAAA,QAASrT,IAA0B,CAChD,MAAMwT,GAAWF,EAAY,KAAM/T,IAA2B,CACtD,KAAA,CAAE,KAAA8I,IAAS9I,GAEjB,OAAO8I,GAAK,KAAOrI,EAAA,CACpB,EAEGwT,IAAuBD,EAAA,KAAKC,EAAQ,CAAA,CACzC,EAEa1D,EAAA,CAAC,GAAGyD,CAAY,CAAC,CAAA,MAE/BzD,EAAc,CAAA,CAAE,CAEpB,EAEMtC,GAA4B,IAAM,CACtCa,EAAe,EAAK,EACpBC,EAAiB,EAAE,EACnBf,EAAS,EAAE,CACb,EAEME,GAA0B,SAAY,CAC1CkC,EAAoB,EAAI,EACpB,GAAA,CACwBnC,GAAA,EAC1B,MAAMS,GAA6BmD,CAAa,EACvC1R,EAAA,QAAQlB,EAAO,wCAAwC,CAAC,EACtD4T,EAAA,CAAA,QACX,CACAzC,EAAoB,EAAK,CAAA,CAE7B,EAEAjS,EAAAA,UAAU,IAAM,CACd,GAAIoF,EAAkB,CACd,KAAA,CACJ,SAAU,CAAE,MAAA2Q,CAAM,EAClB,WAAAC,EACA,SAAAC,CAAA,EACE7Q,EAEE8Q,EAA4B3D,EAC9B,OAAOyD,CAAU,EACjB,OAAOA,CAAU,EAAI,OAAOC,CAAQ,GAAK,EAEvCE,GAAgBJ,EAAM,KAAMzT,IAA2B,WACvD,OAAAgF,GAAAhF,IAAA,YAAAA,GAAM,OAAN,MAAAgF,GAAY,kBACPgN,GAAAhS,GAAK,KAAK,iBAAV,YAAAgS,GAA0B,gBAAiB,EAG7C,CACR,EAEDR,GAAeqC,EAAa,EACV7C,EAAA8C,GAAUL,CAAK,CAAC,EAClCvC,EAA0B0C,CAAyB,CAAA,CACrD,EACC,CAAC9Q,EAAkBmN,CAAqB,CAAC,EAE5CvS,EAAAA,UAAU,IAAM,CACd,GAAIoF,EAAkB,CACd,KAAA,CACJ,SAAU,CAAE,MAAA2Q,CAAM,CAAA,EAChB3Q,EACEoP,EAAoBuB,EAAM,OAAQzT,GAAwBA,EAAK,KAAK,WAAa,CAAC,EACnEsR,GAAAY,EAAkB,SAAWuB,EAAM,MAAM,CAAA,CAChE,EACC,CAAC3Q,CAAgB,CAAC,EAEf,MAAAyL,GAAY,CAAC7I,EAAeqO,IAA2C,CACrE,KAAA,CACJ,eAAgB,CAAE,cAAAF,CAAc,CAAA,EAC9BE,EACJ,OAAIF,EAAsB,GACnBG,GAAgB,CACrB,MAAAtO,EACA,YAAaqO,EACb,SAAUF,EAAgB,GAAKnO,EAC/B,WAAY,EAAA,CACb,CACH,EAEMuO,GAA2C,CAC/C,CACE,IAAK,UACL,MAAOzV,EAAO,4BAA4B,EAC1C,OAASuV,GAA0B,CACjC,MAAMxU,EAAe,CACnB,GAAGwU,EAAI,eACP,cAAeA,EAAI,UACrB,EACMnO,EAAgBC,GAAwBtG,EAAS,EAAE,EAEnDgG,EAAa,KAAK,MAAMwO,EAAI,UAAU,EACtChO,GAAmCH,EAAc,OAAQ5F,IAASA,GAAK,SAAS,EAEhF+O,GAAkBxP,EAAQ,UAAY,CAAC,EACvCyP,GACJC,GAAgCF,GAAiB,CAC/C,UAAWgF,EAAI,UACf,WAAYA,EAAI,UAAA,CACjB,GAAKA,EAAI,aAGV,OAAAzS,EAAA,KAACC,EAAA,CACC,GAAI,CACF,QAAS,OACT,WAAY,YACd,EAEA,SAAA,CAAA5D,EAAA,IAACgQ,GAAA,CACC,IAAKqB,IAAgBhJ,GACrB,IAAI,cACJ,QAAQ,MAAA,CACV,SACCzE,EACC,CAAA,SAAA,CAAA5D,EAAA,IAAC6D,EAAA,CACC,QAAQ,QACR,MAAM,UACN,QAAS,IAAM,CACP,KAAA,CACJ,SAAU,CAAE,OAAA0N,EAAO,CAAA,EACjB,OAEJ,OAAO,SAAS,KAAO,GAAG,OAAAA,IAAS,OAAA6E,EAAI,WACzC,EACA,GAAI,CACF,OAAQ,SACV,EAEC,SAAIA,EAAA,WAAA,CACP,QACCvS,EAAW,CAAA,QAAQ,QAAQ,MAAM,UAC/B,WAAI,WACP,EACC+D,EAAW,OAAS,GAAKQ,GAAa,OAAS,GAC9CpI,EAAAA,IAAC4D,EACE,CAAA,SAAAwE,GAAa,IAAK5F,IACjBxC,EAAA,IAAC6D,EAAA,CACC,GAAI,CACF,SAAU,UACV,WAAY,MACZ,MAAO,SACT,EAGC,SAAG,GAAA,OAAArB,GAAO,WAAU,MAAK,OAAAA,GAAO,UAAS,EAFrCA,GAAO,UAIf,CAAA,EACH,GAGD4T,GAAA,YAAAA,EAAK,eAAeA,GAAA,YAAAA,EAAK,YAAY,OAAO,QAAS,GACpDpW,EAAA,IAAC6D,EAAA,CACC,GAAI,CACF,SAAU,UACV,MAAO,UACP,UAAW,QACb,EAEC,SAAIuS,EAAA,WAAA,CAAA,CACP,CAEJ,CAAA,CAAA,CAAA,CACF,CAEJ,EACA,MAAO,MACP,WAAY,EACd,EACA,CACE,IAAK,QACL,MAAOvV,EAAO,0BAA0B,EACxC,OAASuV,GAA0B,CACjC,KAAM,CAAE,UAAAtO,EAAW,SAAAkJ,EAAW,CAAM,EAAAoF,EAC9BG,EAAarF,GAAW,OAAOpJ,CAAS,EAAG,OAAOkJ,CAAQ,CAAC,EAG/D,OAAAhR,EAAA,IAAC6D,EAAA,CACC,GAAI,CACF,QAAS,QACX,EAEC,SAAU+M,GAAAtI,GAAeiO,CAAU,EAAGH,CAAG,CAAA,CAC5C,CAEJ,EACA,MAAO,MACP,MAAO,CACL,UAAW,OAAA,CAEf,EACA,CACE,IAAK,MACL,MAAOvV,EAAO,6BAA6B,EAC3C,OAASuV,GACPpW,EAAA,IAAC2R,GAAA,CACC,KAAK,QACL,KAAK,SACL,QAAQ,SACR,GAAI,CACF,MAAO,MACT,EACA,SACEd,EAAyCN,GAAoB8B,EAAkB,GAEjF,MAAO+D,EAAI,SACX,WAAY,CACV,UAAW,UACX,QAAS,QACX,EACA,SAAWlW,GAAM,CACfgG,EAAuBkQ,EAAI,GAAIlW,EAAE,OAAO,KAAK,CAC/C,EACA,OAAQ,IAAM,CACZsV,GAAgCY,EAAI,MAAM,CAAA,CAC5C,CACF,EAEF,MAAO,MACP,MAAO,CACL,UAAW,OACb,EACA,WAAY,EACd,EACA,CACE,IAAK,QACL,MAAOvV,EAAO,0BAA0B,EACxC,OAASuV,GAA0B,CAC3B,KAAA,CACJ,UAAAtO,EACA,SAAAlI,EACA,OAAAkR,EACA,eAAgB,CAAE,QAAApF,EAAQ,EAC1B,SAAAsF,GAAW,CAAA,EACToF,EAIEI,GAFatF,GAAW,OAAOpJ,CAAS,EAAG,OAAOkJ,EAAQ,CAAC,EAEjC,OAAOpR,CAAQ,EAIzCuR,IAFazF,IAAW,KAAK,MAAM0K,EAAI,UAAU,GAG1C,OAAS,GACpB,CAAC7F,GACD,CAAC8B,GACDxB,EAEF,cACGjN,EACC,CAAA,SAAA,CAAA5D,EAAA,IAAC6D,EAAA,CACC,GAAI,CACF,QAAS,QACX,EAEC,SAAU+M,GAAAtI,GAAekO,EAAU,EAAGJ,CAAG,CAAA,CAC5C,EACApW,EAAA,IAAC4D,EAAA,CACC,GAAI,CACF,UAAW,OACX,QAAS,EACT,UAAWjF,EAAW,MAAQ,QAC9B,QAAS,OACT,eAAgB,UAClB,EACA,GAAG,0BAEF,YAEGgF,EAAAA,KAAA2J,EAAA,SAAA,CAAA,SAAA,CAAAtN,EAAA,IAACuH,GAAA,CACC,KAAI,GACJ,GAAI,CACF,YAAa,SACb,SAAU,MACZ,EAEA,SAAAvH,EAAA,IAACwR,GAAA,CACC,GAAI,CACF,OAAQ,UACR,MAAO,qBACT,EACA,QAAS,IAAM,CACbd,EAAe,EAAI,EACFC,EAAA,OAAOG,CAAM,CAAC,EAE3BsF,EAAI,aACNxG,EAASwG,EAAI,WAAW,CAC1B,CACF,CAAA,CACF,CACF,EAEApW,EAAA,IAACuH,GAAA,CACC,KAAI,GACJ,GAAI,CACF,YAAa4J,GAAkB,SAAW,GAC1C,WAAYA,GAAkB,SAAW,EAC3C,EAEC,SACCA,IAAAnR,EAAA,IAACyR,GAAA,CACC,GAAI,CACF,OAAQ,UACR,MAAO,qBACT,EACA,QAAS,IAAM,CACP,KAAA,CAAE,eAAA5J,GAAgB,UAAAlF,GAAW,OAAAmO,GAAQ,WAAAlJ,GAAY,SAAAhI,EAAAA,EAAawW,EAEpEtB,EACE,CACE,GAAGjN,GACH,cAAeD,GACf,SAAAhI,EACF,EACA+C,GACAmO,EACF,CAAA,CACF,CAAA,CACF,CAEJ,EACA9Q,EAAA,IAACuH,GAAA,CACC,KAAI,GACJ,GAAI,CACF,WAAY,QACd,EAEC,SACCsJ,GAAA,CAACN,GACD,CAAC8B,GACCrS,EAAA,IAACuI,GAAA,CACC,GAAI,CACF,OAAQ,UACR,MAAO,qBACT,EACA,QAAS,IAAM,CACbsB,EAAc,EAAI,EACFuI,EAAA,OAAOtB,CAAM,CAAC,CAAA,CAChC,CAAA,CACF,CAAA,CAEN,CACF,CAAA,CAAA,CAAA,CAEJ,EACF,CAEJ,EACA,MAAO,MACP,MAAO,CACL,UAAW,OAAA,CACb,CAEJ,EAEA,cACGY,GACC,CAAA,SAAA,CAAA/N,EAAA,KAACC,EAAA,CACC,GAAI,CACF,QAAS,OACT,WAAY,SACZ,eAAgB,gBAChB,OAAQ,YACV,EAEA,SAAA,CAAA5D,EAAA,IAAC6D,EAAA,CACC,GAAI,CACF,SAAU,MACZ,EAEC,WAAO,uCAAwC,CAC9C,WAAUwD,GAAAlC,GAAA,YAAAA,EAAkB,WAAlB,YAAAkC,GAA4B,aAAc,CACrD,CAAA,CAAA,CACH,EACArH,EAAA,IAAC6D,EAAA,CACC,GAAI,CACF,SAAU,MACZ,EAEC,SAAc+P,GAAA,GAAKtL,GAAegL,IAA0B,CAAG,CAAA,CAAA,CAClE,CAAA,CACF,EACAtT,EAAA,IAAC4D,EAAA,CACC,GAAI,CACF,aAAc,KAChB,EAEA,SAAA5D,EAAA,IAACyW,GAAA,CACC,cAAc,sBACd,aAAe,GAAM,CACnB9B,EAAoB,CAAC,CAAA,CACvB,CAAA,CACF,CACF,EAEA3U,EAAA,IAAC0W,GAAA,CACC,IAAKjE,EACL,YAAA6D,GACA,mBAAoB,CAAC,GAAI,GAAI,EAAE,EAC/B,eAAgBpE,EAChB,aAAcc,EACd,eAAgB,GAChB,aAAY,GACZ,sBAAqB,GACrB,wBAAyB,GACzB,gBACEU,KACCvJ,EACG,EAAE9E,GAAyBwD,IAC1B0H,GAAoB8B,IAAoBxB,GAE/C,MAAK,GACL,iBAAkBhQ,EAAO,iCAAiC,EAC1D,WAAY,GACZ,eAAgBmR,EAChB,kBAAAyD,GACA,oBAAqB,EACrB,WAAY5U,EAAO,oCAAoC,EACvD,cAAekT,GACf,QAAAC,GACA,SAAUF,GACV,SAAS,2BACT,WAAY,CAACsC,EAAKjQ,EAAOkK,IACvB,OAAArQ,OAAAA,EAAA,IAACiQ,GAAA,CACC,MAAK5I,EAAAlC,GAAA,YAAAA,EAAkB,WAAlB,YAAAkC,EAA4B,MAAM,SAAU,EACjD,KAAM+O,EACN,UAAWjQ,EACX,UAAAyK,GACA,OAAQkE,EACR,SAAU1C,EACV,SAAA/B,EACA,cAAAxG,EACA,eAAA6G,EACA,iBAAAC,EACA,SAAAf,EACA,uBAAA1J,EACA,6BAA8BsP,GAC9B,iBAAkBjF,GAAoB8B,EACtC,uCAAAxB,CAAA,CAAA,EACF,CAEJ,EAEA7Q,EAAA,IAAC2W,GAAA,CACC,OAAQjE,EACR,UAAWX,EACX,aAAcC,EACd,QAASY,EACT,KAAK,eACL,SAAUiC,GACV,UAAWG,GACX,OAAM,GACN,UAAArU,CAAA,CACF,EAEAX,EAAA,IAAC0P,GAAA,CACC,KAAM8D,GACN,MAAA7D,EACA,SAAAC,EACA,0BAAAC,GACA,wBAAAC,EAAA,CAAA,CACF,EACF,CAEJ,CAEA,MAAe8G,GAAAA,EAAAA,WAAW9E,EAAmB,ECzuBvC+E,GAAqBlN,GAAiC,CACtD,GAAAA,EAAW,OAAS,EAAG,CACzB,IAAI3B,EAAQ,EAED,OAAA2B,EAAA,QAAStH,GAAwB,CACpC,KAAA,CACJ,KAAM,CAAE,SAAAzC,EAAU,UAAAkI,EAAW,SAAAkJ,CAAS,CAAA,EACpC3O,EAEE0F,EAAQmJ,GAAW,OAAOpJ,CAAS,EAAG,OAAOkJ,CAAQ,CAAC,EAEnDhJ,GAAAD,EAAQ,OAAOnI,CAAQ,CAAA,CACjC,EAEO,IAAOoI,EAAS,GAAA,CAEnB,MAAA,EACT,EAEA,SAAS8O,IAAU,CACjB,KAAM,CAAE,GAAA1W,EAAK,EAAG,EAAI2W,GAAU,EACxB,CACJ,MAAO,CAAE,cAAA9I,EAAe,oBAAApF,EAAsB,EAAM,CAAA,EAClDxI,EAAAA,WAAWyI,EAAa,EACtBnI,EAAYH,GAAewW,EAAiB,EAC5C,CAAE,cAAeC,GAAiBzW,GAAewF,EAA0B,EAC3EgE,EAAOxJ,GAAe,CAAC,CAAE,QAAAC,KAAcA,EAAQ,SAAS,IAAI,EAC5DwI,EAAYzI,GAAe,CAAC,CAAE,QAAAC,KAAcA,EAAQ,YAAY,EAAE,EAClEyI,EAAkB1I,GAAe,CAAC,CAAE,QAAAC,KAAcA,EAAQ,SAAS,eAAe,EAElFsI,EAAavI,GAAe,CAAC,CAAE,YAAAwI,KAAkBA,EAAY,kBAAkB,UAAU,EAGzFkO,EADQC,GAAS,EACI,QAAQ,QAAQ,KAErC,CACJ,oCAAAhO,EACA,yBAAAC,EACA,6BAAA3D,CAAA,EACEjF,GAAekF,EAAsB,EAyBlC,MAAA,CACL,GAAAtF,EACA,cAAA6N,EACA,oBAAApF,EACA,UAAAlI,EACA,KAAAqJ,EACA,WAAAjB,EACA,aAAAmO,EACA,oCAAA/N,EACA,6BAAA1D,EACA,eAjCqB9E,EAAYyI,EAA2B,GAkC5D,YAhCkB,MAAO6C,GAAyB,CAClD,MAAMP,EAAU,CAAE,WAAAO,EAAY,aAAAgL,EAAc,UAAAhO,EAAW,gBAAAC,CAAgB,EACjE,CAAE,eAAArB,CAAe,EAAIlH,EACvB,MAAMwL,GAAkBT,CAAO,EAC/B,MAAMU,GAAiBV,CAAO,EAElC,OAAOY,GAAuBzE,CAAc,CAC9C,EA0BE,gBAxBuBuP,GAAwB,CAC/C,MAAM1L,EAAU,CAAE,GAAG0L,EAAQ,GAAAhX,CAAG,EAEhC,OAAOO,EAAY0W,GAA0B3L,CAAO,EAAI4L,GAAyB5L,CAAO,CAC1F,EAqBE,uBAnB8BoF,GAA4B,CAC1D,MAAMpF,EAAU,CAAE,OAAAoF,EAAQ,eAAgB1Q,CAAG,EAE7C,OAAOO,EAAY4W,GAA0B7L,CAAO,EAAI8L,GAAyB9L,CAAO,CAC1F,CAgBA,CACF,CAKA,SAAS+L,GAAoB,CAAE,YAAAzJ,GAA0B,CACjD,KAAA,CACJ,GAAA5N,EACA,cAAA6N,EACA,oBAAApF,EACA,UAAAlI,EACA,KAAAqJ,EACA,WAAAjB,EACA,aAAAmO,EACA,oCAAA/N,EACA,6BAAA1D,EACA,eAAAyE,EACA,YAAAgC,EACA,gBAAAwL,EACA,uBAAAC,GACEb,GAAQ,EACN1I,EAAWC,GAAY,EACvB,CAAC1P,CAAQ,EAAIC,GAAU,EACvB,CAAE,SAAAgZ,CAAA,EAAavX,EAAA,WAAWC,EAA0B,EAEpDO,EAASC,GAAU,EAEnB+W,EAAWvO,SAA6B,IAAI,EAE5C,CAACK,EAAYwI,CAAa,EAAI1S,EAAAA,SAA2B,CAAA,CAAE,EAC3D,CAAC0F,EAAkB2S,CAAmB,EAAIrY,EAAAA,SAAuC,IAAI,EACrF,CAACoO,EAAckK,CAAe,EAAItY,EAAAA,SAAmC,IAAI,EACzE,CAACsS,EAAkBC,CAAmB,EAAIvS,EAAAA,SAAS,EAAK,EAExD,CAACuY,EAAYnO,CAAa,EAAIpK,EAAAA,SAAkB,EAAK,EACrD,CAACwY,GAAc7F,EAAe,EAAI3S,EAAAA,SAA0B,EAAE,EAE9D,CAACyY,EAAyB3S,CAA0B,EAAI9F,EAAAA,SAA0B,CAAA,CAAE,EACpF,CAAC0Y,EAAyB7S,CAA0B,EAAI7F,EAAAA,SAA0B,CAAA,CAAE,EAEpF,CAAC4F,GAAuB+S,CAAwB,EAAI3Y,EAAAA,SAAkB,EAAK,EAC3E,CAACsK,EAAuBsO,EAAwB,EAAI5Y,EAAAA,SAAkB,EAAI,EAE1EoR,EAAyClQ,EAC3CwI,GAAuCY,EACvC,GAEEwE,GAAqBG,EAAAA,QAAQ,IAAM,CACvC,GAAI/N,GAAawE,EAAkB,CACjC,KAAM,CAAE,YAAAwJ,EAAa,aAAAd,CAAiB,EAAA1I,EAChC,CAAE,6BAA8ByJ,CAAA,EAAqCE,GAOpE,OANmCI,GAAsB,CAC9D,KAAMN,EACN,UAAW,QAAOD,GAAA,YAAAA,EAAa,YAAa,CAAC,EAC7C,OAAQ,QAAOd,GAAAA,YAAAA,EAAc,SAAU,CAAC,CAAA,CACzC,CAEM,CAGF,OAAApI,CACN,EAAA,CAACA,EAA8B9E,EAAWwE,CAAgB,CAAC,EACxDgF,EAAkCxJ,EACpC4N,GACAvE,IAASsO,GAAa,aAEpBjG,GAAkBlN,GAAA,YAAAA,EAAkB,UAAW,GAAKgF,EAEpDoG,GAAmBpL,GAAA,YAAAA,EAAkB,UAAW,KAAMA,GAAA,YAAAA,EAAkB,UAAW,GAEnF4I,EAAoB,IAAM,CAC9BK,EAAS,gBAAgB,CAC3B,EAEArO,EAAAA,UAAU,IAAM,CACL6X,EAAA,CACP,KAAM,OACN,QAAS,CACP,GAAI,SAASxX,EAAI,EAAE,GAAK,CAAA,CAC1B,CACD,CAAA,EAGA,CAACA,CAAE,CAAC,EAED,MAAAmY,EAAwB,MAAOC,GAAkC,CACjE,GAAAA,EAAa,OAAS,EACpB,GAAA,CACF,MAAMvM,EAAuB,CAAC,EACjBuM,EAAA,QAASnW,IAAS,CACvB,KAAA,CAAE,KAAAqI,GAASrI,GACZ4J,EAAW,SAASvB,EAAK,SAAS,GAC1BuB,EAAA,KAAKvB,EAAK,SAAS,CAChC,CACD,EAEK,MAAA+N,EAAoB,MAAMvM,EAAYD,CAAU,EAEzC,OAAAuM,EAAA,QAASnW,IAAS,CACvB,KAAA,CAAE,KAAAqI,GAASrI,GAEXqW,GAAcD,EAAkB,KAAMzF,IAA6B,CACjE,KAAA,CAAE,GAAIpQ,EAAA,EAAcoQ,GAE1B,OAAOtI,EAAK,YAAc9H,EAAA,CAC3B,EAEI8H,EAAA,eAAiBgO,IAAe,CAAC,EACjChO,EAAA,aAAcgO,IAAA,YAAAA,GAAa,OAAQhO,EAAK,YACxCA,EAAA,YAAagO,IAAA,YAAAA,GAAa,aAAchO,EAAK,WAElDA,EAAK,uBAAyB,GAC1BA,EAAK,WAAa,IACpBA,EAAK,uBAAyB,GAChC,CACD,EAEM8N,QACAG,EAAU,CACjB5W,EAAS,MAAM4W,CAAG,CAAA,CAItB,MAAO,CAAC,CACV,EAEMzG,GAAyB,MAAOkF,GAAwB,CACtD,MAAAwB,EAAyB,MAAMlB,EAAgBN,CAAM,EAErD,CACJ,SAAU,CAAE,MAAAtB,EAAO,WAAA+C,EAAW,CAAA,EAC5BD,EAEEJ,EAAe,MAAMD,EAAsBzC,CAAK,EAOtD,OALM,MAAA7I,GAA0BuL,EAAc,GAAG,EAE7C7X,GAA2BoX,EAAAa,EAAuB,YAAY,EAClEd,EAAoBc,CAAsB,EAErCJ,EAOE,CACL,MAAOA,EACP,WAAAK,EACF,EATS,CACL,MAAO,CAAC,EACR,WAAY,CACd,CAOJ,EAEM/K,GAA2B,MAAOgL,GAAmB,OACzD9G,EAAoB,EAAI,EACpB,GAAA,CACF,MAAMoF,EAAwC,CAC5C,GAAI,OAAOhX,CAAE,EACb,MAAM+E,GAAA,YAAAA,EAAkB,OAAQ,GAChC,aAAaA,GAAA,YAAAA,EAAkB,cAAe,EAChD,EAEIxE,EACF,MAAMoY,GAAsB,CAC1B,GAAG3B,EACH,OAAA0B,CAAA,CACD,EAED,MAAME,GAAqB,CACzB,GAAG5B,EACH,UAAA6B,EAAA,CACD,EAGMlX,EAAA,QAAQlB,EAAO,wCAAwC,EAAG,CACjE,QAAS,EAAA,CACV,GACDwG,EAAAwQ,EAAS,UAAT,MAAAxQ,EAAkB,YAAW,QAC7B,CACA2K,EAAoB,EAAK,CAAA,CAE7B,EAEMtR,GAAa,IAAM,QACvB2G,EAAAwQ,EAAS,UAAT,MAAAxQ,EAAkB,YACpB,EAEMqB,GAAoB,IAAM,CAC9BmB,EAAc,EAAK,EACnBuI,GAAgB,EAAE,CACpB,EAEM8G,GAAoB,MAAOpI,EAA0B,KAAO,CAChEkB,EAAoB,EAAI,EAEpB,GAAA,CACF,GAAIlB,GAGE,GAFJ,MAAM6G,EAAuB7G,CAAM,EAE/BnH,EAAW,OAAS,EAAG,CACzB,MAAMwP,EAAgBxP,EAAW,OAAQtH,GAAwB,CAC/D,KAAM,CAAE,OAAQ+W,EAAc,EAAI/W,EAAK,KAEvC,OAAOyO,IAAWsI,EAAA,CACnB,EAEajH,EAAA,CAAC,GAAGgH,CAAa,CAAC,CAAA,MAE7B,CACD,GAAAxP,EAAW,SAAW,EAAG,OAClBA,EAAA,QAAQ,MAAOtH,GAAwB,CAC1C,KAAA,CAAE,KAAAqI,GAASrI,EAEX,MAAAsV,EAAuBjN,EAAK,MAAM,CAAA,CACzC,EAEDyH,EAAc,CAAA,CAAE,CAAA,CAGTpQ,EAAA,QAAQlB,EAAO,6BAA6B,CAAC,CAAA,QACtD,CACAmR,EAAoB,EAAK,EACdtR,GAAA,CAAA,CAEf,EAEMiI,GAA2B,SAAY,CACrC,MAAAuQ,GAAkB,OAAOjB,EAAY,CAAC,EAC5C,MAAMvP,GAAkB,CAC1B,EAEM2Q,GAAsB,SAAY,CAChC,KAAA,CACJ,wBAAyB,CAAE,UAAAC,CAAU,CACvC,EAAI,MAAMC,GAAuB,EAERnB,EAAAkB,IAAc,KAAOpP,CAAc,CAC9D,EAEAnK,OAAAA,EAAAA,UAAU,IAAM,CACVsS,GAAqCgH,GAAA,CAAA,EAExC,CAAChH,CAAe,CAAC,EAEpBtS,EAAAA,UAAU,IAAM,CACd,GAAIY,GAAawE,EAAkB,CACjC,KAAM,CAAE,YAAAwJ,EAAa,aAAAd,CAAiB,EAAA1I,EAEhC,CAAE,oCAAAgE,CAAAA,EAAwC2F,GAC1C0K,GAAgCtK,GAAsB,CAC1D,KAAM/F,EACN,UAAW,QAAOwF,GAAA,YAAAA,EAAa,YAAa,CAAC,EAC7C,OAAQ,QAAOd,GAAAA,YAAAA,EAAc,SAAU,CAAC,CAAA,CACzC,EAEDwK,GAAyBmB,EAA6B,CAAA,CACxD,EACC,CAACrU,EAAkBxE,CAAS,CAAC,EAI5BgD,EAAA,KAAA2J,WAAA,CAAA,SAAA,CAAA3J,EAAA,KAACC,EAAA,CACC,GAAI,CACF,QAAS,OACT,cAAe,SACf,KAAM,CACR,EAEA,SAAA,CAAA5D,EAAA,IAAC4N,GAAA,CACC,UAAAjN,EACA,iBAAAwE,EACA,aAAA0I,EACA,KAAA7D,EACA,kBAAA+D,EACA,yBAAAD,GACA,YAAAE,EACA,WAAAjF,EACA,cAAAkF,EACA,YAAaiJ,CAAA,CACf,EAEAvT,EAAA,KAAC4D,GAAA,CACC,UAAS,GACT,QAAS,EACT,GAAI,CACF,UAAW,IACX,SAAU,OACV,SAAU5I,EAAW,OAAS,SAC9B,cAAe,OACf,aAAcA,EAAW,OAAS,CACpC,EAEA,SAAA,CAAAqB,EAAA,IAAC4D,EAAA,CACC,GACEjF,EACI,CACE,UAAW,OACX,GAAI,MAAA,EAEN,CACE,UAAW,QACX,SAAU,EACV,GAAI,OACJ,GAAI,MACN,EAGN,SAACqB,EAAAA,IAAAyH,GAAA,CAAO,WAAYsK,EAAkB,eAAe,OACnD,SAAA/R,EAAA,IAACuH,GAAA,CACC,KAAI,GACJ,GACE5I,EACI,CACE,UAAW,MAAA,EAEb,CACE,UAAW,QACX,SAAU,CACZ,EAGN,SAAAqB,EAAA,IAAC8R,GAAA,CACC,IAAK+F,EACL,iBAAAtH,EACA,gBAAA8B,EACA,sBAAAhN,GACA,cAAA8M,EACA,iBAAAhN,EACA,iBAAA4M,EACA,oBAAAC,EACA,eAAgB5R,EAChB,uBAAA8R,GACA,cAAArI,EACA,gBAAAuI,GACA,UAAAzR,EACA,oBAAAkI,EACA,sBAAAkB,EACA,KAAAC,CAAA,CAAA,CACF,CAAA,CAEJ,CAAA,CAAA,CACF,EAEAhK,EAAA,IAACuH,GAAA,CACC,KAAI,GACJ,GACE5I,EACI,CACE,UAAW,MAAA,EAEb,CACE,UAAW,OACb,EAGL,SAA0CkS,GAAA,CAACN,GAAoB,CAAC8B,GAC/DrS,EAAA,IAACG,GAAA,CACC,WAAAO,GACA,KAAK,eACL,UAAAC,CAAA,CAAA,CACF,CAAA,CAEJ,CAAA,CACF,EAEC,CAAC4P,IACClL,IAAyBwD,GAAuB,CAACwJ,IAChDrS,EAAA,IAAC4I,GAAA,CACC,iBAAAzD,EACA,sBAAAE,GACA,WAAAsE,EACA,iBAAkBkN,GAAkBlN,CAAU,EAC9C,WAAYqI,EACZ,cAAAnI,EACA,2BAAAvE,EACA,2BAAAC,EACA,UAAA5E,EACA,YAAauW,EACb,sBAAAnN,EACA,KAAAC,CAAA,CAAA,CACF,CAAA,CAEN,EAEAhK,EAAA,IAACkF,GAAA,CACC,iBAAAC,EACA,KAAA6E,EACA,SAAUmO,EACV,gBAAiBD,EAAwB,OACzC,sBAAA7S,GACA,2BAAAC,EACA,2BAAAC,EACA,UAAW5G,EAAW,OAAS,OAAA,CACjC,EAEAqB,EAAA,IAACwI,GAAA,CACC,KAAMwP,EACN,kBAAAtP,GACA,yBAAAC,EAAA,CAAA,CACF,EACF,CAEJ,CAEA,SAAS8Q,GAA2B,CAAE,YAAAzL,GAA0B,CAC9D,OACGhO,EAAA,IAAA0Z,GAAA,CACC,SAAC1Z,EAAA,IAAAyX,GAAA,CAAoB,YAAAzJ,CAA0B,CAAA,EACjD,CAEJ"}