import{j as e,B as n}from"./mui-BLXOPN2Y.js";import{r as s}from"./reactVendor-BTcQ-GDs.js";import{u as y}from"./lang-DZEhsX8V.js";import{u as p,aA as j,ab as k,af as c}from"./react-setup-CIpmLpp1.js";import"./load-functions-BRbpFqwb.js";import"./base-BCVDEF8S.js";import{h as v,g as I}from"./payment-C2169Txu.js";import{c as b,u as L}from"./router-DEI8QtBD.js";import"./intl-CKipw3rV.js";import"./eCache-BdHG5F0B.js";import"./redux-D7_Lh1Zo.js";import"./toolkit-C5fVsw89.js";import"./lodashEs-DKEtmQJE.js";import"../index.BYqSO1mW.js";import"./global-D7Yn0gGb.js";import"./muiIcon-DcrdeM0-.js";import"./dateFns-CXOS6Mtj.js";import"./dropzone-BOmS2zFM.js";import"./b3checkout-Cg9hPbPG.js";function K(){const m=p(({global:r})=>r.storeInfo.platform),f=p(({company:r})=>r.tokens.B2BToken),[u,a]=s.useState(!1),[d,g]=s.useState(!1),t=b(),x=L(),i=y();s.useEffect(()=>{(async()=>{if(a(!0),!f){g(!0),a(!1);return}if(t!=null&&t.id||c.error(i("payment.errorInvoiceCantBeBlank")),t!=null&&t.id)try{const{invoice:{openBalance:{code:o="",value:l=""}}}=await v(Number(t.id));(!o||!l)&&c.error(i("payment.errorOpenBalanceIsIncorrect"));const B={lineItems:[{invoiceId:Number(t.id),amount:l}],currency:o};await I(B,m,!0)}catch(o){c.error((o==null?void 0:o.message)||i("payment.invoiceDoesNotExist"))}finally{a(!1)}})()},[m,t.id]);const h=()=>{x("/login")};return e.jsxs(n,{children:[u&&e.jsx(j,{backColor:"#FFFFFF"}),e.jsx(k,{isOpen:d,fullWidth:!0,title:"",rightSizeBtn:"ok",showLeftBtn:!1,handRightClick:h,children:e.jsx(n,{sx:{height:"200px",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:e.jsxs(n,{children:[e.jsx(n,{sx:{mb:"10px"},children:i("payment.firstLoginToPay")}),e.jsx(n,{children:i("payment.clickToLandingPage")})]})})})]})}export{K as default};
//# sourceMappingURL=index-ClZmgkNW.js.map
