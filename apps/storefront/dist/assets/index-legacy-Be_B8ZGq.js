System.register(["./mui-legacy-CSHs1xoY.js","./reactVendor-legacy-CtYIj4Ma.js","./useB2BCallback-legacy-BNykb3hy.js","./lang-legacy-DzjbYnyQ.js","./react-setup-legacy-drlPxekq.js","./load-functions-legacy-D4REYUJ_.js","./base-legacy-D2P4nFX7.js","./form-legacy-CAo5v63e.js","./config-legacy-B7bNT6SY.js","./QuoteStatus-legacy-BO6mbslm.js","./SearchProduct-legacy-CsnQzXTY.js","./getQuoteExtraFields-legacy-CdgvwYg-.js","./useBlockPendingAccountViewPrice-legacy-gtxwxFel.js","./QuickAdd-legacy-CUjtyxuu.js","./lodashEs-legacy-5FC1NR51.js","./B3CustomForm-legacy-LwY9NVZ0.js","./validatorRules-legacy-DT2FTDOY.js","./B3FilterSearch-legacy-BKkHq57Z.js","./muiIcon-legacy-B9QnU93P.js","./router-legacy-s4T0V6vG.js","./intl-legacy-B7uNycgM.js","./eCache-legacy-CW-H9Ud9.js","./redux-legacy-D5ZHjMNV.js","./toolkit-legacy-uWyLsHZ1.js","../index-legacy.Dey7ot32.js","./global-legacy-B1EgakWG.js","./dateFns-legacy-BcrsSUH8.js","./dropzone-legacy-30_HfosJ.js"],(function(e,t){"use strict";var a,n,i,r,s,o,l,c,d,u,p,m,f,x,h,g,b,y,j,q,S,N,v,I,C,D,T,w,k,P,A,L,B,E,O,z,F,_,R,V,Q,$,U,H,M,W,G,J,K,X,Y,Z,ee,te,ae,ne,ie,re,se,oe,le,ce,de,ue,pe,me,fe,xe,he,ge,be,ye,je,qe,Se,Ne,ve,Ie,Ce,De,Te,we,ke,Pe,Ae,Le,Be,Ee,Oe,ze,Fe,_e,Re,Ve,Qe,$e,Ue,He,Me,We,Ge,Je;return{setters:[e=>{a=e.j,n=e.K,i=e.ad,r=e.ag,s=e.B,o=e.y,l=e.T,c=e.w,d=e.G,u=e.s,p=e.f,m=e.v,f=e.x,x=e.ah},e=>{h=e.r},e=>{g=e.d},e=>{b=e.u},e=>{y=e.G,j=e.al,q=e.u,S=e.ad,N=e.b8,v=e.af,I=e.a_,C=e.b4,D=e.a$,T=e.b0,w=e.aN,k=e.b2,P=e.b3,A=e.b5,L=e.aj,B=e.bj,E=e.a,O=e.bk,z=e.ah,F=e.t,_=e.ab,R=e.a5,V=e.bl,Q=e.bg,$=e.aw,U=e.bm,H=e.aX,M=e.bn,W=e.aZ,G=e.i,J=e.bh,K=e.bo,X=e.bp,Y=e.bq,Z=e.br,ee=e.aY,te=e.C,ae=e.bs,ne=e.am,ie=e.ac,re=e.k,se=e.bt,oe=e.bu,le=e.ay,ce=e.ag,de=e.aH,ue=e.bv,pe=e.bw,me=e.bx,fe=e.by,xe=e.bz,he=e.bA},null,e=>{ge=e.b},e=>{be=e.a,ye=e.u},e=>{je=e.d,qe=e.c},e=>{Se=e.Q,Ne=e.i,ve=e.j,Ie=e.k,Ce=e.l},e=>{De=e.S,Te=e.d,we=e.C},e=>{ke=e.B,Pe=e.Q,Ae=e.C,Le=e.a,Be=e.b,Ee=e.g},e=>{Oe=e.u},e=>{ze=e.Q},e=>{Fe=e.t,_e=e.f,Re=e.k,Ve=e.u,Qe=e.l},e=>{$e=e.B},e=>{Ue=e.v},e=>{He=e.B},e=>{Me=e.E,We=e.e,Ge=e.A},e=>{Je=e.u},null,null,null,null,null,null,null,null],execute:function(){e("default",(function({setOpenPage:e}){const{state:{countriesList:n,openAPPParams:i}}=h.useContext(y),r=q(F),o=q((({company:e})=>e.companyInfo.id)),c=q((({company:e})=>e.companyInfo.companyName)),d=q((({company:e})=>e.customer)),u=q((({company:e})=>e.customer.role)),p=G(),j=q((({storeConfigs:e})=>e.currencies.enteredInclusiveTax)),N=q((({quoteInfo:e})=>e.draftQuoteList)),I=q((({b2bFeatures:e})=>e.masqueradeCompany.id)),C=q((({b2bFeatures:e})=>e.masqueradeCompany.companyName)),D=q((({quoteInfo:e})=>e.draftQuoteInfo)),T=q(ee),w=q((({global:e})=>e.quoteSubmissionResponse)),{selectCompanyHierarchyId:k}=q((({company:e})=>e.companyHierarchyInfo)),P=q((({global:e})=>e.blockPendingQuoteNonPurchasableOOS.isEnableProduct)),{state:{portalStyle:{backgroundColor:L="#FEF9F5"}}}=h.useContext(te),B=h.useMemo((()=>!r||ae(ne.quotesCreateActionsPermission,Number(k))),[r,k]),O=Je(),z=b(),[_]=E(),[R,V]=h.useState(!1),[Q,$]=h.useState(!1),[U,H]=h.useState([]),[W,K]=h.useState(!1),[X,Y]=h.useState(!1),[Z,be]=h.useState(!1),[ye,De]=h.useState(""),[Te,we]=h.useState(""),[ke,Oe]=h.useState([]),ze=h.useRef(null),[Fe]=je({level:le.COMPANY_SUBSIDIARIES,code:ne.getAddressesPermission,containOrEqual:"equal"});t();const Re=h.useRef(null),$e=h.useRef(null),Ue=h.useRef(null);h.useEffect((()=>{(async()=>{V(!0);const e=_e(D);try{if(r){const t=o||I;let a=[];const n=async e=>{const{addresses:{edges:t}}=await Ne(e);return t};k?k&&Fe&&(a=await n(Number(k))):a=await n(Number(t));const i=a.find((e=>1===e?.node?.isDefaultShipping)),r=a.find((e=>1===e?.node?.isDefaultBilling));if(i&&Ke(e,"shippingAddress")){const t={label:i?.node?.label||"",firstName:i?.node?.firstName||"",lastName:i?.node?.lastName||"",companyName:i?.node?.company||"",country:i?.node?.countryCode||"",address:i?.node?.addressLine1||"",apartment:i?.node?.addressLine2||"",city:i?.node?.city||"",state:i?.node?.state||"",zipCode:i?.node?.zipCode||"",phoneNumber:i?.node?.phoneNumber||"",addressId:i?.node?.id?Number(i.node.id):0};e.shippingAddress=t}if(r&&(!e?.billingAddress||Ke(e,"billingAddress"))){const t={label:r?.node?.label||"",firstName:r?.node?.firstName||"",lastName:r?.node?.lastName||"",companyName:r?.node?.company||"",country:r?.node?.countryCode||"",address:r?.node?.addressLine1||"",apartment:r?.node?.addressLine2||"",city:r?.node?.city||"",state:r?.node?.state||"",zipCode:r?.node?.zipCode||"",phoneNumber:r?.node?.phoneNumber||"",addressId:r?.node?.id?Number(r.node.id):0};e.billingAddress=t}H(a)}else if(100!==u){const{customerAddresses:{edges:e=[]}}=await ve(),t=e.map((e=>({node:qe(e.node)})));H(t)}const t=await Ee();if(t.length){Oe(t);const a=e.extraFields,n=t?.map((e=>{const t=a?.find((t=>t.fieldName===e.name))?.value||e?.default;return{id:Number(e.id),fieldName:e.name,value:t||""}}));e.extraFields=n}!e||e?.contactInfo&&!Ke(e,"contactInfo")||100===Number(u)?e&&p(se(e)):(e=>{const t={...e};t.contactInfo={name:`${d.firstName} ${d.lastName}`,email:d.emailAddress,companyName:c||C||"",phoneNumber:d.phoneNumber},p(se(t))})(e)}finally{const e=d.b2bId||d.id||0;p(oe(Number(e))),V(!1)}})()}),[k,Fe]);const He=h.useMemo((()=>{const e=D.contactInfo||{};return{info:{quoteTitle:e?.quoteTitle||"",referenceNumber:D?.referenceNumber||""},extraFields:D.extraFields||[],recipients:D.recipients||[]}}),[D]),Me=()=>{const e={shippingAddress:gt,billingAddress:bt};return $e?.current&&(e.billingAddress=$e.current.getContactInfoValue()),Ue?.current&&(e.shippingAddress=Ue.current.getContactInfoValue()),e},We=async e=>{if(Re?.current){const t=await Re.current.getContactInfoValue();if(!t)return!1;const a=e?.recipients||[];t.ccEmail.trim().length&&(e.recipients=Ve(Qe(a,[t.ccEmail]))),e.contactInfo={name:t?.name,email:t?.email,companyName:t?.companyName||"",phoneNumber:t?.phoneNumber,quoteTitle:t?.quoteTitle},e.referenceNumber=t?.referenceNumber||"";const n=ke.map((e=>({id:Number(e.id),fieldName:e.name,value:e.name?t[e.name]:""})));return e.extraFields=n,!0}return!1},Ye=ht(_,z),et=()=>{ze.current?.refreshSummary()},tt=(e,t)=>{const a=e||ye,n=t||Te;a&&(p(xe()),p(he()),ue.delete("cartToQuoteId"),O(`/quoteDetail/${a}?date=${n}`,{state:{to:"draft"}}))},at=async()=>{V(!0);try{const t=_e(D);if(Q&&Re?.current&&!(await We(t)))return;const a=t?.contactInfo||{},i=a?.quoteTitle||"";"quoteTitle"in a&&delete a.quoteTitle;const s=Object.keys(a).every((e=>"phoneNumber"===e||"companyName"===e||a&&!!a[e]));if(Ke(D,"contactInfo")||!s)return void v.error(z("quoteDraft.addQuoteInfo"));if(!N||0===N.length)return void v.error(z("quoteDraft.submit"));if(!P&&N.some((e=>J(e)?.name)))return void v.error(z("quoteDraft.submit.errorTip"));const l=(t?.note||"").trim().replace(/[\r\n]/g,"\\n"),c=e=>{const t=_e(e),a=n?.find((e=>e.countryCode===t.country));return a&&(t.country=a.countryName),t.address=e?.address||"",t.apartment=e?.apartment||"",t},{shippingAddress:p,billingAddress:m}=$e?.current?Me():t,f=p?c(p):{},x=m?c(m):{};let h=0,b=0;const y=e=>"string"==typeof e&&e.includes("-")?""+new Date(e).getTime()/1e3:e,q=N.map((e=>{const{node:t}=e,a={...t.productsSearch,selectOptions:t?.optionList||""},n=M(a,{}).map((e=>({optionId:e.optionId,optionValue:"date"===e.fieldType?y(e.optionValue):e.optionValue,optionLabel:`${e.valueText}`,optionName:e.valueLabel,type:e?.fieldOriginType||e.fieldType}))).filter((e=>!!e.optionName))||[],i=t?.productsSearch?.variants;let r;return Array.isArray(i)&&(r=i.find((e=>e.sku===t.variantSku))),h+=Number(t?.basePrice||0)*Number(t?.quantity||0),b+=Number(t?.taxPrice||0)*Number(t?.quantity||0),{productId:t?.productsSearch?.id,sku:t.variantSku,basePrice:Number(t?.basePrice||0).toFixed(T.decimal_places),discount:"0.00",offeredPrice:Number(t?.basePrice||0).toFixed(T.decimal_places),quantity:t.quantity,variantId:r?.variant_id,imageUrl:t.primaryImage,productName:t.productName,options:n}})),S=(e=D?.fileInfo||[],100===u?[]:e.map((e=>({fileUrl:e.fileUrl,fileName:e.fileName,fileType:e.fileType,fileSize:e.fileSize})))),C={message:l,legalTerms:"",totalAmount:j?h.toFixed(T.decimal_places):(h+b).toFixed(T.decimal_places),grandTotal:h.toFixed(T.decimal_places),subtotal:h.toFixed(T.decimal_places),companyId:r?k||o||I:"",storeHash:de,quoteTitle:i,discount:"0.00",channelId:ce,userEmail:d.emailAddress,shippingAddress:f,billingAddress:x,contactInfo:a,productList:q,fileList:S,taxTotal:b.toFixed(T.decimal_places),currency:{currencyExchangeRate:T.currency_exchange_rate,token:T.token,location:T.token_location,decimalToken:T.decimal_token,decimalPlaces:T.decimal_places,thousandsToken:T.thousands_token,currencyCode:T.currency_code},referenceNumber:`${t.referenceNumber}`||"",extraFields:t.extraFields||[],recipients:t.recipients||[]},A=99===Number(u)?Ie:Ce;if(!g("on-quote-create",C))throw new Error;const{quoteCreate:{quote:{id:L,createdAt:B}}}=await A(C);if(De(L),we(B),L){const e=ue.get("cartToQuoteId"),t=pe(e);await me(t)}"0"===w.value?tt(L,B):be(!0)}catch(t){ge.error(t)}finally{V(!1)}var e};return h.useEffect((()=>{if(X&&W&&$e.current){const e=$e.current.getContactInfoValue();Ue.current&&Ue.current.setShippingInfoValue(e)}}),[X,W]),a.jsxs(ie,{isSpinning:R,children:[a.jsxs(s,{sx:{mb:"60px",width:"100%"},children:[a.jsx(s,{sx:{marginBottom:"10px",width:"fit-content",displayPrint:"none"},children:a.jsxs(s,{sx:{color:"primary.main",cursor:"pointer",display:"flex",alignItems:"center"},onClick:()=>{i?.quoteBtn||100===Number(u)?(O("/"),e({isOpen:!1,openUrl:""})):O("/quotes")},children:[a.jsx(Ge,{fontSize:"small",sx:{fontSize:"12px",marginRight:"0.5rem"}}),a.jsx("p",{style:{margin:"0"},children:(()=>{let e=100===Number(u)?z("quoteDraft.button.back"):z("quoteDraft.button.backToQuoteLists");return"open"===i?.quoteBtn?e=z("quoteDraft.button.back"):"add"===i?.quoteBtn&&(e=z("quoteDraft.button.backToProduct")),e})()})]})}),a.jsxs(s,{sx:{display:"flex",justifyContent:"space-between"},children:[a.jsxs(s,{sx:{display:"flex",mb:"24px",flexDirection:_?"column":"row",alignItems:_?"flex-start":"center"},children:[a.jsx(l,{component:"h3",sx:{fontSize:"34px",mr:"1rem",mb:_?"1rem":"0",color:re(L)},children:z("quoteDraft.title.Quote")}),a.jsx(Se,{code:"0"})]}),B&&a.jsx(s,{children:_?a.jsx(s,{sx:{position:"fixed",left:0,bottom:0,background:"#FFF",width:"100%",display:"flex",p:"8px 0",zIndex:100,justifyContent:"center"},children:a.jsx(S,{variant:"contained",size:"small",sx:{height:"38px",width:"90%"},onClick:at,children:z("quoteDraft.button.submit")})}):a.jsx(S,{variant:"contained",size:"small",sx:{padding:"8px 22px",alignSelf:"center",marginBottom:"24px"},onClick:at,children:z("quoteDraft.button.submit")})})]}),a.jsxs(s,{children:[!Q&&a.jsx(Pe,{quoteAndExtraFieldsInfo:He,status:"Draft",contactInfo:D?.contactInfo,shippingAddress:D?.shippingAddress,billingAddress:D?.billingAddress||{},handleEditInfoClick:()=>{$(!0)}}),Q&&a.jsxs(Ae,{flexDirection:"column",children:[a.jsx(Ze,{emailAddress:d.emailAddress,info:D?.contactInfo,referenceNumber:D?.referenceNumber||"",quoteExtraFields:ke,extraFieldsDefault:D.extraFields||[],recipients:D?.recipients||[],handleSaveCCEmail:async e=>{p(fe(e))},ref:Re}),a.jsxs(s,{sx:{display:"flex",mt:_?0:"3rem",flexDirection:_?"column":"row"},children:[a.jsx(it,{title:z("quoteDraft.section.billing"),info:D?.billingAddress,addressList:U,pr:_?0:"8px",ref:$e,role:u,accountFormFields:Ye,shippingSameAsBilling:W,type:"billing",setBillingChange:Y}),a.jsx(it,{title:z("quoteDraft.section.shipping"),info:D?.shippingAddress,addressList:U,pl:_?0:"8px",ref:Ue,role:u,accountFormFields:Ye,shippingSameAsBilling:W,type:"shipping",setBillingChange:Y})]}),a.jsx(m,{label:z("quoteDraft.checkbox.sameAddressShippingAndBilling"),control:a.jsx(f,{checked:W,onChange:e=>{if(K(e.target.checked),$e.current){const t=$e.current.getContactInfoValue();Ue.current&&e.target.checked&&Ue.current.setShippingInfoValue(t)}}}),sx:{mt:2}}),a.jsx(S,{sx:{mt:"20px",mb:"15px"},onClick:async()=>{const e=_e(D);if(Re?.current&&!(await We(e)))return;const{shippingAddress:t,billingAddress:a}=Me();e.shippingAddress=t,e.billingAddress=a,Object.keys(e.contactInfo).every((t=>"phoneNumber"===t||"companyName"===t||"quoteTitle"===t||!!e.contactInfo[t]))&&(p(se(e)),$(!1))},variant:"outlined",children:z("quoteDraft.button.saveInfo")})]})]}),a.jsxs(s,{sx:{mt:"20px",display:"flex",flexDirection:_?"column":"row",alignItems:"flex-start"},children:[a.jsx(Ae,{flexDirection:"column",xs:{flexBasis:_?"100%":"680px",flexGrow:2,marginRight:"20px",marginBottom:"20px",boxShadow:"0px 2px 1px -1px rgba(0, 0, 0, 0.2), 0px 1px 1px rgba(0, 0, 0, 0.14), 0px 1px 3px rgba(0, 0, 0, 0.12)",borderRadius:"4px"},children:a.jsx(xt,{updateSummary:et,total:N.length,items:N,isB2BUser:r})}),a.jsx(Ae,{flexDirection:"column",xs:{flexBasis:_?"100%":"340px",marginBottom:"20px",backgroundColor:"transparent",padding:0,flexGrow:1},children:a.jsxs(x,{spacing:2,sx:{width:"100%"},children:[a.jsx(ot,{ref:ze}),a.jsx(Xe,{updateList:et,addToQuote:e=>{A(e)},isB2BUser:r}),a.jsx(Le,{quoteStatus:"Draft"}),100!==u&&a.jsx(Be,{status:0})]})})]})]}),a.jsx(rt,{isOpen:Z,onClose:()=>{be(!1),tt()},quoteSubmissionResponseInfo:w})]})}));const t=()=>{const{state:{countriesList:e},dispatch:t}=h.useContext(y);h.useEffect((()=>{(async()=>{if(e&&!e.length){const{countries:e}=await j();t({type:"common",payload:{countriesList:e}})}})()}),[e])},Ke=(e,t)=>Object.values(e?.[t]).every((e=>""===e||0===e));function Xe(e){const{updateList:t,addToQuote:o,isB2BUser:l}=e,c=q((({company:e})=>e.companyInfo.id)),d=q((({company:e})=>e.customer.customerGroupId)),u=q((({company:e})=>e.companyInfo.status)),[p,m]=h.useState(!1),[f,x]=h.useState(!1),[g]=Oe(),y=b(),j=e=>e.map((e=>{const{variantId:t,newSelectOptionList:a,id:n,name:i,quantity:r,variants:s=[],basePrice:o,taxPrice:l,calculatedValue:c}=e,d=1===s.length?s[0]:s.find((e=>e.variant_id===t)),{image_url:u="",sku:p}=d;let m;try{m=JSON.stringify(a)}catch(h){m="[]"}const f=d.bc_calculated_price.tax_exclusive,x=d.bc_calculated_price.tax_inclusive;return{node:{basePrice:o||f,taxPrice:l||Number(x)-Number(f),optionList:m,id:k(),primaryImage:u,productId:n,productName:i,calculatedValue:c,productsSearch:{...e,selectOptions:m},quantity:r,variantSku:p}}}));return a.jsx(n,{children:a.jsx(i,{sx:{p:"16px !important"},children:a.jsxs(ke,{title:y("quoteDraft.collapseTitle.addToQuote"),children:[a.jsx(De,{updateList:t,addToList:async e=>{const t=j(e),a=e.filter((({sku:e,variantId:t,variants:a})=>{const n=a.find((e=>e.variant_id===t||e.variantId===t)).sku;return!(e||n)}));return a.length>0&&v.error(y("quoteDraft.notification.cantAddProductsNoSku"),{isClose:!0}),a.length===e.length?[]:(o(t),v.success(y("quoteDraft.notification.productSingular"),{isClose:!0}),e)},type:"quote",searchDialogTitle:y("quoteDraft.modalTitle.addToQuote"),addButtonText:y("quoteDraft.searchProduct.addToQuoteButton"),isB2BUser:l}),a.jsx(r,{}),a.jsx(ze,{updateList:t,quickAddToList:async e=>{const t=e.map((e=>e.productId)),{productsSearch:a}=await I({productIds:t,companyId:c,customerGroupId:d}),n=a.map((t=>{const a=e.find((e=>e.productId===t.id))||{},{variantId:n,newSelectOptionList:i,quantity:r}=a;return{...t,variantId:n,newSelectOptionList:i,quantity:r}}));await C(n);const i=j(n);return o(i),v.success(y("quoteDraft.notification.productPlural"),{isClose:!0}),e},level:1,buttonText:y("quoteDraft.button.addProductsToAddToQuote")}),a.jsx(r,{}),a.jsx(s,{sx:{margin:"20px 0 0"},children:a.jsxs(S,{variant:"text",onClick:()=>{g&&0===u?v.info(y("quoteDraft.notification.businessAccountPendingActivation")):m(!0)},children:[a.jsx(Te,{sx:{marginRight:"8px"}}),y("quoteDraft.button.bulkUploadCSV")]})}),a.jsx(N,{isOpen:p,setIsOpen:m,handleAddToList:async e=>{x(!0);try{const{validProduct:a}=e,n=[];a.forEach((e=>{const{products:t}=e;n.includes(Number(t.productId))||n.push(Number(t.productId))}));const i=l?I:D,{productsSearch:r}=await i({productIds:n,companyId:c,customerGroupId:d}),s=T(r);let o=!1;const u=[];a.forEach((e=>{const{products:{option:t,variantSku:a,productId:n,productName:i,variantId:r},qty:l}=e,c=(d=t,0===d?.length?[]:d.map((({option_id:e,id:t})=>({optionId:`attribute[${e}]`,optionValue:t}))));var d;const p=s.find((e=>Number(e.id)===Number(n))),m=p.variants.find((e=>e?.sku?.toUpperCase()===a?.toUpperCase())),f={node:{id:k(),variantSku:m?.sku,variantId:r,productsSearch:p,primaryImage:m.image_url||w,productName:i,quantity:Number(l)||1,optionList:JSON.stringify(c),productId:n,basePrice:m.bc_calculated_price.as_entered,taxPrice:m.bc_calculated_price.tax_inclusive-m.bc_calculated_price.tax_exclusive}};u.push(f),o=!0})),o=P(u),o?(await C(u,"2"),A(u),v.success(y("quoteDraft.notification.productPlural"),{isClose:!0}),t(),m(!1)):v.error(y("quoteDraft.notification.errorRangeProducts"))}catch(a){ge.error(a)}finally{x(!1)}},isLoading:f,withModifiers:!0})]})})})}const Ye=Ue(["email"]),Ze=h.forwardRef((function({info:e,emailAddress:t,quoteExtraFields:n,referenceNumber:i,extraFieldsDefault:r,recipients:o,handleSaveCCEmail:l},c){const{control:d,getValues:u,setError:p,formState:{errors:m},setValue:f,handleSubmit:x}=ye({mode:"onSubmit"}),g=q((({company:e})=>e.customer.role))===L.GUEST,y=q(B),[j]=E(),S=b();h.useEffect((()=>{e&&"{}"!==JSON.stringify(e)&&Object.keys(e).forEach((t=>{f(t,e&&e[t])})),r.length&&r.forEach((e=>{e.fieldName&&f(e.fieldName,e.value)}))}),[e,r]);const N=async()=>{let e=!0;return await x((async a=>{e=await(async e=>t===Fe(e)||(y||p("email",{type:"custom",message:S("quoteDraft.contactInfo.emailExists")}),y))(a.email)}),(()=>{e=!1}))(),e&&(e=await(async()=>{const e=u(),t=n.map((t=>({fieldName:t.name,fieldValue:t.name?e[t.name]:""}))),a=await O({extraFields:t});if(200!==a.code){const e=(a.data?.errMsg||a.message||"").split(":");if(e.length>=2){const t=n?.find((t=>t.name===e[0]));if(t&&t.name)return p(t.name,{type:"manual",message:e[1]}),!1}return!1}return!0})()),e?u():e};h.useImperativeHandle(c,(()=>({getContactInfoValue:N})));const v=((e,t,a)=>[{name:"name",label:t("quoteDraft.contactInfo.contactPerson"),required:!0,default:"",fieldType:"text",xs:e?12:6,variant:"filled",size:"small",disabled:!a},{name:"email",label:t("quoteDraft.contactInfo.email"),required:!0,default:"",fieldType:"text",xs:e?12:6,variant:"filled",size:"small",validate:Ye,disabled:!a},{name:"phoneNumber",label:t("quoteDraft.contactInfo.phone"),required:!1,default:"",fieldType:"text",xs:e?12:6,variant:"filled",size:"small"},{name:"companyName",label:t("quoteDraft.contactInfo.companyName"),required:!1,default:"",fieldType:"text",xs:e?12:6,variant:"filled",size:"small"}])(j,S,g),I=(({isMobile:e,b3Lang:t,quoteExtraFields:a,referenceNumber:n,recipients:i,handleSaveClick:r})=>{const s=a.map((t=>({...t,xs:e?12:6})));return[{name:"quoteTitle",label:t("quoteDraft.contactInfo.quoteTitle"),required:!1,default:"",fieldType:"text",xs:e?12:6,variant:"filled",size:"small"},{name:"referenceNumber",label:t("quoteDraft.contactInfo.referenceNumber"),required:!1,default:n||"",fieldType:"text",xs:e?12:6,variant:"filled",size:"small"},...s,{name:"ccEmail",label:t("quoteDraft.contactInfo.ccEmail"),required:!1,default:"",fieldType:"multiInputText",xs:e?12:6,variant:"filled",size:"small",isEmail:!0,existValue:i,validate:Ye,isEnterTrigger:!0,handleSave:r}]})({isMobile:j,b3Lang:S,quoteExtraFields:n,referenceNumber:i,recipients:o,handleSaveClick:e=>{l(e)}}),C=[{title:S("quoteDraft.contactInfo.contact"),infos:v},{title:S("quoteDraft.quoteInfo.title"),infos:I,style:{mt:"20px"}}];return a.jsx(s,{width:"100%",children:C.map((e=>a.jsxs(s,{width:"100%",children:[a.jsx(s,{sx:{fontWeight:400,fontSize:"24px",height:"32px",mb:"20px",...e?.style},children:e.title}),a.jsx($e,{formFields:e.infos,errors:m,control:d,setError:p,getValues:u,setValue:f})]},e.title)))})})),et=c("div")((({marginBottom:e})=>({marginBottom:e,"& > span:not(:last-child)":{marginRight:"4px"}}))),tt=c("div")((({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:e.spacing(3)})));function at(e){const{item:t,onSetAddress:r}=e,s=o(),c=b();return a.jsx(n,{children:a.jsxs(i,{sx:{color:"#313440",wordBreak:"break-word"},children:[t.label&&a.jsx(l,{variant:"h5",sx:{marginBottom:1===t.isDefaultShipping||1===t.isDefaultBilling?s.spacing(1):s.spacing(3),color:"rgba(0, 0, 0, 0.87)"},children:t.label}),a.jsxs(et,{marginBottom:1===t.isDefaultShipping||1===t.isDefaultBilling?s.spacing(3):0,children:[1===t.isDefaultShipping&&a.jsx(z,{color:"#C4DD6C",textColor:"rgba(0, 0, 0, 0.87)",children:c("quoteDraft.addressItemCard.defaultShipping")}),1===t.isDefaultBilling&&a.jsx(z,{color:"#C4DD6C",textColor:"rgba(0, 0, 0, 0.87)",children:c("quoteDraft.addressItemCard.defaultBilling")})]}),a.jsx(l,{variant:"body1",children:`${t.firstName} ${t.lastName}`}),a.jsx(l,{variant:"body1",children:t.company||""}),a.jsx(l,{variant:"body1",children:t.addressLine1}),a.jsx(l,{variant:"body1",children:t.addressLine2}),a.jsx(l,{variant:"body1",children:`${t.city}, ${t.state} ${t.zipCode}, ${t.country}`}),a.jsx(l,{variant:"body1",children:t.phoneNumber}),a.jsx(tt,{children:a.jsx(S,{variant:"text",onClick:()=>{r(t)},children:c("quoteDraft.addressItemCard.chooseAddress")})})]})},t.id)}function nt({isOpen:e,closeModal:t,handleChangeAddress:n,addressList:i=[],type:r}){const o=h.useRef({copyList:[]}),l=b(),c=q(F),[u,p]=h.useState([]);h.useEffect((()=>{if(i.length){const e=i.map((e=>e.node)),t=e.filter((e=>1===e.isShipping&&"shipping"===r||1===e.isBilling&&"billing"===r));o.current.copyList=c?t:e,p(t)}}),[i,r,c]);const m=["address","firstName","lastName","phoneNumber","state","zipCode","country","label","address","addressLine1"];return a.jsxs(_,{fullWidth:!0,isOpen:e,handleLeftClick:()=>{t()},title:l("quoteDraft.chooseAddress.chooseFromSaved"),showRightBtn:!1,maxWidth:"lg",children:[a.jsx(s,{children:a.jsx(He,{searchBGColor:"rgba(0, 0, 0, 0.06)",placeholder:l("quoteDraft.chooseAddress.searchAddress"),handleChange:e=>{(e=>{if(!e&&o?.current)return void p(o.current.copyList);const t=[];m.forEach((a=>{let n=!0;u.forEach((i=>{i[a].includes(e)&&n&&(t.push(i),n=!1)}))})),p(t)})(e)}})}),a.jsx(s,{sx:{mt:"20px"},children:a.jsx(d,{container:!0,spacing:2,children:u.map((e=>a.jsx(d,{item:!0,xs:4,children:a.jsx(at,{item:e,onSetAddress:n})},e.id)))})})]})}const it=h.forwardRef((function({title:e,addressList:t=[],pr:n=0,pl:i=0,info:r,role:o,accountFormFields:c=[],shippingSameAsBilling:d=!1,type:u,setBillingChange:p},m){const{control:f,getValues:x,formState:{errors:g},setValue:j}=ye({mode:"onSubmit"}),[q]=E(),S=b(),[N,v]=h.useState(!1),[I,C]=h.useState(_e(c));(({setAddress:e,setValue:t,getValues:a,control:n,addresses:i})=>{const{state:{countriesList:r}}=h.useContext(y),s=be({control:n,name:"country"});h.useEffect((()=>{const t=i.findIndex((e=>"country"===e.name));r?.length&&-1!==t&&e(i.map(((e,a)=>t===a?{...e,options:r}:e)))}),[r]),h.useEffect((()=>{if(!s||!r?.length)return;const n=r.find((e=>e.countryCode===s))?.states||[],o=i.findIndex((e=>"state"===e.name));-1!==o&&e(i.map(((e,t)=>o===t?n.length>0?{...e,fieldType:"dropdown",options:n,required:!0}:{...e,fieldType:"text",options:[],required:!1}:e)));const l=a("state");t("state",l&&s&&(n.find((e=>e.stateName===l))||0===n.length)?l:"")}),[s,r])})({control:f,setValue:j,getValues:x,setAddress:C,addresses:I});const D=()=>x(),T=e=>{Object.keys(e).forEach((t=>{"company"!==t&&j(t,e[t])}))};h.useImperativeHandle(m,(()=>({getContactInfoValue:D,setShippingInfoValue:T})));const w=()=>{v(!1)};return h.useEffect((()=>{"{}"!==JSON.stringify(r)&&Object.keys(r).forEach((e=>{j(e,r[e])}))}),[r]),a.jsxs(s,{width:q?"100%":"50%",mt:q?"2rem":"0",pr:n,pl:i,children:[a.jsxs(s,{sx:{display:"flex",mb:"20px"},children:[a.jsx(l,{sx:{fontWeight:400,fontSize:"24px",height:"32px",mr:"16px"},children:e}),100!==Number(o)&&a.jsx(l,{onClick:()=>{v(!0)},sx:{fontWeight:500,fontSize:"14px",color:"primary.main",display:"flex",alignItems:"flex-end",cursor:"pointer",textTransform:"uppercase"},children:S("quoteDraft.quoteAddress.chooseFromSaved")})]}),a.jsx($e,{formFields:I,errors:g,control:f,getValues:x,setValue:j}),a.jsx(nt,{isOpen:N,handleChangeAddress:e=>{const t={label:e?.label||"",firstName:e?.firstName||"",lastName:e?.lastName||"",company:e?.company||"",country:e?.countryCode||"",address:e?.addressLine1||"",apartment:e?.addressLine2||"",city:e?.city||"",state:e?.state||"",zipCode:e?.zipCode||"",phoneNumber:e?.phoneNumber||""};Object.keys(t).forEach((e=>{"company"!==e&&j(e,t[e])})),"billing"===u&&d&&p(!0),w()},closeModal:w,addressList:t,type:u})]})}));function rt({isOpen:e=!1,onClose:t,quoteSubmissionResponseInfo:n}){const i=b(),r=n.message.split("\n");return a.jsx(s,{sx:{"#b2b-dialog-container":{'& [aria-labelledby="alert-dialog-title"]':{width:"500px",maxHeight:"500px"},"& h2":{color:"#313440"},"& h6":{color:"#313440",fontSize:"16px"}}},children:a.jsx(_,{isOpen:e,title:n.title,showLeftBtn:!1,handRightClick:t,isShowBordered:!1,rightSizeBtn:i("quoteDraft.submission.response.button.text"),maxWidth:!1,children:r.map((e=>a.jsx(l,{variant:"subtitle2",sx:{marginTop:"1rem"},children:e})))})})}const st={subtotal:0,shipping:0,tax:0,grandTotal:0},ot=h.forwardRef(((e,t)=>{const r=b(),[o,c]=h.useState({...st}),[u,p]=h.useState(!1),m=q((({global:e})=>e.showInclusiveTaxPrice)),f=q((({quoteInfo:e})=>e.draftQuoteList)),x=e=>parseFloat(String(e)),g=h.useCallback((()=>{const e=(e=>{const{global:{blockPendingQuoteNonPurchasableOOS:{isEnableProduct:t}}}=R.getState();return!!t&&e.some((e=>!V(e.node.basePrice,e)))})(f);p(e);const t=f.reduce(((e,t)=>{const{basePrice:a,taxPrice:n=0,quantity:i}=t.node;let{subtotal:r,grandTotal:s,tax:o}=e;const{shipping:l}=e,c=Q(Number(a),Number(n));return r+=x(c*i),o+=x(Number(n)*Number(i)),s=(m?r:r+o)+l,{grandTotal:s,shipping:l,tax:o,subtotal:r}}),{...st});c(t)}),[m,f]);h.useEffect((()=>{g()}),[g]),h.useImperativeHandle(t,(()=>({refreshSummary:()=>g()})));const y=e=>$(e),j=e=>u?r("quoteDraft.quoteSummary.tbd"):e;return a.jsx(n,{children:a.jsx(i,{children:a.jsxs(s,{children:[a.jsx(l,{variant:"h5",children:r("quoteDraft.quoteSummary.summary")}),a.jsxs(s,{sx:{marginTop:"20px",color:"#212121"},children:[a.jsxs(d,{container:!0,justifyContent:"space-between",sx:{margin:"4px 0"},children:[a.jsx(l,{children:r("quoteDraft.quoteSummary.subTotal")}),a.jsx(l,{children:j(y(o.subtotal))})]}),a.jsxs(d,{container:!0,justifyContent:"space-between",sx:{margin:"4px 0"},children:[a.jsx(l,{children:r("quoteDraft.quoteSummary.shipping")}),a.jsx(l,{children:r("quoteDraft.quoteSummary.tbd")})]}),a.jsxs(d,{container:!0,justifyContent:"space-between",sx:{margin:"4px 0"},children:[a.jsx(l,{children:r("quoteDraft.quoteSummary.tax")}),a.jsx(l,{children:j(y(o.tax))})]}),a.jsxs(d,{container:!0,justifyContent:"space-between",sx:{margin:"24px 0 0"},children:[a.jsx(l,{sx:{fontWeight:"bold"},children:r("quoteDraft.quoteSummary.grandTotal")}),a.jsx(l,{sx:{fontWeight:"bold"},children:j(y(o.grandTotal))})]})]})]})})})}));function lt({columnItems:e,isCustomRender:t=!1,tableKey:n,renderItem:i,noDataText:r="",tableFixed:s=!1,tableHeaderHide:o=!1,rowsPerPageOptions:l=[10,20,30],itemSpacing:c=2,itemXs:d=4,showCheckbox:u=!1,showSelectAllCheckbox:p=!1,selectedSymbol:m="id",isSelectOtherPageCheckbox:f=!1,showBorder:x=!0,getSelectCheckbox:g,hover:b=!1,labelRowsPerPage:y="",itemIsMobileSpacing:j=2,disableCheckbox:q=!1,onClickRow:S,showPagination:N=!0,showRowsPerPageOptions:v=!0,CollapseComponent:I,applyAllDisableCheckbox:C=!0,sortDirection:D="asc",sortByFn:T=(()=>{}),orderBy:w="",pageType:k="",items:P}){const A={offset:0,first:l[0]},[L,B]=h.useState(A),[O,z]=h.useState(!1),[F,_]=h.useState([]),[R]=E();h.useEffect((()=>{g&&g(F)}),[F,P]);const V={...L,count:P.length},Q=h.useCallback((()=>!!F.length&&P.every((e=>{const t=U(e)?e.node:e;return F.includes(t[m])}))),[P,F,m]);return h.useEffect((()=>{if(f){const e=Q();z(e)}}),[F,L,f,Q]),a.jsx(H,{hover:b,columnItems:e||[],listItems:P.slice(L.offset,L.offset+L.first),pagination:V,rowsPerPageOptions:l,onPaginationChange:async e=>{B(e)},isCustomRender:t,isInfiniteScroll:R,renderItem:i,tableFixed:s,tableHeaderHide:o,itemSpacing:c,itemXs:d,noDataText:r,tableKey:n,itemIsMobileSpacing:j,showCheckbox:u,showSelectAllCheckbox:p,disableCheckbox:q,selectedSymbol:m,isSelectOtherPageCheckbox:f,isAllSelect:O,selectCheckbox:F,handleSelectAllItems:()=>{f?(()=>{const e=Q(),t=[...F];e?P.forEach((e=>{const a=U(e)?e.node:e,n=t.findIndex((e=>e===a[m]));t.splice(n,1)})):P.forEach((e=>{const a=U(e)?e.node:e;F.includes(a[m])||t.push(a[m])})),_(t)})():(()=>{if(F.length===P.length)_([]);else{const e=[];P.forEach((t=>{const a=U(t)?t.node:t;a&&("shoppingListDetailsTable"===k?e.push(a.quantity>0||!a.disableCurrentCheckbox?a[m]:""):e.push(a[m]))})),_(e)}})()},handleSelectOneItem:e=>{const t=[...F],a=t.indexOf(e);-1!==a?t.splice(a,1):t.push(e),_(t)},showBorder:x,labelRowsPerPage:y,onClickRow:S,showPagination:N,showRowsPerPageOptions:v,CollapseComponent:I,applyAllDisableCheckbox:C,sortDirection:D,sortByFn:T,orderBy:w})}const ct=u("img")((()=>({maxWidth:"60px",height:"auto",marginRight:"0.5rem"})));function dt(e){const{item:t,onEdit:n,onDelete:r,handleUpdateProductQty:o,idEdit:c,len:d,itemIndex:u}=e,{basePrice:m,quantity:f,id:x,primaryImage:h,productName:g,variantSku:y,productsSearch:j,taxPrice:q=0}=t,S=b(),N=Q(Number(m),Number(q)),v=N*Number(f),I={...t.productsSearch,selectOptions:t.optionList},C=M(I,{}),D=JSON.parse(t.optionList),T=C.filter((e=>e.valueText)),{productUrl:k}=j,P=W({price:$(N),productInfo:t,showText:S("quoteDraft.quoteSummary.tbd")}),A=W({price:$(v),productInfo:t,showText:S("quoteDraft.quoteSummary.tbd")});return a.jsx(s,{width:"100%",sx:{borderTop:"1px solid #D9DCE9",borderBottom:u===d-1?"1px solid #D9DCE9":""},children:a.jsxs(i,{sx:{color:"#313440",display:"flex",pl:0},children:[a.jsx(s,{children:a.jsx(ct,{src:h||w,alt:"Product-img",loading:"lazy"})}),a.jsxs(s,{sx:{flex:1},children:[a.jsx(l,{variant:"body1",color:"#212121",onClick:()=>{const{location:{origin:e}}=window;k&&(window.location.href=`${e}${k}`)},sx:{cursor:"pointer"},children:g}),a.jsx(l,{variant:"body1",color:"#616161",children:y}),a.jsx(s,{sx:{margin:"1rem 0"},children:D.length>0&&T.length>0&&a.jsx(s,{children:T.map((e=>a.jsx(l,{sx:{fontSize:"0.75rem",lineHeight:"1.5",color:"#455A64"},children:`${e.valueLabel}: ${e.valueText}`},e.valueLabel)))})}),a.jsx(l,{sx:{fontSize:"14px"},children:`Price: ${P}`}),a.jsx(p,{size:"small",type:"number",variant:"filled",label:"qty",disabled:!c,inputProps:{inputMode:"numeric",pattern:"[0-9]*"},value:f,sx:{margin:"1rem 0",width:"60%",maxWidth:"100px","& label":{fontSize:"14px"},"& input":{fontSize:"14px"}},onChange:e=>{o(t,e.target.value)}}),a.jsx(l,{sx:{fontSize:"14px"},children:`Total: ${A}`}),a.jsxs(s,{sx:{marginTop:"1rem",textAlign:"end"},id:"shoppingList-actionList-mobile",children:[D.length>0&&c&&a.jsx(Me,{sx:{marginRight:"0.5rem",cursor:"pointer",color:"rgba(0, 0, 0, 0.54)"},onClick:()=>{n({...j,quantity:f,selectOptions:t.optionList},x)}}),c&&a.jsx(We,{sx:{cursor:"pointer",color:"rgba(0, 0, 0, 0.54)"},onClick:()=>{r(x)}})]})]})]})},t.id)}const ut=u("div")((()=>({backgroundColor:"#FFFFFF",padding:"0",width:"100%","& tbody":{"& tr":{"& td":{verticalAlign:"top"},"& td: first-of-type":{verticalAlign:"inherit"}},"& tr: hover":{"& #shoppingList-actionList":{opacity:1}}}}))),pt=u("img")((()=>({maxWidth:"60px",height:"auto",marginRight:"0.5rem"}))),mt=u(p)((()=>({"& input":{paddingTop:"12px",paddingRight:"6px"}}))),ft=1e6;function xt(e){const{total:t,items:n,idEdit:i=!0,isB2BUser:r,updateSummary:o}=e,c=b(),d=G(),[u,p]=h.useState(!1),[m,f]=h.useState(!1),[x,g]=h.useState(null),[y,j]=h.useState(""),S=q((({global:e})=>e.blockPendingQuoteNonPurchasableOOS.isEnableProduct)),N=async(e,t)=>{const a=await X(e,Number(t));d(Y({id:a.id,product:{node:a}})),o()},I=e=>{d(Z(e)),o()},D=(e,t)=>{g(e),j(t),f(!0)},T=[{key:"Product",title:c("quoteDraft.quoteTable.product"),render:e=>{const t={...e.productsSearch,selectOptions:e.optionList},n=M(t,{}),i=JSON.parse(e.optionList),r=n.filter((e=>e.valueText)),o=J(e),d=e?.productsSearch?.inventoryTracking||e?.inventoryTracking||"none";let u=e?.productsSearch?.inventoryLevel||e?.inventoryLevel||0;if("variant"===d){const t=e?.productsSearch?.variants.find((t=>t.sku===e.variantSku));u=t?.inventory_level}return a.jsxs(s,{sx:{display:"flex",alignItems:"flex-start"},children:[a.jsx(pt,{src:e.primaryImage||w,alt:"Product-img",loading:"lazy"}),a.jsxs(s,{children:[a.jsx(l,{variant:"body1",color:"#212121",onClick:()=>{const{location:{origin:e}}=window;t?.productUrl&&(window.location.href=`${e}${t?.productUrl}`)},sx:{cursor:"pointer"},children:e.productName}),a.jsx(l,{variant:"body1",color:"#616161",children:e.variantSku}),i.length>0&&r.length>0&&a.jsx(s,{children:r.map((e=>a.jsx(l,{sx:{fontSize:"0.75rem",lineHeight:"1.5",color:"#455A64"},children:`${e.valueLabel}: ${e.valueText}`},e.valueLabel)))}),!S&&o?.name&&a.jsxs(s,{sx:{color:"red"},children:[a.jsxs(s,{sx:{mt:"1rem",display:"flex",alignItems:"center","& svg":{mr:"0.5rem"}},children:[a.jsx(K,{color:"error",fontSize:"small"}),c("oos"===o?.type?"quoteDraft.quoteTable.outOfStock.tip":"quoteDraft.quoteTable.unavailable.tip")]}),"oos"===o?.type&&a.jsx(s,{children:c("quoteDraft.quoteTable.oosNumber.tip",{qty:u})})]})]})]})},width:"40%"},{key:"Price",title:c("quoteDraft.quoteTable.price"),render:e=>{const{basePrice:t,taxPrice:n}=e,i=Q(Number(t),Number(n));return a.jsx(l,{sx:{padding:"12px 0"},children:W({price:$(i),productInfo:e,showText:c("quoteDraft.quoteSummary.tbd")})})},width:"15%",style:{textAlign:"right"}},{key:"Qty",title:c("quoteDraft.quoteTable.qty"),render:e=>a.jsx(mt,{size:"small",type:"number",variant:"filled",disabled:!i,value:e.quantity,inputProps:{inputMode:"numeric",pattern:"[0-9]*"},onChange:t=>{N(e,Number(t.target.value))},onBlur:t=>{(async(e,t)=>{let a=Re(Number(t));a===Number(t)&&a>=1&&a<=ft||(Number(t)<1&&(a=1),Number(t)>ft&&(a=ft),N(e,a))})(e,Number(t.target.value))},sx:{width:"75%"}}),width:"15%",style:{textAlign:"right"}},{key:"Total",title:c("quoteDraft.quoteTable.total"),render:e=>{const{basePrice:t,quantity:n,taxPrice:r}=e,o=Q(Number(t),Number(r))*Number(n),d=JSON.parse(e.optionList);return a.jsxs(s,{children:[a.jsx(l,{sx:{padding:"12px 0"},children:W({price:$(o),productInfo:e,showText:c("quoteDraft.quoteSummary.tbd")})}),a.jsxs(s,{sx:{marginTop:"1rem",opacity:0,textAlign:"end"},id:"shoppingList-actionList",children:[d.length>0&&i&&a.jsx(Me,{sx:{marginRight:"0.5rem",cursor:"pointer",color:"rgba(0, 0, 0, 0.54)"},onClick:()=>{const{productsSearch:t,id:a,optionList:n,quantity:i}=e;D({...t,quantity:i,selectOptions:n},a)}}),i&&a.jsx(We,{sx:{cursor:"pointer",color:"rgba(0, 0, 0, 0.54)"},onClick:()=>{const{id:t}=e;I(t)}})]})]})},width:"15%",style:{textAlign:"right"}}];return a.jsxs(ut,{children:[a.jsx(s,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",margin:"0.5rem 0 1rem"},children:a.jsx(l,{sx:{fontSize:"24px"},children:c("quoteDraft.quoteTable.totalProducts",{total:t||0})})}),a.jsx(lt,{columnItems:T,rowsPerPageOptions:[12,24,36],items:n,isCustomRender:!1,hover:!0,labelRowsPerPage:c("quoteDraft.quoteTable.perPage"),showBorder:!1,itemIsMobileSpacing:0,noDataText:c("quoteDraft.quoteTable.noProducts"),renderItem:(e,n)=>a.jsx(dt,{len:t||0,item:e,itemIndex:n,onEdit:D,onDelete:I,handleUpdateProductQty:N,idEdit:i})}),a.jsx(we,{isOpen:m,isLoading:u,setIsLoading:p,product:x,onCancel:()=>{f(!1)},onConfirm:async e=>{await C(e);const t=(e=>e.map((e=>{const{variantId:t,newSelectOptionList:a,id:n,productId:i,name:r,quantity:s,variants:o=[],basePrice:l,taxPrice:c=0,calculatedNoTaxPrice:d=0,calculatedTaxPrice:u=0}=e;let[p]=o;o.length>1&&(p=o.find((e=>e.variant_id===t))??p);const{image_url:m="",sku:f}=p;let x;try{x=JSON.stringify(a)}catch(g){x="[]"}const h=p.bc_calculated_price?.tax_exclusive||0;return{node:{basePrice:l||h,taxPrice:c,optionList:x,id:n.toString(),primaryImage:m,productId:i,productName:r,productsSearch:{...e,selectOptions:x},quantity:Number(s),variantSku:f,calculatedTaxPrice:u,calculatedNoTaxPrice:d,calculatedValue:{}}}})))(e);t.forEach((e=>{const{basePrice:t}=e.node,a=e;a.node.id=y,a.node.basePrice=t})),f(!1),d(Y({id:y,product:t[0]})),o(),v.success(c("quoteDraft.quoteTable.productUpdated"))},isEdit:!0,isB2BUser:r})]})}const ht=(e,t)=>[{name:"label",label:t("quoteDraft.config.addressLabel"),required:!1,default:"",fieldType:"text",xs:12,variant:"filled",size:"small"},{name:"firstName",label:t("quoteDraft.config.firstName"),required:!1,default:"",fieldType:"text",xs:e?12:6,variant:"filled",size:"small"},{name:"lastName",label:t("quoteDraft.config.lastName"),required:!1,default:"",fieldType:"text",xs:e?12:6,variant:"filled",size:"small"},{name:"companyName",label:t("quoteDraft.config.company"),required:!1,default:"",fieldType:"text",xs:12,variant:"filled",size:"small"},{name:"country",label:t("quoteDraft.config.country"),required:!1,default:"",fieldType:"dropdown",options:[],xs:12,variant:"filled",size:"small",replaceOptions:{label:"countryName",value:"countryCode"}},{name:"address",label:t("quoteDraft.config.addressLine1"),required:!1,default:"",fieldType:"text",xs:12,variant:"filled",size:"small"},{name:"apartment",label:t("quoteDraft.config.addressLine2"),required:!1,default:"",fieldType:"text",xs:12,variant:"filled",size:"small"},{name:"city",label:t("quoteDraft.config.city"),required:!1,default:"",fieldType:"text",options:[],xs:12,variant:"filled",size:"small"},{name:"state",label:t("quoteDraft.config.state"),required:!1,default:"",fieldType:"text",options:[],xs:e?12:6,variant:"filled",size:"small",replaceOptions:{label:"stateName",value:"stateName"}},{name:"zipCode",label:t("quoteDraft.config.zipCode"),required:!1,default:"",fieldType:"text",options:[],xs:e?12:6,variant:"filled",size:"small"},{name:"phoneNumber",label:t("quoteDraft.config.phoneNumber"),required:!1,default:"",fieldType:"text",xs:12,variant:"filled",size:"small"}],gt={address:"",addressId:0,apartment:"",city:"",country:"",firstName:"",label:"",lastName:"",phoneNumber:"",state:"",zipCode:"",companyName:""},bt={address:"",addressId:0,apartment:"",city:"",country:"",firstName:"",label:"",lastName:"",phoneNumber:"",state:"",zipCode:"",companyName:""}}}}));
//# sourceMappingURL=index-legacy-Be_B8ZGq.js.map
