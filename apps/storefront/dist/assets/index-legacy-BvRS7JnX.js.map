{"version":3,"file":"index-legacy-BvRS7JnX.js","sources":["../../src/pages/Registered/RegisterComplete.tsx","../../src/pages/Registered/RegisteredAccount.tsx","../../src/pages/Registered/RegisteredDetail.tsx","../../src/pages/Registered/index.tsx","../../src/pages/Registered/RegisterContent.tsx","../../src/pages/Registered/RegisteredStep.tsx"],"sourcesContent":["import { MouseEvent, useContext, useEffect, useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { useB3Lang } from '@b3/lang';\nimport { Alert, Box, Typography } from '@mui/material';\n\nimport { B3CustomForm } from '@/components';\nimport { Captcha } from '@/components/form';\nimport { getContrastColor } from '@/components/outSideComponents/utils/b3CustomStyles';\nimport { CustomStyleContext } from '@/shared/customStyleButton/context';\nimport { GlobalContext } from '@/shared/global';\nimport {\n  createB2BCompanyUser,\n  createBCCompanyUser,\n  sendSubscribersState,\n  uploadB2BFile,\n} from '@/shared/service/b2b';\nimport { getStorefrontToken } from '@/shared/service/b2b/graphql/recaptcha';\nimport { channelId, storeHash } from '@/utils';\nimport b2bLogger from '@/utils/b3Logger';\n\nimport { RegisteredContext } from './context/RegisteredContext';\nimport { deCodeField, toHump } from './config';\nimport { PrimaryButton } from './PrimaryButton';\nimport { InformationFourLabels, TipContent } from './styled';\nimport { RegisterFields } from './types';\n\ninterface RegisterCompleteProps {\n  handleBack: () => void;\n  handleNext: () => void;\n}\n\ntype RegisterCompleteList = Array<RegisterFields> | undefined;\n\nexport default function RegisterComplete(props: RegisterCompleteProps) {\n  const b3Lang = useB3Lang();\n  const { handleBack, handleNext } = props;\n  const [personalInfo, setPersonalInfo] = useState<Array<CustomFieldItems>>([]);\n  const [errorMessage, setErrorMessage] = useState<string>('');\n  const [enterEmail, setEnterEmail] = useState<string>('');\n\n  const [captchaKey, setCaptchaKey] = useState('');\n  const [isEnabledOnStorefront, setIsEnabledOnStorefront] = useState(false);\n  const [storefrontSiteKey, setStorefrontSiteKey] = useState('');\n\n  const [isCaptchaMissing, setIsCaptchaMissing] = useState(false);\n\n  const handleGetCaptchaKey = (key: string) => setCaptchaKey(key);\n\n  useEffect(() => {\n    const getIsEnabledOnStorefront = async () => {\n      try {\n        const response = await getStorefrontToken();\n\n        if (response) {\n          setIsEnabledOnStorefront(response.isEnabledOnStorefront);\n          setStorefrontSiteKey(response.siteKey);\n        }\n      } catch (e) {\n        b2bLogger.error(e);\n      }\n    };\n\n    getIsEnabledOnStorefront();\n  }, []);\n\n  useEffect(() => {\n    if (captchaKey) setIsCaptchaMissing(false);\n  }, [captchaKey]);\n\n  const {\n    control,\n    handleSubmit,\n    setError,\n    formState: { errors },\n  } = useForm({\n    mode: 'all',\n  });\n  const { state, dispatch } = useContext(RegisteredContext);\n\n  const {\n    state: { blockPendingAccountOrderCreation },\n  } = useContext(GlobalContext);\n\n  const {\n    state: {\n      portalStyle: { backgroundColor = '#FEF9F5' },\n    },\n  } = useContext(CustomStyleContext);\n\n  const customColor = getContrastColor(backgroundColor);\n\n  const {\n    contactInformation,\n    bcContactInformation,\n    passwordInformation = [],\n    bcPasswordInformation = [],\n    accountType,\n    additionalInformation,\n    bcAdditionalInformation,\n    addressBasicFields = [],\n    bcAddressBasicFields = [],\n    companyInformation = [],\n    emailMarketingNewsletter,\n  } = state;\n\n  const list: RegisterCompleteList =\n    accountType === '1' ? contactInformation : bcContactInformation;\n  const passwordInfo: RegisterCompleteList =\n    accountType === '1' ? passwordInformation : bcPasswordInformation;\n\n  const passwordName = passwordInfo[0]?.groupName || '';\n\n  const additionalInfo: RegisterCompleteList =\n    accountType === '1' ? additionalInformation : bcAdditionalInformation;\n\n  const addressBasicList = accountType === '1' ? addressBasicFields : bcAddressBasicFields;\n\n  useEffect(() => {\n    if (!accountType) return;\n    if (list && list.length) {\n      const emailFields: CustomFieldItems =\n        list.find((item: RegisterFields) => item.name === 'email') || {};\n\n      setEnterEmail(emailFields?.default || '');\n    }\n\n    setPersonalInfo(passwordInfo);\n  }, [contactInformation, bcContactInformation, accountType, list, passwordInfo]);\n\n  const getBCFieldsValue = (data: CustomFieldItems) => {\n    const bcFields: CustomFieldItems = {};\n\n    bcFields.authentication = {\n      force_password_reset: false,\n      new_password: data.password,\n    };\n\n    bcFields.accepts_product_review_abandoned_cart_emails = emailMarketingNewsletter;\n\n    if (list) {\n      list.forEach((item: any) => {\n        const name = deCodeField(item.name);\n        if (name === 'accepts_marketing_emails') {\n          bcFields.accepts_product_review_abandoned_cart_emails = !!item?.default?.length;\n        } else if (!item.custom) {\n          bcFields[name] = item?.default || '';\n        }\n      });\n\n      bcFields.form_fields = [];\n      if (additionalInfo && (additionalInfo as Array<CustomFieldItems>).length) {\n        additionalInfo.forEach((field: CustomFieldItems) => {\n          bcFields.form_fields.push({\n            name: field.bcLabel,\n            value: field.default,\n          });\n        });\n      }\n    }\n\n    bcFields.addresses = [];\n    bcFields.origin_channel_id = channelId;\n    bcFields.channel_ids = [channelId];\n\n    if (accountType === '2') {\n      const addresses: CustomFieldItems = {};\n\n      const getBCAddressField = addressBasicList.filter((field: any) => !field.custom);\n      const getBCExtraAddressField = addressBasicList.filter((field: any) => field.custom);\n\n      if (getBCAddressField) {\n        bcFields.addresses = {};\n        getBCAddressField.forEach((field: any) => {\n          if (field.name === 'country') {\n            addresses.country_code = field.default;\n          } else if (field.name === 'state') {\n            addresses.state_or_province = field.default;\n          } else if (field.name === 'postalCode') {\n            addresses.postal_code = field.default;\n          } else if (field.name === 'firstName') {\n            addresses.first_name = field.default;\n          } else if (field.name === 'lastName') {\n            addresses.last_name = field.default;\n          } else {\n            addresses[field.name] = field.default;\n          }\n        });\n      }\n\n      addresses.form_fields = [];\n      // BC Extra field\n      if (getBCExtraAddressField && getBCExtraAddressField.length) {\n        getBCExtraAddressField.forEach((field: any) => {\n          addresses.form_fields.push({\n            name: field.bcLabel,\n            value: field.default,\n          });\n        });\n      }\n\n      bcFields.addresses = [addresses];\n      bcFields.trigger_account_created_notification = true;\n    }\n\n    const userItem = {\n      storeHash,\n      ...bcFields,\n    };\n\n    return createBCCompanyUser(userItem);\n  };\n\n  const getB2BFieldsValue = async (\n    _: CustomFieldItems,\n    customerId: number | string,\n    fileList: any,\n  ) => {\n    try {\n      const b2bFields: CustomFieldItems = {};\n      b2bFields.customerId = customerId || '';\n      b2bFields.storeHash = storeHash;\n\n      // company user extra field\n      const b2bContactInformationList = list || [];\n      const companyUserExtraFieldsList = b2bContactInformationList.filter((item) => !!item.custom);\n\n      if (companyUserExtraFieldsList.length) {\n        const companyUserExtraFields: Array<CustomFieldItems> = [];\n        companyUserExtraFieldsList.forEach((item: CustomFieldItems) => {\n          const itemExtraField: CustomFieldItems = {};\n          itemExtraField.fieldName = deCodeField(item.name);\n          itemExtraField.fieldValue = item?.default || '';\n          companyUserExtraFields.push(itemExtraField);\n        });\n        b2bFields.userExtraFields = companyUserExtraFields;\n      }\n\n      const companyInfo = companyInformation.filter(\n        (list) => !list.custom && list.fieldType !== 'files',\n      );\n      const companyExtraInfo = companyInformation.filter((list) => !!list.custom);\n      // company field\n      if (companyInfo.length) {\n        companyInfo.forEach((item: any) => {\n          b2bFields[toHump(deCodeField(item.name))] = item?.default || '';\n        });\n      }\n\n      // Company Additional Field\n      if (companyExtraInfo.length) {\n        const extraFields: Array<CustomFieldItems> = [];\n        companyExtraInfo.forEach((item: CustomFieldItems) => {\n          const itemExtraField: CustomFieldItems = {};\n          itemExtraField.fieldName = deCodeField(item.name);\n          itemExtraField.fieldValue = item?.default || '';\n          extraFields.push(itemExtraField);\n        });\n        b2bFields.extraFields = extraFields;\n      }\n\n      // address Field\n      const addressBasicInfo = addressBasicList.filter((list) => !list.custom) || [];\n      const addressExtraBasicInfo = addressBasicList.filter((list) => !!list.custom) || [];\n\n      if (addressBasicInfo.length) {\n        addressBasicInfo.forEach((field: CustomFieldItems) => {\n          const name = deCodeField(field.name);\n          if (name === 'address1') {\n            b2bFields.addressLine1 = field.default;\n          }\n          if (name === 'address2') {\n            b2bFields.addressLine2 = field.default;\n          }\n          b2bFields[name] = field.default;\n        });\n      }\n\n      // address Additional Field\n      if (addressExtraBasicInfo.length) {\n        const extraFields: Array<CustomFieldItems> = [];\n        addressExtraBasicInfo.forEach((item: CustomFieldItems) => {\n          const itemExtraField: CustomFieldItems = {};\n          itemExtraField.fieldName = deCodeField(item.name);\n          itemExtraField.fieldValue = item?.default || '';\n          extraFields.push(itemExtraField);\n        });\n        b2bFields.addressExtraFields = extraFields;\n      }\n      b2bFields.fileList = fileList;\n      b2bFields.channelId = channelId;\n\n      return await createB2BCompanyUser(b2bFields);\n    } catch (error) {\n      b2bLogger.error(error);\n    }\n    return undefined;\n  };\n\n  const getFileUrl = async (attachmentsList: RegisterFields[]) => {\n    let attachments: File[] = [];\n\n    if (!attachmentsList.length) return undefined;\n\n    attachmentsList.forEach((field: any) => {\n      attachments = field.default;\n    });\n\n    try {\n      const fileResponse = await Promise.all(\n        attachments.map((file: File) =>\n          uploadB2BFile({\n            file,\n            type: 'companyAttachedFile',\n          }),\n        ),\n      );\n\n      const fileList = fileResponse.reduce((fileList: any, res: any) => {\n        let list = fileList;\n        if (res.code === 200) {\n          const newData = {\n            ...res.data,\n          };\n          newData.fileSize = newData.fileSize ? `${newData.fileSize}` : '';\n          list = [...fileList, newData];\n        } else {\n          throw (\n            res.data.errMsg || res.message || b3Lang('intl.global.fileUpload.fileUploadFailure')\n          );\n        }\n        return list;\n      }, []);\n\n      return fileList;\n    } catch (error) {\n      b2bLogger.error(error);\n      throw error;\n    }\n  };\n\n  const saveRegisterPassword = (data: CustomFieldItems) => {\n    const newPasswordInformation = passwordInformation.map((field: RegisterFields) => {\n      const registerField = field;\n      if (accountType === '1') {\n        registerField.default = data[field.name] || field.default;\n      }\n      return field;\n    });\n\n    const newBcPasswordInformation = bcPasswordInformation.map((field: RegisterFields) => {\n      const registerField = field;\n      if (accountType === '2') {\n        registerField.default = data[field.name] || field.default;\n      }\n\n      return field;\n    });\n\n    dispatch({\n      type: 'all',\n      payload: {\n        passwordInformation: newPasswordInformation,\n        bcPasswordInformation: newBcPasswordInformation,\n      },\n    });\n  };\n\n  const handleSendSubscribersState = async () => {\n    if (list && list.length > 0) {\n      const emailMe = list.find(\n        (item: CustomFieldItems) =>\n          item.fieldId === 'field_email_marketing_newsletter' && item.fieldType === 'checkbox',\n      );\n      const firstName: CustomFieldItems =\n        list.find((item: RegisterFields) => item.fieldId === 'field_first_name') || {};\n      const lastName: CustomFieldItems =\n        list.find((item: RegisterFields) => item.fieldId === 'field_last_name') || {};\n      const isChecked = emailMe?.isChecked || false;\n      const defaultValue = emailMe?.default || [];\n\n      if (isChecked && (defaultValue as Array<string>).length > 0) {\n        try {\n          await sendSubscribersState({\n            storeHash,\n            email: enterEmail,\n            first_name: firstName.default,\n            last_name: lastName.default,\n            channel_id: channelId || 1,\n          });\n        } catch (err: any) {\n          setErrorMessage(err?.message || err);\n        }\n      }\n    }\n  };\n\n  const handleCompleted = (event: MouseEvent) => {\n    handleSubmit(async (completeData: CustomFieldItems) => {\n      if (completeData.password !== completeData.confirmPassword) {\n        setError('confirmPassword', {\n          type: 'manual',\n          message: b3Lang('global.registerComplete.passwordMatchPrompt'),\n        });\n        setError('password', {\n          type: 'manual',\n          message: b3Lang('global.registerComplete.passwordMatchPrompt'),\n        });\n        return;\n      }\n\n      if (isEnabledOnStorefront && !captchaKey) {\n        setIsCaptchaMissing(true);\n        return;\n      }\n\n      if (!isCaptchaMissing) {\n        try {\n          dispatch({\n            type: 'loading',\n            payload: {\n              isLoading: true,\n            },\n          });\n\n          let isAuto = true;\n          if (accountType === '2') {\n            await getBCFieldsValue(completeData);\n          } else {\n            const attachmentsList = companyInformation.filter((list) => list.fieldType === 'files');\n            const fileList = await getFileUrl(attachmentsList || []);\n            const res = await getBCFieldsValue(completeData);\n            const {\n              customerCreate: { customer: data },\n            } = res;\n            const accountInfo = await getB2BFieldsValue(completeData, data.id, fileList);\n\n            const companyStatus = accountInfo?.companyCreate?.company?.companyStatus || '';\n            isAuto = Number(companyStatus) === 1;\n          }\n          dispatch({\n            type: 'finishInfo',\n            payload: {\n              submitSuccess: true,\n              isAutoApproval: isAuto,\n              blockPendingAccountOrderCreation,\n            },\n          });\n          saveRegisterPassword(completeData);\n          await handleSendSubscribersState();\n          handleNext();\n        } catch (err: any) {\n          setErrorMessage(err?.message || err);\n        } finally {\n          dispatch({\n            type: 'loading',\n            payload: {\n              isLoading: false,\n            },\n          });\n        }\n      }\n    })(event);\n  };\n\n  return (\n    <Box\n      sx={{\n        pl: 1,\n        pr: 1,\n        mt: 2,\n        width: '100%',\n        '& h4': {\n          color: customColor,\n        },\n        '& input, & .MuiFormControl-root .MuiTextField-root': {\n          borderRadius: '4px',\n          borderBottomLeftRadius: '0',\n          borderBottomRightRadius: '0',\n        },\n      }}\n    >\n      {errorMessage && (\n        <Alert severity=\"error\">\n          <TipContent>{errorMessage}</TipContent>\n        </Alert>\n      )}\n      <Box>\n        <InformationFourLabels>{passwordName}</InformationFourLabels>\n        {personalInfo && (\n          <>\n            {enterEmail.length > 0 && (\n              <Box\n                sx={{\n                  fontSize: '16px',\n                  fontWeight: 400,\n                  color: '#000000',\n                  marginBottom: '10px',\n                  marginTop: '-12px',\n                  wordWrap: 'break-word',\n                }}\n              >\n                {`Create password for ${enterEmail}`}\n              </Box>\n            )}\n            <B3CustomForm formFields={personalInfo} errors={errors} control={control} />\n          </>\n        )}\n        {isCaptchaMissing ? (\n          <Typography\n            variant=\"body1\"\n            sx={{\n              color: 'red',\n              display: 'flex',\n              alignSelf: 'flex-start',\n              marginLeft: '8px',\n              marginTop: '2px',\n              fontSize: '13px',\n            }}\n          >\n            {b3Lang('login.loginText.missingCaptcha')}\n          </Typography>\n        ) : (\n          ''\n        )}\n        {isEnabledOnStorefront ? (\n          <Box\n            sx={{\n              display: 'flex',\n              justifyContent: 'center',\n              marginTop: '20px',\n            }}\n          >\n            <Captcha siteKey={storefrontSiteKey} size=\"normal\" handleGetKey={handleGetCaptchaKey} />\n          </Box>\n        ) : (\n          ''\n        )}\n      </Box>\n\n      <Box\n        sx={{\n          display: 'flex',\n          justifyContent: 'flex-end',\n          pt: 2,\n          gap: 1,\n        }}\n      >\n        <PrimaryButton onClick={handleBack}>{b3Lang('global.button.back')}</PrimaryButton>\n        <PrimaryButton onClick={handleCompleted}>{b3Lang('global.button.submit')}</PrimaryButton>\n      </Box>\n    </Box>\n  );\n}\n","import { ChangeEvent, MouseEvent, useContext, useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { useB3Lang } from '@b3/lang';\nimport { Alert, Box, FormControl, FormControlLabel, Radio, RadioGroup } from '@mui/material';\n\nimport { B3CustomForm } from '@/components';\nimport { b3HexToRgb, getContrastColor } from '@/components/outSideComponents/utils/b3CustomStyles';\nimport { CustomStyleContext } from '@/shared/customStyleButton';\nimport {\n  checkUserBCEmail,\n  checkUserEmail,\n  validateBCCompanyUserExtraFields,\n} from '@/shared/service/b2b';\nimport { themeFrameSelector, useAppSelector } from '@/store';\nimport { channelId } from '@/utils';\nimport b2bLogger from '@/utils/b3Logger';\n\nimport { RegisteredContext } from './context/RegisteredContext';\nimport { Base64, emailError } from './config';\nimport { PrimaryButton } from './PrimaryButton';\nimport { InformationFourLabels, TipContent } from './styled';\nimport { RegisterFields } from './types';\n\ninterface RegisteredAccountProps {\n  handleNext: () => void;\n}\n\nexport default function RegisteredAccount({ handleNext }: RegisteredAccountProps) {\n  const { state, dispatch } = useContext(RegisteredContext);\n  const IframeDocument = useAppSelector(themeFrameSelector);\n\n  const {\n    state: {\n      accountLoginRegistration,\n      portalStyle: { backgroundColor = '#FEF9F5' },\n    },\n  } = useContext(CustomStyleContext);\n\n  const customColor = getContrastColor(backgroundColor);\n\n  const b3Lang = useB3Lang();\n\n  const [errorTips, setErrorTips] = useState<string>('');\n\n  const {\n    contactInformation,\n    accountType,\n    additionalInformation,\n    bcContactInformation,\n    bcAdditionalInformation,\n  } = state;\n\n  const {\n    control,\n    handleSubmit,\n    getValues,\n    formState: { errors },\n    setError,\n    setValue,\n  } = useForm({\n    mode: 'onSubmit',\n  });\n\n  const additionName = accountType === '1' ? 'additionalInformation' : 'bcAdditionalInformation';\n  const additionalInfo: any =\n    accountType === '1' ? additionalInformation || [] : bcAdditionalInformation || [];\n\n  const newContactInformation = contactInformation?.map((contactInfo: CustomFieldItems) => {\n    const info = contactInfo;\n    if (contactInfo.fieldId === 'field_email' && accountType === '1') {\n      info.isTip = true;\n      info.tipText = 'This email will be used to sign in to your account';\n    }\n\n    return contactInfo;\n  });\n\n  const contactInfo: any = accountType === '1' ? newContactInformation : bcContactInformation || [];\n  const contactName = accountType === '1' ? 'contactInformation' : 'bcContactInformationFields';\n\n  const contactInformationLabel = contactInfo.length ? contactInfo[0]?.groupName : '';\n\n  const additionalInformationLabel = additionalInfo.length ? additionalInfo[0]?.groupName : '';\n\n  const showLoading = (isShow = false) => {\n    dispatch({\n      type: 'loading',\n      payload: {\n        isLoading: isShow,\n      },\n    });\n  };\n\n  const handleChange = (event: ChangeEvent<HTMLInputElement>) => {\n    dispatch({\n      type: 'accountType',\n      payload: {\n        accountType: event.target.value,\n      },\n    });\n  };\n\n  const emailName =\n    contactInformation?.find((item: CustomFieldItems) => item.fieldId === 'field_email')?.name ||\n    'email';\n\n  const validateEmailValue = async (email: string) => {\n    const isRegisterAsB2BUser = accountType === '1';\n    try {\n      showLoading(true);\n      const {\n        isValid,\n        userType,\n        userInfo: { companyName = '' } = {},\n      } = isRegisterAsB2BUser\n        ? await checkUserEmail({ email, channelId })\n        : await checkUserBCEmail({ email, channelId });\n\n      if (!isValid) {\n        setErrorTips(\n          b3Lang(emailError[userType], {\n            companyName: companyName || '',\n            email,\n          }),\n        );\n        setError(emailName, {\n          type: 'custom',\n          message: '',\n        });\n\n        IframeDocument?.body.scrollIntoView(true);\n      } else {\n        setErrorTips('');\n      }\n\n      return isValid;\n    } catch (error) {\n      return false;\n    } finally {\n      showLoading(false);\n    }\n  };\n\n  const handleAccountToDetail = async (event: MouseEvent) => {\n    handleSubmit(async (data: CustomFieldItems) => {\n      if (!(await validateEmailValue(data[emailName]))) {\n        return;\n      }\n\n      const newContactInfo = contactInfo.map((item: RegisterFields) => {\n        const newContactItem = item;\n        newContactItem.default = data[item.name] || item.default;\n        if (item.fieldId === 'field_email_marketing_newsletter' && item.fieldType === 'checkbox') {\n          newContactItem.isChecked = data[item.name].length > 0;\n        }\n        return item;\n      });\n\n      try {\n        showLoading(true);\n        if (accountType === '1') {\n          const extraCompanyUserInformation = newContactInfo.filter(\n            (item: RegisterFields) => !!item.custom,\n          );\n          const extraFields = extraCompanyUserInformation.map((field: RegisterFields) => ({\n            fieldName: Base64.decode(field.name),\n            fieldValue: data[field.name] || field.default,\n          }));\n          if (extraFields.length > 0) {\n            const res = await validateBCCompanyUserExtraFields({\n              extraFields,\n            });\n\n            if (res.code !== 200) {\n              const message = res.data?.errMsg || res.message || '';\n\n              const messageArr = message.split(':');\n\n              if (messageArr.length >= 2) {\n                const field = extraCompanyUserInformation.find(\n                  (field: RegisterFields) => Base64.decode(field.name) === messageArr[0],\n                );\n                if (field) {\n                  setError(field.name, {\n                    type: 'manual',\n                    message: messageArr[1],\n                  });\n                  showLoading(false);\n                  return;\n                }\n              }\n              setErrorTips(message);\n              showLoading(false);\n              return;\n            }\n          }\n          setErrorTips('');\n        }\n      } catch (error) {\n        b2bLogger.error(error);\n      } finally {\n        showLoading(false);\n      }\n\n      let newAdditionalInformation: Array<RegisterFields> = [];\n      if (additionalInfo) {\n        newAdditionalInformation = (additionalInfo as Array<RegisterFields>).map(\n          (item: RegisterFields) => {\n            const additionalInfoItem = item;\n            additionalInfoItem.default = data[item.name] || item.default;\n            return item;\n          },\n        );\n      }\n\n      dispatch({\n        type: 'all',\n        payload: {\n          [additionName]: [...newAdditionalInformation],\n          [contactName]: [...newContactInfo],\n        },\n      });\n      handleNext();\n    })(event);\n  };\n\n  return (\n    <Box\n      sx={{\n        pl: 1,\n        pr: 1,\n        mt: 2,\n        width: '100%',\n      }}\n    >\n      {errorTips && (\n        <Alert severity=\"error\">\n          <TipContent>{errorTips}</TipContent>\n        </Alert>\n      )}\n      <FormControl\n        sx={{\n          '& h4': {\n            color: customColor,\n          },\n        }}\n      >\n        <InformationFourLabels>\n          {b3Lang('register.registeredAccount.accountType')}\n        </InformationFourLabels>\n        <RadioGroup\n          aria-labelledby=\"demo-row-radio-buttons-group-label\"\n          name=\"row-radio-buttons-group\"\n          value={accountType}\n          onChange={handleChange}\n          sx={{\n            '& .MuiTypography-root.MuiTypography-body1.MuiFormControlLabel-label': {\n              color: b3HexToRgb(customColor, 0.87),\n            },\n            '& .MuiButtonBase-root.MuiRadio-root.MuiRadio-colorPrimary:not(.Mui-checked)': {\n              color: b3HexToRgb(customColor, 0.6),\n            },\n          }}\n        >\n          {accountLoginRegistration.b2b && (\n            <FormControlLabel\n              value=\"1\"\n              control={<Radio />}\n              label={b3Lang('register.registeredAccount.businessAccount')}\n            />\n          )}\n          {accountLoginRegistration.b2c && (\n            <FormControlLabel\n              value=\"2\"\n              control={<Radio />}\n              label={b3Lang('register.registeredAccount.personalAccount')}\n            />\n          )}\n        </RadioGroup>\n      </FormControl>\n      <Box\n        sx={{\n          '& h4': {\n            color: customColor,\n          },\n          '& input, & .MuiFormControl-root .MuiTextField-root, & .MuiTextField-root .MuiInputBase-multiline':\n            {\n              borderRadius: '4px',\n              borderBottomLeftRadius: '0',\n              borderBottomRightRadius: '0',\n            },\n          '& .MuiButtonBase-root.MuiCheckbox-root.MuiCheckbox-colorPrimary:not(.Mui-checked)': {\n            color: b3HexToRgb(customColor, 0.6),\n          },\n          '& .MuiTypography-root.MuiTypography-body1.MuiFormControlLabel-label': {\n            color: b3HexToRgb(customColor, 0.87),\n          },\n        }}\n      >\n        <InformationFourLabels>{contactInformationLabel}</InformationFourLabels>\n        <B3CustomForm\n          formFields={contactInfo}\n          errors={errors}\n          control={control}\n          getValues={getValues}\n          setValue={setValue}\n        />\n      </Box>\n      <Box />\n      {additionalInfo && additionalInfo.length ? (\n        <Box\n          sx={{\n            '& h4': {\n              color: customColor,\n            },\n            '& .MuiFormControlLabel-label, & .MuiFormControl-root .MuiFormLabel-root:not(.Mui-focused)':\n              {\n                color: b3HexToRgb(customColor, 0.87),\n              },\n            '& .MuiRadio-root:not(.Mui-checked)': {\n              color: b3HexToRgb(customColor, 0.6),\n            },\n          }}\n        >\n          <InformationFourLabels>{additionalInformationLabel}</InformationFourLabels>\n          <B3CustomForm\n            formFields={additionalInfo}\n            errors={errors}\n            control={control}\n            getValues={getValues}\n            setValue={setValue}\n          />\n        </Box>\n      ) : (\n        ''\n      )}\n\n      <Box\n        sx={{\n          display: 'flex',\n          justifyContent: 'flex-end',\n          pt: 2,\n        }}\n      >\n        <PrimaryButton onClick={handleAccountToDetail}>\n          {b3Lang('global.button.next')}\n        </PrimaryButton>\n      </Box>\n    </Box>\n  );\n}\n","import { MouseEvent, useCallback, useContext, useEffect, useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { useB3Lang } from '@b3/lang';\nimport { Alert, Box } from '@mui/material';\nimport isEmpty from 'lodash-es/isEmpty';\n\nimport { B3CustomForm } from '@/components';\nimport { getContrastColor } from '@/components/outSideComponents/utils/b3CustomStyles';\nimport { CustomStyleContext } from '@/shared/customStyleButton';\n\nimport { RegisteredContext } from './context/RegisteredContext';\nimport { Country, State, validateExtraFields } from './config';\nimport { PrimaryButton } from './PrimaryButton';\nimport { InformationFourLabels, TipContent } from './styled';\nimport { RegisterFields } from './types';\n\ninterface RegisteredDetailProps {\n  handleBack: () => void;\n  handleNext: () => void;\n}\n\nexport default function RegisteredDetail({ handleBack, handleNext }: RegisteredDetailProps) {\n  const b3Lang = useB3Lang();\n\n  const { state, dispatch } = useContext(RegisteredContext);\n\n  const {\n    state: {\n      portalStyle: { backgroundColor = '#FEF9F5' },\n    },\n  } = useContext(CustomStyleContext);\n\n  const customColor = getContrastColor(backgroundColor);\n\n  const [errorMessage, setErrorMessage] = useState('');\n\n  const {\n    accountType = '1',\n    companyInformation = [],\n    companyAttachment = [],\n    addressBasicFields = [],\n    bcAddressBasicFields = [],\n    countryList = [],\n  } = state;\n\n  const {\n    control,\n    handleSubmit,\n    getValues,\n    formState: { errors },\n    setValue,\n    watch,\n    setError,\n  } = useForm({\n    mode: 'all',\n  });\n  const businessDetailsName = accountType === '1' ? companyInformation[0]?.groupName : '';\n\n  const addressBasicName = accountType === '1' ? 'addressBasicFields' : 'bcAddressBasicFields';\n  const addressBasicList = accountType === '1' ? addressBasicFields : bcAddressBasicFields;\n\n  const addressName = addressBasicList[0]?.groupName || '';\n\n  const handleCountryChange = useCallback(\n    (countryCode: string, stateCode = '') => {\n      const stateList =\n        countryList.find(\n          (country: Country) =>\n            country.countryCode === countryCode || country.countryName === countryCode,\n        )?.states || [];\n      const stateFields = addressBasicList.find(\n        (formFields: RegisterFields) => formFields.name === 'state',\n      );\n\n      if (stateFields) {\n        if (stateList.length > 0) {\n          stateFields.fieldType = 'dropdown';\n          stateFields.options = stateList;\n          stateFields.required = true;\n        } else {\n          stateFields.fieldType = 'text';\n          stateFields.options = [];\n          stateFields.required = false;\n        }\n      }\n\n      setValue(\n        'state',\n        stateCode &&\n          countryCode &&\n          (stateList.find((state: State) => state.stateName === stateCode) ||\n            stateList.length === 0)\n          ? stateCode\n          : '',\n      );\n\n      dispatch({\n        type: 'stateList',\n        payload: {\n          stateList,\n          addressBasicFields,\n          bcAddressBasicFields,\n          [addressBasicName]: [...addressBasicList],\n        },\n      });\n    },\n    // disabling as we don't need dispatchers here\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [addressBasicFields, addressBasicList, addressBasicName, bcAddressBasicFields, countryList],\n  );\n\n  useEffect(() => {\n    const countryValue = getValues('country');\n    const stateValue = getValues('state');\n    handleCountryChange(countryValue, stateValue);\n    // disabling as we only need to run this once and values at starting render are good enough\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    const subscription = watch((value, { name, type }) => {\n      const { country, state } = value;\n\n      if (name === 'country' && type === 'change') {\n        handleCountryChange(country, state);\n      }\n    });\n    return () => subscription.unsubscribe();\n    // disabling as we don't need watch in the dependency array\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [countryList, handleCountryChange]);\n\n  const showLoading = (isShow = false) => {\n    dispatch({\n      type: 'loading',\n      payload: {\n        isLoading: isShow,\n      },\n    });\n  };\n\n  const setRegisterFieldsValue = (formFields: Array<RegisterFields>, formData: CustomFieldItems) =>\n    formFields.map((field) => {\n      const item = field;\n      item.default = formData[field.name] || field.default;\n      return field;\n    });\n\n  interface DetailsFormValues {\n    [K: string]: string | number | boolean;\n  }\n\n  const saveDetailsData = () => {\n    const data = [...companyInformation, ...companyAttachment, ...addressBasicList].reduce(\n      (formValues: DetailsFormValues, field: RegisterFields) => {\n        const values = formValues;\n        values[field.name] = getValues(field.name) || field.default;\n\n        return formValues;\n      },\n      {},\n    );\n\n    const newCompanyInformation = setRegisterFieldsValue(companyInformation, data);\n    const newCompanyAttachment = setRegisterFieldsValue(companyAttachment, data);\n    const newAddressBasicFields = setRegisterFieldsValue(addressBasicList, data);\n\n    dispatch({\n      type: 'all',\n      payload: {\n        companyInformation: [...newCompanyInformation],\n        companyAttachment: [...newCompanyAttachment],\n        [addressBasicName]: [...newAddressBasicFields],\n      },\n    });\n  };\n\n  const handleValidateAttachmentFiles = () => {\n    if (accountType === '1') {\n      const formData = getValues();\n      const attachmentsFilesFiled = companyInformation.find(\n        (info) => info.fieldId === 'field_attachments',\n      );\n      if (\n        !isEmpty(attachmentsFilesFiled) &&\n        attachmentsFilesFiled.required &&\n        formData[attachmentsFilesFiled.name].length === 0\n      ) {\n        setError(attachmentsFilesFiled.name, {\n          type: 'required',\n          message: b3Lang('global.validate.required', {\n            label: attachmentsFilesFiled.label ?? '',\n          }),\n        });\n\n        showLoading(false);\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  const handleAccountToFinish = (event: MouseEvent) => {\n    const hasAttachmentsFilesError = handleValidateAttachmentFiles();\n\n    handleSubmit(async (data: CustomFieldItems) => {\n      if (hasAttachmentsFilesError) return;\n      showLoading(true);\n      try {\n        if (accountType === '1') {\n          await Promise.all([\n            validateExtraFields({\n              fields: companyInformation,\n              data,\n              type: 'company',\n              setError,\n            }),\n            validateExtraFields({\n              fields: addressBasicFields,\n              data,\n              type: 'address',\n              setError,\n            }),\n          ]);\n\n          setErrorMessage('');\n        }\n\n        saveDetailsData();\n\n        showLoading(false);\n        handleNext();\n      } catch (error) {\n        if (typeof error === 'string') {\n          setErrorMessage(error);\n        }\n        showLoading(false);\n      }\n    })(event);\n  };\n\n  const handleBackAccount = () => {\n    saveDetailsData();\n\n    handleBack();\n  };\n\n  return (\n    <Box\n      sx={{\n        pl: 1,\n        pr: 1,\n        mt: 2,\n        width: '100%',\n        '& h4': {\n          color: customColor,\n        },\n        '& input, & .MuiFormControl-root .MuiTextField-root, & .MuiDropzoneArea-textContainer, & .MuiSelect-select.MuiSelect-filled, & .MuiTextField-root .MuiInputBase-multiline':\n          {\n            borderRadius: '4px',\n            borderBottomLeftRadius: '0',\n            borderBottomRightRadius: '0',\n          },\n      }}\n    >\n      {errorMessage && (\n        <Alert severity=\"error\">\n          <TipContent>{errorMessage}</TipContent>\n        </Alert>\n      )}\n      {accountType === '1' ? (\n        <Box>\n          <InformationFourLabels>{businessDetailsName}</InformationFourLabels>\n          <B3CustomForm\n            formFields={[...companyInformation]}\n            errors={errors}\n            control={control}\n            getValues={getValues}\n            setValue={setValue}\n            setError={setError}\n          />\n        </Box>\n      ) : null}\n\n      <Box>\n        <InformationFourLabels>{addressName}</InformationFourLabels>\n\n        <B3CustomForm\n          formFields={addressBasicList}\n          errors={errors}\n          control={control}\n          getValues={getValues}\n          setValue={setValue}\n        />\n      </Box>\n\n      <Box\n        sx={{\n          display: 'flex',\n          justifyContent: 'flex-end',\n          pt: 2,\n          gap: 1,\n        }}\n      >\n        <PrimaryButton onClick={handleBackAccount}>{b3Lang('global.button.back')}</PrimaryButton>\n        <PrimaryButton onClick={handleAccountToFinish}>\n          {b3Lang('global.button.next')}\n        </PrimaryButton>\n      </Box>\n    </Box>\n  );\n}\n","import { useContext, useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useB3Lang } from '@b3/lang';\nimport { Box, ImageListItem } from '@mui/material';\n\nimport { B3Card } from '@/components';\nimport B3Spin from '@/components/spin/B3Spin';\nimport { LOGIN_LANDING_LOCATIONS } from '@/constants';\nimport { useMobile, useScrollBar } from '@/hooks';\nimport { CustomStyleContext } from '@/shared/customStyleButton';\nimport { GlobalContext } from '@/shared/global';\nimport { getB2BAccountFormFields, getB2BCountries } from '@/shared/service/b2b';\nimport { bcLogin } from '@/shared/service/bc';\nimport { themeFrameSelector, useAppSelector } from '@/store';\nimport { B3SStorage, loginJump, platform } from '@/utils';\nimport b2bLogger from '@/utils/b3Logger';\nimport { getCurrentCustomerInfo } from '@/utils/loginInfo';\n\nimport { loginCheckout, LoginConfig } from '../Login/config';\nimport { type PageProps } from '../PageProps';\n\nimport { RegisteredContext } from './context/RegisteredContext';\nimport {\n  AccountFormFieldsItems,\n  b2bAddressRequiredFields,\n  companyAttachmentsFields,\n  getAccountFormFields,\n  RegisterFieldsItems,\n} from './config';\nimport RegisterContent from './RegisterContent';\nimport RegisteredStep from './RegisteredStep';\nimport { RegisteredContainer, RegisteredImage } from './styled';\nimport { RegisterFields } from './types';\n\n// 1 bc 2 b2b\nconst formType: Array<number> = [1, 2];\n\nfunction Registered(props: PageProps) {\n  const { setOpenPage } = props;\n\n  const [activeStep, setActiveStep] = useState(0);\n\n  const b3Lang = useB3Lang();\n  const [isMobile] = useMobile();\n\n  const navigate = useNavigate();\n\n  const IframeDocument = useAppSelector(themeFrameSelector);\n\n  const {\n    state: { isCheckout, isCloseGotoBCHome, logo, storeName, registerEnabled },\n  } = useContext(GlobalContext);\n\n  const {\n    state: {\n      isLoading,\n      accountType,\n      contactInformation = [],\n      passwordInformation = [],\n      bcPasswordInformation = [],\n      bcContactInformation = [],\n    },\n    dispatch,\n  } = useContext(RegisteredContext);\n\n  const {\n    state: {\n      accountLoginRegistration,\n      portalStyle: { backgroundColor = '#FEF9F5' },\n    },\n  } = useContext(CustomStyleContext);\n\n  useEffect(() => {\n    if (!registerEnabled) {\n      navigate('/login');\n    }\n  }, [navigate, registerEnabled]);\n\n  useEffect(() => {\n    const getBCAdditionalFields = async () => {\n      try {\n        if (dispatch) {\n          dispatch({\n            type: 'loading',\n            payload: {\n              isLoading: true,\n            },\n          });\n          dispatch({\n            type: 'finishInfo',\n            payload: {\n              submitSuccess: false,\n            },\n          });\n        }\n\n        const accountFormAllFields = formType.map((item: number) => getB2BAccountFormFields(item));\n\n        const accountFormFields = await Promise.all(accountFormAllFields);\n\n        const newB2bAccountFormFields: AccountFormFieldsItems[] = (\n          accountFormFields[1]?.accountFormFields || []\n        ).map((fields: AccountFormFieldsItems) => {\n          const formFields = fields;\n          if (b2bAddressRequiredFields.includes(fields?.fieldId || '') && fields.groupId === 4) {\n            formFields.isRequired = true;\n            formFields.visible = true;\n          }\n\n          return fields;\n        });\n\n        const bcAccountFormFields = getAccountFormFields(\n          accountFormFields[0]?.accountFormFields || [],\n        );\n        const b2bAccountFormFields = getAccountFormFields(newB2bAccountFormFields || []);\n\n        const { countries } = await getB2BCountries();\n\n        const newAddressInformationFields =\n          b2bAccountFormFields.address?.map(\n            (addressFields: Partial<RegisterFieldsItems>): Partial<RegisterFieldsItems> => {\n              const fields = addressFields;\n              if (addressFields.name === 'country') {\n                fields.options = countries;\n                fields.replaceOptions = {\n                  label: 'countryName',\n                  value: 'countryName',\n                };\n              }\n              return addressFields;\n            },\n          ) || [];\n\n        const newBCAddressInformationFields =\n          bcAccountFormFields.address?.map(\n            (addressFields: Partial<RegisterFieldsItems>): Partial<RegisterFieldsItems> => {\n              const addressFormFields = addressFields;\n              if (addressFields.name === 'country') {\n                addressFormFields.options = countries;\n                const countryDefaultValue = countries.find(\n                  (country: CustomFieldItems) => country.countryName === addressFields.default,\n                );\n                addressFormFields.default =\n                  countryDefaultValue?.countryCode || addressFields.default;\n              }\n              return addressFields;\n            },\n          ) || [];\n        // accountLoginRegistration\n        const { b2b, b2c } = accountLoginRegistration;\n        const accountB2cEnabledInfo = b2c && !b2b;\n        if (dispatch) {\n          dispatch({\n            type: 'all',\n            payload: {\n              accountType: accountB2cEnabledInfo ? '2' : '1',\n              isLoading: false,\n              storeName,\n              // account\n              contactInformation: [...(b2bAccountFormFields.contactInformation || [])],\n              bcContactInformation: [...(bcAccountFormFields.contactInformation || [])],\n              additionalInformation: [...(b2bAccountFormFields.additionalInformation || [])],\n              bcAdditionalInformation: [...(bcAccountFormFields.additionalInformation || [])],\n              // detail\n              companyExtraFields: [],\n              companyInformation: [...(b2bAccountFormFields?.businessDetails || [])],\n              companyAttachment: [...companyAttachmentsFields(b3Lang)],\n              addressBasicFields: [...newAddressInformationFields],\n              bcAddressBasicFields: [...newBCAddressInformationFields],\n              countryList: [...countries],\n              // password\n              passwordInformation: [...(b2bAccountFormFields.password || [])],\n              bcPasswordInformation: [...(bcAccountFormFields.password || [])],\n            },\n          });\n        }\n      } catch (e) {\n        b2bLogger.error(e);\n      }\n    };\n\n    getBCAdditionalFields();\n    // disabling as we only need to run this once and values at starting render are good enough\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const getLoginData = () => {\n    const emailAddress =\n      ((accountType === '1' ? contactInformation : bcContactInformation).find(\n        (field: RegisterFields) => field.name === 'email',\n      )?.default as string) || '';\n\n    const password =\n      ((accountType === '1' ? passwordInformation : bcPasswordInformation).find(\n        (field: RegisterFields) => field.name === 'password',\n      )?.default as string) || '';\n\n    return {\n      emailAddress,\n      password,\n    };\n  };\n  const handleNext = async () => {\n    setActiveStep((prevActiveStep: number) => prevActiveStep + 1);\n  };\n\n  const handleBack = () => {\n    setActiveStep((prevActiveStep: number) => prevActiveStep - 1);\n  };\n\n  const clearRegisterInfo = () => {\n    if (dispatch) {\n      dispatch({\n        type: 'all',\n        payload: {\n          accountType: '',\n          isLoading: false,\n          storeName: '',\n          submitSuccess: false,\n          contactInformation: [],\n          additionalInformation: [],\n          companyExtraFields: [],\n          companyInformation: [],\n          companyAttachment: [],\n          addressBasicFields: [],\n          addressExtraFields: [],\n          countryList: [],\n          passwordInformation: [],\n        },\n      });\n    }\n  };\n\n  const handleFinish = async () => {\n    dispatch({\n      type: 'loading',\n      payload: {\n        isLoading: true,\n      },\n    });\n\n    const data: LoginConfig = getLoginData();\n\n    if (isCheckout) {\n      try {\n        await loginCheckout(data);\n        window.location.reload();\n      } catch (error) {\n        b2bLogger.error(error);\n      }\n    } else {\n      try {\n        const getBCFieldsValue = {\n          email: data.emailAddress,\n          pass: data.password,\n        };\n\n        const { data: bcData } = await bcLogin(getBCFieldsValue);\n\n        if (bcData?.login?.customer) {\n          B3SStorage.set('loginCustomer', {\n            emailAddress: bcData.login.customer.email,\n            phoneNumber: bcData.login.customer.phone,\n            ...bcData.login.customer,\n          });\n        }\n\n        await getCurrentCustomerInfo();\n\n        clearRegisterInfo();\n\n        const isLoginLandLocation = loginJump(navigate);\n\n        if (platform === 'catalyst') {\n          const landingLoginLocation = isLoginLandLocation\n            ? LOGIN_LANDING_LOCATIONS.HOME\n            : LOGIN_LANDING_LOCATIONS.BUYER_PORTAL;\n\n          window.b2b.callbacks.dispatchEvent('on-registered', {\n            email: data.emailAddress,\n            password: data.password,\n            landingLoginLocation,\n          });\n          window.location.hash = '';\n          return;\n        }\n\n        if (!isLoginLandLocation) return;\n\n        if (isCloseGotoBCHome) {\n          window.location.href = '/';\n        } else {\n          navigate('/orders');\n        }\n      } catch (error) {\n        b2bLogger.error(error);\n      }\n    }\n\n    dispatch({\n      type: 'loading',\n      payload: {\n        isLoading: false,\n      },\n    });\n  };\n\n  useEffect(() => {\n    IframeDocument?.body.scrollIntoView(true);\n    // disabling as we only need to run this when activeStep changes\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [activeStep]);\n\n  useScrollBar(false);\n\n  return (\n    <B3Card setOpenPage={setOpenPage}>\n      <RegisteredContainer isMobile={isMobile}>\n        <B3Spin isSpinning={isLoading} tip={b3Lang('global.tips.loading')} transparency=\"0\">\n          <Box\n            sx={{\n              display: 'flex',\n              flexDirection: 'column',\n              width: '100%',\n              alignItems: 'center',\n            }}\n          >\n            {logo && (\n              <RegisteredImage>\n                <ImageListItem\n                  sx={{\n                    maxWidth: '250px',\n                  }}\n                  onClick={() => {\n                    window.location.href = '/';\n                  }}\n                >\n                  <img src={logo} alt={b3Lang('global.tips.registerLogo')} loading=\"lazy\" />\n                </ImageListItem>\n              </RegisteredImage>\n            )}\n            <RegisteredStep activeStep={activeStep} backgroundColor={backgroundColor}>\n              <RegisterContent\n                activeStep={activeStep}\n                handleBack={handleBack}\n                handleNext={handleNext}\n                handleFinish={handleFinish}\n              />\n            </RegisteredStep>\n          </Box>\n        </B3Spin>\n      </RegisteredContainer>\n    </B3Card>\n  );\n}\n\nexport default Registered;\n","import { ReactNode } from 'react';\nimport styled from '@emotion/styled';\nimport { Box } from '@mui/material';\n\nimport RegisterComplete from './RegisterComplete';\nimport RegisteredAccount from './RegisteredAccount';\nimport RegisteredDetail from './RegisteredDetail';\nimport RegisteredFinish from './RegisteredFinish';\n\ninterface RegisterContentProps {\n  activeStep: number;\n  handleBack: () => void;\n  handleNext: () => void;\n  handleFinish: () => void;\n}\n\nexport const StyledRegisterContent = styled(Box)({\n  '& #b3-customForm-id-name': {\n    '& label[data-shrink=\"true\"]': {\n      whiteSpace: 'break-spaces',\n      minWidth: 'calc(133% - 24px)',\n      transition: 'unset',\n    },\n\n    '& label[data-shrink=\"false\"]': {\n      whiteSpace: 'break-spaces',\n    },\n  },\n});\n\nexport default function RegisterContent({\n  activeStep,\n  handleBack,\n  handleNext,\n  handleFinish,\n}: RegisterContentProps) {\n  const renderStep = (step: number): ReactNode => {\n    switch (step) {\n      case 0:\n        return <RegisteredAccount handleNext={handleNext} />;\n\n      case 1:\n        return <RegisteredDetail handleBack={handleBack} handleNext={handleNext} />;\n\n      case 2:\n        return <RegisterComplete handleBack={handleBack} handleNext={handleNext} />;\n\n      case 3:\n        return <RegisteredFinish handleFinish={handleFinish} />;\n\n      default:\n        return null;\n    }\n  };\n\n  return <StyledRegisterContent component=\"div\">{renderStep(activeStep)}</StyledRegisterContent>;\n}\n","import { ReactNode, useContext } from 'react';\nimport { useB3Lang } from '@b3/lang';\nimport { Box, Step, StepLabel, Stepper, useTheme } from '@mui/material';\n\nimport { getContrastColor } from '@/components/outSideComponents/utils/b3CustomStyles';\nimport { useMobile } from '@/hooks';\nimport { B3SStorage } from '@/utils';\n\nimport { RegisteredContext } from './context/RegisteredContext';\nimport { steps } from './config';\n\ninterface RegisteredStepProps {\n  children: ReactNode;\n  activeStep: number;\n  backgroundColor: string;\n}\n\nexport default function RegisteredStep(props: RegisteredStepProps) {\n  const { children, activeStep, backgroundColor } = props;\n\n  const b3Lang = useB3Lang();\n  const [isMobile] = useMobile();\n  const theme = useTheme();\n\n  const { state } = useContext(RegisteredContext);\n  const { accountType, submitSuccess, isAutoApproval } = state;\n  const blockPendingAccountOrderCreation =\n    B3SStorage.get('blockPendingAccountOrderCreation') && !isAutoApproval;\n  const registerCompleteText = blockPendingAccountOrderCreation\n    ? b3Lang('register.title.registerCompleteWarning')\n    : b3Lang('register.title.registerComplete');\n\n  const newPageTitle =\n    accountType === '1' ? registerCompleteText : b3Lang('register.title.accountCreated');\n\n  const customColor = getContrastColor(backgroundColor);\n  return (\n    <Box\n      component=\"div\"\n      sx={{\n        width: isMobile ? '100%' : '537px',\n        boxShadow:\n          '0px 2px 1px -1px rgba(0, 0, 0, 0.2), 0px 1px 1px rgba(0, 0, 0, 0.14), 0px 1px 3px rgba(0, 0, 0, 0.12)',\n        borderRadius: '4px',\n        marginTop: '1rem',\n        background: '#FFFFFF',\n        padding: '0 0.8rem 1rem 0.8rem',\n      }}\n    >\n      <Box\n        component=\"h3\"\n        sx={{\n          display: 'flex',\n          flexDirection: 'row',\n          justifyContent: 'center',\n          pt: 2,\n          fontSize: '24px',\n          fontWeight: '400',\n          margin: '0.5rem 0',\n          color: customColor,\n        }}\n      >\n        {submitSuccess ? newPageTitle : b3Lang('register.title.accountRegister')}\n      </Box>\n      {!submitSuccess && (\n        <Stepper\n          activeStep={activeStep}\n          sx={{\n            '& .MuiSvgIcon-root:not(.Mui-active) .MuiStepIcon-text': {\n              fill: getContrastColor(customColor),\n            },\n            '& .MuiSvgIcon-root.Mui-active .MuiStepIcon-text': {\n              fill: getContrastColor(theme.palette.primary.main),\n            },\n          }}\n        >\n          {steps.map((label) => (\n            <Step key={label}>\n              <StepLabel>{b3Lang(label)}</StepLabel>\n            </Step>\n          ))}\n        </Stepper>\n      )}\n      {children}\n    </Box>\n  );\n}\n"],"names":["RegisterComplete","props","b3Lang","useB3Lang","handleBack","handleNext","personalInfo","setPersonalInfo","useState","errorMessage","setErrorMessage","enterEmail","setEnterEmail","captchaKey","setCaptchaKey","isEnabledOnStorefront","setIsEnabledOnStorefront","storefrontSiteKey","setStorefrontSiteKey","isCaptchaMissing","setIsCaptchaMissing","useEffect","async","response","getStorefrontToken","siteKey","e","b2bLogger","error","getIsEnabledOnStorefront","control","handleSubmit","setError","formState","errors","useForm","mode","state","dispatch","useContext","RegisteredContext","blockPendingAccountOrderCreation","GlobalContext","portalStyle","backgroundColor","CustomStyleContext","customColor","getContrastColor","contactInformation","bcContactInformation","passwordInformation","bcPasswordInformation","accountType","additionalInformation","bcAdditionalInformation","addressBasicFields","bcAddressBasicFields","companyInformation","emailMarketingNewsletter","list","passwordInfo","passwordName","groupName","additionalInfo","addressBasicList","length","emailFields","find","item","name","default","getBCFieldsValue","data","bcFields","authentication","force_password_reset","new_password","password","accepts_product_review_abandoned_cart_emails","forEach","deCodeField","custom","form_fields","field","push","bcLabel","value","addresses","origin_channel_id","channelId","channel_ids","getBCAddressField","filter","getBCExtraAddressField","country_code","state_or_province","postal_code","first_name","last_name","trigger_account_created_notification","userItem","storeHash","createBCCompanyUser","jsxs","Box","sx","pl","pr","mt","width","color","borderRadius","borderBottomLeftRadius","borderBottomRightRadius","children","Alert","severity","jsx","TipContent","InformationFourLabels","Fragment","fontSize","fontWeight","marginBottom","marginTop","wordWrap","B3CustomForm","formFields","Typography","variant","display","alignSelf","marginLeft","justifyContent","Captcha","size","handleGetKey","key","pt","gap","PrimaryButton","onClick","event","completeData","confirmPassword","type","message","payload","isLoading","isAuto","attachmentsList","fieldType","fileList","attachments","Promise","all","map","file","uploadB2BFile","reduce","res","code","errMsg","newData","fileSize","getFileUrl","customerCreate","customer","accountInfo","_","customerId","b2bFields","companyUserExtraFieldsList","companyUserExtraFields","itemExtraField","fieldName","fieldValue","userExtraFields","companyInfo","companyExtraInfo","toHump","extraFields","addressBasicInfo","addressExtraBasicInfo","addressLine1","addressLine2","addressExtraFields","createB2BCompanyUser","getB2BFieldsValue","id","Number","companyCreate","company","companyStatus","submitSuccess","isAutoApproval","newPasswordInformation","newBcPasswordInformation","saveRegisterPassword","emailMe","fieldId","firstName","lastName","isChecked","sendSubscribersState","email","channel_id","err","handleSendSubscribersState","RegisteredAccount","IframeDocument","useAppSelector","themeFrameSelector","accountLoginRegistration","errorTips","setErrorTips","getValues","setValue","additionName","newContactInformation","contactInfo","info","isTip","tipText","contactName","contactInformationLabel","additionalInformationLabel","showLoading","isShow","emailName","FormControl","RadioGroup","onChange","target","b3HexToRgb","b2b","FormControlLabel","Radio","label","b2c","isRegisterAsB2BUser","isValid","userType","userInfo","companyName","checkUserEmail","checkUserBCEmail","emailError","body","scrollIntoView","validateEmailValue","newContactInfo","newContactItem","extraCompanyUserInformation","Base64","decode","validateBCCompanyUserExtraFields","messageArr","split","newAdditionalInformation","RegisteredDetail","companyAttachment","countryList","watch","businessDetailsName","addressBasicName","addressName","handleCountryChange","useCallback","countryCode","stateCode","stateList","country","countryName","states","stateFields","options","required","stateName","countryValue","stateValue","subscription","unsubscribe","setRegisterFieldsValue","formData","saveDetailsData","formValues","newCompanyInformation","newCompanyAttachment","newAddressBasicFields","handleBackAccount","hasAttachmentsFilesError","handleValidateAttachmentFiles","attachmentsFilesFiled","isEmpty","validateExtraFields","fields","setOpenPage","activeStep","setActiveStep","isMobile","useMobile","navigate","useNavigate","isCheckout","isCloseGotoBCHome","logo","storeName","registerEnabled","accountFormAllFields","formType","getB2BAccountFormFields","accountFormFields","newB2bAccountFormFields","b2bAddressRequiredFields","includes","groupId","isRequired","visible","bcAccountFormFields","getAccountFormFields","b2bAccountFormFields","countries","getB2BCountries","newAddressInformationFields","address","addressFields","replaceOptions","newBCAddressInformationFields","addressFormFields","countryDefaultValue","companyExtraFields","businessDetails","companyAttachmentsFields","getBCAdditionalFields","getLoginData","emailAddress","clearRegisterInfo","useScrollBar","B3Card","RegisteredContainer","B3Spin","isSpinning","tip","transparency","flexDirection","alignItems","RegisteredImage","ImageListItem","maxWidth","window","location","href","src","alt","loading","RegisteredStep","RegisterContent","prevActiveStep","handleFinish","loginCheckout","reload","pass","bcData","bcLogin","login","B3SStorage","set","phoneNumber","phone","getCurrentCustomerInfo","isLoginLandLocation","loginJump","platform","landingLoginLocation","LOGIN_LANDING_LOCATIONS","HOME","BUYER_PORTAL","callbacks","dispatchEvent","hash","StyledRegisterContent","styled","whiteSpace","minWidth","transition","component","step","RegisteredFinish","renderStep","theme","useTheme","get","registerCompleteText","newPageTitle","boxShadow","background","padding","margin","Stepper","fill","palette","primary","main","steps","Step","StepLabel"],"mappings":"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"}