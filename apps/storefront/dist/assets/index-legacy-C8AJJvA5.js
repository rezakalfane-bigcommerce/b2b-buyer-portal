System.register(["./mui-legacy-CSHs1xoY.js","./reactVendor-legacy-CtYIj4Ma.js","./react-setup-legacy-drlPxekq.js","./load-functions-legacy-D4REYUJ_.js","./HierarchyDialog-legacy-BpmIq1ba.js","./base-legacy-D2P4nFX7.js","./lang-legacy-DzjbYnyQ.js","./muiIcon-legacy-B9QnU93P.js","./intl-legacy-B7uNycgM.js","./eCache-legacy-CW-H9Ud9.js","./redux-legacy-D5ZHjMNV.js","./toolkit-legacy-uWyLsHZ1.js","./lodashEs-legacy-5FC1NR51.js","../index-legacy.Dey7ot32.js","./global-legacy-B1EgakWG.js","./router-legacy-s4T0V6vG.js","./dateFns-legacy-BcrsSUH8.js","./dropzone-legacy-30_HfosJ.js"],(function(e,n){"use strict";var a,l,r,o,t,s,c,i,m,d,p,h,u,y,x,g,j,b,C,I,N,f,w,S,k,z;return{setters:[e=>{a=e.j,l=e.K,r=e.B,o=e.I,t=e.C,s=e.W,c=e.X,i=e.aD,m=e.L,d=e.M,p=e.N,h=e.O,u=e.Q,y=e.U},e=>{x=e.r},e=>{g=e.C,j=e.a,b=e.u,C=e.ac,I=e.cm},null,e=>{N=e.H,f=e.b},null,e=>{w=e.u},e=>{S=e.B,k=e.M,z=e.K},null,null,null,null,null,null,null,null,null,null],execute:function(){function n({company:e,currentCompanyId:n="",selectCompanyId:i="",onSwitchCompany:m,getDisplayName:d=(e=>e.companyName),getNodeId:p=(e=>e.companyId)}){const h=p(e),[u,y]=x.useState(null),j=w(),{state:{switchAccountButton:{color:b="#ED6C02"}}}=x.useContext(g),C=Number(h)===Number(n),I=Number(h)===Number(i),N=Boolean(u),f=x.useMemo((()=>i?Number(i)!==Number(e.companyId):Number(n)!==Number(e.companyId)),[n,i,e]),z=()=>{y(null)},H=N?{borderRadius:"10%",backgroundColor:"rgba(0, 0, 0, 0.14)"}:{};return a.jsxs(l,{sx:{padding:"16px",marginBottom:"16px"},children:[a.jsxs(r,{children:[a.jsxs(r,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"space-between"},children:[a.jsxs(r,{sx:{display:"flex",alignItems:"flex-start"},children:[a.jsx(S,{sx:{color:"rgba(0, 0, 0, 0.54)",mr:1}}),d(e)]}),e?.channelFlag&&f&&a.jsx(o,{size:"small",onClick:e=>{y(e.currentTarget)},"aria-controls":N?"company-menu":void 0,"aria-haspopup":"true","aria-expanded":N?"true":void 0,sx:{pt:0,"& svg":{...H}},children:a.jsx(k,{})})]}),I&&a.jsx(t,{label:j("companyHierarchy.chip.selectCompany"),size:"small",sx:{mt:2,backgroundColor:b,color:"white",height:24,"& .MuiChip-label":{px:1}}}),C&&a.jsx(t,{label:j("companyHierarchy.chip.currentCompany"),size:"small",sx:{mt:2,backgroundColor:"primary.main",color:"white",height:24,"& .MuiChip-label":{px:1}}})]}),a.jsx(s,{id:"company-menu",anchorEl:u,open:N,onClose:z,MenuListProps:{"aria-labelledby":"company-button"},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:a.jsx(c,{sx:{color:"primary.main"},onClick:()=>{z(),m?.(e)},children:j("companyHierarchy.dialog.title")})})]})}function H({node:e,level:n=0,currentCompanyId:l="",selectCompanyId:i="",onSwitchCompany:m,getDisplayName:d=(e=>e.companyName),getNodeId:p=(e=>e.companyId)}){const[y,j]=x.useState(!0),[b,C]=x.useState(null),I=w(),{state:{switchAccountButton:{color:N="#ED6C02"}}}=x.useContext(g),f=e.children&&e.children.length>0,v=p(e),D=Number(v)===Number(l),M=Number(v)===Number(i),B=Boolean(b),E=x.useMemo((()=>i?Number(i)!==Number(e.companyId):Number(l)!==Number(e.companyId)),[l,i,e]),F=()=>{C(null)};return a.jsxs(a.Fragment,{children:[a.jsxs(h,{sx:{"&:last-child td, &:last-child th":{border:0},"& > td":{bgcolor:"background.paper"},height:"3.25rem"},children:[a.jsx(u,{sx:{width:"100%",py:1},children:a.jsx(r,{sx:{display:"flex",alignItems:"center"},children:a.jsxs(r,{sx:{display:"flex",ml:4*n,alignItems:"center"},children:[f?a.jsx(o,{size:"small",onClick:()=>j(!y),sx:{mr:1},children:a.jsx(z,{sx:{transform:y?"rotate(0deg)":"rotate(-90deg)",transition:"transform 0.2s",color:"rgba(0, 0, 0, 0.54)"}})}):a.jsx(r,{sx:{width:40}}),a.jsx(r,{sx:{mr:1,display:"flex",alignItems:"center"},children:a.jsx(S,{sx:{color:"rgba(0, 0, 0, 0.54)"}})}),a.jsx(r,{component:"span",sx:{mr:1},children:d(e)}),M&&a.jsx(t,{label:I("companyHierarchy.chip.selectCompany"),size:"small",sx:{backgroundColor:N,color:"white",height:24,"& .MuiChip-label":{px:1}}}),D&&a.jsx(t,{label:I("companyHierarchy.chip.currentCompany"),size:"small",sx:{backgroundColor:"primary.main",color:"white",height:24,"& .MuiChip-label":{px:1}}})]})})}),a.jsxs(u,{align:"right",sx:{width:48,py:1},children:[e?.channelFlag&&E&&a.jsx(o,{size:"small",onClick:e=>{C(e.currentTarget)},"aria-controls":B?"company-menu":void 0,"aria-haspopup":"true","aria-expanded":B?"true":void 0,children:a.jsx(k,{})}),a.jsx(s,{id:"company-menu",anchorEl:b,open:B,onClose:F,MenuListProps:{"aria-labelledby":"company-button"},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:a.jsx(c,{sx:{color:"primary.main"},onClick:()=>{F(),m?.(e)},children:I("companyHierarchy.dialog.title")})})]})]}),y&&f&&(e?.children||[]).map((e=>a.jsx(H,{node:e,level:n+1,currentCompanyId:l,selectCompanyId:i,onSwitchCompany:m,getDisplayName:d,getNodeId:p},p(e))))]})}function v({data:e,currentCompanyId:l,selectCompanyId:r,onSwitchCompany:o,getDisplayName:t=(e=>e.companyName),getNodeId:s=(e=>e.companyId)}){const[c]=j(),x=w(),g=(e,n)=>(0===e.length||e.forEach((e=>{n.push({...e,children:[]}),e.children&&e.children.length>0&&g(e?.children||[],n)})),n),b=g(e,[]);return a.jsx(a.Fragment,{children:c?a.jsx(a.Fragment,{children:b.map((e=>a.jsx(n,{company:e,currentCompanyId:l,selectCompanyId:r,onSwitchCompany:o,getDisplayName:t,getNodeId:s})))}):a.jsx(i,{sx:{width:"100%",minHeight:"100px",mx:"auto",mt:2},children:a.jsx(m,{children:a.jsxs(d,{size:"small","aria-label":"company structure table",children:[a.jsx(p,{children:a.jsxs(h,{sx:{height:"3.25rem"},children:[a.jsx(u,{sx:{fontWeight:500,pl:8},children:x("companyHierarchy.table.name")}),a.jsx(u,{sx:{width:48}})]})}),a.jsx(y,{children:e.map((e=>a.jsx(H,{node:e,currentCompanyId:l,selectCompanyId:r,onSwitchCompany:o,getDisplayName:t,getNodeId:s},s(e))))})]})})})})}e("default",(function(){const[e,n]=x.useState([]),[l,o]=x.useState(!1),[t,s]=x.useState(null),[c,i]=x.useState(!1),m=x.useRef([]),{id:d}=b((({company:e})=>e.companyInfo)),{selectCompanyHierarchyId:p}=b((({company:e})=>e.companyHierarchyInfo));return x.useEffect((()=>{d&&(async()=>{i(!0);const{companySubsidiaries:e}=await I(),a=f({data:e||[]});m.current=e,n(a),i(!1)})()}),[d]),a.jsx(C,{isSpinning:c,children:a.jsxs(r,{sx:{display:"flex",flexDirection:"column",flex:1,width:"100%"},children:[a.jsx(v,{data:e,onSwitchCompany:e=>{s(e),o(!0)},currentCompanyId:d,selectCompanyId:p}),a.jsx(N,{open:l,handleClose:()=>{o(!1)},currentRow:t,companyHierarchyAllList:m?.current||[]})]})})}))}}}));
//# sourceMappingURL=index-legacy-C8AJJvA5.js.map
