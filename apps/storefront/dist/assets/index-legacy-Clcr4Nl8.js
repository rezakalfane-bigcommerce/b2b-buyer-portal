System.register(["./mui-legacy-CLOaLEk9.js","./reactVendor-legacy-CtYIj4Ma.js","./lang-legacy-TODaA4m_.js","./lodashEs-legacy-5FC1NR51.js","./react-setup-legacy-CJFY1VSJ.js","./load-functions-legacy-BQBPfliD.js","./base-legacy-D2P4nFX7.js","./users-legacy-ibkcxJxW.js","./accountSetting-legacy-mir0BLTv.js","./config-legacy-CgCBy0Df.js","./validatorRules-legacy-D5_6t2JB.js","./router-legacy-s4T0V6vG.js","./intl-legacy-B7uNycgM.js","./eCache-legacy-CW-H9Ud9.js","./redux-legacy-D5ZHjMNV.js","./toolkit-legacy-uWyLsHZ1.js","../index-legacy.C2G06ioT.js","./global-legacy-B1EgakWG.js","./muiIcon-legacy-D-EcFXKh.js","./dateFns-legacy-C2RUCIEF.js","./dropzone-legacy-CIQbZZBD.js"],(function(e,a){"use strict";var l,s,n,t,i,d,o,r,c,m,u,f,p,y,g,j,h,b,w,x,v,I,_,C;return{setters:[e=>{l=e.j,s=e.B,n=e.ai},e=>{t=e.r},e=>{i=e.u},e=>{d=e.t},e=>{o=e.j,r=e.C,c=e.ac,m=e.ad,u=e.u,f=e.t,p=e.ae,y=e.B,g=e.af,j=e.ag},null,null,e=>{h=e.c,b=e.a},e=>{w=e.g,x=e.a},e=>{v=e.d,I=e.g},e=>{_=e.v},e=>{C=e.u},null,null,null,null,null,null,null,null,null],execute:function(){e("default",(function(){const{isBCUser:e,companyId:v}=function(){const e=u(f),a=u((({company:e})=>e.companyInfo.id)),l=u((({company:e})=>e.customer)),s=u((({company:e})=>e.customer.role)),n=u((({b2bFeatures:e})=>e.masqueradeCompany.id)),t=u((({b2bFeatures:e})=>e.masqueradeCompany.isAgenting)),i=Number(3===s&&t?n:a),o=!e||3===s&&!t,r=async e=>{if(l.emailAddress===d(e))return!0;const a={email:e,channelId:j},{isValid:s}=o?await h(a):await b(a);return s};return{isBCUser:o,companyId:i,customer:l,validateEmailValue:r,emailValidation:e=>!(e.email!==l.emailAddress&&!e.currentPassword),passwordValidation:e=>e.password===e.confirmPassword}}(),[_,F]=o("sf-isFinishUpdate",!1,sessionStorage),{state:{portalStyle:{backgroundColor:q="#FEF9F5"}}}=t.useContext(r),P=i(),B=C(),[k,R]=t.useState(!1),[T,z]=t.useState(!1),[V,A]=t.useState([]);return t.useEffect((()=>{(async()=>{try{R(!0);const l=e?w:x,s=e?{}:{companyId:v},n=e?"customerAccountSettings":"accountSettings",t=await p(e?1:2),i=I(t.accountFormFields||[]),d=(i?.contactInformation||[]).filter((e=>"field_email_marketing_newsletter"!==e.fieldId)),{additionalInformation:o=[]}=i,{[n]:r}=await l(s),c=e?N(r,d,o):S(r,d,a(),o),m=E(),u=[...c,...m].find((e=>"role"===e.name));u?.fieldType&&(u.fieldType="text");const{data:f=[]}=await y.get("/api/v3/io/sales-staffs","B2BEditionRest",{companyId:v});if(f.length>0){const e=await Promise.all(f.map((e=>y.get(`/api/v3/io/sales-staffs/${e.id}`,"B2BEditionRest"))));A(e.map((e=>e.data)))}}finally{_&&(g.success(P("accountSettings.notification.detailsUpdated")),F(!1)),R(!1),z(!0)}})()}),[]),l.jsx(c,{isSpinning:k,background:q,children:T&&l.jsx(s,{mt:4,children:0===V.length?l.jsx(m,{variant:"outlined",fullWidth:!0,onClick:()=>B("/quote"),children:"Request Sales Assistance"}):l.jsx(n,{direction:"row",children:V.map((e=>l.jsxs(s,{sx:{p:2,m:2,border:"1px solid #ddd",borderRadius:"8px",backgroundColor:"#fff"},children:[l.jsx(s,{fontWeight:"bold",children:e.name}),l.jsxs(s,{children:["Email: ",e.email]}),l.jsxs(s,{children:["Phone: ",e.phoneNumber]})]},e.id)))})})})}));const a=()=>[{name:"company",fieldId:"field_company",label:"Company",required:!1,default:"",fieldType:"text",xs:12,variant:"filled",size:"small"},{name:"role",fieldId:"field_role",label:"Role",required:!1,default:"",fieldType:"text",xs:12,variant:"filled",size:"small"}],E=()=>[{name:"currentPassword",fieldId:"field_current_password",label:"Current Password",required:!1,default:"",fieldType:"password",xs:12,variant:"filled",size:"small"},{name:"password",fieldId:"field_password",label:"Password",required:!1,default:"",fieldType:"password",xs:12,variant:"filled",size:"small"},{name:"confirmPassword",fieldId:"field_confirm_password",label:"Confirm Password",required:!1,default:"",fieldType:"password",xs:12,variant:"filled",size:"small"}],F=_(["email"]),S=(e,a,l,s)=>{const n=e?.extraFields||[];return a.forEach((a=>{const l=a;"first_name"===v(a?.name||"")&&(l.default=e.firstName),"last_name"===v(a?.name||"")&&(l.default=e.lastName),"phone"===v(a?.name||"")&&(l.default=e.phoneNumber),"email"===v(a?.name||"")&&(l.default=e.email,l.validate=F)})),n.length>0&&n.forEach((e=>{const l=e,s=a.find((e=>v(e?.name||"")===l.fieldName));s&&(s.default=l.fieldValue)})),l.forEach((a=>{const l=a;"role"===a.name?(l.default=e.companyRoleName,l.disabled=!0):"company"===a.name&&(l.default=e.company,l.disabled=!0)})),s.forEach((a=>{const l=(e?.formFields||[]).find((e=>e.name===a.bcLabel));l&&(a.default=l.value)})),[...a,...l,...s]},N=(e,a,l)=>(a.forEach((a=>{const l=a;"first_name"===v(a?.name||"")&&(l.default=e.firstName),"last_name"===v(a?.name||"")&&(l.default=e.lastName),"phone"===v(a?.name||"")&&(l.default=e.phoneNumber),"email"===v(a?.name||"")&&(l.default=e.email,l.validate=F),"company"===v(a?.name||"")&&(l.default=e.company)})),l.forEach((a=>{const l=(e?.formFields||[]).find((e=>e.name===a.bcLabel));l&&(a.default=l.value)})),[...a,...l])}}}));
//# sourceMappingURL=index-legacy-Clcr4Nl8.js.map
