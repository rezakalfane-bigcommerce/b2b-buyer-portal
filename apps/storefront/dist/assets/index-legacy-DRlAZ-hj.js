System.register(["./mui-legacy-CSHs1xoY.js","./reactVendor-legacy-CtYIj4Ma.js","./lang-legacy-DzjbYnyQ.js","./react-setup-legacy-drlPxekq.js","./load-functions-legacy-D4REYUJ_.js","./base-legacy-D2P4nFX7.js","./useB2BCallback-legacy-BNykb3hy.js","./SearchProduct-legacy-CsnQzXTY.js","./useBlockPendingAccountViewPrice-legacy-gtxwxFel.js","./QuickAdd-legacy-CUjtyxuu.js","./B3LinkTipContent-legacy-CFrz0iBd.js","./b3TriggerCartNumber-legacy-Dces_77X.js","./muiIcon-legacy-B9QnU93P.js","./ShoppingStatus-legacy-D3gkvW-6.js","./router-legacy-s4T0V6vG.js","./lodashEs-legacy-5FC1NR51.js","./b2bGetVariantImageByVariantInfo-legacy-DOFINwoC.js","./useSort-legacy-CfCrn6Eb.js","./B3FilterSearch-legacy-BKkHq57Z.js","./intl-legacy-B7uNycgM.js","./eCache-legacy-CW-H9Ud9.js","./redux-legacy-D5ZHjMNV.js","./toolkit-legacy-uWyLsHZ1.js","../index-legacy.Dey7ot32.js","./global-legacy-B1EgakWG.js","./dateFns-legacy-BcrsSUH8.js","./dropzone-legacy-30_HfosJ.js","./form-legacy-CAo5v63e.js","./B3CustomForm-legacy-LwY9NVZ0.js"],(function(e,t){"use strict";var i,s,n,o,r,a,d,l,c,p,u,h,g,x,m,f,y,b,L,j,S,C,I,k,v,w,P,A,N,T,B,q,O,E,D,Q,R,F,z,U,$,V,J,W,M,H,G,_,Y,Z,K,X,ee,te,ie,se,ne,oe,re,ae,de,le,ce,pe,ue,he,ge,xe,me,fe,ye,be,Le,je,Se,Ce,Ie,ke,ve,we,Pe,Ae,Ne,Te,Be,qe,Oe,Ee,De,Qe,Re,Fe,ze,Ue,$e,Ve;return{setters:[e=>{i=e.j,s=e.K,n=e.ad,o=e.B,r=e.T,a=e.ag,d=e.G,l=e.a0,c=e.w,p=e.W,u=e.X,h=e.s,g=e.f,x=e.y},e=>{m=e.r},e=>{f=e.u},e=>{y=e.a,b=e.cb,L=e.u,j=e.ad,S=e.b8,C=e.b6,I=e.aO,k=e.aP,v=e.af,w=e.c3,P=e.a0,A=e.aY,N=e.ab,T=e.ac,B=e.bn,q=e.aN,O=e.aw,E=e.bp,D=e.cc,Q=e.aS,R=e.e,F=e.a1,z=e.G,U=e.x,$=e.a_,V=e.a$,J=e.b0,W=e.b2,M=e.b3,H=e.b4,G=e.b5,_=e.aQ,Y=e.aR,Z=e.bw,K=e.b1,X=e.bx,ee=e.cd,te=e.C,ie=e.am,se=e.ce,ne=e.ar,oe=e.k,re=e.bg,ae=e.ak,de=e.aZ,le=e.cf,ce=e.cg,pe=e.aj,ue=e.t,he=e.ch,ge=e.c5,xe=e.c6,me=e.ag,fe=e.ci,ye=e.cj,be=e.ck,Le=e.cl},null,e=>{je=e.b},e=>{Se=e.d},e=>{Ce=e.a,Ie=e.S,ke=e.d,ve=e.C,we=e.b},e=>{Pe=e.u},e=>{Ae=e.Q},e=>{Ne=e.s},e=>{Te=e.b},e=>{Be=e.e,qe=e.d,Oe=e.A,Ee=e.h,De=e.E},e=>{Qe=e.S},e=>{Re=e.u,Fe=e.c},e=>{ze=e.f},e=>{Ue=e.b},e=>{$e=e.u},e=>{Ve=e.B},null,null,null,null,null,null,null,null,null,null],execute:function(){function t(e){const[t]=y(),{disabled:s=!1,label:n=(t?"Qty":""),value:o="",maxQuantity:r=0,minQuantity:a=0,isStock:d="0",stock:l=0,hiddenLabel:c=!t,onChange:p=(()=>{}),sx:u={width:t?"110px":"72px","& .MuiFormHelperText-root":{marginLeft:"0",marginRight:"0"}}}=e,[h,g]=m.useState(""),x=m.useCallback((e=>{const t=parseInt(`${e}`,10)||0;let i="";return"1"===d&&0===l?i="Out of stock":"1"===d&&t>l?i=`${l} in stock`:0!==a&&t<a?i=`Min is ${a}`:0!==r&&t>r&&(i=`Max is ${r}`),g(i),i}),[d,r,a,l]);return m.useEffect((()=>{x(o)}),[x,o]),i.jsx(b,{size:"small",type:"number",variant:"filled",disabled:s,hiddenLabel:c,label:n,value:o,error:!!h,helperText:h,inputProps:{inputMode:"numeric",pattern:"[0-9]*"},onChange:e=>{var t;t=e.target.value,p(t,!!h)},onBlur:()=>{(()=>{const e=parseInt(`${o}`,10)||0;p(e,!x(e))})()},sx:u})}function Je(e){const{state:{id:t}}=m.useContext(Ce),d=L((({company:e})=>e.companyInfo.status)),{updateList:l,isB2BUser:c,type:p=""}=e,u=f(),[h,g]=m.useState(!1),[x,y]=m.useState(!1),[b]=Pe(),P=c?I:k,A=async e=>{const i=e.map((e=>({optionList:C(e.newSelectOptionList||e.optionList,e?.products||e)||[],productId:parseInt(e.productId,10)||0,quantity:e.quantity,variantId:parseInt(e.variantId,10)||0}))),s=await P({shoppingListId:t,items:i});return v.success(u("shoppingList.addToShoppingList.productsAdded"),{isClose:!0}),s};return i.jsx(s,{sx:{marginBottom:"50px"},children:i.jsx(n,{children:i.jsxs(o,{children:[i.jsx(r,{variant:"h5",children:u("shoppingList.addToShoppingList.addToList")}),i.jsx(Ie,{updateList:l,addToList:async e=>{try{if(!Se("on-add-to-shopping-list",e))throw new Error;const i=e.map((e=>({optionList:C(e.newSelectOptionList,e),productId:e.id,quantity:e.quantity,variantId:e.variantId}))),s=await P({shoppingListId:t,items:i});return v.success(u("shoppingList.addToShoppingList.productsAdded"),{isClose:!0}),s}catch(i){i.message.length>0&&v.error(i.message,{isClose:!0})}return!0},isB2BUser:c,type:"shoppingList"}),i.jsx(a,{}),i.jsx(Ae,{type:"shoppingList",updateList:l,quickAddToList:A}),i.jsx(a,{}),i.jsx(o,{sx:{margin:"20px 0 0"},children:i.jsxs(j,{variant:"text",onClick:()=>{b&&0===d?v.info("Your business account is pending approval. This feature is currently disabled."):g(!0)},children:[i.jsx(ke,{sx:{marginRight:"8px"}}),u("shoppingList.addToShoppingList.bulkUploadCsv")]})}),i.jsx(S,{isOpen:h,setIsOpen:g,handleAddToList:async e=>{y(!0);try{const{validProduct:t}=e,{notPurchaseSku:i,productItems:s,notAddAble:n}=(e=>{const t=[],i=[],s=[];return e.forEach((e=>{const{products:n,qty:o}=e,{option:r,purchasingDisabled:a,variantSku:d,variantId:l,productId:c,modifiers:u}=n,h=w(u);if(a&&"shoppingList"!==p)return void t.push(d);if(h.filter((e=>!e.isVerified)).length>0)return void s.push(d);const g=r.map((e=>({optionId:`attribute[${e.option_id}]`,optionValue:e.id.toString()})));h.forEach((e=>{const{type:t}=e;if("date"===t){const{defaultValue:t}=e;Object.keys(t).forEach((t=>{g.push({optionId:`attribute[${e.option_id}][${t}]`,optionValue:`${e.defaultValue[t]}`})}))}else g.push({optionId:`attribute[${e.option_id}]`,optionValue:`${e.defaultValue}`})})),i.push({productId:parseInt(c,10)||0,variantId:parseInt(l,10)||0,quantity:Number(o),optionList:g,products:e.products})})),{notPurchaseSku:t,productItems:i,notAddAble:s}})(t);s.length>0&&(await A(s),l()),n.length>0&&"shoppingList"!==p&&v.error(u("shoppingList.addToShoppingList.skuNotAddable",{notAddAble:n.join(", ")}),{isClose:!0}),i.length>0&&"shoppingList"!==p&&v.error(u("shoppingList.addToShoppingList.skuNotPurchasable",{notPurchaseSku:i.join(", ")}),{isClose:!0}),g(!1)}finally{y(!1)}},isLoading:x,withModifiers:!0})]})})})}e("default",(function({setOpenPage:e}){return i.jsx(we,{children:i.jsx(ut,{setOpenPage:e})})}));const We=c("div")((({isHeader:e,isMobile:t})=>({display:"flex",wordBreak:"break-word",padding:"8px 0 0",gap:"8px",flexWrap:t?"wrap":"initial",...e?{borderBottom:"1px solid #D9DCE9",paddingBottom:"8px",alignItems:"center"}:{alignItems:"flex-start"},...t?{borderTop:"1px solid #D9DCE9",padding:"12px 0 12px","&:first-of-type":{marginTop:"12px"}}:{}}))),Me=c(o)((({width:e,padding:t="0",flexBasis:i,flexDirection:s="row",alignItems:n,textAlignLocation:o})=>({display:"flex",justifyContent:"right"===o?"flex-end":"flex-start",flexDirection:s,flexGrow:e?0:1,flexShrink:e?0:1,alignItems:n||"flex-start",flexBasis:i,width:e,padding:t}))),He=c("div")((()=>({fontSize:"0.875rem",lineHeight:"1.5",color:"#263238"}))),Ge=c("img")((()=>({width:"60px",borderRadius:"4px",flexShrink:0}))),_e={default:{width:"15%"},delete:{width:"30px"}},Ye={default:{width:"100%",padding:"0 0 0 76px"},delete:{width:"100%",padding:"0 0 0 76px",display:"flex",flexDirection:"row-reverse"}};function Ze(e){const{shoppingListInfo:s,products:n,successProducts:a,allowJuniorPlaceOrder:c,setValidateFailureProducts:p,setValidateSuccessProducts:u,textAlign:h="left"}=e,{submitShoppingListPermission:g}=L(P),x=f(),[b,S]=m.useState(!1),[C,I]=m.useState(!1),[k]=y(),{decimal_places:w=2}=L(A);m.useEffect((()=>{n.length>0?S(!0):S(!1)}),[n]);const z=k?Ye:_e,U=()=>{S(!1),p([]),u([])};return i.jsx(N,{isOpen:b,handleLeftClick:U,handRightClick:async()=>{if(n.every((e=>e.isValid)))try{I(!0);const e=D(n),t=await Q(e);t.errors||(U(),c&&g&&0===s?.status?window.location.href=R:(v.success("",{jsx:Ne({message:x("shoppingList.reAddToCart.productsAdded"),link:F,linkText:x("shoppingList.reAddToCart.viewCart"),isOutLink:!0,isCustomEvent:!0}),isClose:!0}),Te())),t.errors&&v.error(t.message,{isClose:!0}),Te()}finally{I(!1)}else v.error(x("shoppingList.reAddToCart.fillCorrectQuantity"))},title:x(c?"shoppingList.reAddToCart.proceedToCheckout":"shoppingList.reAddToCart.addToCart"),rightSizeBtn:x(c?"shoppingList.reAddToCart.proceedToCheckout":"shoppingList.reAddToCart.addToCart"),maxWidth:"xl",children:i.jsxs(d,{children:[i.jsx(o,{sx:{m:"0 0 1rem 0"},children:i.jsx(l,{variant:"filled",severity:"success",children:x(c?"shoppingList.reAddToCart.productsCanCheckout":"shoppingList.reAddToCart.productsAddedToCart",{successProducts:a})})}),i.jsx(o,{sx:{m:"1rem 0"},children:i.jsx(l,{variant:"filled",severity:"error",children:x(c?"shoppingList.reAddToCart.productsCantCheckout":"shoppingList.reAddToCart.productsNotAddedToCart",{quantity:n.length})})}),i.jsxs(T,{isSpinning:C,size:16,isFlex:!1,children:[i.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",margin:"0.5rem 0 1rem 0"},children:[i.jsx(o,{sx:{fontSize:"24px"},children:x("shoppingList.reAddToCart.productCount",{quantity:n.length})}),i.jsx(j,{onClick:()=>(async()=>{const e=n.filter((e=>"0"===e.isStock||0!==e.stock)),t=[];e.forEach((e=>{const i=e,{node:{quantity:s},minQuantity:n=0,maxQuantity:o=0,isStock:r,stock:a}=e,d=parseInt(`${s}`,10)||0;0!==n&&d<n?i.node.quantity=n:0!==o&&d>o&&(i.node.quantity=o),"0"!==r&&a&&(s?Number(s):0)>a&&(i.node.quantity=a),i.isValid=!0;const l=e?.node?.quantity?Number(e.node.quantity):0;t.push(E(e.node,l))})),(await Promise.all(t)).forEach(((t,i)=>{e[i].node=t})),p(e)})(),children:x("shoppingList.reAddToCart.adjustQuantity")})]}),n.length>0?i.jsxs(o,{children:[!k&&i.jsxs(We,{isHeader:!0,isMobile:k,children:[i.jsx(Me,{children:i.jsx(He,{children:x("shoppingList.reAddToCart.product")})}),i.jsx(Me,{...z.default,textAlignLocation:h,children:i.jsx(He,{children:x("shoppingList.reAddToCart.price")})}),i.jsx(Me,{sx:{justifyContent:"center"},...z.default,textAlignLocation:h,children:i.jsx(He,{children:x("shoppingList.reAddToCart.quantity")})}),i.jsx(Me,{...z.default,textAlignLocation:h,children:i.jsx(He,{children:x("shoppingList.reAddToCart.total")})}),i.jsx(Me,{...z.delete,children:i.jsx(He,{children:" "})})]}),n.map(((e,s)=>{const{isStock:a,maxQuantity:d,minQuantity:l,stock:c}=e,{quantity:u=1,primaryImage:g,productName:x,variantSku:m,optionList:f,productsSearch:y,basePrice:b}=e.node,L=Number(b),j=(L*(u?Number(u):0)).toFixed(w),S={...y,selectOptions:f},C=B(S,{}),I=JSON.parse(f),v=C.filter((e=>e.valueText));return i.jsxs(We,{isMobile:k,children:[i.jsxs(Me,{children:[i.jsx(Ge,{src:g||q}),i.jsxs(o,{sx:{marginLeft:"16px"},children:[i.jsx(r,{variant:"body1",color:"#212121",children:x}),i.jsx(r,{variant:"body1",color:"#616161",children:m}),I.length>0&&v.length>0&&v.map((e=>i.jsx(r,{sx:{fontSize:"0.75rem",lineHeight:"1.5",color:"#455A64"},children:`${e.valueLabel}: ${e.valueText}`},e.valueLabel)))]})]}),i.jsxs(Me,{...z.default,textAlignLocation:h,children:[k&&i.jsx("span",{children:"Price: "}),O(L)]}),i.jsx(Me,{...z.default,textAlignLocation:h,children:i.jsx(t,{isStock:a,maxQuantity:d,minQuantity:l,stock:c,value:u,onChange:(e,t)=>{(async(e,t,i)=>{const s=[...n];s[e].node.quantity=Number(t),s[e].isValid=i;const o=await E(s[e].node,Number(t));o&&(s[e].node=o,p(s))})(s,e,t)}})}),i.jsxs(Me,{...z.default,textAlignLocation:h,children:[k&&i.jsx("div",{children:"Total: "}),O(j)]}),i.jsx(Me,{...z.delete,children:i.jsx(Be,{sx:{cursor:"pointer",color:"rgba(0, 0, 0, 0.54)"},onClick:()=>{(e=>{const t=[...n];t.splice(e,1),p(t)})(s)}})})]},m)}))]}):null]})]})})}function Ke(e){const t=f(),[s]=y(),{open:n,handleCancelClick:r,handleDeleteProductClick:a}=e;return i.jsx(N,{isOpen:n,title:t("shoppingList.deleteItems.subtotal"),leftSizeBtn:t("shoppingList.deleteItems.cancel"),rightSizeBtn:t("shoppingList.deleteItems.delete"),handleLeftClick:r,handRightClick:a,rightStyleBtn:{color:"#D32F2F"},children:i.jsx(o,{sx:{display:"flex",justifyContent:s?"center%":"start",width:s?"100%":"450px",height:"100%"},children:t("shoppingList.deleteItems.confirmDelete")})})}function Xe(e){const[t]=y(),s=f(),{state:{productQuoteEnabled:n=!1}}=m.useContext(z),a=L((({b2bFeatures:e})=>e.masqueradeCompany.isAgenting)),l=L((({company:e})=>e.companyInfo.id)),c=L((({company:e})=>e.customer.customerGroupId)),{shoppingListCreateActionsPermission:h,purchasabilityPermission:g,submitShoppingListPermission:x}=L(P),b=m.useRef(null),[S,C]=m.useState(!1),I=U.get("cartId"),k=t?{alignItems:"flex-start",flexDirection:"column"}:{alignItems:"center"},{shoppingListInfo:w,allowJuniorPlaceOrder:A,checkedArr:N,selectedSubTotal:T,setLoading:B,setDeleteOpen:E,setValidateFailureProducts:te,setValidateSuccessProducts:ie,isB2BUser:se,customColor:ne,isCanEditShoppingList:oe,role:re}=e,ae=!se||h,de=!se||g,le=se?x:2===Number(re),ce=()=>{C(!1)},pe=async()=>{if(0!==N.length){ce(),B(!0);try{const e=[];let t="";if(N.forEach((i=>{const{node:s}=i;"disabled"===s.productsSearch.availability&&(t+=`${s.variantSku},`),e.push(s.variantSku)})),t)return void v.error(s("shoppingList.footer.unavailableProducts",{skus:t.slice(0,-1)}),{isClose:!0});if(0===e.length)return void v.error(s(A?"shoppingList.footer.selectItemsToCheckout":"shoppingList.footer.selectItemsToAddToCart"),{isClose:!0});const i=se?_:Y,n=await i({skus:e}),{validateFailureArr:o,validateSuccessArr:r}=(e=>{const t=[],i=[];return N.forEach((s=>{const{node:n}=s,o=e.find((e=>e.variantSku===n.variantSku))||{};if(o){let e=!0;"1"===o.isStock&&(n?.quantity?Number(n.quantity):0)>o.stock&&(e=!1),0!==o.minQuantity&&(n?.quantity?Number(n.quantity):0)<o.minQuantity&&(e=!1),0!==o.maxQuantity&&(n?.quantity?Number(n.quantity):0)>o.maxQuantity&&(e=!1),e?i.push({node:n}):t.push({node:{...n},stock:o.stock,isStock:o.isStock,maxQuantity:o.maxQuantity,minQuantity:o.minQuantity})}})),{validateFailureArr:t,validateSuccessArr:i}})(n?.variantSku||[]);if(0!==r.length){const e=D(r),t=Z(I),i=await K();let n=null;A&&i.length?(await X(t),n=await ee(i,e)):(n=await Q(e),Te()),n&&n.errors?v.error(n.errors[0].message,{isClose:!0}):0===o.length&&(A&&le&&0===w?.status?window.location.href=R:(v.success("",{jsx:Ne({message:s("shoppingList.footer.productsAddedToCart"),link:F,linkText:s("shoppingList.footer.viewCart"),isOutLink:!0,isCustomEvent:!0}),isClose:!0}),Te()))}te(o),ie(r)}finally{B(!1)}}else v.error(s("shoppingList.footer.selectOneItem"))},ue={adSelectedToCart:{name:s("shoppingList.footer.addToCart"),key:"add-selected-to-cart",handleClick:pe,isDisabled:!1},proceedToCheckout:{name:s("shoppingList.footer.proceedToCheckout"),key:"add-select-to-checkout",handleClick:pe,isDisabled:!1},addSelectedToQuote:{name:s("shoppingList.footer.addToQuote"),key:"add-selected-to-quote",handleClick:async()=>{if(0!==N.length){B(!0),ce();try{const e=N.filter((e=>{const{node:{variantSku:t}}=e;return""!==t&&null!=t})),t=N.filter((e=>{const{node:{variantSku:t}}=e;return!t}));if(t.length>0&&v.error(s("shoppingList.footer.cantAddProductsNoSku"),{isClose:!0}),t.length===N.length)return;const i=[];e.forEach((e=>{const{node:t}=e;i.includes(Number(t.productId))||i.push(Number(t.productId))}));const n=se?$:V,{productsSearch:o}=await n({productIds:i,companyId:l,customerGroupId:c}),r=J(o);let a=!1,d="",p=!0;const u=[];if(e.forEach((e=>{const{node:{basePrice:t,optionList:i,variantSku:n,productId:o,productName:l,quantity:c,variantId:h,tax:g}}=e,x=(m=JSON.parse(i),0===m?.length?[]:m.map((({option_id:e,option_value:t})=>({optionId:e,optionValue:t}))));var m;const f=r.find((e=>Number(e.id)===Number(o))),y=f?.variants.find((e=>e.sku===n));y||(d=s("shoppingList.footer.notFoundSku",{sku:n}),p=!1);const b={node:{id:W(),variantSku:y?.sku||n,variantId:h,productsSearch:f,primaryImage:y?.image_url||q,productName:l,quantity:Number(c)||1,optionList:JSON.stringify(x),productId:o,basePrice:t,tax:g}};u.push(b),a=!0})),a=M(u),!p)return void v.error("",{jsx:Ne({message:d,link:"",linkText:"",isOutLink:!1}),isClose:!0});a?(await H(u,"2"),G(u),v.success("",{jsx:Ne({message:s("shoppingList.footer.productsAddedToQuote"),link:"/quoteDraft",linkText:s("shoppingList.footer.viewQuote"),isOutLink:!1}),isClose:!0})):v.error("",{jsx:Ne({message:s("shoppingList.footer.productsLimit"),link:"/quoteDraft",linkText:s("shoppingList.footer.viewQuote"),isOutLink:!1}),isClose:!0})}catch(e){je.error(e)}finally{B(!1)}}else v.error(s("shoppingList.footer.selectOneItem"))},isDisabled:!1}},he=0!==w?.status&&se?[]:!de&&se?n?[ue.addSelectedToQuote]:[]:le?A&&n?[ue.proceedToCheckout,ue.addSelectedToQuote]:A?[ue.proceedToCheckout]:n?[ue.addSelectedToQuote]:[]:n?[ue.adSelectedToCart,ue.addSelectedToQuote]:[ue.adSelectedToCart];return i.jsxs(d,{sx:{position:"fixed",bottom:t&&a?"52px":52,left:0,backgroundColor:"#fff",width:"100%",padding:t?"0 0 1rem 0":"0 40px 1rem 40px",height:t?"8rem":"auto",marginLeft:0,display:"flex",flexWrap:"nowrap",zIndex:"999"},container:!0,spacing:2,children:[i.jsx(d,{item:!0,sx:{display:t?"none":"block",width:"290px",paddingLeft:"20px"}}),i.jsx(d,{item:!0,sx:t?{flexBasis:"100%"}:{flexBasis:"690px",flexGrow:1},children:i.jsxs(o,{sx:{width:"100%",pr:"20px",display:"flex",zIndex:"999",justifyContent:"space-between",...k},children:[i.jsx(r,{sx:{color:"#000000",fontSize:"16px",fontWeight:"400"},children:s("shoppingList.footer.selectedProducts",{quantity:N.length})}),i.jsxs(o,{sx:{display:"flex",alignItems:"center",flexWrap:t?"wrap":"nowrap"},children:[i.jsx(r,{variant:"h6",sx:{fontSize:"16px",fontWeight:"700",color:"#000000"},children:s("shoppingList.footer.subtotal",{subtotal:O(T)})}),i.jsxs(o,{sx:{display:"flex",alignItems:"center",marginTop:t?"0.5rem":0,width:t?"100%":"auto"},children:[!A&&oe&&ae&&i.jsx(j,{sx:{padding:"5px",border:`1px solid ${ne||"#1976d2"}`,margin:t?"0 1rem 0 0":"0 1rem",minWidth:"auto"},disabled:40===w?.status,children:i.jsx(Be,{color:"primary",sx:{color:ne},onClick:()=>{E(!0)}})}),he.length?i.jsxs(o,{sx:{display:"flex",alignItems:"center",marginTop:t?"0.5rem":0,marginLeft:t?0:"20px",width:t?"100%":"auto"},children:[1===he.length&&he[0]&&i.jsx(j,{variant:"contained",onClick:he[0].handleClick,sx:{marginRight:t?"1rem":0,width:t?"100%":"auto"},children:he[0].name}),2===he.length&&i.jsxs(i.Fragment,{children:[i.jsx(j,{variant:"contained",onClick:()=>{0===N.length?v.error(s("shoppingList.footer.selectOneItem")):C(!0)},ref:b,sx:{marginRight:t?"1rem":0,width:t?"100%":"auto"},endIcon:i.jsx(qe,{}),children:s("shoppingList.footer.addSelectedTo")}),i.jsx(p,{id:"basic-menu",anchorEl:b.current,open:S,onClose:ce,MenuListProps:{"aria-labelledby":"basic-button"},children:he.length>1&&he.map((e=>i.jsx(u,{onClick:()=>{e.handleClick()},children:e.name},e.key)))})]})]}):null]})]})]})}),i.jsx(d,{item:!0,sx:t?{flexBasis:"100%",display:t?"none":"block"}:{flexBasis:"340px",display:t?"none":"block"}})]})}const et=h("div")((()=>({display:"flex",alignItems:"center"})));function tt(e){const t=f(),[s]=y(),{shoppingListInfo:n,customerInfo:a,handleUpdateShoppingList:l,goToShoppingLists:c,isB2BUser:p,setOpenPage:u,openAPPParams:h,customColor:g}=e,{state:{portalStyle:{backgroundColor:x="#FEF9F5"}}}=m.useContext(te),b=Re(),{selectCompanyHierarchyId:S}=L((({company:e})=>e.companyHierarchyInfo)),{submitShoppingListPermission:C,approveShoppingListPermission:I}=L(P),k=m.useMemo((()=>{if(p){const e=n?.companyInfo||{},{submitShoppingListPermission:t,approveShoppingListPermission:i}=ie;return{submitShoppingListPermission:se({code:t,userId:Number(a?.userId||0),selectId:Number(S)}),approveShoppingListPermission:ne({code:i,companyId:Number(e?.companyId||0),userId:Number(a?.userId||0)})}}return{submitShoppingListPermission:C,approveShoppingListPermission:I}}),[a,p,C,I,n?.companyInfo,S]),v=0===n?.products?.edges.length,{submitShoppingListPermission:w,approveShoppingListPermission:A}=k,N=e=>s?{}:{xs:e};return i.jsxs(i.Fragment,{children:[i.jsx(o,{sx:{marginBottom:"16px",width:"fit-content"},children:i.jsxs(o,{sx:{color:"#1976d2",cursor:"pointer",display:"flex",alignItems:"center"},onClick:()=>{"add"!==h.shoppingListBtn?c():(b("/"),u({isOpen:!1,openUrl:""}))},children:[i.jsx(Oe,{fontSize:"small",sx:{fontSize:"12px",marginRight:"0.5rem",color:g}}),i.jsx(o,{sx:{margin:0,color:g,m:"0"},children:"add"!==h.shoppingListBtn?t("shoppingList.header.backToShoppingLists"):t("shoppingList.header.backToProduct")})]})}),i.jsxs(d,{container:!0,spacing:2,sx:{display:"flex",justifyContent:"space-between",flexDirection:s?"column":"row",mb:s?"16px":""},children:[i.jsxs(d,{item:!0,...N(8),sx:{color:oe(x)},children:[i.jsxs(o,{sx:{display:"flex",alignItems:s?"start":"center",flexDirection:s?"column":"row"},children:[i.jsx(r,{variant:"h4",sx:{marginRight:"1rem",wordBreak:"break-all"},children:`${n?.name||""}`}),p&&(w||A&&n?.approvedFlag)&&i.jsx(r,{sx:{m:s?"10px 0":"0"},children:n&&i.jsx(Qe,{status:n?.status})})]}),i.jsxs(o,{children:[i.jsx(r,{sx:{width:"100%",wordBreak:"break-all"},children:n?.description}),p&&i.jsxs(et,{children:[i.jsx(r,{variant:"subtitle2",sx:{marginRight:"0.5rem"},children:t("shoppingList.header.createdBy")}),i.jsx("span",{children:`${a?.firstName||""} ${a?.lastName||""}`})]})]})]}),i.jsxs(d,{item:!0,sx:{textAlign:s?"none":"end"},...N(4),children:[w&&30===n?.status&&i.jsx(j,{variant:"outlined",disabled:v,onClick:()=>{l(40)},children:t("shoppingList.header.submitForApproval")}),A&&40===n?.status&&i.jsxs(o,{children:[i.jsx(j,{variant:"outlined",sx:{marginRight:"1rem"},onClick:()=>{l(20)},children:t("shoppingList.header.reject")}),A&&i.jsx(j,{variant:"outlined",onClick:()=>{l(0)},children:t("shoppingList.header.approve")})]})]})]})]})}function it(e){const t=f(),[s]=y(),{open:n,notes:r,setNotes:a,handleCancelAddNotesClick:d,handleAddItemNotesClick:l}=e;return i.jsx(N,{isOpen:n,title:t("shoppingList.addItemNotes.title"),leftSizeBtn:t("shoppingList.addItemNotes.cancel"),rightSizeBtn:t("shoppingList.addItemNotes.save"),handleLeftClick:d,handRightClick:l,isShowBordered:!1,children:i.jsx(o,{sx:{display:"flex",justifyContent:s?"center%":"start",width:s?"100%":"450px",height:"100%"},children:i.jsx(g,{multiline:!0,rows:6,defaultValue:r,onChange:e=>a(e.target.value),variant:"filled",fullWidth:!0,placeholder:t("shoppingList.addItemNotes.placeholder")})})})}const st=h("img")((()=>({maxWidth:"60px",height:"auto",marginRight:"0.5rem"})));function nt(e){const t=f(),{item:s,onEdit:a,onDelete:d,checkBox:l,handleUpdateProductQty:c,handleUpdateShoppingListItem:p,isReadForApprove:u,len:h,itemIndex:x,setDeleteOpen:m,setAddNoteOpen:y,setAddNoteItemId:b,setNotes:L,showPrice:j,b2bAndBcShoppingListActionsPermissions:S}=e,{basePrice:C,quantity:I,itemId:k,variantId:v,primaryImage:w,productName:P,variantSku:A,productsSearch:N,productUrl:T,taxPrice:E=0,productNote:D}=s,Q=re(Number(C),Number(E)),R=Q*Number(I),F={...s.productsSearch,selectOptions:s.optionList},z=B(F,{}),U=JSON.parse(s.optionList),$=z.filter((e=>e.valueText)),V=U.length>0&&!u&&S,J=F.variants||[],W=Ue(J,{variantId:v,variantSku:A})||w;return i.jsx(o,{sx:{borderTop:"1px solid #D9DCE9",borderBottom:x===h-1?"1px solid #D9DCE9":""},children:i.jsxs(n,{sx:{color:"#313440",display:"flex",pl:0},children:[i.jsx(o,{children:l&&l()}),i.jsx(o,{children:i.jsx(st,{src:W||q,alt:"Product-img",loading:"lazy"})}),i.jsxs(o,{sx:{flex:1},children:[i.jsx(r,{variant:"body1",color:"#212121",onClick:()=>{const{location:{origin:e}}=window;window.location.href=`${e}${T}`},sx:{cursor:"pointer"},children:P}),i.jsx(r,{variant:"body1",color:"#616161",children:A}),i.jsx(o,{sx:{margin:"0 0 0.5rem 0"},children:U.length>0&&$.length>0&&i.jsx(o,{children:$.map((e=>i.jsx(r,{sx:{fontSize:"0.75rem",lineHeight:"1.5",color:"#455A64"},children:`${e.valueLabel}: ${e.valueText}`},e.valueLabel)))})}),D&&D.trim().length>0&&i.jsx(r,{sx:{fontSize:"0.75rem",color:"#ED6C02",marginTop:"0.3rem",marginBottom:"0.3rem"},children:D}),i.jsx(r,{sx:{color:"#212121",fontSize:"14px"},children:t("shoppingList.shoppingDetailCard.price",{price:j(O(Q),s)})}),i.jsx(g,{size:"small",type:"number",variant:"filled",label:t("shoppingList.shoppingDetailCard.quantity"),disabled:!S||u,inputProps:{inputMode:"numeric",pattern:"[0-9]*"},value:I,sx:{margin:"0.5rem 0",width:"60%",maxWidth:"100px","& label":{zIndex:0,fontSize:"14px"},"& input":{fontSize:"14px"}},onChange:e=>{c(s.id,e.target.value)},onBlur:()=>{p(k)}}),i.jsx(r,{sx:{color:"#212121",fontSize:"14px"},children:t("shoppingList.shoppingDetailCard.total",{total:j(O(R),s)})}),i.jsxs(o,{sx:{marginTop:"11px",textAlign:"end"},id:"shoppingList-actionList-mobile",children:[S&&i.jsx(Ee,{sx:{marginRight:"0.5rem",cursor:"pointer",color:"rgba(0, 0, 0, 0.54)"},onClick:()=>{y(!0),b(Number(k)),D&&L(D)}}),V&&i.jsx(De,{sx:{marginRight:V?"0.5rem":"",marginLeft:V?"0.3rem":"",cursor:"pointer",color:"rgba(0, 0, 0, 0.54)"},onClick:()=>{a({...N,selectOptions:U,quantity:I},v,k)}}),S&&!u&&i.jsx(Be,{sx:{marginLeft:"0.3rem",cursor:"pointer",color:"rgba(0, 0, 0, 0.54)"},onClick:()=>{m(!0),d(Number(k))}})]})]})]})},s.id)}const ot=h("div")((()=>({backgroundColor:"#FFFFFF",padding:"1rem",borderRadius:"4px",boxShadow:"0px 2px 1px -1px rgba(0, 0, 0, 0.2), 0px 1px 1px rgba(0, 0, 0, 0.14), 0px 1px 3px rgba(0, 0, 0, 0.12)","& tbody":{"& tr":{"& td":{verticalAlign:"top"},"& td: first-of-type":{paddingTop:"25px"}},"& tr: hover":{"& #shoppingList-actionList":{opacity:1}}}}))),rt=h("img")((()=>({maxWidth:"60px",height:"auto",marginRight:"0.5rem"}))),at=h(g)((()=>({"& input":{paddingTop:"12px",paddingRight:"6px"}}))),dt="updatedAt",lt={Product:"productName",updatedAt:"updatedAt",Qty:"quantity"},ct=m.forwardRef((function(e,t){const[s]=y(),n=f(),{shoppingListInfo:a,isRequestLoading:l,setIsRequestLoading:c,shoppingListId:p,getShoppingListDetails:u,setCheckedArr:h,isReadForApprove:g,setDeleteItemId:x,setDeleteOpen:b,isJuniorApprove:j,isB2BUser:S,allowJuniorPlaceOrder:I,productQuoteEnabled:k,isCanEditShoppingList:w,role:A}=e,N=L((({global:e})=>e.showInclusiveTaxPrice)),{shoppingListCreateActionsPermission:T,submitShoppingListPermission:E}=L(P),D=!S||T&&w,Q=!S||D,R=S?E:2===Number(A),F=m.useRef(null),[z,U]=m.useState(!1),[$,V]=m.useState(null),[J,W]=m.useState(null),[M,H]=m.useState({orderBy:`-${lt[dt]}`}),[G,_]=m.useState(!0),[Y,Z]=m.useState([]),[K,X]=m.useState(0),[ee,te]=m.useState(!1),[ie,se]=m.useState(""),[ne,oe]=m.useState(""),[pe,ue]=m.useState(!1),[he,ge]=m.useState(!1),[xe,me,fe]=$e(lt,dt,M,H),ye=(e,t)=>{if(Number(t)<0)return;const i=Y.find((t=>{const{node:i}=t;return i.id===e}));_(Number(i?.node?.quantity||"")===Number(t));const s=F.current?.getList()||[],n=s?.map((i=>{const{node:s}=i;return s?.id===e&&(s.quantity=`${Number(t)}`,s.disableCurrentCheckbox=0===Number(t)),i})),o=n.filter((e=>0===Number(e.node.quantity)));ue(o.length===n.length),F.current?.setList([...n])},be=()=>{F.current?.refresh()};m.useImperativeHandle(t,(()=>({initSearch:be,getList:()=>F.current?.getList(),setList:()=>F.current?.setList(),getSelectedValue:()=>F.current?.getSelectedValue()})));const Le=(e,t,i)=>{W(i),V(e),U(!0)},je=async e=>{const t=(F.current?.getList()||[]).find((t=>{const{node:i}=t;return i.itemId===e}));let i;t&&(i=t.node);const s=JSON.parse(i?.optionList||"[]").map((e=>({optionId:e.option_id,optionValue:e.option_value}))),n={variantId:i?.variantId,quantity:i?.quantity?Number(i.quantity):0,optionList:s||[],productNote:ne},o={itemId:e,shoppingListId:p,itemData:n},r=S?le:ce;await r(o)},Se=async e=>{if(!G){c(!0);try{await je(e),v.success(n("shoppingList.table.quantityUpdated")),_(!0),be()}finally{c(!1)}}},Ce=()=>{te(!1),se(""),oe("")};m.useEffect((()=>{if(a){const{products:{edges:e},grandTotal:t,totalTax:i}=a,s=N?Number(t):Number(t)-Number(i)||0,n=e.some((e=>e?.node?.productsSearch&&e.node.productsSearch?.isPriceHidden||!1));ge(n),Z(ze(e)),X(s)}}),[a,N]),m.useEffect((()=>{if(a){const{products:{edges:e}}=a,t=e.filter((e=>0===e.node.quantity));ue(t.length===e.length)}}),[a]);const Ie=(e,t)=>{const{productsSearch:{isPriceHidden:i}}=t;return i?"":de({price:e,productInfo:t,showText:i?"":e,forcedSkip:!0})},ke=[{key:"Product",title:n("shoppingList.table.product"),render:e=>{const t={...e.productsSearch,selectOptions:e.optionList},s=B(t,{}),n=JSON.parse(e.optionList),a=s.filter((e=>e.valueText)),d=t.variants||[],l=Ue(d,{variantId:e.variantId,variantSku:e.variantSku})||e.primaryImage;return i.jsxs(o,{sx:{display:"flex",alignItems:"flex-start"},children:[i.jsx(rt,{src:l||q,alt:"Product-img",loading:"lazy"}),i.jsxs(o,{children:[i.jsx(r,{variant:"body1",color:"#212121",onClick:()=>{const{location:{origin:t}}=window;window.location.href=`${t}${e.productUrl}`},sx:{cursor:"pointer"},children:e.productName}),i.jsx(r,{variant:"body1",color:"#616161",children:e.variantSku}),n.length>0&&a.length>0&&i.jsx(o,{children:a.map((e=>i.jsx(r,{sx:{fontSize:"0.75rem",lineHeight:"1.5",color:"#455A64"},children:`${e.valueLabel}: ${e.valueText}`},e.valueLabel)))}),e?.productNote&&e?.productNote.trim().length>0&&i.jsx(r,{sx:{fontSize:"0.75rem",color:"#ED6C02",marginTop:"0.3rem"},children:e.productNote})]})]})},width:"45%",isSortable:!0},{key:"Price",title:n("shoppingList.table.price"),render:e=>{const{basePrice:t,taxPrice:s=0}=e,n=re(Number(t),Number(s));return i.jsx(r,{sx:{padding:"12px 0"},children:Ie(O(n),e)})},width:"15%",style:{textAlign:"right"}},{key:"Qty",title:n("shoppingList.table.quantity"),render:e=>i.jsx(at,{size:"small",type:"number",variant:"filled",sx:{width:"72px"},disabled:!Q||g||j,value:e.quantity,inputProps:{inputMode:"numeric",pattern:"[0-9]*"},onChange:t=>{ye(e.id,t.target.value)},onBlur:()=>{Se(e.itemId)}}),width:"15%",style:{textAlign:"right"},isSortable:!0},{key:"Total",title:n("shoppingList.table.total"),render:e=>{const{basePrice:t,quantity:n,itemId:a,productsSearch:{options:l},taxPrice:c=0}=e,p=re(Number(t),Number(c))*Number(n),u=(l||JSON.parse(e.optionList)).length>0&&!g&&!j&&Q;return i.jsxs(o,{children:[i.jsx(r,{sx:{padding:"12px 0"},children:Ie(O(p),e)}),i.jsx(o,{sx:{marginTop:"1rem",opacity:0,textAlign:s?"end":"start",display:"flex",justifyContent:"flex-end"},id:"shoppingList-actionList",children:D&&i.jsxs(i.Fragment,{children:[i.jsx(d,{item:!0,sx:{marginRight:"0.5rem",minWidth:"32px"},children:i.jsx(Ee,{sx:{cursor:"pointer",color:"rgba(0, 0, 0, 0.54)"},onClick:()=>{te(!0),se(Number(a)),e.productNote&&oe(e.productNote)}})}),i.jsx(d,{item:!0,sx:{marginRight:u?"0.5rem":"",marginLeft:u?"0.3rem":""},children:u&&i.jsx(De,{sx:{cursor:"pointer",color:"rgba(0, 0, 0, 0.54)"},onClick:()=>{const{productsSearch:t,variantId:i,itemId:s,optionList:n,quantity:o}=e;Le({...t,selectOptions:n,quantity:o},0,s)}})}),i.jsx(d,{item:!0,sx:{marginLeft:"0.3rem"},children:Q&&!g&&!j&&i.jsx(Be,{sx:{cursor:"pointer",color:"rgba(0, 0, 0, 0.54)"},onClick:()=>{b(!0),x(Number(a))}})})]})})]})},width:"15%",style:{textAlign:"right"}}];return i.jsxs(ot,{children:[i.jsxs(o,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",margin:"0 0 1rem 0"},children:[i.jsx(r,{sx:{fontSize:"24px"},children:n("shoppingList.table.totalProductCount",{quantity:a?.products?.totalCount||0})}),i.jsx(r,{sx:{fontSize:"24px"},children:he?"":O(K||0)})]}),i.jsx(o,{sx:{marginBottom:"5px"},children:i.jsx(Ve,{searchBGColor:"rgba(0, 0, 0, 0.06)",handleChange:e=>{(async e=>{H({...M,search:e})})(e)}})}),i.jsx(ae,{ref:F,columnItems:ke,rowsPerPageOptions:[10,20,50],getRequestList:u,searchParams:M,isCustomRender:!1,showCheckbox:!0,showSelectAllCheckbox:!0,applyAllDisableCheckbox:!1,disableCheckbox:pe||(R?!(I||k):(g||j)&&Q),hover:!0,labelRowsPerPage:n("shoppingList.table.itemsPerPage"),showBorder:!1,requestLoading:c,getSelectCheckbox:e=>{if(e.length>0){const t=F.current?.getList()||[],i=[];e.forEach((e=>{const s=t.find((t=>{const{node:i}=t;return i.id===e}));s&&i.push(s)})),h([...i])}else h([])},itemIsMobileSpacing:0,noDataText:n("shoppingList.table.noProductsFound"),sortDirection:me,orderBy:fe,sortByFn:xe,pageType:"shoppingListDetailsTable",renderItem:(e,t,s)=>i.jsx(nt,{len:a?.products?.edges.length||0,item:e,itemIndex:t,showPrice:Ie,onEdit:Le,onDelete:x,checkBox:s,setDeleteOpen:b,setAddNoteOpen:te,setAddNoteItemId:se,setNotes:oe,handleUpdateProductQty:ye,handleUpdateShoppingListItem:Se,isReadForApprove:g||j,b2bAndBcShoppingListActionsPermissions:Q})}),i.jsx(ve,{isOpen:z,isLoading:l,setIsLoading:c,product:$,type:"shoppingList",onCancel:()=>{W(""),U(!1)},onConfirm:async e=>{c(!0);const t=S?le:ce;try{const i=C(e[0].newSelectOptionList,e[0]),s={itemId:J,shoppingListId:p,itemData:{variantId:e[0].variantId,quantity:e[0].quantity,optionList:i||[]}};await t(s),U(!1),W(""),v.success(n("shoppingList.table.productUpdated")),be()}finally{c(!1)}},isEdit:!0,isB2BUser:S}),i.jsx(it,{open:ee,notes:ne,setNotes:oe,handleCancelAddNotesClick:Ce,handleAddItemNotesClick:async()=>{c(!0);try{Ce(),await je(ie),v.success(n("shoppingList.table.productNotesUpdated")),be()}finally{c(!1)}}})]})})),pt=e=>{if(e.length>0){let t=0;return e.forEach((e=>{const{node:{quantity:i,basePrice:s,taxPrice:n}}=e,o=re(Number(s),Number(n));t+=o*Number(i)})),1e3*t/1e3}return 0};function ut({setOpenPage:e}){const{id:t,openAPPParams:s,productQuoteEnabled:n,isB2BUser:r,role:a,isAgenting:l,primaryColor:c,shoppingListCreateActionsPermission:p,submitShoppingListPermission:u,isCanAddToCart:h,getProducts:g,getShoppingList:b,deleteShoppingListItem:j}=function(){const{id:e=""}=Fe(),{state:{openAPPParams:t,productQuoteEnabled:i=!1}}=m.useContext(z),s=L(ue),{currency_code:n}=L(A),o=L((({company:e})=>e.customer.role)),r=L((({company:e})=>e.companyInfo.id)),a=L((({company:e})=>e.customer.customerGroupId)),d=L((({b2bFeatures:e})=>e.masqueradeCompany.isAgenting)),l=x().palette.primary.main,{shoppingListCreateActionsPermission:c,purchasabilityPermission:p,submitShoppingListPermission:u}=L(P);return{id:e,openAPPParams:t,productQuoteEnabled:i,isB2BUser:s,role:o,isAgenting:d,primaryColor:l,shoppingListCreateActionsPermission:c,submitShoppingListPermission:u,isCanAddToCart:!s||p,getProducts:async e=>{const t={productIds:e,currencyCode:n,companyId:r,customerGroupId:a},{productsSearch:i}=s?await $(t):await V(t);return J(i)},getShoppingList:t=>{const i={...t,id:e};return s?be(i):Le(i)},deleteShoppingListItem:t=>{const i={itemId:t,shoppingListId:e};return s?fe(i):ye(i)}}}(),S=Re(),[C]=y(),{dispatch:I}=m.useContext(Ce),k=f(),w=m.useRef(null),[N,B]=m.useState([]),[q,O]=m.useState(null),[E,D]=m.useState(null),[Q,R]=m.useState(!1),[F,U]=m.useState(!1),[W,M]=m.useState(""),[G,_]=m.useState([]),[Y,Z]=m.useState([]),[K,X]=m.useState(!1),[ee,te]=m.useState(!0),se=!r||p&&ee,oe=m.useMemo((()=>{if(r&&q){const{companyInfo:e,customerInfo:t}=q,{submitShoppingListPermission:i}=ie;return ne({code:i,companyId:Number(e?.companyId||0),userId:Number(t?.userId||0)})}return u}),[u,r,q]),re=r?oe:a===pe.JUNIOR_BUYER,ae=0===q?.status&&re,de=40===q?.status||20===q?.status;m.useEffect((()=>{I({type:"init",payload:{id:parseInt(t,10)||0}})}),[t]);const le=()=>{w.current?.initSearch()},ce=()=>{U(!1),M("")};return m.useEffect((()=>{ae&&(async()=>{const{storeConfigSwitchStatus:{isEnabled:e}}=await he();X("1"===e&&h)})()}),[ae]),m.useEffect((()=>{if(r&&q){const{companyInfo:e,customerInfo:t}=q,{shoppingListCreateActionsPermission:i}=ie,s=ne({code:i,companyId:Number(e?.companyId||0),userId:Number(t?.userId||0)});te(s)}}),[q,r]),i.jsxs(i.Fragment,{children:[i.jsxs(o,{sx:{display:"flex",flexDirection:"column",flex:1},children:[i.jsx(tt,{isB2BUser:r,shoppingListInfo:q,customerInfo:E,role:a,goToShoppingLists:()=>{S("/shoppingLists")},handleUpdateShoppingList:async e=>{R(!0);try{const i={id:Number(t),name:q?.name||"",description:q?.description||""};r?await ge({...i,status:e}):await xe({...i,channelId:me}),v.success(k("shoppingList.shoppingListStatusUpdated"),{isClose:!0}),w.current?.initSearch()}finally{R(!1)}},setOpenPage:e,isAgenting:l,openAPPParams:s,customColor:c}),i.jsxs(d,{container:!0,spacing:2,sx:{marginTop:"0",overflow:"auto",flexWrap:C?"wrap":"nowrap",paddingBottom:"20px",marginBottom:C?"6rem":0},children:[i.jsx(o,{sx:C?{flexBasis:"100%",pl:"16px"}:{flexBasis:"690px",flexGrow:1,ml:"16px",pt:"16px"},children:i.jsx(T,{isSpinning:Q,spinningHeight:"auto",children:i.jsx(d,{item:!0,sx:C?{flexBasis:"100%"}:{flexBasis:"690px",flexGrow:1},children:i.jsx(ct,{ref:w,isReadForApprove:de,isJuniorApprove:ae,allowJuniorPlaceOrder:K,setCheckedArr:B,shoppingListInfo:q,isRequestLoading:Q,setIsRequestLoading:R,shoppingListId:t,getShoppingListDetails:async e=>{const t=await b(e),{products:{edges:i,totalCount:s}}=t,n=await(async e=>{if(e.length>0)try{const t=[];e.forEach((e=>{const{node:i}=e;t.includes(i.productId)||t.push(i.productId)}));const i=await g(t);return e.forEach((e=>{const{node:t}=e,s=i.find((e=>{const{id:i}=e;return t.productId===i}));t.productsSearch=s||{},t.productName=s?.name||t.productName,t.productUrl=s?.productUrl||t.productUrl,t.disableCurrentCheckbox=!1,0===t.quantity&&(t.disableCurrentCheckbox=!0)})),e}catch(t){v.error(t)}return[]})(i);return await H(n,"2"),r&&D(t.customerInfo),O(t),n?{edges:n,totalCount:s}:{edges:[],totalCount:0}},setDeleteOpen:U,setDeleteItemId:M,isB2BUser:r,productQuoteEnabled:n,isCanEditShoppingList:ee,role:a})})})}),i.jsx(d,{item:!0,sx:C?{flexBasis:"100%"}:{flexBasis:"340px"},children:se&&!de&&!ae&&i.jsx(Je,{updateList:le,type:"shoppingList",isB2BUser:r})})]}),!de&&(K||n||!ae)&&i.jsx(Xe,{shoppingListInfo:q,allowJuniorPlaceOrder:K,checkedArr:N,selectedSubTotal:pt(N),setLoading:R,setDeleteOpen:U,setValidateFailureProducts:Z,setValidateSuccessProducts:_,isB2BUser:r,customColor:c,isCanEditShoppingList:ee,role:a})]}),i.jsx(Ze,{shoppingListInfo:q,role:a,products:Y,successProducts:G.length,allowJuniorPlaceOrder:K,setValidateFailureProducts:Z,setValidateSuccessProducts:_,textAlign:C?"left":"right"}),i.jsx(Ke,{open:F,handleCancelClick:ce,handleDeleteProductClick:async()=>{await(async(e="")=>{R(!0);try{if(e){if(await j(e),N.length>0){const t=N.filter((t=>{const{itemId:i}=t.node;return e!==i}));B([...t])}}else{if(0===N.length)return;N.forEach((async e=>{const{node:t}=e;await j(t.itemId)})),B([])}v.success(k("shoppingList.productRemoved"))}finally{R(!1),le()}})(Number(W)),await ce()}})]})}}}}));
//# sourceMappingURL=index-legacy-DRlAZ-hj.js.map
