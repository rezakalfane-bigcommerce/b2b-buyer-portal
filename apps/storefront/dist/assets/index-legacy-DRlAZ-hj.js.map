{"version":3,"file":"index-legacy-DRlAZ-hj.js","sources":["../../src/components/B3QuantityTextField.tsx","../../src/pages/ShoppingListDetails/components/AddToShoppingList.tsx","../../src/pages/ShoppingListDetails/index.tsx","../../src/pages/ShoppingListDetails/components/ReAddToCart.tsx","../../src/pages/ShoppingListDetails/components/ShoppingDetailDeleteItems.tsx","../../src/pages/ShoppingListDetails/components/ShoppingDetailFooter.tsx","../../src/pages/ShoppingListDetails/components/ShoppingDetailHeader.tsx","../../src/pages/ShoppingListDetails/components/ShoppingDetailAddNotes.tsx","../../src/pages/ShoppingListDetails/components/ShoppingDetailCard.tsx","../../src/pages/ShoppingListDetails/components/ShoppingDetailTable.tsx"],"sourcesContent":["import { useCallback, useEffect, useState } from 'react';\n\nimport { useMobile } from '@/hooks';\n\nimport { StyledNumberNoTopTextField } from './styled';\n\ninterface B3NumberTextFieldProps {\n  disabled?: boolean;\n  label?: string;\n  value?: number | string;\n  maxQuantity?: number;\n  minQuantity?: number;\n  isStock?: string;\n  stock?: number;\n  hiddenLabel?: boolean;\n  onChange?: (value: number | string, isValid: boolean) => void;\n  sx?: CustomFieldItems;\n}\n\nexport default function B3QuantityTextField(props: B3NumberTextFieldProps) {\n  const [isMobile] = useMobile();\n\n  const {\n    disabled = false,\n    label = isMobile ? 'Qty' : '',\n    value = '',\n    maxQuantity = 0,\n    minQuantity = 0,\n    isStock = '0',\n    stock = 0,\n    hiddenLabel = !isMobile,\n    onChange = () => {},\n    sx = {\n      width: isMobile ? '110px' : '72px',\n      '& .MuiFormHelperText-root': {\n        marginLeft: '0',\n        marginRight: '0',\n      },\n    },\n  } = props;\n\n  const [validMessage, setValidMessage] = useState('');\n\n  const validateQuantity = useCallback(\n    (value: number | string) => {\n      const quantity = parseInt(`${value}`, 10) || 0;\n\n      let validMessage = '';\n\n      if (isStock === '1' && stock === 0) {\n        validMessage = 'Out of stock';\n      } else if (isStock === '1' && quantity > stock) {\n        validMessage = `${stock} in stock`;\n      } else if (minQuantity !== 0 && quantity < minQuantity) {\n        validMessage = `Min is ${minQuantity}`;\n      } else if (maxQuantity !== 0 && quantity > maxQuantity) {\n        validMessage = `Max is ${maxQuantity}`;\n      }\n\n      setValidMessage(validMessage);\n\n      return validMessage;\n    },\n    [isStock, maxQuantity, minQuantity, stock],\n  );\n\n  const handleChange = (value: string) => {\n    onChange(value, !!validMessage);\n  };\n\n  const handleBlur = () => {\n    const quantity = parseInt(`${value}`, 10) || 0;\n\n    onChange(quantity, !validateQuantity(quantity));\n  };\n\n  useEffect(() => {\n    validateQuantity(value);\n  }, [validateQuantity, value]);\n\n  return (\n    <StyledNumberNoTopTextField\n      size=\"small\"\n      type=\"number\"\n      variant=\"filled\"\n      disabled={disabled}\n      hiddenLabel={hiddenLabel}\n      label={label}\n      value={value}\n      error={!!validMessage}\n      helperText={validMessage}\n      inputProps={{\n        inputMode: 'numeric',\n        pattern: '[0-9]*',\n      }}\n      onChange={(e) => {\n        handleChange(e.target.value);\n      }}\n      onBlur={() => {\n        handleBlur();\n      }}\n      sx={sx}\n    />\n  );\n}\n","import { useContext, useState } from 'react';\nimport { dispatchEvent } from '@b3/hooks';\nimport { useB3Lang } from '@b3/lang';\nimport UploadFileIcon from '@mui/icons-material/UploadFile';\nimport { Box, Card, CardContent, Divider, Typography } from '@mui/material';\n\nimport { B3Upload } from '@/components';\nimport CustomButton from '@/components/button/CustomButton';\nimport { useBlockPendingAccountViewPrice } from '@/hooks';\nimport { addProductToBcShoppingList, addProductToShoppingList } from '@/shared/service/b2b';\nimport { useAppSelector } from '@/store';\nimport { snackbar } from '@/utils';\nimport { getValidOptionsList } from '@/utils/b3Product/b3Product';\n\nimport { getAllModifierDefaultValue } from '../../../utils/b3Product/shared/config';\nimport { ShoppingListDetailsContext } from '../context/ShoppingListDetailsContext';\n\nimport QuickAdd from './QuickAdd';\nimport SearchProduct from './SearchProduct';\n\ninterface AddToListProps {\n  updateList: () => void;\n  isB2BUser: boolean;\n  type?: string;\n}\n\nexport default function AddToShoppingList(props: AddToListProps) {\n  const {\n    state: { id },\n  } = useContext(ShoppingListDetailsContext);\n\n  const companyStatus = useAppSelector(({ company }) => company.companyInfo.status);\n  const { updateList, isB2BUser, type: pageType = '' } = props;\n  const b3Lang = useB3Lang();\n\n  const [isOpenBulkLoadCSV, setIsOpenBulkLoadCSV] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n\n  const [blockPendingAccountViewPrice] = useBlockPendingAccountViewPrice();\n\n  const addItemsToShoppingList = isB2BUser ? addProductToShoppingList : addProductToBcShoppingList;\n\n  const addToList = async (products: CustomFieldItems[]) => {\n    try {\n      if (!dispatchEvent('on-add-to-shopping-list', products)) {\n        throw new Error();\n      }\n\n      const items = products.map((product) => {\n        const newOptionLists = getValidOptionsList(product.newSelectOptionList, product);\n        return {\n          optionList: newOptionLists,\n          productId: product.id,\n          quantity: product.quantity,\n          variantId: product.variantId,\n        };\n      });\n\n      const res = await addItemsToShoppingList({\n        shoppingListId: id,\n        items,\n      });\n\n      snackbar.success(b3Lang('shoppingList.addToShoppingList.productsAdded'), {\n        isClose: true,\n      });\n\n      return res;\n    } catch (e: any) {\n      if (e.message.length > 0) {\n        snackbar.error(e.message, { isClose: true });\n      }\n    }\n    return true;\n  };\n\n  const quickAddToList = async (products: CustomFieldItems[]) => {\n    const items = products.map((product) => {\n      const newOptionLists = getValidOptionsList(\n        product.newSelectOptionList || product.optionList,\n        product?.products || product,\n      );\n      return {\n        optionList: newOptionLists || [],\n        productId: parseInt(product.productId, 10) || 0,\n        quantity: product.quantity,\n        variantId: parseInt(product.variantId, 10) || 0,\n      };\n    });\n\n    const res = await addItemsToShoppingList({\n      shoppingListId: id,\n      items,\n    });\n\n    snackbar.success(b3Lang('shoppingList.addToShoppingList.productsAdded'), {\n      isClose: true,\n    });\n\n    return res;\n  };\n\n  const getValidProducts = (products: CustomFieldItems) => {\n    const notPurchaseSku: string[] = [];\n    const productItems: CustomFieldItems[] = [];\n    const notAddAble: string[] = [];\n\n    products.forEach((item: CustomFieldItems) => {\n      const { products: currentProduct, qty } = item;\n      const { option, purchasingDisabled, variantSku, variantId, productId, modifiers } =\n        currentProduct;\n\n      const defaultModifiers = getAllModifierDefaultValue(modifiers);\n      if (purchasingDisabled && pageType !== 'shoppingList') {\n        notPurchaseSku.push(variantSku);\n        return;\n      }\n\n      const notPassedModifier = defaultModifiers.filter(\n        (modifier: CustomFieldItems) => !modifier.isVerified,\n      );\n      if (notPassedModifier.length > 0) {\n        notAddAble.push(variantSku);\n\n        return;\n      }\n\n      const optionsList = option.map((item: CustomFieldItems) => ({\n        optionId: `attribute[${item.option_id}]`,\n        optionValue: item.id.toString(),\n      }));\n\n      defaultModifiers.forEach((modifier: CustomFieldItems) => {\n        const { type } = modifier;\n\n        if (type === 'date') {\n          const { defaultValue } = modifier;\n          Object.keys(defaultValue).forEach((key) => {\n            optionsList.push({\n              optionId: `attribute[${modifier.option_id}][${key}]`,\n              optionValue: `${modifier.defaultValue[key]}`,\n            });\n          });\n        } else {\n          optionsList.push({\n            optionId: `attribute[${modifier.option_id}]`,\n            optionValue: `${modifier.defaultValue}`,\n          });\n        }\n      });\n\n      productItems.push({\n        productId: parseInt(productId, 10) || 0,\n        variantId: parseInt(variantId, 10) || 0,\n        quantity: Number(qty),\n        optionList: optionsList,\n        products: item.products,\n      });\n    });\n\n    return {\n      notPurchaseSku,\n      productItems,\n      notAddAble,\n    };\n  };\n\n  const handleCSVAddToList = async (productsData: CustomFieldItems) => {\n    setIsLoading(true);\n    try {\n      const { validProduct } = productsData;\n\n      const { notPurchaseSku, productItems, notAddAble } = getValidProducts(validProduct);\n\n      if (productItems.length > 0) {\n        await quickAddToList(productItems);\n\n        updateList();\n      }\n\n      if (notAddAble.length > 0 && pageType !== 'shoppingList') {\n        snackbar.error(\n          b3Lang('shoppingList.addToShoppingList.skuNotAddable', {\n            notAddAble: notAddAble.join(', '),\n          }),\n          {\n            isClose: true,\n          },\n        );\n      }\n\n      if (notPurchaseSku.length > 0 && pageType !== 'shoppingList') {\n        snackbar.error(\n          b3Lang('shoppingList.addToShoppingList.skuNotPurchasable', {\n            notPurchaseSku: notPurchaseSku.join(', '),\n          }),\n          {\n            isClose: true,\n          },\n        );\n      }\n\n      setIsOpenBulkLoadCSV(false);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleOpenUploadDiag = () => {\n    if (blockPendingAccountViewPrice && companyStatus === 0) {\n      snackbar.info(\n        'Your business account is pending approval. This feature is currently disabled.',\n      );\n    } else {\n      setIsOpenBulkLoadCSV(true);\n    }\n  };\n\n  return (\n    <Card\n      sx={{\n        marginBottom: '50px',\n      }}\n    >\n      <CardContent>\n        <Box>\n          <Typography variant=\"h5\">{b3Lang('shoppingList.addToShoppingList.addToList')}</Typography>\n          <SearchProduct\n            updateList={updateList}\n            addToList={addToList}\n            isB2BUser={isB2BUser}\n            type=\"shoppingList\"\n          />\n\n          <Divider />\n\n          <QuickAdd type=\"shoppingList\" updateList={updateList} quickAddToList={quickAddToList} />\n\n          <Divider />\n\n          <Box\n            sx={{\n              margin: '20px 0 0',\n            }}\n          >\n            <CustomButton variant=\"text\" onClick={() => handleOpenUploadDiag()}>\n              <UploadFileIcon\n                sx={{\n                  marginRight: '8px',\n                }}\n              />\n              {b3Lang('shoppingList.addToShoppingList.bulkUploadCsv')}\n            </CustomButton>\n          </Box>\n\n          <B3Upload\n            isOpen={isOpenBulkLoadCSV}\n            setIsOpen={setIsOpenBulkLoadCSV}\n            handleAddToList={handleCSVAddToList}\n            isLoading={isLoading}\n            withModifiers\n          />\n        </Box>\n      </CardContent>\n    </Card>\n  );\n}\n","import { useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { useB3Lang } from '@b3/lang';\nimport { Box, Grid, useTheme } from '@mui/material';\n\nimport B3Spin from '@/components/spin/B3Spin';\nimport { useMobile } from '@/hooks';\nimport { GlobalContext } from '@/shared/global';\nimport {\n  deleteB2BShoppingListItem,\n  deleteBcShoppingListItem,\n  getB2BJuniorPlaceOrder,\n  getB2BShoppingListDetails,\n  getBcShoppingListDetails,\n  searchB2BProducts,\n  searchBcProducts,\n  updateB2BShoppingList,\n  updateBcShoppingList,\n} from '@/shared/service/b2b';\nimport {\n  activeCurrencyInfoSelector,\n  isB2BUserSelector,\n  rolePermissionSelector,\n  useAppSelector,\n} from '@/store';\nimport { CustomerRole } from '@/types';\nimport { channelId, snackbar, verifyLevelPermission } from '@/utils';\nimport { b2bPermissionsMap } from '@/utils/b3CheckPermissions/config';\nimport { calculateProductListPrice, getBCPrice } from '@/utils/b3Product/b3Product';\nimport {\n  conversionProductsList,\n  CustomerInfoProps,\n  ListItemProps,\n  ProductsProps,\n  SearchProps,\n  ShoppingListInfoProps,\n} from '@/utils/b3Product/shared/config';\n\nimport { type PageProps } from '../PageProps';\n\nimport AddToShoppingList from './components/AddToShoppingList';\nimport ReAddToCart from './components/ReAddToCart';\nimport ShoppingDetailDeleteItems from './components/ShoppingDetailDeleteItems';\nimport ShoppingDetailFooter from './components/ShoppingDetailFooter';\nimport ShoppingDetailHeader from './components/ShoppingDetailHeader';\nimport ShoppingDetailTable from './components/ShoppingDetailTable';\nimport {\n  ShoppingListDetailsContext,\n  ShoppingListDetailsProvider,\n} from './context/ShoppingListDetailsContext';\n\ninterface TableRefProps extends HTMLInputElement {\n  initSearch: () => void;\n}\n\ninterface UpdateShoppingListParamsProps {\n  id: number;\n  name: string;\n  description: string;\n  status?: number;\n  channelId?: number;\n}\n\nconst calculateSubTotal = (checkedArr: CustomFieldItems) => {\n  if (checkedArr.length > 0) {\n    let total = 0.0;\n\n    checkedArr.forEach((item: ListItemProps) => {\n      const {\n        node: { quantity, basePrice, taxPrice },\n      } = item;\n\n      const price = getBCPrice(Number(basePrice), Number(taxPrice));\n\n      total += price * Number(quantity);\n    });\n\n    return (1000 * total) / 1000;\n  }\n  return 0.0;\n};\n\nfunction useData() {\n  const { id = '' } = useParams();\n  const {\n    state: { openAPPParams, productQuoteEnabled = false },\n  } = useContext(GlobalContext);\n  const isB2BUser = useAppSelector(isB2BUserSelector);\n  const { currency_code: currencyCode } = useAppSelector(activeCurrencyInfoSelector);\n  const role = useAppSelector(({ company }) => company.customer.role);\n  const companyId = useAppSelector(({ company }) => company.companyInfo.id);\n  const customerGroupId = useAppSelector(({ company }) => company.customer.customerGroupId);\n\n  const isAgenting = useAppSelector(({ b2bFeatures }) => b2bFeatures.masqueradeCompany.isAgenting);\n\n  const theme = useTheme();\n  const primaryColor = theme.palette.primary.main;\n\n  const {\n    shoppingListCreateActionsPermission,\n    purchasabilityPermission,\n    submitShoppingListPermission,\n  } = useAppSelector(rolePermissionSelector);\n\n  const isCanAddToCart = isB2BUser ? purchasabilityPermission : true;\n\n  const getProducts = async (productIds: number[]) => {\n    const options = { productIds, currencyCode, companyId, customerGroupId };\n    const { productsSearch } = isB2BUser\n      ? await searchB2BProducts(options)\n      : await searchBcProducts(options);\n\n    return conversionProductsList(productsSearch);\n  };\n\n  const getShoppingList = (params: SearchProps) => {\n    const options = { ...params, id };\n\n    return isB2BUser ? getB2BShoppingListDetails(options) : getBcShoppingListDetails(options);\n  };\n\n  const deleteShoppingListItem = (itemId: string | number) => {\n    const options = { itemId, shoppingListId: id };\n\n    return isB2BUser ? deleteB2BShoppingListItem(options) : deleteBcShoppingListItem(options);\n  };\n\n  return {\n    id,\n    openAPPParams,\n    productQuoteEnabled,\n    isB2BUser,\n    role,\n    isAgenting,\n    primaryColor,\n    shoppingListCreateActionsPermission,\n    submitShoppingListPermission,\n    isCanAddToCart,\n    getProducts,\n    getShoppingList,\n    deleteShoppingListItem,\n  };\n}\n\n// shoppingList status: 0 -- Approved; 20 -- Rejected; 30 -- Draft; 40 -- Ready for approval\n// 0: Admin, 1: Senior buyer, 2: Junior buyer, 3: Super admin\n\nfunction ShoppingListDetails({ setOpenPage }: PageProps) {\n  const {\n    id,\n    openAPPParams,\n    productQuoteEnabled,\n    isB2BUser,\n    role,\n    isAgenting,\n    primaryColor,\n    shoppingListCreateActionsPermission,\n    submitShoppingListPermission,\n    isCanAddToCart,\n    getProducts,\n    getShoppingList,\n    deleteShoppingListItem,\n  } = useData();\n  const navigate = useNavigate();\n  const [isMobile] = useMobile();\n  const { dispatch } = useContext(ShoppingListDetailsContext);\n\n  const b3Lang = useB3Lang();\n\n  const tableRef = useRef<TableRefProps | null>(null);\n\n  const [checkedArr, setCheckedArr] = useState<CustomFieldItems>([]);\n  const [shoppingListInfo, setShoppingListInfo] = useState<null | ShoppingListInfoProps>(null);\n  const [customerInfo, setCustomerInfo] = useState<null | CustomerInfoProps>(null);\n  const [isRequestLoading, setIsRequestLoading] = useState(false);\n\n  const [deleteOpen, setDeleteOpen] = useState<boolean>(false);\n  const [deleteItemId, setDeleteItemId] = useState<number | string>('');\n\n  const [validateSuccessProducts, setValidateSuccessProducts] = useState<ProductsProps[]>([]);\n  const [validateFailureProducts, setValidateFailureProducts] = useState<ProductsProps[]>([]);\n\n  const [allowJuniorPlaceOrder, setAllowJuniorPlaceOrder] = useState<boolean>(false);\n  const [isCanEditShoppingList, setIsCanEditShoppingList] = useState<boolean>(true);\n\n  const b2bAndBcShoppingListActionsPermissions = isB2BUser\n    ? shoppingListCreateActionsPermission && isCanEditShoppingList\n    : true;\n\n  const submitShoppingList = useMemo(() => {\n    if (isB2BUser && shoppingListInfo) {\n      const { companyInfo, customerInfo } = shoppingListInfo;\n      const { submitShoppingListPermission: submitShoppingListPermissionCode } = b2bPermissionsMap;\n      const submitShoppingListPermissionLevel = verifyLevelPermission({\n        code: submitShoppingListPermissionCode,\n        companyId: Number(companyInfo?.companyId || 0),\n        userId: Number(customerInfo?.userId || 0),\n      });\n\n      return submitShoppingListPermissionLevel;\n    }\n\n    return submitShoppingListPermission;\n  }, [submitShoppingListPermission, isB2BUser, shoppingListInfo]);\n  const b2bSubmitShoppingListPermission = isB2BUser\n    ? submitShoppingList\n    : role === CustomerRole.JUNIOR_BUYER;\n\n  const isJuniorApprove = shoppingListInfo?.status === 0 && b2bSubmitShoppingListPermission;\n\n  const isReadForApprove = shoppingListInfo?.status === 40 || shoppingListInfo?.status === 20;\n\n  const goToShoppingLists = () => {\n    navigate('/shoppingLists');\n  };\n\n  useEffect(() => {\n    dispatch({\n      type: 'init',\n      payload: {\n        id: parseInt(id, 10) || 0,\n      },\n    });\n    // disabling as we don't need a dispatcher here\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [id]);\n\n  const handleGetProductsById = async (listProducts: ListItemProps[]) => {\n    if (listProducts.length > 0) {\n      try {\n        const productIds: number[] = [];\n        listProducts.forEach((item) => {\n          const { node } = item;\n          if (!productIds.includes(node.productId)) {\n            productIds.push(node.productId);\n          }\n        });\n\n        const newProductsSearch = await getProducts(productIds);\n\n        listProducts.forEach((item) => {\n          const { node } = item;\n\n          const productInfo = newProductsSearch.find((search: CustomFieldItems) => {\n            const { id: productId } = search;\n\n            return node.productId === productId;\n          });\n\n          node.productsSearch = productInfo || {};\n          node.productName = productInfo?.name || node.productName;\n          node.productUrl = productInfo?.productUrl || node.productUrl;\n\n          node.disableCurrentCheckbox = false;\n          if (node.quantity === 0) {\n            node.disableCurrentCheckbox = true;\n          }\n        });\n\n        return listProducts;\n      } catch (err: any) {\n        snackbar.error(err);\n      }\n    }\n\n    return [];\n  };\n\n  const getShoppingListDetails = async (params: SearchProps) => {\n    const shoppingListDetailInfo = await getShoppingList(params);\n\n    const {\n      products: { edges, totalCount },\n    } = shoppingListDetailInfo;\n\n    const listProducts = await handleGetProductsById(edges);\n\n    await calculateProductListPrice(listProducts, '2');\n\n    if (isB2BUser) setCustomerInfo(shoppingListDetailInfo.customerInfo);\n    setShoppingListInfo(shoppingListDetailInfo);\n\n    if (!listProducts) {\n      return {\n        edges: [],\n        totalCount: 0,\n      };\n    }\n\n    return {\n      edges: listProducts,\n      totalCount,\n    };\n  };\n\n  const handleUpdateShoppingList = async (status: number) => {\n    setIsRequestLoading(true);\n    try {\n      const params: UpdateShoppingListParamsProps = {\n        id: Number(id),\n        name: shoppingListInfo?.name || '',\n        description: shoppingListInfo?.description || '',\n      };\n\n      if (isB2BUser) {\n        await updateB2BShoppingList({\n          ...params,\n          status,\n        });\n      } else {\n        await updateBcShoppingList({\n          ...params,\n          channelId,\n        });\n      }\n\n      snackbar.success(b3Lang('shoppingList.shoppingListStatusUpdated'), {\n        isClose: true,\n      });\n      tableRef.current?.initSearch();\n    } finally {\n      setIsRequestLoading(false);\n    }\n  };\n\n  const updateList = () => {\n    tableRef.current?.initSearch();\n  };\n\n  const handleCancelClick = () => {\n    setDeleteOpen(false);\n    setDeleteItemId('');\n  };\n\n  const handleDeleteItems = async (itemId: number | string = '') => {\n    setIsRequestLoading(true);\n\n    try {\n      if (itemId) {\n        await deleteShoppingListItem(itemId);\n\n        if (checkedArr.length > 0) {\n          const newCheckedArr = checkedArr.filter((item: ListItemProps) => {\n            const { itemId: checkedItemId } = item.node;\n\n            return itemId !== checkedItemId;\n          });\n\n          setCheckedArr([...newCheckedArr]);\n        }\n      } else {\n        if (checkedArr.length === 0) return;\n        checkedArr.forEach(async (item: ListItemProps) => {\n          const { node } = item;\n\n          await deleteShoppingListItem(node.itemId);\n        });\n\n        setCheckedArr([]);\n      }\n\n      snackbar.success(b3Lang('shoppingList.productRemoved'));\n    } finally {\n      setIsRequestLoading(false);\n      updateList();\n    }\n  };\n\n  const handleDeleteProductClick = async () => {\n    await handleDeleteItems(Number(deleteItemId));\n    await handleCancelClick();\n  };\n\n  const getJuniorPlaceOrder = async () => {\n    const {\n      storeConfigSwitchStatus: { isEnabled },\n    } = await getB2BJuniorPlaceOrder();\n\n    setAllowJuniorPlaceOrder(isEnabled === '1' && isCanAddToCart);\n  };\n\n  useEffect(() => {\n    if (isJuniorApprove) getJuniorPlaceOrder();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isJuniorApprove]);\n\n  useEffect(() => {\n    if (isB2BUser && shoppingListInfo) {\n      const { companyInfo, customerInfo } = shoppingListInfo;\n\n      const { shoppingListCreateActionsPermission } = b2bPermissionsMap;\n      const shoppingListActionsPermission = verifyLevelPermission({\n        code: shoppingListCreateActionsPermission,\n        companyId: Number(companyInfo?.companyId || 0),\n        userId: Number(customerInfo?.userId || 0),\n      });\n\n      setIsCanEditShoppingList(shoppingListActionsPermission);\n    }\n  }, [shoppingListInfo, isB2BUser]);\n\n  return (\n    <>\n      <Box\n        sx={{\n          display: 'flex',\n          flexDirection: 'column',\n          flex: 1,\n        }}\n      >\n        <ShoppingDetailHeader\n          isB2BUser={isB2BUser}\n          shoppingListInfo={shoppingListInfo}\n          customerInfo={customerInfo}\n          role={role}\n          goToShoppingLists={goToShoppingLists}\n          handleUpdateShoppingList={handleUpdateShoppingList}\n          setOpenPage={setOpenPage}\n          isAgenting={isAgenting}\n          openAPPParams={openAPPParams}\n          customColor={primaryColor}\n        />\n\n        <Grid\n          container\n          spacing={2}\n          sx={{\n            marginTop: '0',\n            overflow: 'auto',\n            flexWrap: isMobile ? 'wrap' : 'nowrap',\n            paddingBottom: '20px',\n            marginBottom: isMobile ? '6rem' : 0,\n          }}\n        >\n          <Box\n            sx={\n              isMobile\n                ? {\n                    flexBasis: '100%',\n                    pl: '16px',\n                  }\n                : {\n                    flexBasis: '690px',\n                    flexGrow: 1,\n                    ml: '16px',\n                    pt: '16px',\n                  }\n            }\n          >\n            <B3Spin isSpinning={isRequestLoading} spinningHeight=\"auto\">\n              <Grid\n                item\n                sx={\n                  isMobile\n                    ? {\n                        flexBasis: '100%',\n                      }\n                    : {\n                        flexBasis: '690px',\n                        flexGrow: 1,\n                      }\n                }\n              >\n                <ShoppingDetailTable\n                  ref={tableRef}\n                  isReadForApprove={isReadForApprove}\n                  isJuniorApprove={isJuniorApprove}\n                  allowJuniorPlaceOrder={allowJuniorPlaceOrder}\n                  setCheckedArr={setCheckedArr}\n                  shoppingListInfo={shoppingListInfo}\n                  isRequestLoading={isRequestLoading}\n                  setIsRequestLoading={setIsRequestLoading}\n                  shoppingListId={id}\n                  getShoppingListDetails={getShoppingListDetails}\n                  setDeleteOpen={setDeleteOpen}\n                  setDeleteItemId={setDeleteItemId}\n                  isB2BUser={isB2BUser}\n                  productQuoteEnabled={productQuoteEnabled}\n                  isCanEditShoppingList={isCanEditShoppingList}\n                  role={role}\n                />\n              </Grid>\n            </B3Spin>\n          </Box>\n\n          <Grid\n            item\n            sx={\n              isMobile\n                ? {\n                    flexBasis: '100%',\n                  }\n                : {\n                    flexBasis: '340px',\n                  }\n            }\n          >\n            {b2bAndBcShoppingListActionsPermissions && !isReadForApprove && !isJuniorApprove && (\n              <AddToShoppingList\n                updateList={updateList}\n                type=\"shoppingList\"\n                isB2BUser={isB2BUser}\n              />\n            )}\n          </Grid>\n        </Grid>\n\n        {!isReadForApprove &&\n          (allowJuniorPlaceOrder || productQuoteEnabled || !isJuniorApprove) && (\n            <ShoppingDetailFooter\n              shoppingListInfo={shoppingListInfo}\n              allowJuniorPlaceOrder={allowJuniorPlaceOrder}\n              checkedArr={checkedArr}\n              selectedSubTotal={calculateSubTotal(checkedArr)}\n              setLoading={setIsRequestLoading}\n              setDeleteOpen={setDeleteOpen}\n              setValidateFailureProducts={setValidateFailureProducts}\n              setValidateSuccessProducts={setValidateSuccessProducts}\n              isB2BUser={isB2BUser}\n              customColor={primaryColor}\n              isCanEditShoppingList={isCanEditShoppingList}\n              role={role}\n            />\n          )}\n      </Box>\n\n      <ReAddToCart\n        shoppingListInfo={shoppingListInfo}\n        role={role}\n        products={validateFailureProducts}\n        successProducts={validateSuccessProducts.length}\n        allowJuniorPlaceOrder={allowJuniorPlaceOrder}\n        setValidateFailureProducts={setValidateFailureProducts}\n        setValidateSuccessProducts={setValidateSuccessProducts}\n        textAlign={isMobile ? 'left' : 'right'}\n      />\n\n      <ShoppingDetailDeleteItems\n        open={deleteOpen}\n        handleCancelClick={handleCancelClick}\n        handleDeleteProductClick={handleDeleteProductClick}\n      />\n    </>\n  );\n}\n\nfunction ShoppingListDetailsContent({ setOpenPage }: PageProps) {\n  return (\n    <ShoppingListDetailsProvider>\n      <ShoppingListDetails setOpenPage={setOpenPage} />\n    </ShoppingListDetailsProvider>\n  );\n}\n\nexport default ShoppingListDetailsContent;\n","import { useEffect, useState } from 'react';\nimport { useB3Lang } from '@b3/lang';\nimport styled from '@emotion/styled';\nimport { Delete } from '@mui/icons-material';\nimport { Alert, Box, Grid, Typography } from '@mui/material';\n\nimport { B3QuantityTextField, successTip } from '@/components';\nimport B3Dialog from '@/components/B3Dialog';\nimport CustomButton from '@/components/button/CustomButton';\nimport B3Spin from '@/components/spin/B3Spin';\nimport { CART_URL, CHECKOUT_URL, PRODUCT_DEFAULT_IMAGE } from '@/constants';\nimport { useMobile } from '@/hooks';\nimport { activeCurrencyInfoSelector, rolePermissionSelector, useAppSelector } from '@/store';\nimport { currencyFormat, snackbar } from '@/utils';\nimport { setModifierQtyPrice } from '@/utils/b3Product/b3Product';\nimport {\n  addLineItems,\n  getProductOptionsFields,\n  ProductsProps,\n} from '@/utils/b3Product/shared/config';\nimport b3TriggerCartNumber from '@/utils/b3TriggerCartNumber';\nimport { callCart } from '@/utils/cartUtils';\n\ninterface ShoppingProductsProps {\n  shoppingListInfo: any;\n  role: string | number;\n  products: ProductsProps[];\n  successProducts: number;\n  allowJuniorPlaceOrder: boolean;\n  getProductQuantity?: (item: ProductsProps) => number;\n  onProductChange?: (products: ProductsProps[]) => void;\n  setValidateFailureProducts: (arr: ProductsProps[]) => void;\n  setValidateSuccessProducts: (arr: ProductsProps[]) => void;\n  textAlign?: string;\n}\n\ninterface FlexProps {\n  isHeader?: boolean;\n  isMobile?: boolean;\n}\n\ninterface FlexItemProps {\n  width?: string;\n  padding?: string;\n  flexBasis?: string;\n  alignItems?: string;\n  flexDirection?:\n    | 'column'\n    | 'inherit'\n    | '-moz-initial'\n    | 'initial'\n    | 'revert'\n    | 'unset'\n    | 'column-reverse'\n    | 'row'\n    | 'row-reverse';\n  textAlignLocation?: string;\n}\n\nconst Flex = styled('div')<FlexProps>(({ isHeader, isMobile }) => {\n  const headerStyle = isHeader\n    ? {\n        borderBottom: '1px solid #D9DCE9',\n        paddingBottom: '8px',\n        alignItems: 'center',\n      }\n    : {\n        alignItems: 'flex-start',\n      };\n\n  const mobileStyle = isMobile\n    ? {\n        borderTop: '1px solid #D9DCE9',\n        padding: '12px 0 12px',\n        '&:first-of-type': {\n          marginTop: '12px',\n        },\n      }\n    : {};\n\n  const flexWrap = isMobile ? 'wrap' : 'initial';\n\n  return {\n    display: 'flex',\n    wordBreak: 'break-word',\n    padding: '8px 0 0',\n    gap: '8px',\n    flexWrap,\n    ...headerStyle,\n    ...mobileStyle,\n  };\n});\n\nconst FlexItem = styled(Box)(\n  ({\n    width,\n    padding = '0',\n    flexBasis,\n    flexDirection = 'row',\n    alignItems,\n    textAlignLocation,\n  }: FlexItemProps) => ({\n    display: 'flex',\n    justifyContent: textAlignLocation === 'right' ? 'flex-end' : 'flex-start',\n    flexDirection,\n    flexGrow: width ? 0 : 1,\n    flexShrink: width ? 0 : 1,\n    alignItems: alignItems || 'flex-start',\n    flexBasis,\n    width,\n    padding,\n  }),\n);\n\nconst ProductHead = styled('div')(() => ({\n  fontSize: '0.875rem',\n  lineHeight: '1.5',\n  color: '#263238',\n}));\n\nconst ProductImage = styled('img')(() => ({\n  width: '60px',\n  borderRadius: '4px',\n  flexShrink: 0,\n}));\n\nconst defaultItemStyle = {\n  default: {\n    width: '15%',\n  },\n  qty: {\n    width: '80px',\n  },\n  delete: {\n    width: '30px',\n  },\n};\n\nconst mobileItemStyle = {\n  default: {\n    width: '100%',\n    padding: '0 0 0 76px',\n  },\n  qty: {\n    width: '100%',\n    padding: '0 0 0 76px',\n  },\n  delete: {\n    width: '100%',\n    padding: '0 0 0 76px',\n    display: 'flex',\n    flexDirection: 'row-reverse',\n  },\n};\n\nexport default function ReAddToCart(props: ShoppingProductsProps) {\n  const {\n    shoppingListInfo,\n    products,\n    successProducts,\n    allowJuniorPlaceOrder,\n    setValidateFailureProducts,\n    setValidateSuccessProducts,\n    textAlign = 'left',\n  } = props;\n\n  const { submitShoppingListPermission } = useAppSelector(rolePermissionSelector);\n\n  const b3Lang = useB3Lang();\n  const [isOpen, setOpen] = useState<boolean>(false);\n  const [loading, setLoading] = useState<boolean>(false);\n  const [isMobile] = useMobile();\n\n  const { decimal_places: decimalPlaces = 2 } = useAppSelector(activeCurrencyInfoSelector);\n\n  useEffect(() => {\n    if (products.length > 0) {\n      setOpen(true);\n    } else {\n      setOpen(false);\n    }\n  }, [products]);\n\n  const itemStyle = isMobile ? mobileItemStyle : defaultItemStyle;\n\n  const handleUpdateProductQty = async (\n    index: number,\n    value: number | string,\n    isValid: boolean,\n  ) => {\n    const newProduct: ProductsProps[] = [...products];\n    newProduct[index].node.quantity = Number(value);\n    newProduct[index].isValid = isValid;\n    const calculateProduct = await setModifierQtyPrice(newProduct[index].node, Number(value));\n    if (calculateProduct) {\n      (newProduct[index] as CustomFieldItems).node = calculateProduct;\n      setValidateFailureProducts(newProduct);\n    }\n  };\n\n  const handleCancelClicked = () => {\n    setOpen(false);\n    setValidateFailureProducts([]);\n    setValidateSuccessProducts([]);\n  };\n\n  const deleteProduct = (index: number) => {\n    const newProduct: ProductsProps[] = [...products];\n    newProduct.splice(index, 1);\n    setValidateFailureProducts(newProduct);\n  };\n\n  const handRightClick = async () => {\n    const isValidate = products.every((item: ProductsProps) => item.isValid);\n\n    if (!isValidate) {\n      snackbar.error(b3Lang('shoppingList.reAddToCart.fillCorrectQuantity'));\n      return;\n    }\n    try {\n      setLoading(true);\n\n      const lineItems = addLineItems(products);\n\n      const res = await callCart(lineItems);\n\n      if (!res.errors) {\n        handleCancelClicked();\n        if (\n          allowJuniorPlaceOrder &&\n          submitShoppingListPermission &&\n          shoppingListInfo?.status === 0\n        ) {\n          window.location.href = CHECKOUT_URL;\n        } else {\n          snackbar.success('', {\n            jsx: successTip({\n              message: b3Lang('shoppingList.reAddToCart.productsAdded'),\n              link: CART_URL,\n              linkText: b3Lang('shoppingList.reAddToCart.viewCart'),\n              isOutLink: true,\n              isCustomEvent: true,\n            }),\n            isClose: true,\n          });\n          b3TriggerCartNumber();\n        }\n      }\n\n      if (res.errors) {\n        snackbar.error(res.message, {\n          isClose: true,\n        });\n      }\n\n      b3TriggerCartNumber();\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleClearNoStock = async () => {\n    const newProduct = products.filter(\n      (item: ProductsProps) => item.isStock === '0' || item.stock !== 0,\n    );\n    const requestArr: Promise<any>[] = [];\n    newProduct.forEach((product) => {\n      const item = product;\n      const {\n        node: { quantity },\n        minQuantity = 0,\n        maxQuantity = 0,\n        isStock,\n        stock,\n      } = product;\n\n      const quantityNumber = parseInt(`${quantity}`, 10) || 0;\n      if (minQuantity !== 0 && quantityNumber < minQuantity) {\n        item.node.quantity = minQuantity;\n      } else if (maxQuantity !== 0 && quantityNumber > maxQuantity) {\n        item.node.quantity = maxQuantity;\n      }\n      if (isStock !== '0' && stock && (quantity ? Number(quantity) : 0) > stock) {\n        item.node.quantity = stock;\n      }\n\n      item.isValid = true;\n\n      const qty = product?.node?.quantity ? Number(product.node.quantity) : 0;\n\n      requestArr.push(setModifierQtyPrice(product.node, qty));\n    });\n\n    const productArr = await Promise.all(requestArr);\n\n    productArr.forEach((item, index) => {\n      newProduct[index].node = item;\n    });\n    setValidateFailureProducts(newProduct);\n  };\n\n  return (\n    <B3Dialog\n      isOpen={isOpen}\n      handleLeftClick={handleCancelClicked}\n      handRightClick={handRightClick}\n      title={\n        allowJuniorPlaceOrder\n          ? b3Lang('shoppingList.reAddToCart.proceedToCheckout')\n          : b3Lang('shoppingList.reAddToCart.addToCart')\n      }\n      rightSizeBtn={\n        allowJuniorPlaceOrder\n          ? b3Lang('shoppingList.reAddToCart.proceedToCheckout')\n          : b3Lang('shoppingList.reAddToCart.addToCart')\n      }\n      maxWidth=\"xl\"\n    >\n      <Grid>\n        <Box\n          sx={{\n            m: '0 0 1rem 0',\n          }}\n        >\n          <Alert variant=\"filled\" severity=\"success\">\n            {allowJuniorPlaceOrder\n              ? b3Lang('shoppingList.reAddToCart.productsCanCheckout', {\n                  successProducts,\n                })\n              : b3Lang('shoppingList.reAddToCart.productsAddedToCart', {\n                  successProducts,\n                })}\n          </Alert>\n        </Box>\n\n        <Box\n          sx={{\n            m: '1rem 0',\n          }}\n        >\n          <Alert variant=\"filled\" severity=\"error\">\n            {allowJuniorPlaceOrder\n              ? b3Lang('shoppingList.reAddToCart.productsCantCheckout', {\n                  quantity: products.length,\n                })\n              : b3Lang('shoppingList.reAddToCart.productsNotAddedToCart', {\n                  quantity: products.length,\n                })}\n          </Alert>\n        </Box>\n        <B3Spin isSpinning={loading} size={16} isFlex={false}>\n          <Box\n            sx={{\n              display: 'flex',\n              justifyContent: 'space-between',\n              margin: '0.5rem 0 1rem 0',\n            }}\n          >\n            <Box\n              sx={{\n                fontSize: '24px',\n              }}\n            >\n              {b3Lang('shoppingList.reAddToCart.productCount', {\n                quantity: products.length,\n              })}\n            </Box>\n            <CustomButton onClick={() => handleClearNoStock()}>\n              {b3Lang('shoppingList.reAddToCart.adjustQuantity')}\n            </CustomButton>\n          </Box>\n\n          {products.length > 0 ? (\n            <Box>\n              {!isMobile && (\n                <Flex isHeader isMobile={isMobile}>\n                  <FlexItem>\n                    <ProductHead>{b3Lang('shoppingList.reAddToCart.product')}</ProductHead>\n                  </FlexItem>\n                  <FlexItem {...itemStyle.default} textAlignLocation={textAlign}>\n                    <ProductHead>{b3Lang('shoppingList.reAddToCart.price')}</ProductHead>\n                  </FlexItem>\n                  <FlexItem\n                    sx={{\n                      justifyContent: 'center',\n                    }}\n                    {...itemStyle.default}\n                    textAlignLocation={textAlign}\n                  >\n                    <ProductHead>{b3Lang('shoppingList.reAddToCart.quantity')}</ProductHead>\n                  </FlexItem>\n                  <FlexItem {...itemStyle.default} textAlignLocation={textAlign}>\n                    <ProductHead>{b3Lang('shoppingList.reAddToCart.total')}</ProductHead>\n                  </FlexItem>\n                  <FlexItem {...itemStyle.delete}>\n                    <ProductHead> </ProductHead>\n                  </FlexItem>\n                </Flex>\n              )}\n              {products.map((product: ProductsProps, index: number) => {\n                const { isStock, maxQuantity, minQuantity, stock } = product;\n\n                const {\n                  quantity = 1,\n                  primaryImage,\n                  productName,\n                  variantSku,\n                  optionList,\n                  productsSearch,\n                  basePrice,\n                } = product.node;\n\n                const price = Number(basePrice);\n                const total = (price * (quantity ? Number(quantity) : 0)).toFixed(decimalPlaces);\n\n                const newProduct: any = {\n                  ...productsSearch,\n                  selectOptions: optionList,\n                };\n\n                const productFields = getProductOptionsFields(newProduct, {});\n\n                const newOptionList = JSON.parse(optionList);\n                const optionsValue: CustomFieldItems[] = productFields.filter(\n                  (item) => item.valueText,\n                );\n\n                return (\n                  <Flex isMobile={isMobile} key={variantSku}>\n                    <FlexItem>\n                      <ProductImage src={primaryImage || PRODUCT_DEFAULT_IMAGE} />\n                      <Box\n                        sx={{\n                          marginLeft: '16px',\n                        }}\n                      >\n                        <Typography variant=\"body1\" color=\"#212121\">\n                          {productName}\n                        </Typography>\n                        <Typography variant=\"body1\" color=\"#616161\">\n                          {variantSku}\n                        </Typography>\n                        {newOptionList.length > 0 &&\n                          optionsValue.length > 0 &&\n                          optionsValue.map((option: CustomFieldItems) => (\n                            <Typography\n                              sx={{\n                                fontSize: '0.75rem',\n                                lineHeight: '1.5',\n                                color: '#455A64',\n                              }}\n                              key={option.valueLabel}\n                            >\n                              {`${option.valueLabel}: ${option.valueText}`}\n                            </Typography>\n                          ))}\n                      </Box>\n                    </FlexItem>\n                    <FlexItem {...itemStyle.default} textAlignLocation={textAlign}>\n                      {isMobile && <span>Price: </span>}\n                      {currencyFormat(price)}\n                    </FlexItem>\n                    <FlexItem {...itemStyle.default} textAlignLocation={textAlign}>\n                      <B3QuantityTextField\n                        isStock={isStock}\n                        maxQuantity={maxQuantity}\n                        minQuantity={minQuantity}\n                        stock={stock}\n                        value={quantity}\n                        onChange={(value, isValid) => {\n                          handleUpdateProductQty(index, value, isValid);\n                        }}\n                      />\n                    </FlexItem>\n                    <FlexItem {...itemStyle.default} textAlignLocation={textAlign}>\n                      {isMobile && <div>Total: </div>}\n                      {currencyFormat(total)}\n                    </FlexItem>\n\n                    <FlexItem {...itemStyle.delete}>\n                      <Delete\n                        sx={{\n                          cursor: 'pointer',\n                          color: 'rgba(0, 0, 0, 0.54)',\n                        }}\n                        onClick={() => {\n                          deleteProduct(index);\n                        }}\n                      />\n                    </FlexItem>\n                  </Flex>\n                );\n              })}\n            </Box>\n          ) : null}\n        </B3Spin>\n      </Grid>\n    </B3Dialog>\n  );\n}\n","import { useB3Lang } from '@b3/lang';\nimport { Box } from '@mui/material';\n\nimport B3Dialog from '@/components/B3Dialog';\nimport { useMobile } from '@/hooks';\n\ninterface ShoppingDetailDeleteItemsProps {\n  open: boolean;\n  handleCancelClick: () => void;\n  handleDeleteProductClick: () => void;\n}\n\nfunction ShoppingDetailDeleteItems(props: ShoppingDetailDeleteItemsProps) {\n  const b3Lang = useB3Lang();\n  const [isMobile] = useMobile();\n  const { open, handleCancelClick, handleDeleteProductClick } = props;\n\n  return (\n    <B3Dialog\n      isOpen={open}\n      title={b3Lang('shoppingList.deleteItems.subtotal')}\n      leftSizeBtn={b3Lang('shoppingList.deleteItems.cancel')}\n      rightSizeBtn={b3Lang('shoppingList.deleteItems.delete')}\n      handleLeftClick={handleCancelClick}\n      handRightClick={handleDeleteProductClick}\n      rightStyleBtn={{\n        color: '#D32F2F',\n      }}\n    >\n      <Box\n        sx={{\n          display: 'flex',\n          justifyContent: isMobile ? 'center%' : 'start',\n          width: isMobile ? '100%' : '450px',\n          height: '100%',\n        }}\n      >\n        {b3Lang('shoppingList.deleteItems.confirmDelete')}\n      </Box>\n    </B3Dialog>\n  );\n}\n\nexport default ShoppingDetailDeleteItems;\n","import { useContext, useRef, useState } from 'react';\nimport { useB3Lang } from '@b3/lang';\nimport { ArrowDropDown, Delete } from '@mui/icons-material';\nimport { Box, Grid, Menu, MenuItem, Typography } from '@mui/material';\nimport Cookies from 'js-cookie';\nimport { v1 as uuid } from 'uuid';\n\nimport { successTip } from '@/components';\nimport CustomButton from '@/components/button/CustomButton';\nimport { CART_URL, CHECKOUT_URL, PRODUCT_DEFAULT_IMAGE } from '@/constants';\nimport { useMobile } from '@/hooks';\nimport { GlobalContext } from '@/shared/global';\nimport {\n  getB2BVariantInfoBySkus,\n  getBcVariantInfoBySkus,\n  searchB2BProducts,\n  searchBcProducts,\n} from '@/shared/service/b2b/graphql/product';\nimport { deleteCart, getCart } from '@/shared/service/bc/graphql/cart';\nimport { rolePermissionSelector, useAppSelector } from '@/store';\nimport { currencyFormat, snackbar } from '@/utils';\nimport b2bLogger from '@/utils/b3Logger';\nimport {\n  addQuoteDraftProducts,\n  calculateProductListPrice,\n  validProductQty,\n} from '@/utils/b3Product/b3Product';\nimport {\n  addLineItems,\n  conversionProductsList,\n  ProductsProps,\n} from '@/utils/b3Product/shared/config';\nimport b3TriggerCartNumber from '@/utils/b3TriggerCartNumber';\nimport { callCart, deleteCartData, updateCart } from '@/utils/cartUtils';\n\ninterface ShoppingDetailFooterProps {\n  shoppingListInfo: any;\n  allowJuniorPlaceOrder: boolean;\n  checkedArr: any;\n  selectedSubTotal: number;\n  setLoading: (val: boolean) => void;\n  setDeleteOpen: (val: boolean) => void;\n  setValidateFailureProducts: (arr: ProductsProps[]) => void;\n  setValidateSuccessProducts: (arr: ProductsProps[]) => void;\n  isB2BUser: boolean;\n  customColor: string;\n  isCanEditShoppingList: boolean;\n  role: string | number;\n}\n\ninterface ProductInfoProps {\n  basePrice: number | string;\n  baseSku: string;\n  createdAt: number;\n  discount: number | string;\n  enteredInclusive: boolean;\n  id: number | string;\n  itemId: number;\n  optionList: string;\n  primaryImage: string;\n  productId: number;\n  productName: string;\n  productUrl: string;\n  quantity: number | string;\n  tax: number | string;\n  updatedAt: number;\n  variantId: number;\n  variantSku: string;\n  productsSearch: CustomFieldItems;\n}\n\ninterface ListItemProps {\n  node: ProductInfoProps;\n}\n\nfunction ShoppingDetailFooter(props: ShoppingDetailFooterProps) {\n  const [isMobile] = useMobile();\n  const b3Lang = useB3Lang();\n\n  const {\n    state: { productQuoteEnabled = false },\n  } = useContext(GlobalContext);\n  const isAgenting = useAppSelector(({ b2bFeatures }) => b2bFeatures.masqueradeCompany.isAgenting);\n  const companyId = useAppSelector(({ company }) => company.companyInfo.id);\n  const customerGroupId = useAppSelector(({ company }) => company.customer.customerGroupId);\n  const {\n    shoppingListCreateActionsPermission,\n    purchasabilityPermission,\n    submitShoppingListPermission,\n  } = useAppSelector(rolePermissionSelector);\n  const ref = useRef<HTMLButtonElement | null>(null);\n  const [isOpen, setIsOpen] = useState(false);\n\n  const cartEntityId = Cookies.get('cartId');\n\n  const containerStyle = isMobile\n    ? {\n        alignItems: 'flex-start',\n        flexDirection: 'column',\n      }\n    : {\n        alignItems: 'center',\n      };\n\n  const {\n    shoppingListInfo,\n    allowJuniorPlaceOrder,\n    checkedArr,\n    selectedSubTotal,\n    setLoading,\n    setDeleteOpen,\n    setValidateFailureProducts,\n    setValidateSuccessProducts,\n    isB2BUser,\n    customColor,\n    isCanEditShoppingList,\n    role,\n  } = props;\n\n  const b2bShoppingListActionsPermission = isB2BUser ? shoppingListCreateActionsPermission : true;\n  const isCanAddToCart = isB2BUser ? purchasabilityPermission : true;\n  const b2bSubmitShoppingListPermission = isB2BUser\n    ? submitShoppingListPermission\n    : Number(role) === 2;\n\n  const handleOpenBtnList = () => {\n    if (checkedArr.length === 0) {\n      snackbar.error(b3Lang('shoppingList.footer.selectOneItem'));\n    } else {\n      setIsOpen(true);\n    }\n  };\n\n  const handleClose = () => {\n    setIsOpen(false);\n  };\n\n  const verifyInventory = (inventoryInfos: ProductsProps[]) => {\n    const validateFailureArr: ProductsProps[] = [];\n    const validateSuccessArr: ProductsProps[] = [];\n\n    checkedArr.forEach((item: ProductsProps) => {\n      const { node } = item;\n\n      const inventoryInfo: CustomFieldItems =\n        inventoryInfos.find((option: CustomFieldItems) => option.variantSku === node.variantSku) ||\n        {};\n\n      if (inventoryInfo) {\n        let isPassVerify = true;\n        if (\n          inventoryInfo.isStock === '1' &&\n          (node?.quantity ? Number(node.quantity) : 0) > inventoryInfo.stock\n        )\n          isPassVerify = false;\n\n        if (\n          inventoryInfo.minQuantity !== 0 &&\n          (node?.quantity ? Number(node.quantity) : 0) < inventoryInfo.minQuantity\n        )\n          isPassVerify = false;\n\n        if (\n          inventoryInfo.maxQuantity !== 0 &&\n          (node?.quantity ? Number(node.quantity) : 0) > inventoryInfo.maxQuantity\n        )\n          isPassVerify = false;\n\n        if (isPassVerify) {\n          validateSuccessArr.push({\n            node,\n          });\n        } else {\n          validateFailureArr.push({\n            node: {\n              ...node,\n            },\n            stock: inventoryInfo.stock,\n            isStock: inventoryInfo.isStock,\n            maxQuantity: inventoryInfo.maxQuantity,\n            minQuantity: inventoryInfo.minQuantity,\n          });\n        }\n      }\n    });\n\n    return {\n      validateFailureArr,\n      validateSuccessArr,\n    };\n  };\n\n  // Add selected product to cart\n  const handleAddProductsToCart = async () => {\n    if (checkedArr.length === 0) {\n      snackbar.error(b3Lang('shoppingList.footer.selectOneItem'));\n      return;\n    }\n\n    handleClose();\n    setLoading(true);\n    try {\n      const skus: string[] = [];\n\n      let cantPurchase = '';\n\n      checkedArr.forEach((item: ProductsProps) => {\n        const { node } = item;\n\n        if (node.productsSearch.availability === 'disabled') {\n          cantPurchase += `${node.variantSku},`;\n        }\n\n        skus.push(node.variantSku);\n      });\n\n      if (cantPurchase) {\n        snackbar.error(\n          b3Lang('shoppingList.footer.unavailableProducts', {\n            skus: cantPurchase.slice(0, -1),\n          }),\n          {\n            isClose: true,\n          },\n        );\n        return;\n      }\n\n      if (skus.length === 0) {\n        snackbar.error(\n          allowJuniorPlaceOrder\n            ? b3Lang('shoppingList.footer.selectItemsToCheckout')\n            : b3Lang('shoppingList.footer.selectItemsToAddToCart'),\n          {\n            isClose: true,\n          },\n        );\n        return;\n      }\n\n      const getVariantInfoBySku = isB2BUser ? getB2BVariantInfoBySkus : getBcVariantInfoBySkus;\n\n      const getInventoryInfos = await getVariantInfoBySku({\n        skus,\n      });\n\n      const { validateFailureArr, validateSuccessArr } = verifyInventory(\n        getInventoryInfos?.variantSku || [],\n      );\n\n      if (validateSuccessArr.length !== 0) {\n        const lineItems = addLineItems(validateSuccessArr);\n        const deleteCartObject = deleteCartData(cartEntityId);\n        const cartInfo = await getCart();\n        let res = null;\n        if (allowJuniorPlaceOrder && cartInfo.length) {\n          await deleteCart(deleteCartObject);\n          res = await updateCart(cartInfo, lineItems);\n        } else {\n          res = await callCart(lineItems);\n          b3TriggerCartNumber();\n        }\n        if (res && res.errors) {\n          snackbar.error(res.errors[0].message, {\n            isClose: true,\n          });\n        } else if (validateFailureArr.length === 0) {\n          if (\n            allowJuniorPlaceOrder &&\n            b2bSubmitShoppingListPermission &&\n            shoppingListInfo?.status === 0\n          ) {\n            window.location.href = CHECKOUT_URL;\n          } else {\n            snackbar.success('', {\n              jsx: successTip({\n                message: b3Lang('shoppingList.footer.productsAddedToCart'),\n                link: CART_URL,\n                linkText: b3Lang('shoppingList.footer.viewCart'),\n                isOutLink: true,\n                isCustomEvent: true,\n              }),\n              isClose: true,\n            });\n            b3TriggerCartNumber();\n          }\n        }\n      }\n\n      setValidateFailureProducts(validateFailureArr);\n      setValidateSuccessProducts(validateSuccessArr);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Add selected to quote\n  const getOptionsList = (options: []) => {\n    if (options?.length === 0) return [];\n\n    const option = options.map(\n      ({\n        option_id: optionId,\n        option_value: optionValue,\n      }: {\n        option_id: string | number;\n        option_value: string | number;\n      }) => ({\n        optionId,\n        optionValue,\n      }),\n    );\n\n    return option;\n  };\n\n  const handleAddSelectedToQuote = async () => {\n    if (checkedArr.length === 0) {\n      snackbar.error(b3Lang('shoppingList.footer.selectOneItem'));\n      return;\n    }\n    setLoading(true);\n    handleClose();\n    try {\n      const productsWithSku = checkedArr.filter((checkedItem: ListItemProps) => {\n        const {\n          node: { variantSku },\n        } = checkedItem;\n\n        return variantSku !== '' && variantSku !== null && variantSku !== undefined;\n      });\n\n      const noSkuProducts = checkedArr.filter((checkedItem: ListItemProps) => {\n        const {\n          node: { variantSku },\n        } = checkedItem;\n\n        return !variantSku;\n      });\n      if (noSkuProducts.length > 0) {\n        snackbar.error(b3Lang('shoppingList.footer.cantAddProductsNoSku'), {\n          isClose: true,\n        });\n      }\n      if (noSkuProducts.length === checkedArr.length) return;\n\n      const productIds: number[] = [];\n      productsWithSku.forEach((product: ListItemProps) => {\n        const { node } = product;\n\n        if (!productIds.includes(Number(node.productId))) {\n          productIds.push(Number(node.productId));\n        }\n      });\n\n      const getProducts = isB2BUser ? searchB2BProducts : searchBcProducts;\n\n      const { productsSearch } = await getProducts({\n        productIds,\n        companyId,\n        customerGroupId,\n      });\n\n      const newProductInfo: CustomFieldItems = conversionProductsList(productsSearch);\n      let isSuccess = false;\n      let errorMessage = '';\n      let isFondVariant = true;\n\n      const newProducts: CustomFieldItems[] = [];\n      productsWithSku.forEach((product: ListItemProps) => {\n        const {\n          node: {\n            basePrice,\n            optionList,\n            variantSku,\n            productId,\n            productName,\n            quantity,\n            variantId,\n            tax,\n          },\n        } = product;\n\n        const optionsList = getOptionsList(JSON.parse(optionList));\n\n        const currentProductSearch = newProductInfo.find(\n          (product: CustomFieldItems) => Number(product.id) === Number(productId),\n        );\n\n        const variantItem = currentProductSearch?.variants.find(\n          (item: CustomFieldItems) => item.sku === variantSku,\n        );\n\n        if (!variantItem) {\n          errorMessage = b3Lang('shoppingList.footer.notFoundSku', {\n            sku: variantSku,\n          });\n          isFondVariant = false;\n        }\n\n        const quoteListitem = {\n          node: {\n            id: uuid(),\n            variantSku: variantItem?.sku || variantSku,\n            variantId,\n            productsSearch: currentProductSearch,\n            primaryImage: variantItem?.image_url || PRODUCT_DEFAULT_IMAGE,\n            productName,\n            quantity: Number(quantity) || 1,\n            optionList: JSON.stringify(optionsList),\n            productId,\n            basePrice,\n            tax,\n          },\n        };\n\n        newProducts.push(quoteListitem);\n\n        isSuccess = true;\n      });\n\n      isSuccess = validProductQty(newProducts);\n\n      if (!isFondVariant) {\n        snackbar.error('', {\n          jsx: successTip({\n            message: errorMessage,\n            link: '',\n            linkText: '',\n            isOutLink: false,\n          }),\n          isClose: true,\n        });\n\n        return;\n      }\n\n      if (isSuccess) {\n        await calculateProductListPrice(newProducts, '2');\n        addQuoteDraftProducts(newProducts);\n        snackbar.success('', {\n          jsx: successTip({\n            message: b3Lang('shoppingList.footer.productsAddedToQuote'),\n            link: '/quoteDraft',\n            linkText: b3Lang('shoppingList.footer.viewQuote'),\n            isOutLink: false,\n          }),\n          isClose: true,\n        });\n      } else {\n        snackbar.error('', {\n          jsx: successTip({\n            message: b3Lang('shoppingList.footer.productsLimit'),\n            link: '/quoteDraft',\n            linkText: b3Lang('shoppingList.footer.viewQuote'),\n            isOutLink: false,\n          }),\n          isClose: true,\n        });\n      }\n    } catch (e) {\n      b2bLogger.error(e);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const buttons = {\n    adSelectedToCart: {\n      name: b3Lang('shoppingList.footer.addToCart'),\n      key: 'add-selected-to-cart',\n      handleClick: handleAddProductsToCart,\n      isDisabled: false,\n    },\n    proceedToCheckout: {\n      name: b3Lang('shoppingList.footer.proceedToCheckout'),\n      key: 'add-select-to-checkout',\n      handleClick: handleAddProductsToCart,\n      isDisabled: false,\n    },\n    addSelectedToQuote: {\n      name: b3Lang('shoppingList.footer.addToQuote'),\n      key: 'add-selected-to-quote',\n      handleClick: handleAddSelectedToQuote,\n      isDisabled: false,\n    },\n  };\n\n  const allowButtonList = () => {\n    if (!(shoppingListInfo?.status === 0 || !isB2BUser)) return [];\n\n    if (!isCanAddToCart && isB2BUser)\n      return productQuoteEnabled ? [buttons.addSelectedToQuote] : [];\n\n    if (b2bSubmitShoppingListPermission) {\n      if (allowJuniorPlaceOrder && productQuoteEnabled) {\n        return [buttons.proceedToCheckout, buttons.addSelectedToQuote];\n      }\n\n      if (allowJuniorPlaceOrder) return [buttons.proceedToCheckout];\n      if (productQuoteEnabled) {\n        return [buttons.addSelectedToQuote];\n      }\n      return [];\n    }\n\n    return productQuoteEnabled\n      ? [buttons.adSelectedToCart, buttons.addSelectedToQuote]\n      : [buttons.adSelectedToCart];\n  };\n\n  const buttonList = allowButtonList();\n\n  return (\n    <Grid\n      sx={{\n        position: 'fixed',\n        bottom: isMobile && isAgenting ? '52px' : 52,\n        left: 0,\n        backgroundColor: '#fff',\n        width: '100%',\n        padding: isMobile ? '0 0 1rem 0' : '0 40px 1rem 40px',\n        height: isMobile ? '8rem' : 'auto',\n        marginLeft: 0,\n        display: 'flex',\n        flexWrap: 'nowrap',\n        zIndex: '999',\n      }}\n      container\n      spacing={2}\n    >\n      <Grid\n        item\n        sx={{\n          display: isMobile ? 'none' : 'block',\n          width: '290px',\n          paddingLeft: '20px',\n        }}\n      />\n      <Grid\n        item\n        sx={\n          isMobile\n            ? {\n                flexBasis: '100%',\n              }\n            : {\n                flexBasis: '690px',\n                flexGrow: 1,\n              }\n        }\n      >\n        <Box\n          sx={{\n            width: '100%',\n            pr: '20px',\n            display: 'flex',\n            zIndex: '999',\n            justifyContent: 'space-between',\n            ...containerStyle,\n          }}\n        >\n          <Typography\n            sx={{\n              color: '#000000',\n              fontSize: '16px',\n              fontWeight: '400',\n            }}\n          >\n            {b3Lang('shoppingList.footer.selectedProducts', {\n              quantity: checkedArr.length,\n            })}\n          </Typography>\n          <Box\n            sx={{\n              display: 'flex',\n              alignItems: 'center',\n              flexWrap: isMobile ? 'wrap' : 'nowrap',\n            }}\n          >\n            <Typography\n              variant=\"h6\"\n              sx={{\n                fontSize: '16px',\n                fontWeight: '700',\n                color: '#000000',\n              }}\n            >\n              {b3Lang('shoppingList.footer.subtotal', {\n                subtotal: currencyFormat(selectedSubTotal),\n              })}\n            </Typography>\n            <Box\n              sx={{\n                display: 'flex',\n                alignItems: 'center',\n                marginTop: isMobile ? '0.5rem' : 0,\n                width: isMobile ? '100%' : 'auto',\n              }}\n            >\n              {!allowJuniorPlaceOrder &&\n                isCanEditShoppingList &&\n                b2bShoppingListActionsPermission && (\n                  <CustomButton\n                    sx={{\n                      padding: '5px',\n                      border: `1px solid ${customColor || '#1976d2'}`,\n                      margin: isMobile ? '0 1rem 0 0' : '0 1rem',\n                      minWidth: 'auto',\n                    }}\n                    disabled={shoppingListInfo?.status === 40}\n                  >\n                    <Delete\n                      color=\"primary\"\n                      sx={{\n                        color: customColor,\n                      }}\n                      onClick={() => {\n                        setDeleteOpen(true);\n                      }}\n                    />\n                  </CustomButton>\n                )}\n              {buttonList.length ? (\n                <Box\n                  sx={{\n                    display: 'flex',\n                    alignItems: 'center',\n                    marginTop: isMobile ? '0.5rem' : 0,\n                    marginLeft: isMobile ? 0 : '20px',\n                    width: isMobile ? '100%' : 'auto',\n                  }}\n                >\n                  {buttonList.length === 1 && buttonList[0] && (\n                    <CustomButton\n                      variant=\"contained\"\n                      onClick={buttonList[0].handleClick}\n                      sx={{\n                        marginRight: isMobile ? '1rem' : 0,\n                        width: isMobile ? '100%' : 'auto',\n                      }}\n                    >\n                      {buttonList[0].name}\n                    </CustomButton>\n                  )}\n                  {buttonList.length === 2 && (\n                    <>\n                      <CustomButton\n                        variant=\"contained\"\n                        onClick={handleOpenBtnList}\n                        ref={ref}\n                        sx={{\n                          marginRight: isMobile ? '1rem' : 0,\n                          width: isMobile ? '100%' : 'auto',\n                        }}\n                        endIcon={<ArrowDropDown />}\n                      >\n                        {b3Lang('shoppingList.footer.addSelectedTo')}\n                      </CustomButton>\n                      <Menu\n                        id=\"basic-menu\"\n                        anchorEl={ref.current}\n                        open={isOpen}\n                        onClose={handleClose}\n                        MenuListProps={{\n                          'aria-labelledby': 'basic-button',\n                        }}\n                      >\n                        {buttonList.length > 1 &&\n                          buttonList.map((button) => (\n                            <MenuItem\n                              key={button.key}\n                              onClick={() => {\n                                button.handleClick();\n                              }}\n                            >\n                              {button.name}\n                            </MenuItem>\n                          ))}\n                      </Menu>\n                    </>\n                  )}\n                </Box>\n              ) : null}\n            </Box>\n          </Box>\n        </Box>\n      </Grid>\n      <Grid\n        item\n        sx={\n          isMobile\n            ? {\n                flexBasis: '100%',\n                display: isMobile ? 'none' : 'block',\n              }\n            : {\n                flexBasis: '340px',\n                display: isMobile ? 'none' : 'block',\n              }\n        }\n      />\n    </Grid>\n  );\n}\n\nexport default ShoppingDetailFooter;\n","import { useContext, useMemo } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useB3Lang } from '@b3/lang';\nimport { ArrowBackIosNew } from '@mui/icons-material';\nimport { Box, Grid, styled, Typography } from '@mui/material';\n\nimport CustomButton from '@/components/button/CustomButton';\nimport { getContrastColor } from '@/components/outSideComponents/utils/b3CustomStyles';\nimport { useMobile } from '@/hooks';\nimport { type SetOpenPage } from '@/pages/SetOpenPage';\nimport { CustomStyleContext } from '@/shared/customStyleButton';\nimport { rolePermissionSelector, useAppSelector } from '@/store';\nimport { verifyLevelPermission, verifySubmitShoppingListSubsidiariesPermission } from '@/utils';\nimport { b2bPermissionsMap } from '@/utils/b3CheckPermissions/config';\n\nimport { ShoppingStatus } from '../../ShoppingLists/ShoppingStatus';\n\nconst StyledCreateName = styled('div')(() => ({\n  display: 'flex',\n  alignItems: 'center',\n}));\n\ninterface ShoppingDetailHeaderProps {\n  shoppingListInfo: any;\n  role: string | number;\n  customerInfo: any;\n  goToShoppingLists: () => void;\n  handleUpdateShoppingList: (status: number) => void;\n  isB2BUser: boolean;\n  setOpenPage: SetOpenPage;\n  isAgenting: boolean;\n  openAPPParams: {\n    shoppingListBtn: string;\n  };\n  customColor: string;\n}\n\nfunction ShoppingDetailHeader(props: ShoppingDetailHeaderProps) {\n  const b3Lang = useB3Lang();\n  const [isMobile] = useMobile();\n\n  const {\n    shoppingListInfo,\n    customerInfo,\n    handleUpdateShoppingList,\n    goToShoppingLists,\n    isB2BUser,\n    setOpenPage,\n    openAPPParams,\n    customColor,\n  } = props;\n\n  const {\n    state: {\n      portalStyle: { backgroundColor = '#FEF9F5' },\n    },\n  } = useContext(CustomStyleContext);\n  const navigate = useNavigate();\n\n  const { selectCompanyHierarchyId } = useAppSelector(\n    ({ company }) => company.companyHierarchyInfo,\n  );\n\n  const {\n    submitShoppingListPermission: submitShoppingList,\n    approveShoppingListPermission: approveShoppingList,\n  } = useAppSelector(rolePermissionSelector);\n\n  const shoppingListPermissions = useMemo(() => {\n    if (isB2BUser) {\n      const companyInfo = shoppingListInfo?.companyInfo || {};\n\n      const {\n        submitShoppingListPermission: submitShoppingListPermissionCode,\n        approveShoppingListPermission: approveShoppingListPermissionCode,\n      } = b2bPermissionsMap;\n      const submitShoppingListPermissionLevel = verifySubmitShoppingListSubsidiariesPermission({\n        code: submitShoppingListPermissionCode,\n        userId: Number(customerInfo?.userId || 0),\n        selectId: Number(selectCompanyHierarchyId),\n      });\n\n      const approveShoppingListPermissionLevel = verifyLevelPermission({\n        code: approveShoppingListPermissionCode,\n        companyId: Number(companyInfo?.companyId || 0),\n        userId: Number(customerInfo?.userId || 0),\n      });\n\n      return {\n        submitShoppingListPermission: submitShoppingListPermissionLevel,\n        approveShoppingListPermission: approveShoppingListPermissionLevel,\n      };\n    }\n\n    return {\n      submitShoppingListPermission: submitShoppingList,\n      approveShoppingListPermission: approveShoppingList,\n    };\n  }, [\n    customerInfo,\n    isB2BUser,\n    submitShoppingList,\n    approveShoppingList,\n    shoppingListInfo?.companyInfo,\n    selectCompanyHierarchyId,\n  ]);\n\n  const isDisabledBtn = shoppingListInfo?.products?.edges.length === 0;\n\n  const { submitShoppingListPermission, approveShoppingListPermission } = shoppingListPermissions;\n\n  const gridOptions = (xs: number) =>\n    isMobile\n      ? {}\n      : {\n          xs,\n        };\n  return (\n    <>\n      <Box\n        sx={{\n          marginBottom: '16px',\n          width: 'fit-content',\n        }}\n      >\n        <Box\n          sx={{\n            color: '#1976d2',\n            cursor: 'pointer',\n            display: 'flex',\n            alignItems: 'center',\n          }}\n          onClick={() => {\n            if (openAPPParams.shoppingListBtn !== 'add') {\n              goToShoppingLists();\n            } else {\n              navigate('/');\n              setOpenPage({\n                isOpen: false,\n                openUrl: '',\n              });\n            }\n          }}\n        >\n          <ArrowBackIosNew\n            fontSize=\"small\"\n            sx={{\n              fontSize: '12px',\n              marginRight: '0.5rem',\n              color: customColor,\n            }}\n          />\n          <Box\n            sx={{\n              margin: 0,\n              color: customColor,\n              m: '0',\n            }}\n          >\n            {openAPPParams.shoppingListBtn !== 'add'\n              ? b3Lang('shoppingList.header.backToShoppingLists')\n              : b3Lang('shoppingList.header.backToProduct')}\n          </Box>\n        </Box>\n      </Box>\n      <Grid\n        container\n        spacing={2}\n        sx={{\n          display: 'flex',\n          justifyContent: 'space-between',\n          flexDirection: isMobile ? 'column' : 'row',\n          mb: isMobile ? '16px' : '',\n        }}\n      >\n        <Grid\n          item\n          {...gridOptions(8)}\n          sx={{\n            color: getContrastColor(backgroundColor),\n          }}\n        >\n          <Box\n            sx={{\n              display: 'flex',\n              alignItems: isMobile ? 'start' : 'center',\n              flexDirection: isMobile ? 'column' : 'row',\n            }}\n          >\n            <Typography\n              variant=\"h4\"\n              sx={{\n                marginRight: '1rem',\n                wordBreak: 'break-all',\n              }}\n            >\n              {`${shoppingListInfo?.name || ''}`}\n            </Typography>\n            {isB2BUser &&\n              (submitShoppingListPermission ||\n                (approveShoppingListPermission && shoppingListInfo?.approvedFlag)) && (\n                <Typography\n                  sx={{\n                    m: isMobile ? '10px 0' : '0',\n                  }}\n                >\n                  {shoppingListInfo && <ShoppingStatus status={shoppingListInfo?.status} />}\n                </Typography>\n              )}\n          </Box>\n          <Box>\n            <Typography\n              sx={{\n                width: '100%',\n                wordBreak: 'break-all',\n              }}\n            >\n              {shoppingListInfo?.description}\n            </Typography>\n            {isB2BUser && (\n              <StyledCreateName>\n                <Typography\n                  variant=\"subtitle2\"\n                  sx={{\n                    marginRight: '0.5rem',\n                  }}\n                >\n                  {b3Lang('shoppingList.header.createdBy')}\n                </Typography>\n                <span>{`${customerInfo?.firstName || ''} ${customerInfo?.lastName || ''}`}</span>\n              </StyledCreateName>\n            )}\n          </Box>\n        </Grid>\n\n        <Grid\n          item\n          sx={{\n            textAlign: isMobile ? 'none' : 'end',\n          }}\n          {...gridOptions(4)}\n        >\n          {submitShoppingListPermission && shoppingListInfo?.status === 30 && (\n            <CustomButton\n              variant=\"outlined\"\n              disabled={isDisabledBtn}\n              onClick={() => {\n                handleUpdateShoppingList(40);\n              }}\n            >\n              {b3Lang('shoppingList.header.submitForApproval')}\n            </CustomButton>\n          )}\n          {approveShoppingListPermission && shoppingListInfo?.status === 40 && (\n            <Box>\n              <CustomButton\n                variant=\"outlined\"\n                sx={{\n                  marginRight: '1rem',\n                }}\n                onClick={() => {\n                  handleUpdateShoppingList(20);\n                }}\n              >\n                {b3Lang('shoppingList.header.reject')}\n              </CustomButton>\n              {approveShoppingListPermission && (\n                <CustomButton\n                  variant=\"outlined\"\n                  onClick={() => {\n                    handleUpdateShoppingList(0);\n                  }}\n                >\n                  {b3Lang('shoppingList.header.approve')}\n                </CustomButton>\n              )}\n            </Box>\n          )}\n        </Grid>\n      </Grid>\n    </>\n  );\n}\n\nexport default ShoppingDetailHeader;\n","import { useB3Lang } from '@b3/lang';\nimport { Box, TextField } from '@mui/material';\n\nimport B3Dialog from '@/components/B3Dialog';\nimport { useMobile } from '@/hooks';\n\ninterface ShoppingDetailAddNotesProps {\n  open: boolean;\n  notes: string;\n  setNotes: (value: string) => void;\n  handleCancelAddNotesClick: () => void;\n  handleAddItemNotesClick: () => void;\n}\n\nfunction ShoppingDetailAddNotes(props: ShoppingDetailAddNotesProps) {\n  const b3Lang = useB3Lang();\n\n  const [isMobile] = useMobile();\n  const { open, notes, setNotes, handleCancelAddNotesClick, handleAddItemNotesClick } = props;\n\n  return (\n    <B3Dialog\n      isOpen={open}\n      title={b3Lang('shoppingList.addItemNotes.title')}\n      leftSizeBtn={b3Lang('shoppingList.addItemNotes.cancel')}\n      rightSizeBtn={b3Lang('shoppingList.addItemNotes.save')}\n      handleLeftClick={handleCancelAddNotesClick}\n      handRightClick={handleAddItemNotesClick}\n      isShowBordered={false}\n    >\n      <Box\n        sx={{\n          display: 'flex',\n          justifyContent: isMobile ? 'center%' : 'start',\n          width: isMobile ? '100%' : '450px',\n          height: '100%',\n        }}\n      >\n        <TextField\n          multiline\n          rows={6}\n          defaultValue={notes}\n          onChange={(e) => setNotes(e.target.value)}\n          variant=\"filled\"\n          fullWidth\n          placeholder={b3Lang('shoppingList.addItemNotes.placeholder')}\n        />\n      </Box>\n    </B3Dialog>\n  );\n}\n\nexport default ShoppingDetailAddNotes;\n","import { ReactElement } from 'react';\nimport { useB3Lang } from '@b3/lang';\nimport { Delete, Edit, StickyNote2 } from '@mui/icons-material';\nimport { Box, CardContent, styled, TextField, Typography } from '@mui/material';\n\nimport { PRODUCT_DEFAULT_IMAGE } from '@/constants';\nimport { currencyFormat } from '@/utils';\nimport b2bGetVariantImageByVariantInfo from '@/utils/b2bGetVariantImageByVariantInfo';\nimport { getBCPrice } from '@/utils/b3Product/b3Product';\n\nimport { getProductOptionsFields } from '../../../utils/b3Product/shared/config';\n\ninterface ShoppingDetailCardProps {\n  item: any;\n  onEdit: (item: any, variantId: number | string, itemId: number | string) => void;\n  onDelete: (itemId: number) => void;\n  handleUpdateProductQty: (id: number | string, value: number | string) => void;\n  handleUpdateShoppingListItem: (itemId: number | string) => void;\n  checkBox?: () => ReactElement;\n  isReadForApprove: boolean;\n  len: number;\n  itemIndex?: number;\n  setDeleteOpen: (value: boolean) => void;\n  setAddNoteItemId: (itemId: number) => void;\n  setAddNoteOpen: (open: boolean) => void;\n  setNotes: (value: string) => void;\n  showPrice: (price: string, row: CustomFieldItems) => string | number;\n  b2bAndBcShoppingListActionsPermissions: boolean;\n}\n\nconst StyledImage = styled('img')(() => ({\n  maxWidth: '60px',\n  height: 'auto',\n  marginRight: '0.5rem',\n}));\n\nfunction ShoppingDetailCard(props: ShoppingDetailCardProps) {\n  const b3Lang = useB3Lang();\n  const {\n    item: shoppingDetail,\n    onEdit,\n    onDelete,\n    checkBox,\n    handleUpdateProductQty,\n    handleUpdateShoppingListItem,\n    isReadForApprove,\n    len,\n    itemIndex,\n    setDeleteOpen,\n    setAddNoteOpen,\n    setAddNoteItemId,\n    setNotes,\n    showPrice,\n    b2bAndBcShoppingListActionsPermissions,\n  } = props;\n\n  const {\n    basePrice,\n    quantity,\n    itemId,\n    variantId,\n    primaryImage,\n    productName,\n    variantSku,\n    productsSearch,\n    productUrl,\n    taxPrice = 0,\n    productNote,\n  } = shoppingDetail;\n\n  const price = getBCPrice(Number(basePrice), Number(taxPrice));\n\n  const total = price * Number(quantity);\n\n  const product: any = {\n    ...shoppingDetail.productsSearch,\n    selectOptions: shoppingDetail.optionList,\n  };\n\n  const productFields = getProductOptionsFields(product, {});\n\n  const optionList = JSON.parse(shoppingDetail.optionList);\n  const optionsValue: CustomFieldItems[] = productFields.filter((item) => item.valueText);\n\n  const canChangeOption =\n    optionList.length > 0 && !isReadForApprove && b2bAndBcShoppingListActionsPermissions;\n\n  const currentVariants = product.variants || [];\n\n  const currentImage =\n    b2bGetVariantImageByVariantInfo(currentVariants, { variantId, variantSku }) || primaryImage;\n\n  return (\n    <Box\n      key={shoppingDetail.id}\n      sx={{\n        borderTop: '1px solid #D9DCE9',\n        borderBottom: itemIndex === len - 1 ? '1px solid #D9DCE9' : '',\n      }}\n    >\n      <CardContent\n        sx={{\n          color: '#313440',\n          display: 'flex',\n          pl: 0,\n        }}\n      >\n        <Box>{checkBox && checkBox()}</Box>\n        <Box>\n          <StyledImage\n            src={currentImage || PRODUCT_DEFAULT_IMAGE}\n            alt=\"Product-img\"\n            loading=\"lazy\"\n          />\n        </Box>\n        <Box\n          sx={{\n            flex: 1,\n          }}\n        >\n          <Typography\n            variant=\"body1\"\n            color=\"#212121\"\n            onClick={() => {\n              const {\n                location: { origin },\n              } = window;\n\n              window.location.href = `${origin}${productUrl}`;\n            }}\n            sx={{\n              cursor: 'pointer',\n            }}\n          >\n            {productName}\n          </Typography>\n          <Typography variant=\"body1\" color=\"#616161\">\n            {variantSku}\n          </Typography>\n          <Box\n            sx={{\n              margin: '0 0 0.5rem 0',\n            }}\n          >\n            {optionList.length > 0 && optionsValue.length > 0 && (\n              <Box>\n                {optionsValue.map((option: any) => (\n                  <Typography\n                    sx={{\n                      fontSize: '0.75rem',\n                      lineHeight: '1.5',\n                      color: '#455A64',\n                    }}\n                    key={option.valueLabel}\n                  >\n                    {`${option.valueLabel}: ${option.valueText}`}\n                  </Typography>\n                ))}\n              </Box>\n            )}\n          </Box>\n\n          {productNote && productNote.trim().length > 0 && (\n            <Typography\n              sx={{\n                fontSize: '0.75rem',\n                color: '#ED6C02',\n                marginTop: '0.3rem',\n                marginBottom: '0.3rem',\n              }}\n            >\n              {productNote}\n            </Typography>\n          )}\n\n          <Typography\n            sx={{\n              color: '#212121',\n              fontSize: '14px',\n            }}\n          >\n            {b3Lang('shoppingList.shoppingDetailCard.price', {\n              price: showPrice(currencyFormat(price), shoppingDetail),\n            })}\n          </Typography>\n\n          <TextField\n            size=\"small\"\n            type=\"number\"\n            variant=\"filled\"\n            label={b3Lang('shoppingList.shoppingDetailCard.quantity')}\n            disabled={b2bAndBcShoppingListActionsPermissions ? isReadForApprove : true}\n            inputProps={{\n              inputMode: 'numeric',\n              pattern: '[0-9]*',\n            }}\n            value={quantity}\n            sx={{\n              margin: '0.5rem 0',\n              width: '60%',\n              maxWidth: '100px',\n              '& label': {\n                zIndex: 0,\n                fontSize: '14px',\n              },\n              '& input': {\n                fontSize: '14px',\n              },\n            }}\n            onChange={(e) => {\n              handleUpdateProductQty(shoppingDetail.id, e.target.value);\n            }}\n            onBlur={() => {\n              handleUpdateShoppingListItem(itemId);\n            }}\n          />\n          <Typography\n            sx={{\n              color: '#212121',\n              fontSize: '14px',\n            }}\n          >\n            {b3Lang('shoppingList.shoppingDetailCard.total', {\n              total: showPrice(currencyFormat(total), shoppingDetail),\n            })}\n          </Typography>\n          <Box\n            sx={{\n              marginTop: '11px',\n              textAlign: 'end',\n            }}\n            id=\"shoppingList-actionList-mobile\"\n          >\n            {b2bAndBcShoppingListActionsPermissions && (\n              <StickyNote2\n                sx={{\n                  marginRight: '0.5rem',\n                  cursor: 'pointer',\n                  color: 'rgba(0, 0, 0, 0.54)',\n                }}\n                onClick={() => {\n                  setAddNoteOpen(true);\n                  setAddNoteItemId(Number(itemId));\n\n                  if (productNote) {\n                    setNotes(productNote);\n                  }\n                }}\n              />\n            )}\n\n            {canChangeOption && (\n              <Edit\n                sx={{\n                  marginRight: canChangeOption ? '0.5rem' : '',\n                  marginLeft: canChangeOption ? '0.3rem' : '',\n                  cursor: 'pointer',\n                  color: 'rgba(0, 0, 0, 0.54)',\n                }}\n                onClick={() => {\n                  onEdit(\n                    {\n                      ...productsSearch,\n                      selectOptions: optionList,\n                      quantity,\n                    },\n                    variantId,\n                    itemId,\n                  );\n                }}\n              />\n            )}\n            {b2bAndBcShoppingListActionsPermissions && !isReadForApprove && (\n              <Delete\n                sx={{\n                  marginLeft: '0.3rem',\n                  cursor: 'pointer',\n                  color: 'rgba(0, 0, 0, 0.54)',\n                }}\n                onClick={() => {\n                  setDeleteOpen(true);\n                  onDelete(Number(itemId));\n                }}\n              />\n            )}\n          </Box>\n        </Box>\n      </CardContent>\n    </Box>\n  );\n}\n\nexport default ShoppingDetailCard;\n","import {\n  Dispatch,\n  forwardRef,\n  Ref,\n  SetStateAction,\n  useEffect,\n  useImperativeHandle,\n  useRef,\n  useState,\n} from 'react';\nimport { useB3Lang } from '@b3/lang';\nimport { Delete, Edit, StickyNote2 } from '@mui/icons-material';\nimport { Box, Grid, styled, TextField, Typography } from '@mui/material';\nimport cloneDeep from 'lodash-es/cloneDeep';\n\nimport { B3PaginationTable, GetRequestList } from '@/components/table/B3PaginationTable';\nimport { TableColumnItem } from '@/components/table/B3Table';\nimport { PRODUCT_DEFAULT_IMAGE } from '@/constants';\nimport { useMobile, useSort } from '@/hooks';\nimport { updateB2BShoppingListsItem, updateBcShoppingListsItem } from '@/shared/service/b2b';\nimport { rolePermissionSelector, useAppSelector } from '@/store';\nimport { currencyFormat, snackbar } from '@/utils';\nimport b2bGetVariantImageByVariantInfo from '@/utils/b2bGetVariantImageByVariantInfo';\nimport { getBCPrice, getDisplayPrice, getValidOptionsList } from '@/utils/b3Product/b3Product';\nimport { getProductOptionsFields } from '@/utils/b3Product/shared/config';\n\nimport B3FilterSearch from '../../../components/filter/B3FilterSearch';\n\nimport ChooseOptionsDialog from './ChooseOptionsDialog';\nimport ShoppingDetailAddNotes from './ShoppingDetailAddNotes';\nimport ShoppingDetailCard from './ShoppingDetailCard';\n\ninterface ListItem {\n  [key: string]: string;\n}\n\ninterface ProductInfoProps {\n  basePrice: number | string;\n  baseSku: string;\n  createdAt: number;\n  discount: number | string;\n  enteredInclusive: boolean;\n  id: number | string;\n  itemId: number;\n  optionList: string;\n  primaryImage: string;\n  productId: number;\n  productName: string;\n  productUrl: string;\n  quantity: number | string;\n  tax: number | string;\n  updatedAt: number;\n  variantId: number;\n  variantSku: string;\n  productsSearch: CustomFieldItems;\n  productNote: string;\n  disableCurrentCheckbox?: boolean;\n}\n\ninterface ListItemProps {\n  node: ProductInfoProps;\n}\n\ninterface ShoppingDetailTableProps {\n  shoppingListInfo: any;\n  isRequestLoading: boolean;\n  setIsRequestLoading: Dispatch<SetStateAction<boolean>>;\n  shoppingListId: number | string;\n  getShoppingListDetails: GetRequestList<SearchProps, CustomFieldItems>;\n  setCheckedArr: (values: CustomFieldItems) => void;\n  isReadForApprove: boolean;\n  isJuniorApprove: boolean;\n  allowJuniorPlaceOrder: boolean;\n  setDeleteItemId: (itemId: number | string) => void;\n  setDeleteOpen: (open: boolean) => void;\n  isB2BUser: boolean;\n  productQuoteEnabled: boolean;\n  isCanEditShoppingList: boolean;\n  role: number | string;\n}\n\ninterface SearchProps {\n  search?: string;\n  first?: number;\n  offset?: number;\n  orderBy: string;\n}\n\ninterface PaginationTableRefProps extends HTMLInputElement {\n  getList: () => void;\n  setList: (items?: ListItemProps[]) => void;\n  getSelectedValue: () => void;\n  refresh: () => void;\n}\n\nconst StyledShoppingListTableContainer = styled('div')(() => ({\n  backgroundColor: '#FFFFFF',\n  padding: '1rem',\n  borderRadius: '4px',\n  boxShadow:\n    '0px 2px 1px -1px rgba(0, 0, 0, 0.2), 0px 1px 1px rgba(0, 0, 0, 0.14), 0px 1px 3px rgba(0, 0, 0, 0.12)',\n\n  '& tbody': {\n    '& tr': {\n      '& td': {\n        verticalAlign: 'top',\n      },\n      '& td: first-of-type': {\n        paddingTop: '25px',\n      },\n    },\n    '& tr: hover': {\n      '& #shoppingList-actionList': {\n        opacity: 1,\n      },\n    },\n  },\n}));\n\nconst StyledImage = styled('img')(() => ({\n  maxWidth: '60px',\n  height: 'auto',\n  marginRight: '0.5rem',\n}));\n\nconst StyledTextField = styled(TextField)(() => ({\n  '& input': {\n    paddingTop: '12px',\n    paddingRight: '6px',\n  },\n}));\n\nconst defaultSortKey = 'updatedAt';\n\nconst sortKeys = {\n  Product: 'productName',\n  updatedAt: 'updatedAt',\n  Qty: 'quantity',\n};\n\nfunction ShoppingDetailTable(props: ShoppingDetailTableProps, ref: Ref<unknown>) {\n  const [isMobile] = useMobile();\n  const b3Lang = useB3Lang();\n\n  const {\n    shoppingListInfo,\n    isRequestLoading,\n    setIsRequestLoading,\n    shoppingListId,\n    getShoppingListDetails,\n    setCheckedArr,\n    isReadForApprove,\n    setDeleteItemId,\n    setDeleteOpen,\n    isJuniorApprove,\n    isB2BUser,\n    allowJuniorPlaceOrder,\n    productQuoteEnabled,\n    isCanEditShoppingList,\n    role,\n  } = props;\n\n  const showInclusiveTaxPrice = useAppSelector(({ global }) => global.showInclusiveTaxPrice);\n\n  const { shoppingListCreateActionsPermission, submitShoppingListPermission } =\n    useAppSelector(rolePermissionSelector);\n\n  const canShoppingListActions = isB2BUser\n    ? shoppingListCreateActionsPermission && isCanEditShoppingList\n    : true;\n  const b2bAndBcShoppingListActionsPermissions = isB2BUser ? canShoppingListActions : true;\n  const b2bSubmitShoppingListPermission = isB2BUser\n    ? submitShoppingListPermission\n    : Number(role) === 2;\n\n  const paginationTableRef = useRef<PaginationTableRefProps | null>(null);\n\n  const [chooseOptionsOpen, setSelectedOptionsOpen] = useState(false);\n  const [optionsProduct, setOptionsProduct] = useState<any>(null);\n  const [editProductItemId, setEditProductItemId] = useState<number | string | null>(null);\n  const [search, setSearch] = useState<SearchProps>({\n    orderBy: `-${sortKeys[defaultSortKey]}`,\n  });\n  const [qtyNotChangeFlag, setQtyNotChangeFlag] = useState<boolean>(true);\n  const [originProducts, setOriginProducts] = useState<ListItemProps[]>([]);\n  const [shoppingListTotalPrice, setShoppingListTotalPrice] = useState<number>(0.0);\n\n  const [addNoteOpen, setAddNoteOpen] = useState<boolean>(false);\n  const [addNoteItemId, setAddNoteItemId] = useState<number | string>('');\n  const [notes, setNotes] = useState<string>('');\n  const [disabledSelectAll, setDisabledSelectAll] = useState<boolean>(false);\n\n  const [priceHidden, setPriceHidden] = useState<boolean>(false);\n\n  const [handleSetOrderBy, order, orderBy] = useSort(sortKeys, defaultSortKey, search, setSearch);\n\n  const handleUpdateProductQty = (id: number | string, value: number | string) => {\n    if (Number(value) < 0) return;\n    const currentItem = originProducts.find((item: ListItemProps) => {\n      const { node } = item;\n\n      return node.id === id;\n    });\n\n    const currentQty = currentItem?.node?.quantity || '';\n    setQtyNotChangeFlag(Number(currentQty) === Number(value));\n\n    const listItems: ListItemProps[] = paginationTableRef.current?.getList() || [];\n    const newListItems = listItems?.map((item: ListItemProps) => {\n      const { node } = item;\n      if (node?.id === id) {\n        node.quantity = `${Number(value)}`;\n        node.disableCurrentCheckbox = Number(value) === 0;\n      }\n\n      return item;\n    });\n\n    const nonNumberProducts = newListItems.filter(\n      (item: ListItemProps) => Number(item.node.quantity) === 0,\n    );\n    setDisabledSelectAll(nonNumberProducts.length === newListItems.length);\n    paginationTableRef.current?.setList([...newListItems]);\n  };\n\n  const initSearch = () => {\n    paginationTableRef.current?.refresh();\n  };\n\n  useImperativeHandle(ref, () => ({\n    initSearch,\n    getList: () => paginationTableRef.current?.getList(),\n    setList: () => paginationTableRef.current?.setList(),\n    getSelectedValue: () => paginationTableRef.current?.getSelectedValue(),\n  }));\n\n  const handleSearchProduct = async (q: string) => {\n    setSearch({\n      ...search,\n      search: q,\n    });\n  };\n\n  const handleChooseOptionsDialogCancel = () => {\n    setEditProductItemId('');\n    setSelectedOptionsOpen(false);\n  };\n\n  const handleOpenProductEdit = (product: any, _: number | string, itemId: number | string) => {\n    setEditProductItemId(itemId);\n    setOptionsProduct(product);\n    setSelectedOptionsOpen(true);\n  };\n\n  const handleChooseOptionsDialogConfirm = async (products: CustomFieldItems[]) => {\n    setIsRequestLoading(true);\n    const updateShoppingListItem = isB2BUser\n      ? updateB2BShoppingListsItem\n      : updateBcShoppingListsItem;\n    try {\n      const newOptionLists = getValidOptionsList(products[0].newSelectOptionList, products[0]);\n      const data = {\n        itemId: editProductItemId,\n        shoppingListId,\n        itemData: {\n          variantId: products[0].variantId,\n          quantity: products[0].quantity,\n          optionList: newOptionLists || [],\n        },\n      };\n\n      await updateShoppingListItem(data);\n      setSelectedOptionsOpen(false);\n      setEditProductItemId('');\n      snackbar.success(b3Lang('shoppingList.table.productUpdated'));\n      initSearch();\n    } finally {\n      setIsRequestLoading(false);\n    }\n  };\n\n  const handleUpdateShoppingListItem = async (itemId: number | string) => {\n    const listItems: ListItemProps[] = paginationTableRef.current?.getList() || [];\n    const currentItem = listItems.find((item: ListItemProps) => {\n      const { node } = item;\n\n      return node.itemId === itemId;\n    });\n    let currentNode;\n\n    if (currentItem) {\n      currentNode = currentItem.node;\n    }\n\n    const options = JSON.parse(currentNode?.optionList || '[]');\n\n    const optionsList = options.map(\n      (option: { option_id: number | string; option_value: number | string }) => ({\n        optionId: option.option_id,\n        optionValue: option.option_value,\n      }),\n    );\n\n    const itemData: CustomFieldItems = {\n      variantId: currentNode?.variantId,\n      quantity: currentNode?.quantity ? Number(currentNode.quantity) : 0,\n      optionList: optionsList || [],\n      productNote: notes,\n    };\n\n    const data = {\n      itemId,\n      shoppingListId,\n      itemData,\n    };\n\n    const updateShoppingListItem = isB2BUser\n      ? updateB2BShoppingListsItem\n      : updateBcShoppingListsItem;\n\n    await updateShoppingListItem(data);\n  };\n\n  const handleUpdateShoppingListItemQty = async (itemId: number | string) => {\n    if (qtyNotChangeFlag) return;\n    setIsRequestLoading(true);\n    try {\n      await handleUpdateShoppingListItem(itemId);\n      snackbar.success(b3Lang('shoppingList.table.quantityUpdated'));\n      setQtyNotChangeFlag(true);\n      initSearch();\n    } finally {\n      setIsRequestLoading(false);\n    }\n  };\n\n  const getSelectCheckbox = (selectCheckbox: Array<string | number>) => {\n    if (selectCheckbox.length > 0) {\n      const productList = paginationTableRef.current?.getList() || [];\n      const checkedItems: CustomFieldItems[] = [];\n      selectCheckbox.forEach((item: number | string) => {\n        const newItems = productList.find((product: ListItemProps) => {\n          const { node } = product;\n\n          return node.id === item;\n        });\n\n        if (newItems) checkedItems.push(newItems);\n      });\n\n      setCheckedArr([...checkedItems]);\n    } else {\n      setCheckedArr([]);\n    }\n  };\n\n  const handleCancelAddNotesClick = () => {\n    setAddNoteOpen(false);\n    setAddNoteItemId('');\n    setNotes('');\n  };\n\n  const handleAddItemNotesClick = async () => {\n    setIsRequestLoading(true);\n    try {\n      handleCancelAddNotesClick();\n      await handleUpdateShoppingListItem(addNoteItemId);\n      snackbar.success(b3Lang('shoppingList.table.productNotesUpdated'));\n      initSearch();\n    } finally {\n      setIsRequestLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (shoppingListInfo) {\n      const {\n        products: { edges },\n        grandTotal,\n        totalTax,\n      } = shoppingListInfo;\n\n      const NewShoppingListTotalPrice = showInclusiveTaxPrice\n        ? Number(grandTotal)\n        : Number(grandTotal) - Number(totalTax) || 0.0;\n\n      const isPriceHidden = edges.some((item: CustomFieldItems) => {\n        if (item?.node?.productsSearch) {\n          return item.node.productsSearch?.isPriceHidden || false;\n        }\n\n        return false;\n      });\n\n      setPriceHidden(isPriceHidden);\n      setOriginProducts(cloneDeep(edges));\n      setShoppingListTotalPrice(NewShoppingListTotalPrice);\n    }\n  }, [shoppingListInfo, showInclusiveTaxPrice]);\n\n  useEffect(() => {\n    if (shoppingListInfo) {\n      const {\n        products: { edges },\n      } = shoppingListInfo;\n      const nonNumberProducts = edges.filter((item: ListItemProps) => item.node.quantity === 0);\n      setDisabledSelectAll(nonNumberProducts.length === edges.length);\n    }\n  }, [shoppingListInfo]);\n\n  const showPrice = (price: string, row: CustomFieldItems): string | number => {\n    const {\n      productsSearch: { isPriceHidden },\n    } = row;\n    if (isPriceHidden) return '';\n    return getDisplayPrice({\n      price,\n      productInfo: row,\n      showText: isPriceHidden ? '' : price,\n      forcedSkip: true,\n    });\n  };\n\n  const columnItems: TableColumnItem<ListItem>[] = [\n    {\n      key: 'Product',\n      title: b3Lang('shoppingList.table.product'),\n      render: (row: CustomFieldItems) => {\n        const product: any = {\n          ...row.productsSearch,\n          selectOptions: row.optionList,\n        };\n        const productFields = getProductOptionsFields(product, {});\n\n        const optionList = JSON.parse(row.optionList);\n        const optionsValue: CustomFieldItems[] = productFields.filter((item) => item.valueText);\n\n        const currentVariants = product.variants || [];\n        const currentImage =\n          b2bGetVariantImageByVariantInfo(currentVariants, {\n            variantId: row.variantId,\n            variantSku: row.variantSku,\n          }) || row.primaryImage;\n\n        return (\n          <Box\n            sx={{\n              display: 'flex',\n              alignItems: 'flex-start',\n            }}\n          >\n            <StyledImage\n              src={currentImage || PRODUCT_DEFAULT_IMAGE}\n              alt=\"Product-img\"\n              loading=\"lazy\"\n            />\n            <Box>\n              <Typography\n                variant=\"body1\"\n                color=\"#212121\"\n                onClick={() => {\n                  const {\n                    location: { origin },\n                  } = window;\n\n                  window.location.href = `${origin}${row.productUrl}`;\n                }}\n                sx={{\n                  cursor: 'pointer',\n                }}\n              >\n                {row.productName}\n              </Typography>\n              <Typography variant=\"body1\" color=\"#616161\">\n                {row.variantSku}\n              </Typography>\n              {optionList.length > 0 && optionsValue.length > 0 && (\n                <Box>\n                  {optionsValue.map((option: any) => (\n                    <Typography\n                      sx={{\n                        fontSize: '0.75rem',\n                        lineHeight: '1.5',\n                        color: '#455A64',\n                      }}\n                      key={option.valueLabel}\n                    >\n                      {`${option.valueLabel}: ${option.valueText}`}\n                    </Typography>\n                  ))}\n                </Box>\n              )}\n\n              {row?.productNote && row?.productNote.trim().length > 0 && (\n                <Typography\n                  sx={{\n                    fontSize: '0.75rem',\n                    color: '#ED6C02',\n                    marginTop: '0.3rem',\n                  }}\n                >\n                  {row.productNote}\n                </Typography>\n              )}\n            </Box>\n          </Box>\n        );\n      },\n      width: '45%',\n      isSortable: true,\n    },\n    {\n      key: 'Price',\n      title: b3Lang('shoppingList.table.price'),\n      render: (row: CustomFieldItems) => {\n        const { basePrice, taxPrice = 0 } = row;\n        const inTaxPrice = getBCPrice(Number(basePrice), Number(taxPrice));\n\n        return (\n          <Typography\n            sx={{\n              padding: '12px 0',\n            }}\n          >\n            {showPrice(currencyFormat(inTaxPrice), row)}\n          </Typography>\n        );\n      },\n      width: '15%',\n      style: {\n        textAlign: 'right',\n      },\n    },\n    {\n      key: 'Qty',\n      title: b3Lang('shoppingList.table.quantity'),\n      render: (row) => (\n        <StyledTextField\n          size=\"small\"\n          type=\"number\"\n          variant=\"filled\"\n          sx={{\n            width: '72px',\n          }}\n          disabled={\n            b2bAndBcShoppingListActionsPermissions ? isReadForApprove || isJuniorApprove : true\n          }\n          value={row.quantity}\n          inputProps={{\n            inputMode: 'numeric',\n            pattern: '[0-9]*',\n          }}\n          onChange={(e) => {\n            handleUpdateProductQty(row.id, e.target.value);\n          }}\n          onBlur={() => {\n            handleUpdateShoppingListItemQty(row.itemId);\n          }}\n        />\n      ),\n      width: '15%',\n      style: {\n        textAlign: 'right',\n      },\n      isSortable: true,\n    },\n    {\n      key: 'Total',\n      title: b3Lang('shoppingList.table.total'),\n      render: (row: CustomFieldItems) => {\n        const {\n          basePrice,\n          quantity,\n          itemId,\n          productsSearch: { options },\n          taxPrice = 0,\n        } = row;\n\n        const inTaxPrice = getBCPrice(Number(basePrice), Number(taxPrice));\n\n        const totalPrice = inTaxPrice * Number(quantity);\n\n        const optionList = options || JSON.parse(row.optionList);\n\n        const canChangeOption =\n          optionList.length > 0 &&\n          !isReadForApprove &&\n          !isJuniorApprove &&\n          b2bAndBcShoppingListActionsPermissions;\n\n        return (\n          <Box>\n            <Typography\n              sx={{\n                padding: '12px 0',\n              }}\n            >\n              {showPrice(currencyFormat(totalPrice), row)}\n            </Typography>\n            <Box\n              sx={{\n                marginTop: '1rem',\n                opacity: 0,\n                textAlign: isMobile ? 'end' : 'start',\n                display: 'flex',\n                justifyContent: 'flex-end',\n              }}\n              id=\"shoppingList-actionList\"\n            >\n              {canShoppingListActions && (\n                <>\n                  <Grid\n                    item\n                    sx={{\n                      marginRight: '0.5rem',\n                      minWidth: '32px',\n                    }}\n                  >\n                    <StickyNote2\n                      sx={{\n                        cursor: 'pointer',\n                        color: 'rgba(0, 0, 0, 0.54)',\n                      }}\n                      onClick={() => {\n                        setAddNoteOpen(true);\n                        setAddNoteItemId(Number(itemId));\n\n                        if (row.productNote) {\n                          setNotes(row.productNote);\n                        }\n                      }}\n                    />\n                  </Grid>\n\n                  <Grid\n                    item\n                    sx={{\n                      marginRight: canChangeOption ? '0.5rem' : '',\n                      marginLeft: canChangeOption ? '0.3rem' : '',\n                    }}\n                  >\n                    {canChangeOption && (\n                      <Edit\n                        sx={{\n                          cursor: 'pointer',\n                          color: 'rgba(0, 0, 0, 0.54)',\n                        }}\n                        onClick={() => {\n                          const { productsSearch, variantId, itemId, optionList, quantity } = row;\n\n                          handleOpenProductEdit(\n                            {\n                              ...productsSearch,\n                              selectOptions: optionList,\n                              quantity,\n                            },\n                            variantId,\n                            itemId,\n                          );\n                        }}\n                      />\n                    )}\n                  </Grid>\n                  <Grid\n                    item\n                    sx={{\n                      marginLeft: '0.3rem',\n                    }}\n                  >\n                    {b2bAndBcShoppingListActionsPermissions &&\n                      !isReadForApprove &&\n                      !isJuniorApprove && (\n                        <Delete\n                          sx={{\n                            cursor: 'pointer',\n                            color: 'rgba(0, 0, 0, 0.54)',\n                          }}\n                          onClick={() => {\n                            setDeleteOpen(true);\n                            setDeleteItemId(Number(itemId));\n                          }}\n                        />\n                      )}\n                  </Grid>\n                </>\n              )}\n            </Box>\n          </Box>\n        );\n      },\n      width: '15%',\n      style: {\n        textAlign: 'right',\n      },\n    },\n  ];\n\n  return (\n    <StyledShoppingListTableContainer>\n      <Box\n        sx={{\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'space-between',\n          margin: '0 0 1rem 0',\n        }}\n      >\n        <Typography\n          sx={{\n            fontSize: '24px',\n          }}\n        >\n          {b3Lang('shoppingList.table.totalProductCount', {\n            quantity: shoppingListInfo?.products?.totalCount || 0,\n          })}\n        </Typography>\n        <Typography\n          sx={{\n            fontSize: '24px',\n          }}\n        >\n          {priceHidden ? '' : currencyFormat(shoppingListTotalPrice || 0.0)}\n        </Typography>\n      </Box>\n      <Box\n        sx={{\n          marginBottom: '5px',\n        }}\n      >\n        <B3FilterSearch\n          searchBGColor=\"rgba(0, 0, 0, 0.06)\"\n          handleChange={(e) => {\n            handleSearchProduct(e);\n          }}\n        />\n      </Box>\n\n      <B3PaginationTable\n        ref={paginationTableRef}\n        columnItems={columnItems}\n        rowsPerPageOptions={[10, 20, 50]}\n        getRequestList={getShoppingListDetails}\n        searchParams={search}\n        isCustomRender={false}\n        showCheckbox\n        showSelectAllCheckbox\n        applyAllDisableCheckbox={false}\n        disableCheckbox={\n          disabledSelectAll ||\n          (b2bSubmitShoppingListPermission\n            ? !(allowJuniorPlaceOrder || productQuoteEnabled)\n            : (isReadForApprove || isJuniorApprove) && b2bAndBcShoppingListActionsPermissions)\n        }\n        hover\n        labelRowsPerPage={b3Lang('shoppingList.table.itemsPerPage')}\n        showBorder={false}\n        requestLoading={setIsRequestLoading}\n        getSelectCheckbox={getSelectCheckbox}\n        itemIsMobileSpacing={0}\n        noDataText={b3Lang('shoppingList.table.noProductsFound')}\n        sortDirection={order}\n        orderBy={orderBy}\n        sortByFn={handleSetOrderBy}\n        pageType=\"shoppingListDetailsTable\"\n        renderItem={(row, index, checkBox) => (\n          <ShoppingDetailCard\n            len={shoppingListInfo?.products?.edges.length || 0}\n            item={row}\n            itemIndex={index}\n            showPrice={showPrice}\n            onEdit={handleOpenProductEdit}\n            onDelete={setDeleteItemId}\n            checkBox={checkBox}\n            setDeleteOpen={setDeleteOpen}\n            setAddNoteOpen={setAddNoteOpen}\n            setAddNoteItemId={setAddNoteItemId}\n            setNotes={setNotes}\n            handleUpdateProductQty={handleUpdateProductQty}\n            handleUpdateShoppingListItem={handleUpdateShoppingListItemQty}\n            isReadForApprove={isReadForApprove || isJuniorApprove}\n            b2bAndBcShoppingListActionsPermissions={b2bAndBcShoppingListActionsPermissions}\n          />\n        )}\n      />\n\n      <ChooseOptionsDialog\n        isOpen={chooseOptionsOpen}\n        isLoading={isRequestLoading}\n        setIsLoading={setIsRequestLoading}\n        product={optionsProduct}\n        type=\"shoppingList\"\n        onCancel={handleChooseOptionsDialogCancel}\n        onConfirm={handleChooseOptionsDialogConfirm}\n        isEdit\n        isB2BUser={isB2BUser}\n      />\n\n      <ShoppingDetailAddNotes\n        open={addNoteOpen}\n        notes={notes}\n        setNotes={setNotes}\n        handleCancelAddNotesClick={handleCancelAddNotesClick}\n        handleAddItemNotesClick={handleAddItemNotesClick}\n      />\n    </StyledShoppingListTableContainer>\n  );\n}\n\nexport default forwardRef(ShoppingDetailTable);\n"],"names":["B3QuantityTextField","props","isMobile","useMobile","disabled","label","value","maxQuantity","minQuantity","isStock","stock","hiddenLabel","onChange","sx","width","marginLeft","marginRight","validMessage","setValidMessage","useState","validateQuantity","useCallback","quantity","parseInt","useEffect","jsx","StyledNumberNoTopTextField","size","type","variant","error","helperText","inputProps","inputMode","pattern","e","target","onBlur","handleBlur","AddToShoppingList","state","id","useContext","ShoppingListDetailsContext","companyStatus","useAppSelector","company","companyInfo","status","updateList","isB2BUser","pageType","b3Lang","useB3Lang","isOpenBulkLoadCSV","setIsOpenBulkLoadCSV","isLoading","setIsLoading","blockPendingAccountViewPrice","useBlockPendingAccountViewPrice","addItemsToShoppingList","addProductToShoppingList","addProductToBcShoppingList","quickAddToList","async","items","products","map","product","optionList","getValidOptionsList","newSelectOptionList","productId","variantId","res","shoppingListId","snackbar","success","isClose","Card","marginBottom","children","CardContent","jsxs","Box","Typography","SearchProduct","addToList","dispatchEvent","Error","message","length","Divider","QuickAdd","margin","CustomButton","onClick","info","UploadFileIcon","B3Upload","isOpen","setIsOpen","handleAddToList","validProduct","productsData","notPurchaseSku","productItems","notAddAble","forEach","item","currentProduct","qty","option","purchasingDisabled","variantSku","modifiers","defaultModifiers","getAllModifierDefaultValue","push","filter","modifier","isVerified","optionsList","optionId","option_id","optionValue","toString","defaultValue","Object","keys","key","Number","getValidProducts","join","withModifiers","setOpenPage","ShoppingListDetailsProvider","ShoppingListDetails","Flex","styled","isHeader","display","wordBreak","padding","gap","flexWrap","borderBottom","paddingBottom","alignItems","borderTop","marginTop","FlexItem","flexBasis","flexDirection","textAlignLocation","justifyContent","flexGrow","flexShrink","ProductHead","fontSize","lineHeight","color","ProductImage","borderRadius","defaultItemStyle","default","delete","mobileItemStyle","ReAddToCart","shoppingListInfo","successProducts","allowJuniorPlaceOrder","setValidateFailureProducts","setValidateSuccessProducts","textAlign","submitShoppingListPermission","rolePermissionSelector","setOpen","loading","setLoading","decimal_places","decimalPlaces","activeCurrencyInfoSelector","itemStyle","handleCancelClicked","B3Dialog","handleLeftClick","handRightClick","every","isValid","lineItems","addLineItems","callCart","errors","window","location","href","CHECKOUT_URL","successTip","link","CART_URL","linkText","isOutLink","isCustomEvent","b3TriggerCartNumber","title","rightSizeBtn","maxWidth","Grid","m","Alert","severity","B3Spin","isSpinning","isFlex","newProduct","requestArr","node","quantityNumber","setModifierQtyPrice","Promise","all","index","handleClearNoStock","primaryImage","productName","productsSearch","basePrice","price","total","toFixed","selectOptions","productFields","getProductOptionsFields","newOptionList","JSON","parse","optionsValue","valueText","src","PRODUCT_DEFAULT_IMAGE","valueLabel","currencyFormat","calculateProduct","handleUpdateProductQty","Delete","cursor","splice","deleteProduct","ShoppingDetailDeleteItems","open","handleCancelClick","handleDeleteProductClick","leftSizeBtn","rightStyleBtn","height","ShoppingDetailFooter","productQuoteEnabled","GlobalContext","isAgenting","b2bFeatures","masqueradeCompany","companyId","customerGroupId","customer","shoppingListCreateActionsPermission","purchasabilityPermission","ref","useRef","cartEntityId","Cookies","get","containerStyle","checkedArr","selectedSubTotal","setDeleteOpen","customColor","isCanEditShoppingList","role","b2bShoppingListActionsPermission","isCanAddToCart","b2bSubmitShoppingListPermission","handleClose","handleAddProductsToCart","skus","cantPurchase","availability","slice","getVariantInfoBySku","getB2BVariantInfoBySkus","getBcVariantInfoBySkus","getInventoryInfos","validateFailureArr","validateSuccessArr","inventoryInfos","inventoryInfo","find","isPassVerify","verifyInventory","deleteCartObject","deleteCartData","cartInfo","getCart","deleteCart","updateCart","buttons","adSelectedToCart","name","handleClick","isDisabled","proceedToCheckout","addSelectedToQuote","productsWithSku","checkedItem","noSkuProducts","productIds","includes","getProducts","searchB2BProducts","searchBcProducts","newProductInfo","conversionProductsList","isSuccess","errorMessage","isFondVariant","newProducts","tax","options","option_value","currentProductSearch","variantItem","variants","sku","quoteListitem","uuid","image_url","stringify","validProductQty","calculateProductListPrice","addQuoteDraftProducts","b2bLogger","buttonList","position","bottom","left","backgroundColor","zIndex","container","spacing","paddingLeft","pr","fontWeight","subtotal","border","minWidth","Fragment","handleOpenBtnList","endIcon","ArrowDropDown","Menu","anchorEl","current","onClose","MenuListProps","button","MenuItem","StyledCreateName","ShoppingDetailHeader","customerInfo","handleUpdateShoppingList","goToShoppingLists","openAPPParams","portalStyle","CustomStyleContext","navigate","useNavigate","selectCompanyHierarchyId","companyHierarchyInfo","submitShoppingList","approveShoppingListPermission","approveShoppingList","shoppingListPermissions","useMemo","submitShoppingListPermissionCode","approveShoppingListPermissionCode","b2bPermissionsMap","verifySubmitShoppingListSubsidiariesPermission","code","userId","selectId","verifyLevelPermission","isDisabledBtn","edges","gridOptions","xs","shoppingListBtn","openUrl","ArrowBackIosNew","mb","getContrastColor","approvedFlag","ShoppingStatus","description","firstName","lastName","ShoppingDetailAddNotes","notes","setNotes","handleCancelAddNotesClick","handleAddItemNotesClick","isShowBordered","TextField","multiline","rows","fullWidth","placeholder","StyledImage","ShoppingDetailCard","shoppingDetail","onEdit","onDelete","checkBox","handleUpdateShoppingListItem","isReadForApprove","len","itemIndex","setAddNoteOpen","setAddNoteItemId","showPrice","b2bAndBcShoppingListActionsPermissions","itemId","productUrl","taxPrice","productNote","getBCPrice","canChangeOption","currentVariants","currentImage","b2bGetVariantImageByVariantInfo","pl","alt","flex","origin","trim","StickyNote2","Edit","StyledShoppingListTableContainer","boxShadow","verticalAlign","paddingTop","opacity","StyledTextField","paddingRight","defaultSortKey","sortKeys","Product","updatedAt","Qty","forwardRef","isRequestLoading","setIsRequestLoading","getShoppingListDetails","setCheckedArr","setDeleteItemId","isJuniorApprove","showInclusiveTaxPrice","global","canShoppingListActions","paginationTableRef","chooseOptionsOpen","setSelectedOptionsOpen","optionsProduct","setOptionsProduct","editProductItemId","setEditProductItemId","search","setSearch","orderBy","qtyNotChangeFlag","setQtyNotChangeFlag","originProducts","setOriginProducts","shoppingListTotalPrice","setShoppingListTotalPrice","addNoteOpen","addNoteItemId","disabledSelectAll","setDisabledSelectAll","priceHidden","setPriceHidden","handleSetOrderBy","order","useSort","currentItem","listItems","getList","newListItems","disableCurrentCheckbox","nonNumberProducts","setList","initSearch","refresh","useImperativeHandle","getSelectedValue","handleOpenProductEdit","_","currentNode","itemData","data","updateShoppingListItem","updateB2BShoppingListsItem","updateBcShoppingListsItem","handleUpdateShoppingListItemQty","grandTotal","totalTax","NewShoppingListTotalPrice","isPriceHidden","some","cloneDeep","row","getDisplayPrice","productInfo","showText","forcedSkip","columnItems","render","isSortable","inTaxPrice","style","totalPrice","totalCount","B3FilterSearch","searchBGColor","handleChange","q","handleSearchProduct","B3PaginationTable","rowsPerPageOptions","getRequestList","searchParams","isCustomRender","showCheckbox","showSelectAllCheckbox","applyAllDisableCheckbox","disableCheckbox","hover","labelRowsPerPage","showBorder","requestLoading","getSelectCheckbox","selectCheckbox","productList","checkedItems","newItems","itemIsMobileSpacing","noDataText","sortDirection","sortByFn","renderItem","ChooseOptionsDialog","onCancel","handleChooseOptionsDialogCancel","onConfirm","newOptionLists","isEdit","calculateSubTotal","primaryColor","getShoppingList","deleteShoppingListItem","useParams","isB2BUserSelector","currency_code","currencyCode","useTheme","palette","primary","main","params","getB2BShoppingListDetails","getBcShoppingListDetails","deleteB2BShoppingListItem","deleteBcShoppingListItem","useData","dispatch","tableRef","setShoppingListInfo","setCustomerInfo","deleteOpen","deleteItemId","validateSuccessProducts","validateFailureProducts","setAllowJuniorPlaceOrder","setIsCanEditShoppingList","CustomerRole","JUNIOR_BUYER","payload","storeConfigSwitchStatus","isEnabled","getB2BJuniorPlaceOrder","getJuniorPlaceOrder","shoppingListActionsPermission","updateB2BShoppingList","updateBcShoppingList","channelId","overflow","ml","pt","spinningHeight","ShoppingDetailTable","shoppingListDetailInfo","listProducts","newProductsSearch","err","handleGetProductsById","newCheckedArr","checkedItemId","handleDeleteItems"],"mappings":"ulEAmBA,SAAwBA,EAAoBC,GACpC,MAACC,GAAYC,KAEbC,SACJA,GAAW,EAAAC,MACXA,GAAQH,EAAW,MAAQ,IAAAI,MAC3BA,EAAQ,GAAAC,YACRA,EAAc,EAAAC,YACdA,EAAc,EAAAC,QACdA,EAAU,IAAAC,MACVA,EAAQ,EAAAC,YACRA,GAAeT,EAAAU,SACfA,EAAWA,SAAOC,GAClBA,EAAK,CACHC,MAAOZ,EAAW,QAAU,OAC5B,4BAA6B,CAC3Ba,WAAY,IACZC,YAAa,OAGff,GAEGgB,EAAcC,GAAmBC,EAAAA,SAAS,IAE3CC,EAAmBC,EAAAA,aACtBf,IACC,MAAMgB,EAAWC,SAAS,GAAGjB,IAAS,KAAO,EAE7C,IAAIW,EAAe,GAcZA,MAZS,MAAZR,GAA6B,IAAVC,EACrBO,EAAe,eACM,MAAZR,GAAmBa,EAAWZ,EACvCO,EAAe,GAAGP,aACO,IAAhBF,GAAqBc,EAAWd,EACzCS,EAAe,UAAUT,IACA,IAAhBD,GAAqBe,EAAWf,IACzCU,EAAe,UAAUV,KAG3BW,EAAgBD,GAETA,CAAAA,GAET,CAACR,EAASF,EAAaC,EAAaE,IAkBpC,OALFc,EAAAA,WAAU,KACRJ,EAAiBd,EAAK,GACrB,CAACc,EAAkBd,IAGpBmB,EAAAA,IAACC,EAAA,CACCC,KAAK,QACLC,KAAK,SACLC,QAAQ,SACRzB,WACAO,cACAN,QACAC,QACAwB,QAASb,EACTc,WAAYd,EACZe,WAAY,CACVC,UAAW,UACXC,QAAS,UAEXtB,SAAWuB,IA7BO7B,QA8BH6B,EAAEC,OAAO9B,MA7BjBA,EAAAA,IAASW,EA6Ba,EAE7BoB,OAAQA,KA5BOC,MACjB,MAAMhB,EAAWC,SAAS,GAAGjB,IAAS,KAAO,EAE7CM,EAASU,GAAWF,EAAiBE,GAAS,EA0B/BgB,EAAA,EAEbzB,MAGN,CC9EA,SAAwB0B,GAAkBtC,GAClC,MACJuC,OAAOC,GAAEA,IACPC,EAAAA,WAAWC,IAETC,EAAgBC,GAAe,EAAGC,aAAcA,EAAQC,YAAYC,UACpEC,WAAEA,EAAYC,UAAAA,EAAWtB,KAAMuB,EAAW,IAAOlD,EACjDmD,EAASC,KAERC,EAAmBC,GAAwBpC,EAAAA,UAAS,IACpDqC,EAAWC,GAAgBtC,EAAAA,UAAS,IAEpCuC,GAAgCC,KAEjCC,EAAyBV,EAAYW,EAA2BC,EAoChEC,EAAiBC,UACrB,MAAMC,EAAQC,EAASC,KAAKC,IAKnB,CACLC,WALqBC,EACrBF,EAAQG,qBAAuBH,EAAQC,WACvCD,GAASF,UAAYE,IAGS,GAC9BI,UAAWjD,SAAS6C,EAAQI,UAAW,KAAO,EAC9ClD,SAAU8C,EAAQ9C,SAClBmD,UAAWlD,SAAS6C,EAAQK,UAAW,KAAO,MAI5CC,QAAYd,EAAuB,CACvCe,eAAgBlC,EAChBwB,UAOK,OAJEW,EAAAC,QAAQzB,EAAO,gDAAiD,CACvE0B,SAAS,IAGJJ,CAAA,EAwHP,OAAAjD,EAAAA,IAACsD,EAAA,CACClE,GAAI,CACFmE,aAAc,QAGhBC,SAAAxD,EAAAA,IAACyD,EACC,CAAAD,SAAAE,OAACC,EACC,CAAAH,SAAA,CAAAxD,MAAC4D,EAAW,CAAAxD,QAAQ,KAAMoD,SAAA7B,EAAO,8CACjC3B,EAAAA,IAAC6D,GAAA,CACCrC,aACAsC,UA3LQvB,UACZ,IACF,IAAKwB,GAAc,0BAA2BtB,GAC5C,MAAU,IAAAuB,MAGZ,MAAMxB,EAAQC,EAASC,KAAKC,IAEnB,CACLC,WAFqBC,EAAoBF,EAAQG,oBAAqBH,GAGtEI,UAAWJ,EAAQ3B,GACnBnB,SAAU8C,EAAQ9C,SAClBmD,UAAWL,EAAQK,cAIjBC,QAAYd,EAAuB,CACvCe,eAAgBlC,EAChBwB,UAOK,OAJEW,EAAAC,QAAQzB,EAAO,gDAAiD,CACvE0B,SAAS,IAGJJ,QACAvC,GACHA,EAAEuD,QAAQC,OAAS,GACrBf,EAAS9C,MAAMK,EAAEuD,QAAS,CAAEZ,SAAS,GACvC,CAEK,OAAA,CAAA,EA6JC5B,YACAtB,KAAK,uBAGNgE,EAAQ,IAERnE,EAAAA,IAAAoE,GAAA,CAASjE,KAAK,eAAeqB,aAAwBc,yBAErD6B,EAAQ,IAETnE,EAAAA,IAAC2D,EAAA,CACCvE,GAAI,CACFiF,OAAQ,YAGVb,gBAACc,EAAa,CAAAlE,QAAQ,OAAOmE,QAASA,KApC1CtC,GAAkD,IAAlBd,EACzBgC,EAAAqB,KACP,kFAGF1C,GAAqB,EAgCb,EAAA0B,SAAA,CAAAxD,EAAAA,IAACyE,GAAA,CACCrF,GAAI,CACFG,YAAa,SAGhBoC,EAAO,qDAIZ3B,EAAAA,IAAC0E,EAAA,CACCC,OAAQ9C,EACR+C,UAAW9C,EACX+C,gBA3FiBtC,UACzBP,GAAa,GACT,IACI,MAAA8C,aAAEA,GAAiBC,GAEnBC,eAAEA,EAAgBC,aAAAA,EAAAC,WAAcA,GAtEhBzC,KACxB,MAAMuC,EAA2B,GAC3BC,EAAmC,GACnCC,EAAuB,GAuDtB,OArDEzC,EAAA0C,SAASC,IAChB,MAAQ3C,SAAU4C,EAAgBC,IAAAA,GAAQF,GACpCG,OAAEA,EAAQC,mBAAAA,EAAAC,WAAoBA,YAAYzC,EAAWD,UAAAA,EAAA2C,UAAWA,GACpEL,EAEIM,EAAmBC,EAA2BF,GAChD,GAAAF,GAAmC,iBAAb9D,EAExB,YADAsD,EAAea,KAAKJ,GAOlB,GAHsBE,EAAiBG,QACxCC,IAAgCA,EAASC,aAEtB9B,OAAS,EAG7B,YAFAgB,EAAWW,KAAKJ,GAKlB,MAAMQ,EAAcV,EAAO7C,KAAK0C,IAA4B,CAC1Dc,SAAU,aAAad,EAAKe,aAC5BC,YAAahB,EAAKpE,GAAGqF,eAGNV,EAAAR,SAASY,IAClB,MAAA5F,KAAEA,GAAS4F,EAEjB,GAAa,SAAT5F,EAAiB,CACb,MAAAmG,aAAEA,GAAiBP,EACzBQ,OAAOC,KAAKF,GAAcnB,SAASsB,IACjCR,EAAYJ,KAAK,CACfK,SAAU,aAAaH,EAASI,cAAcM,KAC9CL,YAAa,GAAGL,EAASO,aAAaG,MACvC,GACF,MAEDR,EAAYJ,KAAK,CACfK,SAAU,aAAaH,EAASI,aAChCC,YAAa,GAAGL,EAASO,gBAC1B,IAILrB,EAAaY,KAAK,CAChB9C,UAAWjD,SAASiD,EAAW,KAAO,EACtCC,UAAWlD,SAASkD,EAAW,KAAO,EACtCnD,SAAU6G,OAAOpB,GACjB1C,WAAYqD,EACZxD,SAAU2C,EAAK3C,UAChB,IAGI,CACLuC,iBACAC,eACAC,aACF,EAQuDyB,CAAiB7B,GAElEG,EAAaf,OAAS,UAClB5B,EAAe2C,GAEVzD,KAGT0D,EAAWhB,OAAS,GAAkB,iBAAbxC,GAClByB,EAAA9C,MACPsB,EAAO,+CAAgD,CACrDuD,WAAYA,EAAW0B,KAAK,QAE9B,CACEvD,SAAS,IAKX2B,EAAed,OAAS,GAAkB,iBAAbxC,GACtByB,EAAA9C,MACPsB,EAAO,mDAAoD,CACzDqD,eAAgBA,EAAe4B,KAAK,QAEtC,CACEvD,SAAS,IAKfvB,GAAqB,EAAK,CAC1B,QACAE,GAAa,EAAK,GAuDZD,YACA8E,eAAa,UAMzB,cCwRA,UAAoCC,YAAEA,IACpC,OACG9G,EAAAA,IAAA+G,GAAA,CACCvD,SAACxD,EAAAA,IAAAgH,GAAA,CAAoBF,iBAG3B,IC7eA,MAAMG,GAAOC,EAAO,MAAPA,EAAyB,EAAGC,WAAU1I,eAuB1C,CACL2I,QAAS,OACTC,UAAW,aACXC,QAAS,UACTC,IAAK,MACLC,SAPe/I,EAAW,OAAS,aApBjB0I,EAChB,CACEM,aAAc,oBACdC,cAAe,MACfC,WAAY,UAEd,CACEA,WAAY,iBAGElJ,EAChB,CACEmJ,UAAW,oBACXN,QAAS,cACT,kBAAmB,CACjBO,UAAW,SAGf,CAAC,MAeDC,GAAWZ,EAAOvD,EAAPuD,EACf,EACE7H,QACAiI,UAAU,IACVS,YACAC,gBAAgB,MAChBL,aACAM,wBACoB,CACpBb,QAAS,OACTc,eAAsC,UAAtBD,EAAgC,WAAa,aAC7DD,gBACAG,SAAU9I,EAAQ,EAAI,EACtB+I,WAAY/I,EAAQ,EAAI,EACxBsI,WAAYA,GAAc,aAC1BI,YACA1I,QACAiI,cAIEe,GAAcnB,EAAO,MAAPA,EAAc,KAAA,CAChCoB,SAAU,WACVC,WAAY,MACZC,MAAO,cAGHC,GAAevB,EAAO,MAAPA,EAAc,KAAO,CACxC7H,MAAO,OACPqJ,aAAc,MACdN,WAAY,MAGRO,GAAmB,CACvBC,QAAS,CACPvJ,MAAO,OAKTwJ,OAAQ,CACNxJ,MAAO,SAILyJ,GAAkB,CACtBF,QAAS,CACPvJ,MAAO,OACPiI,QAAS,cAMXuB,OAAQ,CACNxJ,MAAO,OACPiI,QAAS,aACTF,QAAS,OACTY,cAAe,gBAInB,SAAwBe,GAAYvK,GAC5B,MAAAwK,iBACJA,EAAAvG,SACAA,EAAAwG,gBACAA,EAAAC,sBACAA,EAAAC,2BACAA,EAAAC,2BACAA,EAAAC,UACAA,EAAY,QACV7K,GAEE8K,6BAAEA,GAAiClI,EAAemI,GAElD5H,EAASC,KACR+C,EAAQ6E,GAAW9J,EAAAA,UAAkB,IACrC+J,EAASC,GAAchK,EAAAA,UAAkB,IACzCjB,GAAYC,KAEXiL,eAAgBC,EAAgB,GAAMxI,EAAeyI,GAE7D9J,EAAAA,WAAU,KACJ0C,EAASyB,OAAS,EACpBsF,GAAQ,GAERA,GAAQ,EAAK,GAEd,CAAC/G,IAEE,MAAAqH,EAAYrL,EAAWqK,GAAkBH,GAiBzCoB,EAAsBA,KAC1BP,GAAQ,GACRL,EAA2B,IAC3BC,EAA2B,GAAE,EAmG7B,OAAApJ,EAAAA,IAACgK,EAAA,CACCrF,SACAsF,gBAAiBF,EACjBG,eA7FmB3H,UAGrB,GAFmBE,EAAS0H,OAAO/E,GAAwBA,EAAKgF,UAM5D,IACFV,GAAW,GAEL,MAAAW,EAAYC,EAAa7H,GAEzBQ,QAAYsH,EAASF,GAEtBpH,EAAIuH,SACaT,IAElBb,GACAI,GAC6B,IAA7BN,GAAkBzH,OAElBkJ,OAAOC,SAASC,KAAOC,GAEvBzH,EAASC,QAAQ,GAAI,CACnBpD,IAAK6K,GAAW,CACd5G,QAAStC,EAAO,0CAChBmJ,KAAMC,EACNC,SAAUrJ,EAAO,qCACjBsJ,WAAW,EACXC,eAAe,IAEjB7H,SAAS,IAES8H,OAIpBlI,EAAIuH,QACGrH,EAAA9C,MAAM4C,EAAIgB,QAAS,CAC1BZ,SAAS,IAIO8H,IAAA,CACpB,QACAzB,GAAW,EAAK,MAzCPvG,EAAA9C,MAAMsB,EAAO,gDAyCN,EAiDhByJ,MAEMzJ,EADJuH,EACW,6CACA,sCAEbmC,aAEM1J,EADJuH,EACW,6CACA,sCAEboC,SAAS,KAET9H,gBAAC+H,EACC,CAAA/H,SAAA,CAAAxD,EAAAA,IAAC2D,EAAA,CACCvE,GAAI,CACFoM,EAAG,cAGLhI,SAAAxD,EAAAA,IAACyL,GAAMrL,QAAQ,SAASsL,SAAS,UAC9BlI,SACG7B,EADHuH,EACU,+CAGA,+CAHgD,CACrDD,wBAQVjJ,EAAAA,IAAC2D,EAAA,CACCvE,GAAI,CACFoM,EAAG,UAGLhI,SAAAxD,EAAAA,IAACyL,GAAMrL,QAAQ,SAASsL,SAAS,QAC9BlI,SACG7B,EADHuH,EACU,gDAGA,kDAHiD,CACtDrJ,SAAU4C,EAASyB,oBAO5ByH,EAAO,CAAAC,WAAYnC,EAASvJ,KAAM,GAAI2L,QAAQ,EAC7CrI,SAAA,CAAAE,EAAAA,KAACC,EAAA,CACCvE,GAAI,CACFgI,QAAS,OACTc,eAAgB,gBAChB7D,OAAQ,mBAGVb,SAAA,CAAAxD,EAAAA,IAAC2D,EAAA,CACCvE,GAAI,CACFkJ,SAAU,QAGX9E,WAAO,wCAAyC,CAC/C3D,SAAU4C,EAASyB,WAGvBlE,MAACsE,GAAaC,QAASA,IA1GNhC,WACzB,MAAMuJ,EAAarJ,EAASqD,QACzBV,GAAyC,MAAjBA,EAAKpG,SAAkC,IAAfoG,EAAKnG,QAElD8M,EAA6B,GACxBD,EAAA3G,SAASxC,IAClB,MAAMyC,EAAOzC,GAEXqJ,MAAMnM,SAAEA,GAASd,YACjBA,EAAc,EAAAD,YACdA,EAAc,EAAAE,QACdA,EAAAC,MACAA,GACE0D,EAEEsJ,EAAiBnM,SAAS,GAAGD,IAAY,KAAO,EAClC,IAAhBd,GAAqBkN,EAAiBlN,EACxCqG,EAAK4G,KAAKnM,SAAWd,EACI,IAAhBD,GAAqBmN,EAAiBnN,IAC/CsG,EAAK4G,KAAKnM,SAAWf,GAEP,MAAZE,GAAmBC,IAAUY,EAAW6G,OAAO7G,GAAY,GAAKZ,IAClEmG,EAAK4G,KAAKnM,SAAWZ,GAGvBmG,EAAKgF,SAAU,EAET,MAAA9E,EAAM3C,GAASqJ,MAAMnM,SAAW6G,OAAO/D,EAAQqJ,KAAKnM,UAAY,EAEtEkM,EAAWlG,KAAKqG,EAAoBvJ,EAAQqJ,KAAM1G,GAAI,WAG/B6G,QAAQC,IAAIL,IAE1B5G,SAAQ,CAACC,EAAMiH,KACbP,EAAAO,GAAOL,KAAO5G,CAAA,IAE3B+D,EAA2B2C,EAAU,EAqEAQ,GAC1B9I,SAAA7B,EAAO,gDAIXc,EAASyB,OAAS,EACjBR,EAAAA,KAACC,EACE,CAAAH,SAAA,EAAC/E,GACAiF,EAAAA,KAACuD,GAAK,CAAAE,UAAQ,EAAC1I,WACb+E,SAAA,CAAAxD,EAAAA,IAAC8H,IACCtE,SAACxD,MAAAqI,GAAA,CAAa7E,SAAO7B,EAAA,wCAEtB3B,EAAAA,IAAA8H,GAAA,IAAagC,EAAUlB,QAASX,kBAAmBoB,EAClD7F,SAAAxD,EAAAA,IAACqI,GAAa,CAAA7E,SAAA7B,EAAO,sCAEvB3B,EAAAA,IAAC8H,GAAA,CACC1I,GAAI,CACF8I,eAAgB,aAEd4B,EAAUlB,QACdX,kBAAmBoB,EAEnB7F,SAACxD,EAAAA,IAAAqI,GAAA,CAAa7E,SAAO7B,EAAA,yCAEtB3B,EAAAA,IAAA8H,GAAA,IAAagC,EAAUlB,QAASX,kBAAmBoB,EAClD7F,SAAAxD,EAAAA,IAACqI,GAAa,CAAA7E,SAAA7B,EAAO,sCAEvB3B,EAAAA,IAAC8H,OAAagC,EAAUjB,OACtBrF,SAACxD,EAAAA,IAAAqI,GAAA,CAAY7E,oBAIlBf,EAASC,KAAI,CAACC,EAAwB0J,KACrC,MAAMrN,QAAEA,EAAAF,YAASA,EAAaC,YAAAA,EAAAE,MAAaA,GAAU0D,GAE/C9C,SACJA,EAAW,EAAA0M,aACXA,EAAAC,YACAA,EAAA/G,WACAA,EAAA7C,WACAA,EAAA6J,eACAA,EAAAC,UACAA,GACE/J,EAAQqJ,KAENW,EAAQjG,OAAOgG,GACfE,GAASD,GAAS9M,EAAW6G,OAAO7G,GAAY,IAAIgN,QAAQjD,GAE5DkC,EAAkB,IACnBW,EACHK,cAAelK,GAGXmK,EAAgBC,EAAwBlB,EAAY,IAEpDmB,EAAgBC,KAAKC,MAAMvK,GAC3BwK,EAAmCL,EAAcjH,QACpDV,GAASA,EAAKiI,YAIf,OAAA3J,OAACuD,IAAKxI,WACJ+E,SAAA,CAAAE,OAACoE,GACC,CAAAtE,SAAA,CAACxD,EAAAA,IAAAyI,GAAA,CAAa6E,IAAKf,GAAgBgB,IACnC7J,EAAAA,KAACC,EAAA,CACCvE,GAAI,CACFE,WAAY,QAGdkE,SAAA,CAAAxD,MAAC4D,EAAW,CAAAxD,QAAQ,QAAQoI,MAAM,UAC/BhF,SACHgJ,UACC5I,EAAW,CAAAxD,QAAQ,QAAQoI,MAAM,UAC/BhF,SACHiC,IACCwH,EAAc/I,OAAS,GACtBkJ,EAAalJ,OAAS,GACtBkJ,EAAa1K,KAAK6C,GAChBvF,EAAAA,IAAC4D,EAAA,CACCxE,GAAI,CACFkJ,SAAU,UACVC,WAAY,MACZC,MAAO,WAIRhF,SAAG,GAAA+B,EAAOiI,eAAejI,EAAO8H,aAF5B9H,EAAOiI,2BAOrB1F,GAAU,IAAGgC,EAAUlB,QAASX,kBAAmBoB,EACjD7F,SAAA,CAAY/E,GAAAuB,EAAAA,IAAC,QAAKwD,SAAO,YACzBiK,EAAed,YAEjB7E,GAAU,IAAGgC,EAAUlB,QAASX,kBAAmBoB,EAClD7F,SAAAxD,EAAAA,IAACzB,EAAA,CACCS,UACAF,cACAC,cACAE,QACAJ,MAAOgB,EACPV,SAAUA,CAACN,EAAOuL,KA5RT7H,OAC7B8J,EACAxN,EACAuL,KAEM,MAAA0B,EAA8B,IAAIrJ,GACxCqJ,EAAWO,GAAOL,KAAKnM,SAAW6G,OAAO7H,GAC9BiN,EAAAO,GAAOjC,QAAUA,EACtB,MAAAsD,QAAyBxB,EAAoBJ,EAAWO,GAAOL,KAAMtF,OAAO7H,IAC9E6O,IACD5B,EAAWO,GAA4BL,KAAO0B,EAC/CvE,EAA2B2C,GAAU,EAkRM6B,CAAAtB,EAAOxN,EAAOuL,EAAO,aAIjDtC,GAAU,IAAGgC,EAAUlB,QAASX,kBAAmBoB,EACjD7F,SAAA,CAAY/E,GAAAuB,EAAAA,IAAC,OAAIwD,SAAO,YACxBiK,EAAeb,MAGjB5M,EAAAA,IAAA8H,GAAA,IAAagC,EAAUjB,OACtBrF,SAAAxD,EAAAA,IAAC4N,GAAA,CACCxO,GAAI,CACFyO,OAAQ,UACRrF,MAAO,uBAETjE,QAASA,KAvRR8H,KACf,MAAAP,EAA8B,IAAIrJ,GAC7BqJ,EAAAgC,OAAOzB,EAAO,GACzBlD,EAA2B2C,EAAU,EAqRfiC,CAAc1B,EAAK,QA1DI5G,EA8D/B,OAIJ,YAKd,CCveA,SAASuI,GAA0BxP,GACjC,MAAMmD,EAASC,KACRnD,GAAYC,KACbuP,KAAEA,EAAAC,kBAAMA,EAAmBC,yBAAAA,GAA6B3P,EAG5D,OAAAwB,EAAAA,IAACgK,EAAA,CACCrF,OAAQsJ,EACR7C,MAAOzJ,EAAO,qCACdyM,YAAazM,EAAO,mCACpB0J,aAAc1J,EAAO,mCACrBsI,gBAAiBiE,EACjBhE,eAAgBiE,EAChBE,cAAe,CACb7F,MAAO,WAGThF,SAAAxD,EAAAA,IAAC2D,EAAA,CACCvE,GAAI,CACFgI,QAAS,OACTc,eAAgBzJ,EAAW,UAAY,QACvCY,MAAOZ,EAAW,OAAS,QAC3B6P,OAAQ,QAGT9K,WAAO,6CAIhB,CCkCA,SAAS+K,GAAqB/P,GACtB,MAACC,GAAYC,IACbiD,EAASC,KAGbb,OAAOyN,oBAAEA,GAAsB,IAC7BvN,EAAAA,WAAWwN,GACTC,EAAatN,GAAe,EAAGuN,iBAAkBA,EAAYC,kBAAkBF,aAC/EG,EAAYzN,GAAe,EAAGC,aAAcA,EAAQC,YAAYN,KAChE8N,EAAkB1N,GAAe,EAAGC,aAAcA,EAAQ0N,SAASD,mBACnEE,oCACJA,EAAAC,yBACAA,EAAA3F,6BACAA,GACElI,EAAemI,GACb2F,EAAMC,SAAiC,OACtCxK,EAAQC,GAAalF,EAAAA,UAAS,GAE/B0P,EAAeC,EAAQC,IAAI,UAE3BC,EAAiB9Q,EACnB,CACEkJ,WAAY,aACZK,cAAe,UAEjB,CACEL,WAAY,WAGZqB,iBACJA,EAAAE,sBACAA,EAAAsG,WACAA,EAAAC,iBACAA,EAAA/F,WACAA,EAAAgG,cACAA,EAAAvG,2BACAA,GAAAC,2BACAA,GAAA3H,UACAA,GAAAkO,YACAA,GAAAC,sBACAA,GAAAC,KACAA,IACErR,EAEEsR,IAAmCrO,IAAYuN,EAC/Ce,IAAiBtO,IAAYwN,EAC7Be,GAAkCvO,GACpC6H,EACiB,IAAjB5C,OAAOmJ,IAULI,GAAcA,KAClBrL,GAAU,EAAK,EA2DXsL,GAA0B3N,UAC1B,GAAsB,IAAtBiN,EAAWtL,OAAX,CAKQ+L,KACZvG,GAAW,GACP,IACF,MAAMyG,EAAiB,GAEvB,IAAIC,EAAe,GAYnB,GAVWZ,EAAArK,SAASC,IACZ,MAAA4G,KAAEA,GAAS5G,EAEwB,aAArC4G,EAAKS,eAAe4D,eACND,GAAA,GAAGpE,EAAKvG,eAGrB0K,EAAAtK,KAAKmG,EAAKvG,WAAU,IAGvB2K,EASF,YARSjN,EAAA9C,MACPsB,EAAO,0CAA2C,CAChDwO,KAAMC,EAAaE,MAAM,GAAK,KAEhC,CACEjN,SAAS,IAMX,GAAgB,IAAhB8M,EAAKjM,OASP,YARSf,EAAA9C,MAEHsB,EADJuH,EACW,4CACA,8CACX,CACE7F,SAAS,IAMT,MAAAkN,EAAsB9O,GAAY+O,EAA0BC,EAE5DC,QAA0BH,EAAoB,CAClDJ,UAGIQ,mBAAEA,EAAoBC,mBAAAA,GA7GPC,KACvB,MAAMF,EAAsC,GACtCC,EAAsC,GA+CrC,OA7CIpB,EAAArK,SAASC,IACZ,MAAA4G,KAAEA,GAAS5G,EAEX0L,EACJD,EAAeE,MAAMxL,GAA6BA,EAAOE,aAAeuG,EAAKvG,cAC7E,CAAC,EAEH,GAAIqL,EAAe,CACjB,IAAIE,GAAe,EAES,MAA1BF,EAAc9R,UACbgN,GAAMnM,SAAW6G,OAAOsF,EAAKnM,UAAY,GAAKiR,EAAc7R,QAE9C+R,GAAA,GAGe,IAA9BF,EAAc/R,cACbiN,GAAMnM,SAAW6G,OAAOsF,EAAKnM,UAAY,GAAKiR,EAAc/R,cAE9CiS,GAAA,GAGe,IAA9BF,EAAchS,cACbkN,GAAMnM,SAAW6G,OAAOsF,EAAKnM,UAAY,GAAKiR,EAAchS,cAE9CkS,GAAA,GAEbA,EACFJ,EAAmB/K,KAAK,CACtBmG,SAGF2E,EAAmB9K,KAAK,CACtBmG,KAAM,IACDA,GAEL/M,MAAO6R,EAAc7R,MACrBD,QAAS8R,EAAc9R,QACvBF,YAAagS,EAAchS,YAC3BC,YAAa+R,EAAc/R,aAE/B,KAIG,CACL4R,qBACAC,qBACF,EAyDqDK,CACjDP,GAAmBjL,YAAc,IAG/B,GAA8B,IAA9BmL,EAAmB1M,OAAc,CAC7B,MAAAmG,EAAYC,EAAasG,GACzBM,EAAmBC,EAAe/B,GAClCgC,QAAiBC,IACvB,IAAIpO,EAAM,KACNiG,GAAyBkI,EAASlN,cAC9BoN,EAAWJ,GACXjO,QAAMsO,GAAWH,EAAU/G,KAE3BpH,QAAMsH,EAASF,GACDc,MAElBlI,GAAOA,EAAIuH,OACbrH,EAAS9C,MAAM4C,EAAIuH,OAAO,GAAGvG,QAAS,CACpCZ,SAAS,IAE4B,IAA9BsN,EAAmBzM,SAE1BgF,GACA8G,IAC6B,IAA7BhH,GAAkBzH,OAElBkJ,OAAOC,SAASC,KAAOC,GAEvBzH,EAASC,QAAQ,GAAI,CACnBpD,IAAK6K,GAAW,CACd5G,QAAStC,EAAO,2CAChBmJ,KAAMC,EACNC,SAAUrJ,EAAO,gCACjBsJ,WAAW,EACXC,eAAe,IAEjB7H,SAAS,IAES8H,MAExB,CAGFhC,GAA2BwH,GAC3BvH,GAA2BwH,EAAkB,CAC7C,QACAlH,GAAW,EAAK,CAhGhB,MADSvG,EAAA9C,MAAMsB,EAAO,qCAiGN,EA+Kd6P,GAAU,CACdC,iBAAkB,CAChBC,KAAM/P,EAAO,iCACb8E,IAAK,uBACLkL,YAAazB,GACb0B,YAAY,GAEdC,kBAAmB,CACjBH,KAAM/P,EAAO,yCACb8E,IAAK,yBACLkL,YAAazB,GACb0B,YAAY,GAEdE,mBAAoB,CAClBJ,KAAM/P,EAAO,kCACb8E,IAAK,wBACLkL,YAvK6BpP,UAC3B,GAAsB,IAAtBiN,EAAWtL,OAAX,CAIJwF,GAAW,GACCuG,KACR,IACF,MAAM8B,EAAkBvC,EAAW1J,QAAQkM,IACnC,MACJhG,MAAMvG,WAAEA,IACNuM,EAEJ,MAAsB,KAAfvM,SAAqBA,CAAsC,IAG9DwM,EAAgBzC,EAAW1J,QAAQkM,IACjC,MACJhG,MAAMvG,WAAEA,IACNuM,EAEJ,OAAQvM,CAAA,IAON,GALAwM,EAAc/N,OAAS,GAChBf,EAAA9C,MAAMsB,EAAO,4CAA6C,CACjE0B,SAAS,IAGT4O,EAAc/N,SAAWsL,EAAWtL,OAAQ,OAEhD,MAAMgO,EAAuB,GACbH,EAAA5M,SAASxC,IACjB,MAAAqJ,KAAEA,GAASrJ,EAEZuP,EAAWC,SAASzL,OAAOsF,EAAKjJ,aACnCmP,EAAWrM,KAAKa,OAAOsF,EAAKjJ,WAAU,IAIpC,MAAAqP,EAAc3Q,GAAY4Q,EAAoBC,GAE9C7F,eAAEA,SAAyB2F,EAAY,CAC3CF,aACArD,YACAC,oBAGIyD,EAAmCC,EAAuB/F,GAChE,IAAIgG,GAAY,EACZC,EAAe,GACfC,GAAgB,EAEpB,MAAMC,EAAkC,GAuDxC,GAtDgBb,EAAA5M,SAASxC,IACjB,MACJqJ,MAAMU,UACJA,EAAA9J,WACAA,EAAA6C,WACAA,EAAA1C,UACAA,EAAAyJ,YACAA,EAAA3M,SACAA,EAAAmD,UACAA,EAAA6P,IACAA,IAEAlQ,EAEEsD,GAtFY6M,EAsFiB5F,KAAKC,MAAMvK,GArF1B,IAApBkQ,GAAS5O,OAAqB,GAEnB4O,EAAQpQ,KACrB,EACEyD,UAAWD,EACX6M,aAAc3M,MAIT,CACLF,WACAE,mBAZkB0M,MAwFlB,MAAME,EAAuBT,EAAexB,MACzCpO,GAA8B+D,OAAO/D,EAAQ3B,MAAQ0F,OAAO3D,KAGzDkQ,EAAcD,GAAsBE,SAASnC,MAChD3L,GAA2BA,EAAK+N,MAAQ1N,IAGtCwN,IACHP,EAAe/Q,EAAO,kCAAmC,CACvDwR,IAAK1N,IAESkN,GAAA,GAGlB,MAAMS,EAAgB,CACpBpH,KAAM,CACJhL,GAAIqS,IACJ5N,WAAYwN,GAAaE,KAAO1N,EAChCzC,YACAyJ,eAAgBuG,EAChBzG,aAAc0G,GAAaK,WAAa/F,EACxCf,cACA3M,SAAU6G,OAAO7G,IAAa,EAC9B+C,WAAYsK,KAAKqG,UAAUtN,GAC3BlD,YACA2J,YACAmG,QAIJD,EAAY/M,KAAKuN,GAELX,GAAA,CAAA,IAGdA,EAAYe,EAAgBZ,IAEvBD,EAWH,YAVAxP,EAAS9C,MAAM,GAAI,CACjBL,IAAK6K,GAAW,CACd5G,QAASyO,EACT5H,KAAM,GACNE,SAAU,GACVC,WAAW,IAEb5H,SAAS,IAMToP,SACIgB,EAA0Bb,EAAa,KAC7Cc,EAAsBd,GACtBzP,EAASC,QAAQ,GAAI,CACnBpD,IAAK6K,GAAW,CACd5G,QAAStC,EAAO,4CAChBmJ,KAAM,cACNE,SAAUrJ,EAAO,iCACjBsJ,WAAW,IAEb5H,SAAS,KAGXF,EAAS9C,MAAM,GAAI,CACjBL,IAAK6K,GAAW,CACd5G,QAAStC,EAAO,qCAChBmJ,KAAM,cACNE,SAAUrJ,EAAO,iCACjBsJ,WAAW,IAEb5H,SAAS,UAGN3C,GACPiT,GAAUtT,MAAMK,EAAC,CACjB,QACAgJ,GAAW,EAAK,CAhJhB,MADSvG,EAAA9C,MAAMsB,EAAO,qCAiJN,EAqBhBiQ,YAAY,IA2BVgC,GAtB+B,IAA7B5K,GAAkBzH,QAAiBE,GAAmB,IAEvDsO,IAAkBtO,GACd+M,EAAsB,CAACgD,GAAQM,oBAAsB,GAE1D9B,GACE9G,GAAyBsF,EACpB,CAACgD,GAAQK,kBAAmBL,GAAQM,oBAGzC5I,EAA8B,CAACsI,GAAQK,mBACvCrD,EACK,CAACgD,GAAQM,oBAEX,GAGFtD,EACH,CAACgD,GAAQC,iBAAkBD,GAAQM,oBACnC,CAACN,GAAQC,kBAMb,OAAA/N,EAAAA,KAAC6H,EAAA,CACCnM,GAAI,CACFyU,SAAU,QACVC,OAAQrV,GAAYiQ,EAAa,OAAS,GAC1CqF,KAAM,EACNC,gBAAiB,OACjB3U,MAAO,OACPiI,QAAS7I,EAAW,aAAe,mBACnC6P,OAAQ7P,EAAW,OAAS,OAC5Ba,WAAY,EACZ8H,QAAS,OACTI,SAAU,SACVyM,OAAQ,OAEVC,WAAS,EACTC,QAAS,EAET3Q,SAAA,CAAAxD,EAAAA,IAACuL,EAAA,CACCnG,MAAI,EACJhG,GAAI,CACFgI,QAAS3I,EAAW,OAAS,QAC7BY,MAAO,QACP+U,YAAa,UAGjBpU,EAAAA,IAACuL,EAAA,CACCnG,MAAI,EACJhG,GACEX,EACI,CACEsJ,UAAW,QAEb,CACEA,UAAW,QACXI,SAAU,GAIlB3E,SAAAE,EAAAA,KAACC,EAAA,CACCvE,GAAI,CACFC,MAAO,OACPgV,GAAI,OACJjN,QAAS,OACT6M,OAAQ,MACR/L,eAAgB,mBACbqH,GAGL/L,SAAA,CAAAxD,EAAAA,IAAC4D,EAAA,CACCxE,GAAI,CACFoJ,MAAO,UACPF,SAAU,OACVgM,WAAY,OAGb9Q,WAAO,uCAAwC,CAC9C3D,SAAU2P,EAAWtL,WAGzBR,EAAAA,KAACC,EAAA,CACCvE,GAAI,CACFgI,QAAS,OACTO,WAAY,SACZH,SAAU/I,EAAW,OAAS,UAGhC+E,SAAA,CAAAxD,EAAAA,IAAC4D,EAAA,CACCxD,QAAQ,KACRhB,GAAI,CACFkJ,SAAU,OACVgM,WAAY,MACZ9L,MAAO,WAGRhF,WAAO,+BAAgC,CACtC+Q,SAAU9G,EAAegC,OAG7B/L,EAAAA,KAACC,EAAA,CACCvE,GAAI,CACFgI,QAAS,OACTO,WAAY,SACZE,UAAWpJ,EAAW,SAAW,EACjCY,MAAOZ,EAAW,OAAS,QAG5B+E,SAAA,EAAC0F,GACA0G,IACAE,IACE9P,EAAAA,IAACsE,EAAA,CACClF,GAAI,CACFkI,QAAS,MACTkN,OAAQ,aAAa7E,IAAe,YACpCtL,OAAQ5F,EAAW,aAAe,SAClCgW,SAAU,QAEZ9V,SAAuC,KAA7BqK,GAAkBzH,OAE5BiC,SAAAxD,EAAAA,IAAC4N,GAAA,CACCpF,MAAM,UACNpJ,GAAI,CACFoJ,MAAOmH,IAETpL,QAASA,KACPmL,GAAc,EAAI,MAK3BkE,GAAW1P,OACVR,EAAAA,KAACC,EAAA,CACCvE,GAAI,CACFgI,QAAS,OACTO,WAAY,SACZE,UAAWpJ,EAAW,SAAW,EACjCa,WAAYb,EAAW,EAAI,OAC3BY,MAAOZ,EAAW,OAAS,QAG5B+E,SAAA,CAAsB,IAAtBoQ,GAAW1P,QAAgB0P,GAAW,IACrC5T,EAAAA,IAACsE,EAAA,CACClE,QAAQ,YACRmE,QAASqP,GAAW,GAAGjC,YACvBvS,GAAI,CACFG,YAAad,EAAW,OAAS,EACjCY,MAAOZ,EAAW,OAAS,QAG5B+E,SAAAoQ,GAAW,GAAGlC,OAGI,IAAtBkC,GAAW1P,QAERR,EAAAA,KAAAgR,EAAAA,SAAA,CAAAlR,SAAA,CAAAxD,EAAAA,IAACsE,EAAA,CACClE,QAAQ,YACRmE,QA5gBIoQ,KACE,IAAtBnF,EAAWtL,OACJf,EAAA9C,MAAMsB,EAAO,sCAEtBiD,GAAU,EAAI,EAygBIsK,MACA9P,GAAI,CACFG,YAAad,EAAW,OAAS,EACjCY,MAAOZ,EAAW,OAAS,QAE7BmW,cAAUC,GAAc,IAEvBrR,WAAO,uCAEVxD,EAAAA,IAAC8U,EAAA,CACC9T,GAAG,aACH+T,SAAU7F,EAAI8F,QACd/G,KAAMtJ,EACNsQ,QAAShF,GACTiF,cAAe,CACb,kBAAmB,gBAGpB1R,YAAWU,OAAS,GACnB0P,GAAWlR,KAAKyS,GACdnV,EAAAA,IAACoV,EAAA,CAEC7Q,QAASA,KACP4Q,EAAOxD,aAAY,EAGpBnO,SAAO2R,EAAAzD,MALHyD,EAAO1O,eAYxB,gBAKZzG,EAAAA,IAACuL,EAAA,CACCnG,MAAI,EACJhG,GACEX,EACI,CACEsJ,UAAW,OACXX,QAAS3I,EAAW,OAAS,SAE/B,CACEsJ,UAAW,QACXX,QAAS3I,EAAW,OAAS,aAM7C,CC/qBA,MAAM4W,GAAmBnO,EAAO,MAAPA,EAAc,KAAO,CAC5CE,QAAS,OACTO,WAAY,aAkBd,SAAS2N,GAAqB9W,GAC5B,MAAMmD,EAASC,KACRnD,GAAYC,KAEbsK,iBACJA,EAAAuM,aACAA,EAAAC,yBACAA,EAAAC,kBACAA,EAAAhU,UACAA,EAAAqF,YACAA,EAAA4O,cACAA,EAAA/F,YACAA,GACEnR,GAGFuC,OACE4U,aAAa3B,gBAAEA,EAAkB,aAEjC/S,EAAAA,WAAW2U,IACTC,EAAWC,MAEXC,yBAAEA,GAA6B3U,GACnC,EAAGC,aAAcA,EAAQ2U,wBAIzB1M,6BAA8B2M,EAC9BC,8BAA+BC,GAC7B/U,EAAemI,GAEb6M,EAA0BC,EAAAA,SAAQ,KACtC,GAAI5U,EAAW,CACP,MAAAH,EAAc0H,GAAkB1H,aAAe,CAAC,GAGpDgI,6BAA8BgN,EAC9BJ,8BAA+BK,GAC7BC,GAaG,MAAA,CACLlN,6BAbwCmN,GAA+C,CACvFC,KAAMJ,EACNK,OAAQjQ,OAAO6O,GAAcoB,QAAU,GACvCC,SAAUlQ,OAAOqP,KAWjBG,8BARyCW,GAAsB,CAC/DH,KAAMH,EACN1H,UAAWnI,OAAOpF,GAAauN,WAAa,GAC5C8H,OAAQjQ,OAAO6O,GAAcoB,QAAU,KAMzC,CAGK,MAAA,CACLrN,6BAA8B2M,EAC9BC,8BAA+BC,EACjC,GACC,CACDZ,EACA9T,EACAwU,EACAE,EACAnN,GAAkB1H,YAClByU,IAGIe,EAA6D,IAA7C9N,GAAkBvG,UAAUsU,MAAM7S,QAElDoF,6BAAEA,EAA8B4M,8BAAAA,GAAkCE,EAElEY,EAAeC,GACnBxY,EACI,CAAA,EACA,CACEwY,MAER,OAEIvT,EAAAA,KAAAgR,WAAA,CAAAlR,SAAA,CAAAxD,EAAAA,IAAC2D,EAAA,CACCvE,GAAI,CACFmE,aAAc,OACdlE,MAAO,eAGTmE,SAAAE,EAAAA,KAACC,EAAA,CACCvE,GAAI,CACFoJ,MAAO,UACPqF,OAAQ,UACRzG,QAAS,OACTO,WAAY,UAEdpD,QAASA,KAC+B,QAAlCmR,EAAcwB,gBACEzB,KAElBI,EAAS,KACG/O,EAAA,CACVnC,QAAQ,EACRwS,QAAS,KACV,EAIL3T,SAAA,CAAAxD,EAAAA,IAACoX,GAAA,CACC9O,SAAS,QACTlJ,GAAI,CACFkJ,SAAU,OACV/I,YAAa,SACbiJ,MAAOmH,KAGX3P,EAAAA,IAAC2D,EAAA,CACCvE,GAAI,CACFiF,OAAQ,EACRmE,MAAOmH,EACPnE,EAAG,KAGJhI,SAAkC,UAApB0T,gBACXvV,EAAO,2CACPA,EAAO,4CAIjB+B,EAAAA,KAAC6H,EAAA,CACC2I,WAAS,EACTC,QAAS,EACT/U,GAAI,CACFgI,QAAS,OACTc,eAAgB,gBAChBF,cAAevJ,EAAW,SAAW,MACrC4Y,GAAI5Y,EAAW,OAAS,IAG1B+E,SAAA,CAAAE,EAAAA,KAAC6H,EAAA,CACCnG,MAAI,KACA4R,EAAY,GAChB5X,GAAI,CACFoJ,MAAO8O,GAAiBtD,IAG1BxQ,SAAA,CAAAE,EAAAA,KAACC,EAAA,CACCvE,GAAI,CACFgI,QAAS,OACTO,WAAYlJ,EAAW,QAAU,SACjCuJ,cAAevJ,EAAW,SAAW,OAGvC+E,SAAA,CAAAxD,EAAAA,IAAC4D,EAAA,CACCxD,QAAQ,KACRhB,GAAI,CACFG,YAAa,OACb8H,UAAW,aAGZ7D,SAAA,GAAGwF,GAAkB0I,MAAQ,OAE/BjQ,IACE6H,GACE4M,GAAiClN,GAAkBuO,eACpDvX,EAAAA,IAAC4D,EAAA,CACCxE,GAAI,CACFoM,EAAG/M,EAAW,SAAW,KAG1B+E,SAAoBwF,GAAAhJ,MAACwX,GAAe,CAAAjW,OAAQyH,GAAkBzH,qBAItEoC,EACC,CAAAH,SAAA,CAAAxD,EAAAA,IAAC4D,EAAA,CACCxE,GAAI,CACFC,MAAO,OACPgI,UAAW,aAGZ7D,SAAkBwF,GAAAyO,cAEpBhW,UACE4T,GACC,CAAA7R,SAAA,CAAAxD,EAAAA,IAAC4D,EAAA,CACCxD,QAAQ,YACRhB,GAAI,CACFG,YAAa,UAGdiE,WAAO,mCAEVxD,EAAAA,IAAC,OAAM,CAAAwD,SAAA,GAAG+R,GAAcmC,WAAa,MAAMnC,GAAcoC,UAAY,gBAM7EjU,EAAAA,KAAC6H,EAAA,CACCnG,MAAI,EACJhG,GAAI,CACFiK,UAAW5K,EAAW,OAAS,UAE7BuY,EAAY,GAEfxT,SAAA,CAAgC8F,GAA6B,KAA7BN,GAAkBzH,QACjDvB,EAAAA,IAACsE,EAAA,CACClE,QAAQ,WACRzB,SAAUmY,EACVvS,QAASA,KACPiR,EAAyB,GAAE,EAG5BhS,WAAO,2CAGX0S,GAA8D,KAA7BlN,GAAkBzH,eACjDoC,EACC,CAAAH,SAAA,CAAAxD,EAAAA,IAACsE,EAAA,CACClE,QAAQ,WACRhB,GAAI,CACFG,YAAa,QAEfgF,QAASA,KACPiR,EAAyB,GAAE,EAG5BhS,WAAO,gCAET0S,GACClW,EAAAA,IAACsE,EAAA,CACClE,QAAQ,WACRmE,QAASA,KACPiR,EAAyB,EAAC,EAG3BhS,WAAO,4CAS1B,CC5QA,SAASoU,GAAuBpZ,GAC9B,MAAMmD,EAASC,KAERnD,GAAYC,KACbuP,KAAEA,EAAM4J,MAAAA,EAAAC,SAAOA,EAAUC,0BAAAA,EAAAC,wBAA2BA,GAA4BxZ,EAGpF,OAAAwB,EAAAA,IAACgK,EAAA,CACCrF,OAAQsJ,EACR7C,MAAOzJ,EAAO,mCACdyM,YAAazM,EAAO,oCACpB0J,aAAc1J,EAAO,kCACrBsI,gBAAiB8N,EACjB7N,eAAgB8N,EAChBC,gBAAgB,EAEhBzU,SAAAxD,EAAAA,IAAC2D,EAAA,CACCvE,GAAI,CACFgI,QAAS,OACTc,eAAgBzJ,EAAW,UAAY,QACvCY,MAAOZ,EAAW,OAAS,QAC3B6P,OAAQ,QAGV9K,SAAAxD,EAAAA,IAACkY,EAAA,CACCC,WAAS,EACTC,KAAM,EACN9R,aAAcuR,EACd1Y,SAAWuB,GAAMoX,EAASpX,EAAEC,OAAO9B,OACnCuB,QAAQ,SACRiY,WAAS,EACTC,YAAa3W,EAAO,8CAK9B,CCpBA,MAAM4W,GAAcrR,EAAO,MAAPA,EAAc,KAAA,CAChCoE,SAAU,OACVgD,OAAQ,OACR/O,YAAa,aAGf,SAASiZ,GAAmBha,GAC1B,MAAMmD,EAASC,KAEbwD,KAAMqT,EAAAC,OACNA,EAAAC,SACAA,EAAAC,SACAA,EAAAjL,uBACAA,EAAAkL,6BACAA,EAAAC,iBACAA,EAAAC,IACAA,EAAAC,UACAA,EAAAtJ,cACAA,EAAAuJ,eACAA,EAAAC,iBACAA,EAAApB,SACAA,EAAAqB,UACAA,EAAAC,uCACAA,GACE5a,GAEEkO,UACJA,EAAA7M,SACAA,EAAAwZ,OACAA,EAAArW,UACAA,EAAAuJ,aACAA,EAAAC,YACAA,EAAA/G,WACAA,EAAAgH,eACAA,EAAA6M,WACAA,EAAAC,SACAA,EAAW,EAAAC,YACXA,GACEf,EAEE9L,EAAQ8M,GAAW/S,OAAOgG,GAAYhG,OAAO6S,IAE7C3M,EAAQD,EAAQjG,OAAO7G,GAEvB8C,EAAe,IAChB8V,EAAehM,eAClBK,cAAe2L,EAAe7V,YAG1BmK,EAAgBC,EAAwBrK,EAAS,IAEjDC,EAAasK,KAAKC,MAAMsL,EAAe7V,YACvCwK,EAAmCL,EAAcjH,QAAQV,GAASA,EAAKiI,YAEvEqM,EACJ9W,EAAWsB,OAAS,IAAM4U,GAAoBM,EAE1CO,EAAkBhX,EAAQuQ,UAAY,GAEtC0G,EACJC,GAAgCF,EAAiB,CAAE3W,YAAWyC,gBAAiB8G,EAG/E,OAAAvM,EAAAA,IAAC2D,EAAA,CAECvE,GAAI,CACFwI,UAAW,oBACXH,aAAcuR,IAAcD,EAAM,EAAI,oBAAsB,IAG9DvV,SAAAE,EAAAA,KAACD,EAAA,CACCrE,GAAI,CACFoJ,MAAO,UACPpB,QAAS,OACT0S,GAAI,GAGNtW,SAAA,CAACxD,EAAAA,IAAA2D,EAAA,CAAKH,SAAYoV,GAAAA,YACjBjV,EACC,CAAAH,SAAAxD,EAAAA,IAACuY,GAAA,CACCjL,IAAKsM,GAAgBrM,EACrBwM,IAAI,cACJtQ,QAAQ,WAGZ/F,EAAAA,KAACC,EAAA,CACCvE,GAAI,CACF4a,KAAM,GAGRxW,SAAA,CAAAxD,EAAAA,IAAC4D,EAAA,CACCxD,QAAQ,QACRoI,MAAM,UACNjE,QAASA,KACD,MACJmG,UAAUuP,OAAEA,IACVxP,OAEJA,OAAOC,SAASC,KAAO,GAAGsP,IAASX,GAAU,EAE/Cla,GAAI,CACFyO,OAAQ,WAGTrK,SAAAgJ,UAEF5I,EAAW,CAAAxD,QAAQ,QAAQoI,MAAM,UAC/BhF,SACHiC,IACAzF,EAAAA,IAAC2D,EAAA,CACCvE,GAAI,CACFiF,OAAQ,gBAGTb,SAAAZ,EAAWsB,OAAS,GAAKkJ,EAAalJ,OAAS,GAC9ClE,EAAAA,IAAC2D,EACE,CAAAH,SAAA4J,EAAa1K,KAAK6C,GACjBvF,EAAAA,IAAC4D,EAAA,CACCxE,GAAI,CACFkJ,SAAU,UACVC,WAAY,MACZC,MAAO,WAIRhF,SAAG,GAAA+B,EAAOiI,eAAejI,EAAO8H,aAF5B9H,EAAOiI,kBASrBgM,GAAeA,EAAYU,OAAOhW,OAAS,GAC1ClE,EAAAA,IAAC4D,EAAA,CACCxE,GAAI,CACFkJ,SAAU,UACVE,MAAO,UACPX,UAAW,SACXtE,aAAc,UAGfC,SAAAgW,IAILxZ,EAAAA,IAAC4D,EAAA,CACCxE,GAAI,CACFoJ,MAAO,UACPF,SAAU,QAGX9E,WAAO,wCAAyC,CAC/CmJ,MAAOwM,EAAU1L,EAAed,GAAQ8L,OAI5CzY,EAAAA,IAACkY,EAAA,CACChY,KAAK,QACLC,KAAK,SACLC,QAAQ,SACRxB,MAAO+C,EAAO,4CACdhD,UAAUya,GAAyCN,EACnDvY,WAAY,CACVC,UAAW,UACXC,QAAS,UAEX5B,MAAOgB,EACPT,GAAI,CACFiF,OAAQ,WACRhF,MAAO,MACPiM,SAAU,QACV,UAAW,CACT2I,OAAQ,EACR3L,SAAU,QAEZ,UAAW,CACTA,SAAU,SAGdnJ,SAAWuB,IACTiN,EAAuB8K,EAAezX,GAAIN,EAAEC,OAAO9B,MAAK,EAE1D+B,OAAQA,KACNiY,EAA6BQ,EAAM,IAGvCrZ,EAAAA,IAAC4D,EAAA,CACCxE,GAAI,CACFoJ,MAAO,UACPF,SAAU,QAGX9E,WAAO,wCAAyC,CAC/CoJ,MAAOuM,EAAU1L,EAAeb,GAAQ6L,OAG5C/U,EAAAA,KAACC,EAAA,CACCvE,GAAI,CACFyI,UAAW,OACXwB,UAAW,OAEbrI,GAAG,iCAEFwC,SAAA,CACC4V,GAAApZ,EAAAA,IAACma,GAAA,CACC/a,GAAI,CACFG,YAAa,SACbsO,OAAQ,UACRrF,MAAO,uBAETjE,QAASA,KACP0U,GAAe,GACEC,EAAAxS,OAAO2S,IAEpBG,GACF1B,EAAS0B,EAAW,IAM3BE,GACC1Z,EAAAA,IAACoa,GAAA,CACChb,GAAI,CACFG,YAAama,EAAkB,SAAW,GAC1Cpa,WAAYoa,EAAkB,SAAW,GACzC7L,OAAQ,UACRrF,MAAO,uBAETjE,QAASA,KACPmU,EACE,IACKjM,EACHK,cAAelK,EACf/C,YAEFmD,EACAqW,EACF,IAILD,IAA2CN,GAC1C9Y,EAAAA,IAAC4N,GAAA,CACCxO,GAAI,CACFE,WAAY,SACZuO,OAAQ,UACRrF,MAAO,uBAETjE,QAASA,KACPmL,GAAc,GACLiJ,EAAAjS,OAAO2S,GAAO,cA3L9BZ,EAAezX,GAoM1B,CCnMA,MAAMqZ,GAAmCnT,EAAO,MAAPA,EAAc,KAAA,CACrD8M,gBAAiB,UACjB1M,QAAS,OACToB,aAAc,MACd4R,UACE,wGAEF,UAAW,CACT,OAAQ,CACN,OAAQ,CACNC,cAAe,OAEjB,sBAAuB,CACrBC,WAAY,SAGhB,cAAe,CACb,6BAA8B,CAC5BC,QAAS,SAMXlC,GAAcrR,EAAO,MAAPA,EAAc,KAAA,CAChCoE,SAAU,OACVgD,OAAQ,OACR/O,YAAa,aAGTmb,GAAkBxT,EAAOgR,EAAPhR,EAAkB,KAAO,CAC/C,UAAW,CACTsT,WAAY,OACZG,aAAc,WAIZC,GAAiB,YAEjBC,GAAW,CACfC,QAAS,cACTC,UAAW,YACXC,IAAK,YA+pBQC,GAAAA,EAAAA,YA5pBf,SAA6Bzc,EAAiC0Q,GACtD,MAACzQ,GAAYC,IACbiD,EAASC,KAEToH,iBACJA,EAAAkS,iBACAA,EAAAC,oBACAA,EAAAjY,eACAA,EAAAkY,uBACAA,EAAAC,cACAA,EAAAvC,iBACAA,EAAAwC,gBACAA,EAAA5L,cACAA,EAAA6L,gBACAA,EAAA9Z,UACAA,EAAAyH,sBACAA,EAAAsF,oBACAA,EAAAoB,sBACAA,EAAAC,KACAA,GACErR,EAEEgd,EAAwBpa,GAAe,EAAGqa,YAAaA,EAAOD,yBAE9DxM,oCAAEA,EAAA1F,6BAAqCA,GAC3ClI,EAAemI,GAEXmS,GAAyBja,GAC3BuN,GAAuCY,EAErCwJ,GAAyC3X,GAAYia,EACrD1L,EAAkCvO,EACpC6H,EACiB,IAAjB5C,OAAOmJ,GAEL8L,EAAqBxM,SAAuC,OAE3DyM,EAAmBC,GAA0Bnc,EAAAA,UAAS,IACtDoc,EAAgBC,GAAqBrc,EAAAA,SAAc,OACnDsc,EAAmBC,GAAwBvc,EAAAA,SAAiC,OAC5Ewc,EAAQC,GAAazc,WAAsB,CAChD0c,QAAS,IAAIvB,GAASD,SAEjByB,EAAkBC,GAAuB5c,EAAAA,UAAkB,IAC3D6c,EAAgBC,GAAqB9c,EAAAA,SAA0B,KAC/D+c,EAAwBC,GAA6Bhd,EAAAA,SAAiB,IAEtEid,GAAa1D,IAAkBvZ,EAAAA,UAAkB,IACjDkd,GAAe1D,IAAoBxZ,EAAAA,SAA0B,KAC7DmY,GAAOC,IAAYpY,EAAAA,SAAiB,KACpCmd,GAAmBC,IAAwBpd,EAAAA,UAAkB,IAE7Dqd,GAAaC,IAAkBtd,EAAAA,UAAkB,IAEjDud,GAAkBC,GAAOd,IAAWe,GAAQtC,GAAUD,GAAgBsB,EAAQC,GAE/ExO,GAAyBA,CAAC3M,EAAqBnC,KAC/C,GAAA6H,OAAO7H,GAAS,EAAG,OACvB,MAAMue,EAAcb,EAAexL,MAAM3L,IACjC,MAAA4G,KAAEA,GAAS5G,EAEjB,OAAO4G,EAAKhL,KAAOA,CAAA,IAIrBsb,EAAoB5V,OADD0W,GAAapR,MAAMnM,UAAY,MACP6G,OAAO7H,IAElD,MAAMwe,EAA6B1B,EAAmB3G,SAASsI,WAAa,GACtEC,EAAeF,GAAW3a,KAAK0C,IAC7B,MAAA4G,KAAEA,GAAS5G,EAMV,OALH4G,GAAMhL,KAAOA,IACfgL,EAAKnM,SAAW,GAAG6G,OAAO7H,KACrBmN,EAAAwR,uBAA2C,IAAlB9W,OAAO7H,IAGhCuG,CAAA,IAGHqY,EAAoBF,EAAazX,QACpCV,GAAuD,IAA/BsB,OAAOtB,EAAK4G,KAAKnM,YAEvBid,GAAAW,EAAkBvZ,SAAWqZ,EAAarZ,QAC/DyX,EAAmB3G,SAAS0I,QAAQ,IAAIH,GAAa,EAGjDI,GAAaA,KACjBhC,EAAmB3G,SAAS4I,SAAQ,EAGtCC,EAAAA,oBAAoB3O,GAAK,KAAA,CACvByO,cACAL,QAASA,IAAM3B,EAAmB3G,SAASsI,UAC3CI,QAASA,IAAM/B,EAAmB3G,SAAS0I,UAC3CI,iBAAkBA,IAAMnC,EAAmB3G,SAAS8I,uBAGhD,MAYAC,GAAwBA,CAACpb,EAAcqb,EAAoB3E,KAC/D4C,EAAqB5C,GACrB0C,EAAkBpZ,GAClBkZ,GAAuB,EAAI,EA8BvBhD,GAA+BtW,UACnC,MACM6a,GAD6BzB,EAAmB3G,SAASsI,WAAa,IAC9CvM,MAAM3L,IAC5B,MAAA4G,KAAEA,GAAS5G,EAEjB,OAAO4G,EAAKqN,SAAWA,CAAA,IAErB,IAAA4E,EAEAb,IACFa,EAAcb,EAAYpR,MAG5B,MAEM/F,EAFUiH,KAAKC,MAAM8Q,GAAarb,YAAc,MAE1BF,KACzB6C,IAA2E,CAC1EW,SAAUX,EAAOY,UACjBC,YAAab,EAAOwN,iBAIlBmL,EAA6B,CACjClb,UAAWib,GAAajb,UACxBnD,SAAUoe,GAAape,SAAW6G,OAAOuX,EAAYpe,UAAY,EACjE+C,WAAYqD,GAAe,GAC3BuT,YAAa3B,IAGTsG,EAAO,CACX9E,SACAnW,iBACAgb,YAGIE,EAAyB3c,EAC3B4c,GACAC,SAEEF,EAAuBD,EAAI,EAG7BI,GAAkChc,UACtC,IAAI8Z,EAAJ,CACAlB,GAAoB,GAChB,UACItC,GAA6BQ,GAC1BlW,EAAAC,QAAQzB,EAAO,uCACxB2a,GAAoB,GACTqB,IAAA,CACX,QACAxC,GAAoB,EAAK,CAP3BA,CAO2B,EAwBvBpD,GAA4BA,KAChCkB,IAAe,GACfC,GAAiB,IACjBpB,GAAS,GAAE,EAeb/X,EAAAA,WAAU,KACR,GAAIiJ,EAAkB,CACd,MACJvG,UAAUsU,MAAEA,GAAMyH,WAClBA,EAAAC,SACAA,GACEzV,EAEE0V,EAA4BlD,EAC9B9U,OAAO8X,GACP9X,OAAO8X,GAAc9X,OAAO+X,IAAa,EAEvCE,EAAgB5H,EAAM6H,MAAMxZ,GAC5BA,GAAM4G,MAAMS,gBACPrH,EAAK4G,KAAKS,gBAAgBkS,gBAG5B,IAGT3B,GAAe2B,GACGnC,EAAAqC,GAAU9H,IAC5B2F,EAA0BgC,EAAyB,IAEpD,CAAC1V,EAAkBwS,IAEtBzb,EAAAA,WAAU,KACR,GAAIiJ,EAAkB,CACd,MACJvG,UAAUsU,MAAEA,IACV/N,EACEyU,EAAoB1G,EAAMjR,QAAQV,GAA+C,IAAvBA,EAAK4G,KAAKnM,WACrDid,GAAAW,EAAkBvZ,SAAW6S,EAAM7S,OAAM,IAE/D,CAAC8E,IAEE,MAAAmQ,GAAYA,CAACxM,EAAemS,KAC1B,MACJrS,gBAAgBkS,cAAEA,IAChBG,EACJ,OAAIH,EAAsB,GACnBI,GAAgB,CACrBpS,QACAqS,YAAaF,EACbG,SAAUN,EAAgB,GAAKhS,EAC/BuS,YAAY,GACb,EAGGC,GAA2C,CAC/C,CACE1Y,IAAK,UACL2E,MAAOzJ,EAAO,8BACdyd,OAASN,IACP,MAAMnc,EAAe,IAChBmc,EAAIrS,eACPK,cAAegS,EAAIlc,YAEfmK,EAAgBC,EAAwBrK,EAAS,IAEjDC,EAAasK,KAAKC,MAAM2R,EAAIlc,YAC5BwK,EAAmCL,EAAcjH,QAAQV,GAASA,EAAKiI,YAEvEsM,EAAkBhX,EAAQuQ,UAAY,GACtC0G,EACJC,GAAgCF,EAAiB,CAC/C3W,UAAW8b,EAAI9b,UACfyC,WAAYqZ,EAAIrZ,cACZqZ,EAAIvS,aAGV,OAAA7I,EAAAA,KAACC,EAAA,CACCvE,GAAI,CACFgI,QAAS,OACTO,WAAY,cAGdnE,SAAA,CAAAxD,EAAAA,IAACuY,GAAA,CACCjL,IAAKsM,GAAgBrM,EACrBwM,IAAI,cACJtQ,QAAQ,gBAET9F,EACC,CAAAH,SAAA,CAAAxD,EAAAA,IAAC4D,EAAA,CACCxD,QAAQ,QACRoI,MAAM,UACNjE,QAASA,KACD,MACJmG,UAAUuP,OAAEA,IACVxP,OAEJA,OAAOC,SAASC,KAAO,GAAGsP,IAAS6E,EAAIxF,YAAU,EAEnDla,GAAI,CACFyO,OAAQ,WAGTrK,SAAIsb,EAAAtS,oBAEN5I,EAAW,CAAAxD,QAAQ,QAAQoI,MAAM,UAC/BhF,WAAIiC,aAEN7C,EAAWsB,OAAS,GAAKkJ,EAAalJ,OAAS,GAC9ClE,EAAAA,IAAC2D,EACE,CAAAH,SAAA4J,EAAa1K,KAAK6C,GACjBvF,EAAAA,IAAC4D,EAAA,CACCxE,GAAI,CACFkJ,SAAU,UACVC,WAAY,MACZC,MAAO,WAIRhF,SAAG,GAAA+B,EAAOiI,eAAejI,EAAO8H,aAF5B9H,EAAOiI,gBAQnBsR,GAAKtF,aAAesF,GAAKtF,YAAYU,OAAOhW,OAAS,GACpDlE,EAAAA,IAAC4D,EAAA,CACCxE,GAAI,CACFkJ,SAAU,UACVE,MAAO,UACPX,UAAW,UAGZrE,SAAIsb,EAAAtF,mBAIb,EAGJna,MAAO,MACPggB,YAAY,GAEd,CACE5Y,IAAK,QACL2E,MAAOzJ,EAAO,4BACdyd,OAASN,IACP,MAAMpS,UAAEA,EAAA6M,SAAWA,EAAW,GAAMuF,EAC9BQ,EAAa7F,GAAW/S,OAAOgG,GAAYhG,OAAO6S,IAGtD,OAAAvZ,EAAAA,IAAC4D,EAAA,CACCxE,GAAI,CACFkI,QAAS,UAGV9D,SAAU2V,GAAA1L,EAAe6R,GAAaR,IACzC,EAGJzf,MAAO,MACPkgB,MAAO,CACLlW,UAAW,UAGf,CACE5C,IAAK,MACL2E,MAAOzJ,EAAO,+BACdyd,OAASN,GACP9e,EAAAA,IAAC0a,GAAA,CACCxa,KAAK,QACLC,KAAK,SACLC,QAAQ,SACRhB,GAAI,CACFC,MAAO,QAETV,UACEya,GAAyCN,GAAoByC,EAE/D1c,MAAOigB,EAAIjf,SACXU,WAAY,CACVC,UAAW,UACXC,QAAS,UAEXtB,SAAWuB,IACTiN,GAAuBmR,EAAI9d,GAAIN,EAAEC,OAAO9B,MAAK,EAE/C+B,OAAQA,KACN2d,GAAgCO,EAAIzF,OAAM,IAIhDha,MAAO,MACPkgB,MAAO,CACLlW,UAAW,SAEbgW,YAAY,GAEd,CACE5Y,IAAK,QACL2E,MAAOzJ,EAAO,4BACdyd,OAASN,IACD,MAAApS,UACJA,EAAA7M,SACAA,EAAAwZ,OACAA,EACA5M,gBAAgBqG,QAAEA,GAAQyG,SAC1BA,EAAW,GACTuF,EAIEU,EAFa/F,GAAW/S,OAAOgG,GAAYhG,OAAO6S,IAExB7S,OAAO7G,GAIjC6Z,GAFa5G,GAAW5F,KAAKC,MAAM2R,EAAIlc,aAGhCsB,OAAS,IACnB4U,IACAyC,GACDnC,EAEF,cACGzV,EACC,CAAAH,SAAA,CAAAxD,EAAAA,IAAC4D,EAAA,CACCxE,GAAI,CACFkI,QAAS,UAGV9D,SAAU2V,GAAA1L,EAAe+R,GAAaV,KAEzC9e,EAAAA,IAAC2D,EAAA,CACCvE,GAAI,CACFyI,UAAW,OACX4S,QAAS,EACTpR,UAAW5K,EAAW,MAAQ,QAC9B2I,QAAS,OACTc,eAAgB,YAElBlH,GAAG,0BAEFwC,YAEGE,EAAAA,KAAAgR,EAAAA,SAAA,CAAAlR,SAAA,CAAAxD,EAAAA,IAACuL,EAAA,CACCnG,MAAI,EACJhG,GAAI,CACFG,YAAa,SACbkV,SAAU,QAGZjR,SAAAxD,EAAAA,IAACma,GAAA,CACC/a,GAAI,CACFyO,OAAQ,UACRrF,MAAO,uBAETjE,QAASA,KACP0U,IAAe,GACEC,GAAAxS,OAAO2S,IAEpByF,EAAItF,aACN1B,GAASgH,EAAItF,YAAW,MAMhCxZ,EAAAA,IAACuL,EAAA,CACCnG,MAAI,EACJhG,GAAI,CACFG,YAAama,EAAkB,SAAW,GAC1Cpa,WAAYoa,EAAkB,SAAW,IAG1ClW,SACCkW,GAAA1Z,EAAAA,IAACoa,GAAA,CACChb,GAAI,CACFyO,OAAQ,UACRrF,MAAO,uBAETjE,QAASA,KACD,MAAAkI,eAAEA,YAAgBzJ,EAAWqW,OAAAA,EAAQzW,WAAAA,EAAY/C,SAAAA,GAAaif,EAEpEf,GACE,IACKtR,EACHK,cAAelK,EACf/C,SAAAA,GAEFmD,EACAqW,EACF,MAKRrZ,EAAAA,IAACuL,EAAA,CACCnG,MAAI,EACJhG,GAAI,CACFE,WAAY,UAGbkE,SACC4V,IAACN,IACAyC,GACCvb,EAAAA,IAAC4N,GAAA,CACCxO,GAAI,CACFyO,OAAQ,UACRrF,MAAO,uBAETjE,QAASA,KACPmL,GAAc,GACE4L,EAAA5U,OAAO2S,GAAO,aAQhD,EAGJha,MAAO,MACPkgB,MAAO,CACLlW,UAAW,WAKjB,cACGgR,GACC,CAAA7W,SAAA,CAAAE,EAAAA,KAACC,EAAA,CACCvE,GAAI,CACFgI,QAAS,OACTO,WAAY,SACZO,eAAgB,gBAChB7D,OAAQ,cAGVb,SAAA,CAAAxD,EAAAA,IAAC4D,EAAA,CACCxE,GAAI,CACFkJ,SAAU,QAGX9E,WAAO,uCAAwC,CAC9C3D,SAAUmJ,GAAkBvG,UAAUgd,YAAc,MAGxDzf,EAAAA,IAAC4D,EAAA,CACCxE,GAAI,CACFkJ,SAAU,QAGX9E,SAAcuZ,GAAA,GAAKtP,EAAegP,GAA0B,QAGjEzc,EAAAA,IAAC2D,EAAA,CACCvE,GAAI,CACFmE,aAAc,OAGhBC,SAAAxD,EAAAA,IAAC0f,GAAA,CACCC,cAAc,sBACdC,aAAelf,IA/eK6B,WAChB4Z,EAAA,IACLD,EACHA,OAAQ2D,GACT,EA4eOC,CAAoBpf,EAAC,MAK3BV,EAAAA,IAAC+f,GAAA,CACC7Q,IAAKyM,EACLwD,eACAa,mBAAoB,CAAC,GAAI,GAAI,IAC7BC,eAAgB7E,EAChB8E,aAAchE,EACdiE,gBAAgB,EAChBC,cAAY,EACZC,uBAAqB,EACrBC,yBAAyB,EACzBC,gBACE1D,KACC7M,IACK9G,GAAyBsF,IAC1BsK,GAAoByC,IAAoBnC,GAE/CoH,OAAK,EACLC,iBAAkB9e,EAAO,mCACzB+e,YAAY,EACZC,eAAgBxF,EAChByF,kBAraqBC,IACrB,GAAAA,EAAe3c,OAAS,EAAG,CAC7B,MAAM4c,EAAcnF,EAAmB3G,SAASsI,WAAa,GACvDyD,EAAmC,GAC1BF,EAAA1b,SAASC,IACtB,MAAM4b,EAAWF,EAAY/P,MAAMpO,IAC3B,MAAAqJ,KAAEA,GAASrJ,EAEjB,OAAOqJ,EAAKhL,KAAOoE,CAAA,IAGjB4b,GAAuBD,EAAAlb,KAAKmb,EAAQ,IAG5B3F,EAAA,IAAI0F,GAAa,MAE/B1F,EAAc,GAAE,EAsZd4F,oBAAqB,EACrBC,WAAYvf,EAAO,sCACnBwf,cAAejE,GACfd,WACAgF,SAAUnE,GACVvb,SAAS,2BACT2f,WAAYA,CAACvC,EAAKzS,EAAOuM,IACvB5Y,EAAAA,IAACwY,GAAA,CACCO,IAAK/P,GAAkBvG,UAAUsU,MAAM7S,QAAU,EACjDkB,KAAM0Z,EACN9F,UAAW3M,EACX8M,aACAT,OAAQqF,GACRpF,SAAU2C,EACV1C,WACAlJ,gBACAuJ,kBACAC,oBACApB,YACAnK,0BACAkL,6BAA8B0F,GAC9BzF,iBAAkBA,GAAoByC,EACtCnC,6CAKNpZ,EAAAA,IAACshB,GAAA,CACC3c,OAAQiX,EACR7Z,UAAWmZ,EACXlZ,aAAcmZ,EACdxY,QAASmZ,EACT3b,KAAK,eACLohB,SApiBkCC,KACtCvF,EAAqB,IACrBJ,GAAuB,EAAK,EAmiBxB4F,UA1hBmClf,UACvC4Y,GAAoB,GACd,MAAAiD,EAAyB3c,EAC3B4c,GACAC,GACA,IACI,MAAAoD,EAAiB7e,EAAoBJ,EAAS,GAAGK,oBAAqBL,EAAS,IAC/E0b,EAAO,CACX9E,OAAQ2C,EACR9Y,iBACAgb,SAAU,CACRlb,UAAWP,EAAS,GAAGO,UACvBnD,SAAU4C,EAAS,GAAG5C,SACtB+C,WAAY8e,GAAkB,WAI5BtD,EAAuBD,GAC7BtC,GAAuB,GACvBI,EAAqB,IACZ9Y,EAAAC,QAAQzB,EAAO,sCACbgc,IAAA,CACX,QACAxC,GAAoB,EAAK,GAogBvBwG,QAAM,EACNlgB,cAGFzB,EAAAA,IAAC4X,GAAA,CACC3J,KAAM0O,GACN9E,SACAC,YACAC,6BACAC,wBAxb0BzV,UAC9B4Y,GAAoB,GAChB,IACwBpD,WACpBc,GAA6B+D,IAC1BzZ,EAAAC,QAAQzB,EAAO,2CACbgc,IAAA,CACX,QACAxC,GAAoB,EAAK,OAob/B,IPvuBMyG,GAAqBpS,IACrB,GAAAA,EAAWtL,OAAS,EAAG,CACzB,IAAI0I,EAAQ,EAYZ,OAVW4C,EAAArK,SAASC,IACZ,MACJ4G,MAAMnM,SAAEA,EAAU6M,UAAAA,EAAA6M,SAAWA,IAC3BnU,EAEEuH,EAAQ8M,GAAW/S,OAAOgG,GAAYhG,OAAO6S,IAE1C3M,GAAAD,EAAQjG,OAAO7G,EAAQ,IAG1B,IAAO+M,EAAS,GAAA,CAEnB,OAAA,CAAA,EAoET,SAAS5F,IAAoBF,YAAEA,IACvB,MAAA9F,GACJA,EAAA0U,cACAA,EAAAlH,oBACAA,EAAA/M,UACAA,EAAAoO,KACAA,EAAAnB,WACAA,EAAAmT,aACAA,EAAA7S,oCACAA,EAAA1F,6BACAA,EAAAyG,eACAA,EAAAqC,YACAA,EAAA0P,gBACAA,EAAAC,uBACAA,GA/EJ,WACE,MAAM/gB,GAAEA,EAAK,IAAOghB,MAElBjhB,OAAO2U,cAAEA,EAAelH,oBAAAA,GAAsB,IAC5CvN,EAAAA,WAAWwN,GACThN,EAAYL,EAAe6gB,KACzBC,cAAeC,GAAiB/gB,EAAeyI,GACjDgG,EAAOzO,GAAe,EAAGC,aAAcA,EAAQ0N,SAASc,OACxDhB,EAAYzN,GAAe,EAAGC,aAAcA,EAAQC,YAAYN,KAChE8N,EAAkB1N,GAAe,EAAGC,aAAcA,EAAQ0N,SAASD,kBAEnEJ,EAAatN,GAAe,EAAGuN,iBAAkBA,EAAYC,kBAAkBF,aAG/EmT,EADQO,IACaC,QAAQC,QAAQC,MAErCvT,oCACJA,EAAAC,yBACAA,EAAA3F,6BACAA,GACElI,EAAemI,GAyBZ,MAAA,CACLvI,KACA0U,gBACAlH,sBACA/M,YACAoO,OACAnB,aACAmT,eACA7S,sCACA1F,+BACAyG,gBAjCqBtO,GAAYwN,EAkCjCmD,YAhCkB7P,UAClB,MAAMuQ,EAAU,CAAEZ,aAAYiQ,eAActT,YAAWC,oBACjDrC,eAAEA,GAAmBhL,QACjB4Q,EAAkBS,SAClBR,EAAiBQ,GAE3B,OAAON,EAAuB/F,EAAc,EA2B5CqV,gBAxBuBU,IACvB,MAAM1P,EAAU,IAAK0P,EAAQxhB,MAE7B,OAAOS,EAAYghB,GAA0B3P,GAAW4P,GAAyB5P,EAAO,EAsBxFiP,uBAnB8B1I,IAC9B,MAAMvG,EAAU,CAAEuG,SAAQnW,eAAgBlC,GAE1C,OAAOS,EAAYkhB,GAA0B7P,GAAW8P,GAAyB9P,EAAO,EAkB5F,CAoBM+P,GACEhN,EAAWC,MACVrX,GAAYC,KACbokB,SAAEA,GAAa7hB,EAAAA,WAAWC,IAE1BS,EAASC,IAETmhB,EAAW5T,SAA6B,OAEvCK,EAAY6L,GAAiB3b,EAAAA,SAA2B,KACxDsJ,EAAkBga,GAAuBtjB,EAAAA,SAAuC,OAChF6V,EAAc0N,GAAmBvjB,EAAAA,SAAmC,OACpEwb,EAAkBC,GAAuBzb,EAAAA,UAAS,IAElDwjB,EAAYxT,GAAiBhQ,EAAAA,UAAkB,IAC/CyjB,EAAc7H,GAAmB5b,EAAAA,SAA0B,KAE3D0jB,EAAyBha,GAA8B1J,EAAAA,SAA0B,KACjF2jB,EAAyBla,GAA8BzJ,EAAAA,SAA0B,KAEjFwJ,EAAuBoa,GAA4B5jB,EAAAA,UAAkB,IACrEkQ,GAAuB2T,IAA4B7jB,EAAAA,UAAkB,GAEtE0Z,IAAyC3X,GAC3CuN,GAAuCY,GAGrCqG,GAAqBI,EAAAA,SAAQ,KACjC,GAAI5U,GAAauH,EAAkB,CACjC,MAAM1H,YAAEA,EAAaiU,aAAAA,GAAiBvM,GAC9BM,6BAA8BgN,GAAqCE,GAOpE,OANmCK,GAAsB,CAC9DH,KAAMJ,EACNzH,UAAWnI,OAAOpF,GAAauN,WAAa,GAC5C8H,OAAQjQ,OAAO6O,GAAcoB,QAAU,IAGlC,CAGF,OAAArN,CAAA,GACN,CAACA,EAA8B7H,EAAWuH,IACvCgH,GAAkCvO,EACpCwU,GACApG,IAAS2T,GAAaC,aAEpBlI,GAA+C,IAA7BvS,GAAkBzH,QAAgByO,GAEpD8I,GAAgD,KAA7B9P,GAAkBzH,QAA8C,KAA7ByH,GAAkBzH,OAM9ExB,EAAAA,WAAU,KACC+iB,EAAA,CACP3iB,KAAM,OACNujB,QAAS,CACP1iB,GAAIlB,SAASkB,EAAI,KAAO,IAE3B,GAGA,CAACA,IAEE,MAkGAQ,GAAaA,KACjBuhB,EAAS/N,SAAS2I,YAAW,EAGzBzP,GAAoBA,KACxBwB,GAAc,GACd4L,EAAgB,GAAE,EAsEpB,OApBAvb,EAAAA,WAAU,KACJwb,IATsBhZ,WACpB,MACJohB,yBAAyBC,UAAEA,UACnBC,KAEeP,EAAc,MAAdM,GAAqB7T,EAAc,EAInB+T,EAAA,GAExC,CAACvI,KAEJxb,EAAAA,WAAU,KACR,GAAI0B,GAAauH,EAAkB,CACjC,MAAM1H,YAAEA,EAAaiU,aAAAA,GAAiBvM,GAE9BgG,oCAAAA,GAAwCwH,GAC1CuN,EAAgClN,GAAsB,CAC1DH,KAAM1H,EACNH,UAAWnI,OAAOpF,GAAauN,WAAa,GAC5C8H,OAAQjQ,OAAO6O,GAAcoB,QAAU,KAGzC4M,GAAyBQ,EAA6B,IAEvD,CAAC/a,EAAkBvH,IAIlBiC,EAAAA,KAAAgR,WAAA,CAAAlR,SAAA,CAAAE,EAAAA,KAACC,EAAA,CACCvE,GAAI,CACFgI,QAAS,OACTY,cAAe,SACfgS,KAAM,GAGRxW,SAAA,CAAAxD,EAAAA,IAACsV,GAAA,CACC7T,YACAuH,mBACAuM,eACA1F,OACA4F,kBA3MkBA,KACxBI,EAAS,iBAAgB,EA2MnBL,yBAzHyBjT,UAC/B4Y,GAAoB,GAChB,IACF,MAAMqH,EAAwC,CAC5CxhB,GAAI0F,OAAO1F,GACX0Q,KAAM1I,GAAkB0I,MAAQ,GAChC+F,YAAazO,GAAkByO,aAAe,IAG5ChW,QACIuiB,GAAsB,IACvBxB,EACHjhB,iBAGI0iB,GAAqB,IACtBzB,EACH0B,eAIK/gB,EAAAC,QAAQzB,EAAO,0CAA2C,CACjE0B,SAAS,IAEX0f,EAAS/N,SAAS2I,YAAW,CAC7B,QACAxC,GAAoB,EAAK,GAgGrBrU,cACA4H,aACAgH,gBACA/F,YAAakS,IAGfne,EAAAA,KAAC6H,EAAA,CACC2I,WAAS,EACTC,QAAS,EACT/U,GAAI,CACFyI,UAAW,IACXsc,SAAU,OACV3c,SAAU/I,EAAW,OAAS,SAC9BiJ,cAAe,OACfnE,aAAc9E,EAAW,OAAS,GAGpC+E,SAAA,CAAAxD,EAAAA,IAAC2D,EAAA,CACCvE,GACEX,EACI,CACEsJ,UAAW,OACX+R,GAAI,QAEN,CACE/R,UAAW,QACXI,SAAU,EACVic,GAAI,OACJC,GAAI,QAIZ7gB,SAACxD,EAAAA,IAAA2L,EAAA,CAAOC,WAAYsP,EAAkBoJ,eAAe,OACnD9gB,SAAAxD,EAAAA,IAACuL,EAAA,CACCnG,MAAI,EACJhG,GACEX,EACI,CACEsJ,UAAW,QAEb,CACEA,UAAW,QACXI,SAAU,GAIlB3E,SAAAxD,EAAAA,IAACukB,GAAA,CACCrV,IAAK6T,EACLjK,oBACAyC,mBACArS,wBACAmS,gBACArS,mBACAkS,mBACAC,sBACAjY,eAAgBlC,EAChBoa,uBA7Me7Y,UACvB,MAAAiiB,QAA+B1C,EAAgBU,IAGnD/f,UAAUsU,MAAEA,EAAA0I,WAAOA,IACjB+E,EAEEC,OAhDsBliB,WACxB,GAAAkiB,EAAavgB,OAAS,EACpB,IACF,MAAMgO,EAAuB,GAChBuS,EAAAtf,SAASC,IACd,MAAA4G,KAAEA,GAAS5G,EACZ8M,EAAWC,SAASnG,EAAKjJ,YACjBmP,EAAArM,KAAKmG,EAAKjJ,UAAS,IAI5B,MAAA2hB,QAA0BtS,EAAYF,GAqBrC,OAnBMuS,EAAAtf,SAASC,IACd,MAAA4G,KAAEA,GAAS5G,EAEX4Z,EAAc0F,EAAkB3T,MAAMmL,IACpC,MAAElb,GAAI+B,GAAcmZ,EAE1B,OAAOlQ,EAAKjJ,YAAcA,CAAA,IAGvBiJ,EAAAS,eAAiBuS,GAAe,CAAC,EACjChT,EAAAQ,YAAcwS,GAAatN,MAAQ1F,EAAKQ,YACxCR,EAAAsN,WAAa0F,GAAa1F,YAActN,EAAKsN,WAElDtN,EAAKwR,wBAAyB,EACR,IAAlBxR,EAAKnM,WACPmM,EAAKwR,wBAAyB,EAAA,IAI3BiH,QACAE,GACPxhB,EAAS9C,MAAMskB,EAAG,CAItB,MAAO,EAAC,EAUmBC,CAAsB7N,GAOjD,aALMtD,EAA0BgR,EAAc,KAE1ChjB,GAA2BwhB,EAAAuB,EAAuBjP,cACtDyN,EAAoBwB,GAEfC,EAOE,CACL1N,MAAO0N,EACPhF,cARO,CACL1I,MAAO,GACP0I,WAAY,EAOhB,EAsLc/P,gBACA4L,kBACA7Z,YACA+M,sBACAoB,yBACAC,eAMR7P,EAAAA,IAACuL,EAAA,CACCnG,MAAI,EACJhG,GACEX,EACI,CACEsJ,UAAW,QAEb,CACEA,UAAW,SAIlBvE,SAA0C4V,KAACN,KAAqByC,IAC/Dvb,EAAAA,IAACc,GAAA,CACCU,cACArB,KAAK,eACLsB,oBAMNqX,KACC5P,GAAyBsF,IAAwB+M,KAChDvb,EAAAA,IAACuO,GAAA,CACCvF,mBACAE,wBACAsG,aACAC,iBAAkBmS,GAAkBpS,GACpC9F,WAAYyR,EACZzL,gBACAvG,6BACAC,6BACA3H,YACAkO,YAAakS,EACbjS,yBACAC,YAKR7P,EAAAA,IAAC+I,GAAA,CACCC,mBACA6G,OACApN,SAAU4gB,EACVpa,gBAAiBma,EAAwBlf,OACzCgF,wBACAC,6BACAC,6BACAC,UAAW5K,EAAW,OAAS,UAGjCuB,EAAAA,IAACgO,GAAA,CACCC,KAAMiV,EACNhV,qBACAC,yBA5K2B5L,eAlCPA,OAAO8W,EAA0B,MACzD8B,GAAoB,GAEhB,IACF,GAAI9B,GAGE,SAFE0I,EAAuB1I,GAEzB7J,EAAWtL,OAAS,EAAG,CACzB,MAAM2gB,EAAgBrV,EAAW1J,QAAQV,IACvC,MAAQiU,OAAQyL,GAAkB1f,EAAK4G,KAEvC,OAAOqN,IAAWyL,CAAA,IAGNzJ,EAAA,IAAIwJ,GAAc,MAE7B,CACD,GAAsB,IAAtBrV,EAAWtL,OAAc,OAClBsL,EAAArK,SAAQ5C,UACX,MAAAyJ,KAAEA,GAAS5G,QAEX2c,EAAuB/V,EAAKqN,OAAM,IAG1CgC,EAAc,GAAE,CAGTlY,EAAAC,QAAQzB,EAAO,+BAA8B,CACtD,QACAwZ,GAAoB,GACT3Z,IAAA,GAKPujB,CAAkBre,OAAOyc,UACzBjV,IAAkB,MA8K5B"}