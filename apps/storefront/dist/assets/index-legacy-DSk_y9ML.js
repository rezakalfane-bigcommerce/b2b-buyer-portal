System.register(["./mui-legacy-nJi-LPwx.js","./reactVendor-legacy-CtYIj4Ma.js","./lang-legacy-1f-gtWXv.js","./react-setup-legacy-DuBzGPOI.js","./B3Filter-legacy-Dn314qq4.js","./load-functions-legacy-Cd9k4nWw.js","./base-legacy-D2P4nFX7.js","./Edit-legacy-BK8HCqme.js","./form-legacy-CAo5v63e.js","./B3CustomForm-legacy-CZbiJ61c.js","./ShoppingStatus-legacy-D2QXIsal.js","./router-legacy-s4T0V6vG.js","./intl-legacy-B7uNycgM.js","./eCache-legacy-CW-H9Ud9.js","./redux-legacy-D5ZHjMNV.js","./toolkit-legacy-uWyLsHZ1.js","./lodashEs-legacy-5FC1NR51.js","../index-legacy.CUzweyJF.js","./global-legacy-B1EgakWG.js","./muiIcon-legacy-CbXEHT38.js","./dateFns-legacy-Bs-ooDPO.js","./dropzone-legacy-C0uLCPXC.js","./B3FilterMore-legacy-D080M85H.js","./B3FilterSearch-legacy-CRbD-f_e.js"],(function(e,s){"use strict";var t,i,n,a,o,r,l,c,d,p,u,h,g,m,f,x,y,j,S,L,b,B,C,I,P,k,w,v,E,z,F,A,N,R,O,U,V,D,H,M,q,W,$,_,G,J,T;return{setters:[e=>{t=e.j,i=e.o,n=e.L,a=e.ae,o=e.T,r=e.B,l=e.x,c=e.I},e=>{d=e.r},e=>{p=e.u},e=>{u=e.u,h=e.a0,g=e.ab,m=e.b9,f=e.ba,x=e.c5,y=e.c6,j=e.ag,S=e.c7,L=e.c8,b=e.af,B=e.r,C=e.am,I=e.ar,P=e.au,k=e.ad,w=e.ai,v=e.a,E=e.G,z=e.ac,F=e.ak,A=e.t,N=e.bJ,R=e.c9,O=e.ca,U=e.bb,V=e.bc},e=>{D=e.B},null,null,e=>{H=e.d,M=e.a,q=e.u},e=>{W=e.u},e=>{$=e.B},e=>{_=e.g,G=e.S,J=e.u},e=>{T=e.u},null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){e("default",(function(){const[e,i]=d.useState(!1),[n,a]=d.useState(!1),[o,l]=d.useState(null),[c,m]=d.useState([]),f=J(),[x]=v(),y=p(),[S]=M(),{isB2BUser:L,shoppingListCreateActionsPermission:B,submitShoppingListPermission:C,deleteShoppingList:I,getUserShoppingLists:P}=function(){const e=u((({b2bFeatures:e})=>e.masqueradeCompany.id)),s=u(A),t=u((({company:e})=>e.companyInfo.id)),{shoppingListCreateActionsPermission:i,submitShoppingListPermission:n}=u(h),a=t||e,o=s?R:O,r=s?()=>N(Number(a),1):()=>Promise.resolve({});return{isB2BUser:s,shoppingListCreateActionsPermission:i,submitShoppingListPermission:n,deleteShoppingList:o,getUserShoppingLists:r}}(),{state:{openAPPParams:k},dispatch:w}=d.useContext(E);d.useEffect((()=>{(async()=>{m(f(C,await P()))})(),k.shoppingListBtn&&w({type:"common",payload:{openAPPParams:{quoteBtn:"",shoppingListBtn:""}}})}),[]);const H=q(),W={isEnabled:!L||B,customLabel:y("shoppingLists.createNew"),customButtonStyle:{fontSize:"15px",fontWeight:"500",width:"140px",padding:"0"}},$=C?"":[0,40],_={search:"",createdBy:"",status:$,isDefault:!0},[G,T]=d.useState(_),X=d.useRef(null),Z=()=>{S.current?.refresh()},K=e=>{X.current?.handleOpenAddEditShoppingListsClick("edit",e)},Q=e=>{X.current?.handleOpenAddEditShoppingListsClick("dup",e)},Y=e=>{l(e),a(!0)},ee=()=>{a(!1)};return t.jsx(z,{isSpinning:e,children:t.jsxs(r,{sx:{display:"flex",flexDirection:"column",flex:1},children:[t.jsx(D,{showB3FilterMoreIcon:L,filterMoreInfo:c,handleChange:(e,s)=>{if("search"===e){const e={..._,search:s};T(e)}},handleFilterChange:e=>{const{status:s}=e,t=""===s||99===s?$:s,i={..._,createdBy:e.createdBy,status:t,isDefault:""===s};T(i)},customButtonConfig:W,handleFilterCustomButtonClick:()=>{X.current?.handleOpenAddEditShoppingListsClick("add")}}),t.jsx(F,{columnItems:[],ref:S,rowsPerPageOptions:[12,24,36],getRequestList:async e=>{const{edges:s,totalCount:t}=L?await U(e):await V({offset:e.offset,first:e.first,search:e.search,channelId:j});return{edges:s,totalCount:t}},searchParams:G,isCustomRender:!0,itemXs:H?3:4,requestLoading:i,renderItem:e=>t.jsx(ie,{item:e,isPermissions:!L||B,onEdit:K,onDelete:Y,onCopy:Q,isB2BUser:L},e.id||"")}),t.jsx(s,{renderList:Z,ref:X,isB2BUser:L}),t.jsx(g,{isOpen:n,title:y("shoppingLists.deleteShoppingList"),leftSizeBtn:y("shoppingLists.cancel"),rightSizeBtn:y("shoppingLists.delete"),handleLeftClick:ee,handRightClick:async()=>{if(o)try{i(!0),ee(),await I(o?.id||0),b.success(y("shoppingLists.deleteSuccess"))}finally{i(!1),Z()}},row:o,rightStyleBtn:{color:"#D32F2F"},isShowBordered:!1,children:t.jsx(r,{sx:{display:"flex",justifyContent:x?"center%":"start",width:x?"100%":"450px",height:"100%"},children:y("shoppingLists.confirmDelete")})})]})})}));const s=d.forwardRef((function({renderList:e,isB2BUser:s},i){const n=u(h),{selectCompanyHierarchyId:a}=u((({company:e})=>e.companyHierarchyInfo)),[o,r]=d.useState(!1),[l,c]=d.useState(""),[B,C]=d.useState(null),[I,P]=d.useState(!1),[k,w]=d.useState([]),v=p(),{control:E,handleSubmit:z,getValues:F,formState:{errors:A},clearErrors:N,setValue:R}=W({mode:"onSubmit"});d.useEffect((()=>{o&&"add"!==l&&B&&k.forEach((e=>{R(e.name,B[e.name])}))}),[B,o,R,l,k]);const O=()=>{k.forEach((e=>{R(e.name,"")})),N(),r(!1)},U=(e,s)=>{const t=_(v);w(t),s&&C(s),c(e),r(!0)};return d.useImperativeHandle(i,(()=>({handleOpenAddEditShoppingListsClick:U}))),t.jsx(g,{isOpen:o,title:v("edit"===l?"shoppingLists.edit":"add"===l?"shoppingLists.createNewShoppingList":"shoppingLists.duplicateShoppingList"),leftSizeBtn:v("shoppingLists.cancel"),rightSizeBtn:v("shoppingLists.save"),handleLeftClick:O,handRightClick:()=>{z((async t=>{P(!0);try{const i={...t};let o=s?m:f,r=v("shoppingLists.addSuccess");if("edit"===l)s?(o=x,i.status=B?.status):(o=y,i.channelId=j),i.id=B?.id||0,r=v("shoppingLists.updateSuccess");else if("dup"===l)o=s?S:L,i.sampleShoppingListId=B?.id||0,r=v("shoppingLists.duplicateSuccess");else if("add"===l)if(s){const{submitShoppingListPermission:e}=n;a&&(i.companyId=Number(a)),i.status=e?30:0}else i.channelId=j;await o(i),O(),b.success(r),e()}finally{P(!1)}}))()},loading:I,children:t.jsx($,{formFields:k,errors:A,control:E,getValues:F,setValue:R})})}));var X={},Z=i;Object.defineProperty(X,"__esModule",{value:!0});var K=X.default=void 0,Q=Z(B()),Y=t;K=X.default=(0,Q.default)((0,Y.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"}),"ContentCopy");const ee=l("div")((()=>({display:"flex",alignItems:"center",justifyContent:"space-between"}))),se=l(o)((()=>({fontWeight:"500",paddingRight:"5px"}))),te=l(r)((()=>({display:"flex",alignItems:"center",justifyContent:"start"})));function ie(e){const{item:s,onEdit:i,onDelete:l,onCopy:g,isPermissions:m,isB2BUser:f}=e,x=p(),[y,j]=d.useState(!0),{submitShoppingListPermission:S,approveShoppingListPermission:L}=u(h),b=T();return d.useEffect((()=>{if(f){const{companyInfo:e,customerInfo:t}=s,{shoppingListCreateActionsPermission:i}=C,n=I({code:i,companyId:Number(e?.companyId||0),userId:Number(t.userId)});j(n)}}),[s,f]),t.jsx(n,{sx:{"& .b2b-card-content":{paddingBottom:"16px"}},children:t.jsxs(a,{className:"b2b-card-content",sx:{color:"#313440"},children:[t.jsx(o,{variant:"h5",sx:{color:"rgba(0, 0, 0, 0.87)",width:"100%",wordBreak:"break-all"},children:s.name}),t.jsxs(r,{sx:{pt:"8px",pb:"20px"},children:[f&&(S||L&&s.approvedFlag)&&t.jsx(r,{sx:{pb:"25px"},children:t.jsx(G,{status:s.status})}),t.jsx(r,{sx:{width:"100%",wordBreak:"break-all"},children:s.description}),f&&t.jsxs(te,{children:[t.jsx(se,{children:x("shoppingLists.card.createdBy")}),s.customerInfo.firstName," ",s.customerInfo.lastName]}),t.jsxs(te,{children:[t.jsx(se,{children:x("shoppingLists.card.products")}),s.products.totalCount]}),t.jsxs(te,{children:[t.jsx(se,{children:x("shoppingLists.card.lastActivity")}),`${P(s.updatedAt)}`]})]}),t.jsxs(ee,{children:[t.jsx(k,{sx:{m:"0 0 0 -8px",minWidth:0},variant:"text",onClick:()=>b(`/shoppingList/${s.id}`,{state:{from:"shoppingList"}}),children:x("shoppingLists.card.view")}),t.jsxs(r,{sx:{display:m?"block":"none"},children:[(B=s.status,!(S?30!==B&&0!==B:40===B)&&y&&t.jsx(c,{"aria-label":"edit",size:"medium",sx:{marginRight:"8px"},onClick:()=>{i(s)},children:t.jsx(H,{fontSize:"inherit"})})),t.jsx(c,{"aria-label":"duplicate",size:"medium",sx:{marginRight:"8px"},onClick:()=>{g(s)},children:t.jsx(K,{fontSize:"inherit"})}),!(e=>!!S&&20!==e&&30!==e)(s.status)&&y&&t.jsx(c,{"aria-label":"delete",size:"medium",onClick:()=>{l(s)},children:t.jsx(w,{fontSize:"inherit"})})]})]})]})},s.id);var B}}}}));
//# sourceMappingURL=index-legacy-DSk_y9ML.js.map
