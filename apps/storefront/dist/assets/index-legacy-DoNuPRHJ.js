System.register(["./mui-legacy-CLOaLEk9.js","./reactVendor-legacy-CtYIj4Ma.js","./lang-legacy-TODaA4m_.js","./react-setup-legacy-CJFY1VSJ.js","./load-functions-legacy-BQBPfliD.js","./base-legacy-D2P4nFX7.js","./QuoteStatus-legacy-OAFz_b1D.js","./getQuoteExtraFields-legacy-BWmIn_Se.js","./dateFns-legacy-C2RUCIEF.js","./b3checkout-legacy-BRCVYOxz.js","./router-legacy-s4T0V6vG.js","./muiIcon-legacy-D-EcFXKh.js","./lodashEs-legacy-5FC1NR51.js","./intl-legacy-B7uNycgM.js","./eCache-legacy-CW-H9Ud9.js","./redux-legacy-D5ZHjMNV.js","./toolkit-legacy-uWyLsHZ1.js","../index-legacy.C2G06ioT.js","./global-legacy-B1EgakWG.js","./dropzone-legacy-CIQbZZBD.js"],(function(e,t){"use strict";var r,s,n,a,i,o,l,c,u,d,p,m,x,h,g,f,y,b,j,C,q,w,D,N,S,v,P,k,T,I,E,R,A,B,F,$,L,H,z,U,M,Q,O,V,_,W,G,Z,K,Y,X,J,ee,te,re,se,ne,ae,ie,oe,le,ce,ue,de,pe,me,xe,he,ge,fe,ye,be;return{setters:[e=>{r=e.o,s=e.j,n=e.z,a=e.B,i=e.L,o=e.ae,l=e.f,c=e.am,u=e.G,d=e.T,p=e.s,m=e.d},e=>{x=e.g,h=e.r},e=>{g=e.u},e=>{f=e.r,y=e.G,b=e.u,j=e.a0,C=e.ac,q=e.aW,w=e.aH,D=e.a5,N=e.bd,S=e.be,v=e.aF,P=e.a,k=e.ad,T=e.C,I=e.k,E=e.a8,R=e.au,A=e.bf,B=e.bg,F=e.aN,$=e.ak,L=e.aZ,H=e.am,z=e.bh,U=e.af,M=e.bi,Q=e.t,O=e.aY,V=e.ar,_=e.a_,W=e.a$,G=e.b0},null,e=>{Z=e.b},e=>{K=e.u,Y=e.a,X=e.g,J=e.b,ee=e.c,te=e.Q,re=e.d,se=e.e,ne=e.f,ae=e.h},e=>{ie=e.B,oe=e.Q,le=e.a,ce=e.b,ue=e.g},e=>{de=e.g,pe=e.h},e=>{me=e.s,xe=e.a},e=>{he=e.a,ge=e.u,fe=e.c},e=>{ye=e.A},e=>{be=e.j},null,null,null,null,null,null,null],execute:function(){e("default",(function(){const e=ge(),{id:t,bcLanguage:r,quoteConfig:n,role:i,emailAddress:o,isB2BUser:l,selectCompanyHierarchyId:c,isAgenting:d,taxZoneRates:p,enteredInclusiveTax:x,isEnableProduct:f,purchasabilityPermission:q,handleGetProductsById:w,getQuote:D}=function(){const{id:e=""}=fe(),{state:{bcLanguage:t,quoteConfig:r}}=h.useContext(y),s=b((({company:e})=>e.companyInfo.id)),n=b((({company:e})=>e.customer.emailAddress)),a=b((({company:e})=>e.customer.customerGroupId)),i=b((({company:e})=>e.customer.role)),o=b(Q),{selectCompanyHierarchyId:l}=b((({company:e})=>e.companyHierarchyInfo)),c=b((({b2bFeatures:e})=>e.masqueradeCompany.isAgenting)),{currency_code:u}=b(O),d=b((({global:e})=>e.taxZoneRates)),p=b((({storeConfigs:e})=>e.currencies.enteredInclusiveTax)),m=b((({global:e})=>e.blockPendingQuoteNonPurchasableOOS?.isEnableProduct)),{purchasabilityPermission:x}=b(j),g=async e=>{if(e.length>0){const t=[];e.forEach((e=>{t.includes(e.productId)||t.push(e.productId)}));const r={productIds:t,currencyCode:u,companyId:s,customerGroupId:a},{productsSearch:n}=await(o?_(r):W(r)),i=G(n);return e.forEach((e=>{const t=e,r=i.find((t=>{const{id:r}=t;return Number(e.productId)===Number(r)}));t.productsSearch=r||{}})),e}},f=he(),C=async()=>{const{search:t}=f,r=S(t,"date")||"",s={id:Number(e),date:r.toString()},{quote:n}=await(99===Number(i)?re(s):se(s));return n};return{id:e,bcLanguage:t,quoteConfig:r,role:i,emailAddress:n,isB2BUser:o,selectCompanyHierarchyId:l,isAgenting:c,taxZoneRates:d,enteredInclusiveTax:p,isEnableProduct:m,purchasabilityPermission:x,handleGetProductsById:g,getQuote:C}}(),[N]=P(),v=g(),[k,T]=h.useState({}),[I,E]=h.useState([]),[R,A]=h.useState([]),[B,F]=h.useState(!1),[$,L]=h.useState(!0),[Z,K]=h.useState({originalSubtotal:0,discount:0,tax:0,shipping:0,totalAmount:0}),[Y,X]=h.useState(!1),[J,ee]=h.useState(!1),[te,ie]=h.useState(0),[de,pe]=h.useState({oos:"",nonPurchasable:""}),[me,xe]=h.useState({quotePurchasabilityPermission:!1,quoteConvertToOrderPermission:!1}),[ye,je]=h.useState(!1),Ce=he();h.useEffect((()=>{if(!k?.id)return;const{quoteConvertToOrderPermission:e}=H,{quotePurchasabilityPermission:t,quoteConvertToOrderPermission:r}=l?{quotePurchasabilityPermission:q,quoteConvertToOrderPermission:V({code:e,companyId:k?.companyId?.id||null,userEmail:k?.contactInfo?.email||""})}:{quotePurchasabilityPermission:!0,quoteConvertToOrderPermission:!0};xe({quotePurchasabilityPermission:t,quoteConvertToOrderPermission:r})}),[l,k,c,q]),h.useEffect((()=>{let e="",t="";I.forEach((r=>{const s=z(r);s?.type&&f&&!r?.purchaseHandled&&("oos"===s.type&&(e+=`${r.productName}${e?",":""}`),"non-purchasable"===s.type&&(t+=`${r.productName}${t?",":""}`))}));const r=!!e||!!t;f&&B&&r&&(e&&U.error(v("quoteDetail.message.insufficientStock",{ProductName:e})),t&&U.error(v("quoteDetail.message.nonPurchasable",{ProductName:t}))),L(r),pe({oos:e,nonPurchasable:t})}),[f,B,I]);const we=h.useCallback((()=>{if($){const{oos:e,nonPurchasable:t}=de;e&&U.error(v("quoteDetail.message.insufficientStock",{ProductName:e})),t&&U.error(v("quoteDetail.message.nonPurchasable",{ProductName:t}))}return $}),[$,de]),De=[];if(p?.length){const e=p?.find((e=>1===e.id));if(e){const{rates:t=[]}=e;t[0]&&t[0].enabled&&t[0].classRates.length&&t[0].classRates.forEach((e=>De.push(e)))}}const Ne=(e,t)=>{if(t.length){const e=be(t,"[0].bc_calculated_price.tax_exclusive",0),r=be(t,"[0].bc_calculated_price.tax_inclusive",0);return e>0?(r-e)/e:0}return De.length?(De.find((t=>t.taxClassId===e))?.rate||0)/100:0},Se=async()=>{X(!0),ee(!1);try{const e=await D(),t=await w(e.productsList).catch((e=>{U.error(e)})),r=await(async e=>{const t=await ue(),r=[];return t.length&&t.forEach((t=>{const s=t,n=e.find((e=>e.fieldName===s.name));r.push({fieldName:s.name||"",fieldValue:n?.fieldValue||s.default})})),r})(e.extraFields);if(T({...e,extraFields:r}),K({originalSubtotal:e.subtotal,discount:e.discount,tax:e.taxTotal,shipping:e.shippingTotal,totalAmount:e.totalAmount}),E(t),0===Number(e.shippingTotal))ie(Number(e.taxTotal));else{let e=0;t?.forEach((t=>{const{quantity:r,offeredPrice:s,productsSearch:{variants:n=[],taxClassId:a}}=t,i=Ne(a,n);e+=x?Number(s)*i/(1+i)*Number(r):Number(s)*i*Number(r)})),ie(e)}const{backendAttachFiles:s=[],storefrontAttachFiles:n=[],salesRep:a,salesRepEmail:i}=e;F(!!a||!!i);const o=[];return n.forEach((e=>{o.push({fileName:e.fileName,fileType:e.fileType,fileUrl:e.fileUrl,id:e.id,hasDelete:4!==k.status,title:v("quoteDetail.uploadedByCustomer",{createdBy:e.createdBy})})})),s.forEach((e=>{o.push({fileName:e.fileName,fileType:e.fileType,fileUrl:e.fileUrl,id:e.id,title:v("quoteDetail.uploadedBySalesRep",{createdBy:e.createdBy})})})),A(o),e}catch(e){throw U.error(e),e}finally{X(!1),ee(!0)}},ve=async e=>{X(!0);const{id:t,createdAt:s}=k;try{const n={quoteId:Number(t),createdAt:s,isPreview:e,lang:r},a=99===Number(i)?ne:ae,o=await a(n);if(o)return{url:o.quoteFrontendPdf.url,content:o.quoteFrontendPdf.content}}catch(n){U.error(n)}return{url:"",content:""}};h.useEffect((()=>{const{state:t}=Ce;t&&(setTimeout((()=>{U.success("",{jsx:()=>s.jsxs(a,{sx:{display:"flex",alignItems:"center"},children:[s.jsx(a,{sx:{mr:"15px"},children:100===Number(i)?v("quoteDetail.submittedQuote"):v("quoteDetail.quoteSubmitted")}),s.jsx(m,{onClick:()=>{100===Number(i)?(qe(window.location.href),U.success(v("quoteDetail.copySuccessful"))):e("/quotes")},variant:"text",sx:{color:"#ffffff",textAlign:"left",padding:0},children:100===Number(i)?v("quoteDetail.copyQuoteLink"):v("quoteDetail.reviewAllQuotes")})]}),isClose:!0,duration:3e4})}),10),Ce.state=null)}),[Ce,e,i]),h.useEffect((()=>{Ce.search.includes("isCheckout")&&t&&(async()=>{try{je(!0),await Ie({quoteId:t,proceedingCheckoutFn:we,role:i,location:Ce,navigate:e})}finally{je(!1)}})()}),[t,Ce,we]);const Pe=h.useMemo((()=>!("1"!==n.find((e=>"quote_auto_quoting"===e.key))?.value&&!B)),[n,B]),ke=h.useMemo((()=>{const e=k?.extraFields?.map((e=>({fieldName:e.fieldName,value:e.fieldValue})));return{info:{quoteTitle:k?.quoteTitle||"",referenceNumber:k?.referenceNumber||""},extraFields:e||[],recipients:k?.recipients||[]}}),[k]);M(!1);const{quotePurchasabilityPermission:Re,quoteConvertToOrderPermission:Fe}=me;return s.jsx(C,{isSpinning:Y||ye,children:s.jsxs(a,{sx:{display:"flex",flexDirection:"column",flex:1},children:[s.jsx(Ae,{status:k.status,quoteNumber:k.quoteNumber,issuedAt:k.createdAt,expirationDate:k.expiredAt,exportPdf:async()=>{try{const{url:e}=await ve(!1);e&&window.open(`${e}`,"_blank")}catch(e){U.error(e)}finally{X(!1)}},printQuote:async()=>{try{const{content:e}=await ve(!0),t=document.createElement("iframe");t.setAttribute("style","display:none;"),document.getElementById("bundle-container")?.appendChild(t),t.contentDocument?.open(),t.contentDocument?.write(e),t.contentDocument?.close(),X(!1),t.contentWindow?.print()}catch(e){U.error(e)}},role:i,salesRepInfo:k.salesRepInfo}),s.jsx(a,{sx:{marginTop:"1rem"},children:s.jsx(oe,{quoteAndExtraFieldsInfo:ke,contactInfo:k.contactInfo,shippingAddress:k.shippingAddress,billingAddress:k.billingAddress})}),s.jsxs(u,{container:!0,spacing:N?2:0,rowSpacing:0,sx:{overflow:"auto",flexWrap:N?"wrap":"nowrap",paddingBottom:"20px",marginBottom:N?"6rem":0,marginTop:N?0:"1rem","@media print":{overflow:"hidden"}},children:[s.jsx(u,{item:!0,xs:N?12:8,rowSpacing:0,sx:N?{flexBasis:"100%",pl:"16px"}:{mr:"16px"},children:s.jsx(a,{sx:N?{flexBasis:"100%"}:{},children:s.jsx(ze,{total:I.length,currency:k.currency,isHandleApprove:B,getQuoteTableDetails:async e=>{let t=I;if(0===t.length){const e=await Se();t=e?.productsList||[]}const r=Number(e.offset),s=Number(e.first)+r;return t.length?{edges:t.slice(r,s),totalCount:t.length}:{edges:[],totalCount:0}},getTaxRate:Ne,displayDiscount:k.displayDiscount})})}),s.jsxs(u,{item:!0,xs:N?12:4,rowSpacing:0,sx:N?{flexBasis:"100%"}:{pl:0},children:[s.jsx(a,{sx:{marginBottom:"1rem"},children:s.jsx(Be,{isHideQuoteCheckout:$,quoteSummary:Z,quoteDetailTax:te,status:k.status,quoteDetail:k})}),k.notes&&s.jsx(a,{sx:{marginBottom:"1rem",displayPrint:"none"},children:s.jsx(le,{quoteNotes:k.notes})}),s.jsx(a,{sx:{marginBottom:"1rem",displayPrint:"none"},children:s.jsx(Te,{id:t,status:k.status,isB2BUser:l,email:o||"",msgs:k?.trackingHistory||[]})}),s.jsx(a,{sx:{marginBottom:"1rem",displayPrint:"none"},children:s.jsx(ce,{allowUpload:4!==Number(k.status),quoteId:k.id,status:k.status,defaultFileList:R})}),k.legalTerms&&s.jsx(a,{sx:{displayPrint:"none"},children:s.jsx(Ue,{quoteLegalTerms:k.legalTerms})})]})]}),Fe&&Re&&4!==Number(k.status)&&J&&k?.allowCheckout&&Pe&&(!f||!(!B||!$)||!$)&&s.jsx(Ee,{quoteId:k.id,role:i,isAgenting:d,status:k.status,proceedingCheckoutFn:we})]})})}));var t=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,r=[],s=0;s<e.rangeCount;s++)r.push(e.getRangeAt(s));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||r.forEach((function(t){e.addRange(t)})),t&&t.focus()}},je={"text/plain":"Text","text/html":"Url",default:"Text"},Ce=function(e,r){var s,n,a,i,o,l,c=!1;r||(r={}),s=r.debug||!1;try{if(a=t(),i=document.createRange(),o=document.getSelection(),(l=document.createElement("span")).textContent=e,l.ariaHidden="true",l.style.all="unset",l.style.position="fixed",l.style.top=0,l.style.clip="rect(0, 0, 0, 0)",l.style.whiteSpace="pre",l.style.webkitUserSelect="text",l.style.MozUserSelect="text",l.style.msUserSelect="text",l.style.userSelect="text",l.addEventListener("copy",(function(t){if(t.stopPropagation(),r.format)if(t.preventDefault(),void 0===t.clipboardData){s&&console.warn("unable to use e.clipboardData"),s&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var n=je[r.format]||je.default;window.clipboardData.setData(n,e)}else t.clipboardData.clearData(),t.clipboardData.setData(r.format,e);r.onCopy&&(t.preventDefault(),r.onCopy(t.clipboardData))})),document.body.appendChild(l),i.selectNodeContents(l),o.addRange(i),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");c=!0}catch(u){s&&console.error("unable to copy using execCommand: ",u),s&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(r.format||"text",e),r.onCopy&&r.onCopy(window.clipboardData),c=!0}catch(u){s&&console.error("unable to copy using clipboardData: ",u),s&&console.error("falling back to prompt"),n=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"âŒ˜":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in r?r.message:"Copy to clipboard: #{key}, Enter"),window.prompt(n,e)}}finally{o&&("function"==typeof o.removeRange?o.removeRange(i):o.removeAllRanges()),l&&document.body.removeChild(l),a()}return c};const qe=x(Ce);var we={},De=r;Object.defineProperty(we,"__esModule",{value:!0});var Ne=we.default=void 0,Se=De(f()),ve=s;function Pe({msg:e,isEndMessage:t,isCustomer:r}){const n=g();return s.jsxs(a,{sx:{display:"flex",flexDirection:"column",alignItems:r?"flex-end":"flex-start",paddingTop:"5px"},children:[e?.role&&s.jsx(a,{sx:{height:"14px",fontWeight:400,lineHeight:"14px",fontSize:"10px",letterSpacing:"0.17px",color:"rgba(0, 0, 0, 0.38)"},children:e.role}),e?.message&&s.jsxs(a,{sx:{display:"inline-block",lineHeight:"34px",padding:"0 10px",background:r?"rgba(25, 118, 210, 0.3)":"rgba(0, 0, 0, 0.12)",borderRadius:"18px",m:"1px"},children:[s.jsx(c,{title:de(1e3*(e.sendTime||0),"K:m aa"),placement:"top",arrow:!0,children:s.jsx(a,{sx:{wordBreak:"break-word"},children:e.message})}),t&&s.jsx(a,{sx:{height:"14px",fontWeight:400,lineHeight:"14px",fontSize:"10px",letterSpacing:"0.17px",color:"rgba(0, 0, 0, 0.38)"},children:`${n("quoteDetail.message.sent")} ${pe(new Date(1e3*(e.sendTime||0)),new Date,{addSuffix:!0})}`})]})]})}function ke({msg:e}){return s.jsx(a,{sx:{color:"rgba(0, 0, 0, 0.6)",textAlign:"center",height:"21px",mb:"5px"},children:`${q(e?.date||0)}`})}function Te({msgs:e,id:t,isB2BUser:r,email:c,status:u}){const{dispatch:d}=h.useContext(y),p=n().palette.primary.main,m=g(),x=h.useRef(null),f=h.useRef(0),[q,D]=h.useState([]),[N,S]=h.useState(0),[v,P]=h.useState(""),[k,T]=h.useState(!1),{quotesUpdateMessageActionsPermission:I}=b(j),E=!r||I,R=e=>{let t={};const r=[];let s=0;e.forEach(((e,n)=>{0===n?(r.push({isCustomer:!e.role?.includes("Sales rep:"),date:e?.date,key:`${e?.date}date`}),r.push({isCustomer:!e.role?.includes("Sales rep:"),message:e.message,sendTime:e.date,role:e.role,key:e?.date}),t=e,t.isCustomer=!e.role?.includes("Sales rep:")):((e?.date||0)-(t?.date||0)>3600&&r.push({isCustomer:!e.role?.includes("Sales rep:"),date:e?.date,key:`${e?.date}date`}),t.isCustomer===!e.role?.includes("Sales rep:")?r.push({isCustomer:!e.role?.includes("Sales rep:"),message:e.message,sendTime:e.date,key:e?.date}):r.push({isCustomer:!e.role?.includes("Sales rep:"),message:e.message,role:e.role,sendTime:e.date,key:e?.date}),t=e,t.isCustomer=!e.role?.includes("Sales rep:")),e.role?.includes("Sales rep:")&&!e.read&&(s+=1)})),S(s),D(r)},A=h.useMemo((()=>s.jsxs(a,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:[`${m("quoteDetail.message.message")} `,0!==N&&s.jsx(a,{sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"20px",height:"20px",borderRadius:"50%",background:p||"#1976D2",color:"#fff",fontSize:"12px",ml:"8px"},children:N})]})),[p,N]);h.useEffect((()=>{R(e)}),[e]),h.useEffect((()=>{x.current&&q.length&&(x.current.scrollTop=x.current.scrollHeight)}),[q]);const B=async e=>{try{const s=r?K:Y;T(!0);const{quoteUpdate:{quote:{trackingHistory:n}}}=await s({id:Number(t),quoteData:{message:e,lastMessage:parseInt(""+(new Date).getTime()/1e3,10),userEmail:c||"",storeHash:w}});P(""),S(0),R(n)}finally{T(!1)}},F=h.useCallback((s=>{if(s){if(!E&&r)return;const s=r?K:Y;0===f.current&&e.length&&s({id:Number(t),quoteData:{lastMessage:e[e.length-1]?.date,userEmail:c||"",storeHash:w}}),S(0),x.current&&(x.current.scrollTop=x.current.scrollHeight),f.current+=1}}),[c,t,r,e,E]);return h.useEffect((()=>{d({type:"common",payload:{quoteDetailHasNewMessages:0!==N}})}),[N]),s.jsx(i,{children:s.jsx(o,{sx:{p:"16px !important"},children:s.jsxs(ie,{handleOnChange:F,title:A,children:[s.jsxs(a,{sx:{padding:"16px 0"},children:[s.jsx(a,{sx:{position:"relative",color:"rgba(0, 0, 0, 0.6)",opacity:.6,textAlign:"left",width:"100%",fontSize:"14px"},children:m("quoteDetail.message.merchantAnswers")}),s.jsx(a,{ref:x,sx:{mt:"20px",maxHeight:"280px",overflowY:"auto","&::-webkit-scrollbar":{display:"none"}},children:q.map(((e,t)=>s.jsxs(a,{children:[s.jsx(Pe,{msg:e,isEndMessage:t===q.length-1,isCustomer:!!e.isCustomer}),e.date&&s.jsx(ke,{msg:e})]},e.key)))})]}),4!==u&&E&&s.jsx(C,{isSpinning:k,spinningHeight:50,size:10,isCloseLoading:!0,tip:"waiting..",children:s.jsxs(a,{sx:{display:"flex",width:"100%"},children:[s.jsx(l,{onKeyDown:e=>{"Enter"===e.key&&B(e.target.value||"")},sx:{width:"100%","& .MuiFormLabel-root":{color:"rgba(0, 0, 0, 0.38)"},"& input":{padding:"1.5rem 0.7rem 0.5rem"}},value:v,onChange:e=>{P(e.target.value)},size:"small",label:m("quoteDetail.message.typeMessage"),variant:"filled"}),s.jsx(a,{onClick:()=>B(v),sx:{width:"42px",height:"36px",margin:"10px 0 0 10px",background:"#BAD6F2",borderRadius:"50%"},children:s.jsx(Ne,{sx:{height:"18px",width:"18px",margin:"8px 0 0 9px",color:"#0000008A"},fontSize:"small"})})]})})]})})})}Ne=we.default=(0,Se.default)((0,ve.jsx)("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8z"}),"ArrowUpward");const Ie=async({role:e,proceedingCheckoutFn:t,location:r,quoteId:s,navigate:n})=>{try{if(D.dispatch(N("")),t())return;const{storefrontProductSettings:{hidePriceFromGuests:a}}=await X();if(a&&100===Number(e)&&n)return D.dispatch(N(r.pathname+r.search)),void n("/login");const i=99===Number(e)?J:ee,o=S(r.search,"date"),l=await i({id:Number(s)});me(s,o);const{quoteCheckout:{quoteCheckout:{checkoutUrl:c,cartId:u}}}=l;if("bigcommerce"===v)return void(window.location.href=c);await xe(u,c)}catch(a){Z.error(a)}};function Ee(e){const{quoteId:t,role:r,isAgenting:n,status:i,proceedingCheckoutFn:o}=e,[l]=P(),c=g(),u=he(),d=ge(),p=l?{alignItems:"flex-end",flexDirection:"column"}:{alignItems:"center"};return 5!==i?s.jsx(a,{sx:{position:"fixed",bottom:l&&n?"52px":0,left:0,backgroundColor:"#fff",width:"100%",padding:"0.8rem 1rem",height:"auto",display:"flex",zIndex:"999",justifyContent:l?"center":"flex-end",displayPrint:"none",...p},children:s.jsx(k,{variant:"contained",onClick:()=>{Ie({proceedingCheckoutFn:o,role:r,location:u,quoteId:t,navigate:d})},sx:{width:l?"100%":"auto"},children:c("quoteDetail.footer.proceedToCheckout")})}):null}const Re=p("div")((()=>({display:"flex",alignItems:"center",marginTop:"0.5rem"})));function Ae(e){const[t]=P(),r=g(),{status:i,quoteNumber:o,issuedAt:l,expirationDate:c,exportPdf:p,printQuote:m,role:x,salesRepInfo:f}=e,{state:{portalStyle:{backgroundColor:y="#FEF9F5"}}}=h.useContext(T),b=I(y),j=n().palette.primary.main,C=ge(),q=e=>t?{}:{xs:e};return s.jsxs(s.Fragment,{children:[100!==Number(x)&&s.jsx(a,{sx:{marginBottom:"10px",width:"fit-content",displayPrint:"none"},children:s.jsxs(a,{sx:{color:"#1976d2",cursor:"pointer",display:"flex",alignItems:"center"},onClick:()=>{C("/quotes")},children:[s.jsx(ye,{fontSize:"small",sx:{fontSize:"12px",marginRight:"0.5rem",color:j}}),s.jsx("p",{style:{color:j,margin:"0"},children:r("quoteDetail.header.backToQuoteLists")})]})}),s.jsxs(u,{container:!0,spacing:2,sx:{display:"flex",justifyContent:"space-between",flexDirection:t?"column":"row",mb:t?"16px":""},children:[s.jsxs(u,{item:!0,...q(8),sx:{color:b},children:[s.jsxs(a,{sx:{display:"flex",alignItems:t?"start":"center",flexDirection:t?"column":"row"},children:[s.jsx(d,{sx:{marginRight:"10px",fontSize:"34px",color:E(b,.87)},children:r("quoteDetail.header.quoteNumber",{quoteNumber:o||""})}),s.jsx(te,{code:i})]}),(f?.salesRepName||f?.salesRepEmail)&&s.jsxs(Re,{children:[s.jsx(d,{variant:"subtitle2",sx:{marginRight:"0.5rem",fontSize:"16px"},children:r("quoteDetail.header.salesRep")}),s.jsx("span",{children:""!==f?.salesRepEmail?`${f?.salesRepName}(${f?.salesRepEmail})`:f?.salesRepName})]}),s.jsxs(a,{children:[s.jsxs(Re,{children:[s.jsx(d,{variant:"subtitle2",sx:{marginRight:"0.5rem",fontSize:"16px"},children:r("quoteDetail.header.issuedOn")}),s.jsx("span",{children:`${l?R(Number(l)):""}`})]}),s.jsxs(Re,{children:[s.jsx(d,{variant:"subtitle2",sx:{marginRight:"0.5rem",fontSize:"16px"},children:r("quoteDetail.header.expirationDate")}),s.jsx("span",{children:`${c?R(Number(c)):""}`})]})]})]}),100!==Number(x)&&s.jsx(u,{item:!0,sx:{textAlign:t?"none":"end",displayPrint:"none"},...q(4),children:s.jsxs(a,{children:[s.jsx(k,{variant:"outlined",sx:{marginRight:"1rem",displayPrint:"none"},onClick:m,children:r("quoteDetail.header.print")}),s.jsx(k,{variant:"outlined",onClick:p,children:r("quoteDetail.header.downloadPDF")})]})})]})]})}function Be({quoteSummary:{originalSubtotal:e,discount:t,tax:r,shipping:n,totalAmount:l},quoteDetailTax:c=0,status:p,quoteDetail:m,isHideQuoteCheckout:x}){const h=g(),f=b((({storeConfigs:e})=>e.currencies.enteredInclusiveTax)),y=b((({global:e})=>e.showInclusiveTaxPrice)),j=(e,t)=>f?y?e:e-t:y?e+t:e,C=e=>A(e,{currency:m.currency,isConversionRate:!1,useCurrentCurrency:!!m.currency}),q=m?.shippingMethod?.id?{shippingText:`${h("quoteDetail.summary.shipping")}(${m?.shippingMethod?.description||""})`,shippingVal:C(Number(n)),taxText:h("quoteDetail.summary.tax"),taxVal:C(Number(r))}:m?.salesRepEmail||m?.shippingMethod?.id||1!==Number(p)?!m?.salesRepEmail||m?.shippingMethod?.id||1!==Number(p)&&5!==Number(p)?null:{shippingText:`${h("quoteDetail.summary.shipping")}(${h("quoteDetail.summary.quoteCheckout")})`,shippingVal:h("quoteDetail.summary.tbd"),taxText:h("quoteDetail.summary.tax"),taxVal:h("quoteDetail.summary.tbd")}:{shippingText:h("quoteDetail.summary.shipping"),shippingVal:h("quoteDetail.summary.tbd"),taxText:h("quoteDetail.summary.estimatedTax"),taxVal:C(Number(r))},w=e=>x?h("quoteDraft.quoteSummary.tbd"):e,D=Number(e),N=Number(e)-Number(t);return s.jsx(i,{children:s.jsx(o,{children:s.jsxs(a,{children:[s.jsx(d,{variant:"h5",children:h("quoteDetail.summary.quoteSummary")}),s.jsxs(a,{sx:{marginTop:"20px",color:"#212121"},children:[m?.displayDiscount&&s.jsxs(u,{container:!0,justifyContent:"space-between",sx:{margin:"4px 0"},children:[s.jsx(d,{children:h("quoteDetail.summary.originalSubtotal")}),s.jsx(d,{children:w(C(j(D,c)))})]}),m?.salesRepEmail||1!==Number(p)?s.jsxs(u,{container:!0,justifyContent:"space-between",sx:{margin:"4px 0",display:m?.displayDiscount?"":"none"},children:[s.jsx(d,{children:h("quoteDetail.summary.discountAmount")}),s.jsx(d,{children:Number(t)>0?`-${C(Number(t))}`:C(Number(t))})]}):null,s.jsxs(u,{container:!0,justifyContent:"space-between",sx:{margin:"4px 0"},children:[s.jsx(d,{sx:{fontWeight:"bold",color:"#212121"},children:h("quoteDetail.summary.quotedSubtotal")}),s.jsx(d,{sx:{fontWeight:"bold",color:"#212121"},children:w(C(j(N,c)))})]}),q&&s.jsxs(s.Fragment,{children:[s.jsxs(u,{container:!0,justifyContent:"space-between",sx:{margin:"4px 0"},children:[s.jsx(d,{sx:{maxWidth:"70%",wordBreak:"break-word"},children:q.shippingText}),s.jsx(d,{children:w(q.shippingVal)})]}),s.jsxs(u,{container:!0,justifyContent:"space-between",sx:{margin:"4px 0"},children:[s.jsx(d,{children:q.taxText}),s.jsx(d,{children:w(q.taxVal)})]})]}),s.jsxs(u,{container:!0,justifyContent:"space-between",sx:{margin:"24px 0 0"},children:[s.jsx(d,{sx:{fontWeight:"bold",color:"#212121"},children:h("quoteDetail.summary.grandTotal")}),s.jsx(d,{sx:{fontWeight:"bold",color:"#212121"},children:w(C(Number(l)))})]})]})]})})})}const Fe=p("img")((()=>({maxWidth:"60px",height:"auto",marginRight:"0.5rem"})));function $e(e){const{item:t,len:r,itemIndex:n,getTaxRate:i,showPrice:l,currency:c,displayDiscount:u}=e,p=g(),m=b((({storeConfigs:e})=>e.currencies.enteredInclusiveTax)),{basePrice:x,quantity:h,imageUrl:f,productName:y,options:j,sku:C,notes:q,offeredPrice:w,productsSearch:{productUrl:D,variants:N=[],taxClassId:S}}=t,v=i(S,N),P=m?Number(x)*v/(1+v):Number(x)*v,k=m?Number(w)*v/(1+v):Number(w)*v,T=B(Number(x),P),I=B(Number(w),k),E=Number(x)-Number(w)>0&&u,R=Number(T)*Number(h),$=I*Number(h);return s.jsx(a,{width:"100%",sx:{borderTop:"1px solid #D9DCE9",borderBottom:n===r-1?"1px solid #D9DCE9":""},children:s.jsxs(o,{sx:{color:"#313440",display:"flex",pl:0},children:[s.jsx(a,{children:s.jsx(Fe,{src:f||F,alt:"Product-img",loading:"lazy"})}),s.jsxs(a,{sx:{flex:1},children:[s.jsx(d,{variant:"body1",color:"#212121",onClick:()=>{const{location:{origin:e}}=window;D&&(window.location.href=`${e}${D}`)},sx:{cursor:"pointer"},children:y}),s.jsx(d,{variant:"body1",color:"#616161",children:C}),s.jsx(a,{sx:{margin:"1rem 0"},children:j.length>0&&s.jsx(a,{children:j.map((e=>s.jsx(d,{sx:{fontSize:"0.75rem",lineHeight:"1.5",color:"#455A64"},children:`${e.optionName}: ${e.optionLabel}`},e.optionName)))})}),s.jsx(d,{variant:"body1",color:"#616161",children:q}),s.jsxs(d,{sx:{fontSize:"14px"},children:[p("quoteDetail.tableCard.price"),E&&s.jsx("span",{style:{marginLeft:"5px",textDecoration:"line-through"},children:`${l(A(T,{currency:c}),t)}`}),s.jsx("span",{style:{marginLeft:"5px",color:E?"#2E7D32":"#212121"},children:`${l(A(w,{currency:c}),t)}`})]}),s.jsx(d,{sx:{padding:"12px 0",fontSize:"14px"},children:p("quoteDetail.tableCard.qty",{quantity:h})}),s.jsxs(d,{sx:{fontSize:"14px"},children:[p("quoteDetail.tableCard.total"),E&&s.jsx("span",{style:{marginLeft:"5px",textDecoration:"line-through"},children:`${l(A(R,{currency:c}),t)}`}),s.jsx("span",{style:{marginLeft:"5px",color:E?"#2E7D32":"#212121"},children:`${l(A($,{currency:c}),t)}`})]})]})]})},t.id)}const Le=p("div")((()=>({backgroundColor:"#FFFFFF",padding:"1rem",width:"100%",border:"1px solid #E0E0E0",boxShadow:"0px 2px 1px -1px rgba(0, 0, 0, 0.2), 0px 1px 1px rgba(0, 0, 0, 0.14), 0px 1px 3px rgba(0, 0, 0, 0.12)",borderRadius:"4px","& tbody":{"& tr":{"& td":{verticalAlign:"top"},"& td: first-of-type":{verticalAlign:"inherit"}},"& tr: hover":{"& #shoppingList-actionList":{opacity:1}}}}))),He=p("img")((()=>({maxWidth:"60px",height:"auto",marginRight:"0.5rem"}))),ze=h.forwardRef((function(e,t){const r=g(),{total:n,getQuoteTableDetails:i,getTaxRate:o,isHandleApprove:l,displayDiscount:c,currency:u}=e,p=b((({global:e})=>e.blockPendingQuoteNonPurchasableOOS.isEnableProduct)),m=b((({storeConfigs:e})=>e.currencies.enteredInclusiveTax)),x=h.useRef(null),[f,y]=h.useState({first:12,offset:0});h.useImperativeHandle(t,(()=>({getList:()=>x.current?.getList(),refreshList:()=>{y({offset:0})}})));const j=(e,t)=>p?l?e:L({price:e,productInfo:t,showText:r("quoteDraft.quoteSummary.tbd")}):e,C=[{key:"Product",title:r("quoteDetail.table.product"),render:e=>{const t=e.options,r=e.productsSearch?.productUrl;return s.jsxs(a,{sx:{display:"flex",alignItems:"flex-start"},children:[s.jsx(He,{src:e.imageUrl||F,alt:"Product-img",loading:"lazy"}),s.jsxs(a,{children:[s.jsx(d,{variant:"body1",color:"#212121",onClick:()=>{const{location:{origin:e}}=window;r&&(window.location.href=`${e}${r}`)},sx:{cursor:"pointer"},children:e.productName}),s.jsx(d,{variant:"body1",color:"#616161",children:e.sku}),t.length>0&&s.jsx(a,{children:t.map((e=>e.optionLabel&&s.jsx(d,{sx:{fontSize:"0.75rem",lineHeight:"1.5",color:"#455A64"},children:`${e.optionName}: ${e.optionLabel}`},`${e.optionName}_${e.optionLabel}`)))}),e.notes&&s.jsxs(d,{variant:"body1",color:"#ED6C02",sx:{fontSize:"0.9rem",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:[s.jsx("span",{children:"Notes: "}),e.notes]})]})]})},width:"40%"},{key:"Price",title:r("quoteDetail.table.price"),render:e=>{const{basePrice:t,offeredPrice:r,productsSearch:{variants:n=[],taxClassId:a}}=e,i=o(a,n),l=m?Number(t)*i/(1+i):Number(t)*i,p=m?Number(r)*i/(1+i):Number(r)*i,x=B(Number(t),l),h=B(Number(r),p),g=Number(t)-Number(r)>0&&c;return s.jsxs(s.Fragment,{children:[g&&s.jsx(d,{sx:{padding:"12px 0 0 0",textDecoration:"line-through"},children:j(A(x,{currency:u,isConversionRate:!1,useCurrentCurrency:!!u}),e)}),s.jsx(d,{sx:{padding:g?"0":"12px 0 0 0",color:g?"#2E7D32":"#212121"},children:j(A(h,{currency:u,isConversionRate:!1,useCurrentCurrency:!!u}),e)})]})},width:"15%",style:{textAlign:"right"}},{key:"Qty",title:r("quoteDetail.table.qty"),render:e=>s.jsx(d,{sx:{padding:"12px 0"},children:e.quantity}),width:"15%",style:{textAlign:"right"}},{key:"Total",title:r("quoteDetail.table.total"),render:e=>{const{basePrice:t,quantity:r,offeredPrice:n,productsSearch:{variants:i=[],taxClassId:l}}=e,p=o(l,i),x=m?Number(t)*p/(1+p):Number(t)*p,h=m?Number(n)*p/(1+p):Number(n)*p,g=B(Number(t),x),f=B(Number(n),h),y=Number(t)-Number(n)>0&&c,b=g*Number(r),C=f*Number(r);return s.jsxs(a,{children:[y&&s.jsx(d,{sx:{padding:"12px 0 0 0",textDecoration:"line-through"},children:j(A(b,{currency:u,isConversionRate:!1,useCurrentCurrency:!!u}),e)}),s.jsx(d,{sx:{padding:y?"0":"12px 0 0 0",color:y?"#2E7D32":"#212121"},children:j(A(C,{currency:u,isConversionRate:!1,useCurrentCurrency:!!u}),e)})]})},width:"20%",style:{textAlign:"right"}}];return s.jsxs(Le,{children:[s.jsx(a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",margin:"0.5rem 0 1rem 0"},children:s.jsx(d,{sx:{fontSize:"24px"},children:r("quoteDetail.table.totalProducts",{total:n||0})})}),s.jsx($,{ref:x,columnItems:C,rowsPerPageOptions:[12,24,36],getRequestList:i,isCustomRender:!1,hover:!0,searchParams:f,labelRowsPerPage:r("quoteDetail.table.perPage"),showBorder:!1,itemIsMobileSpacing:0,noDataText:r("quoteDetail.table.noProducts"),tableKey:"productId",renderItem:(e,t)=>s.jsx($e,{len:n||0,item:e,showPrice:j,itemIndex:t,currency:u,displayDiscount:c,getTaxRate:o})})]})}));function Ue(e){const{quoteLegalTerms:t=""}=e,[r,n]=h.useState(!1),l=g();return s.jsx(i,{sx:{".MuiCardContent-root":{maxHeight:r?"637px":"auto"}},children:s.jsx(o,{sx:{p:"16px !important"},children:s.jsx(ie,{title:l("quoteDetail.termsAndConditions"),handleOnChange:e=>{n(e)},children:s.jsx(a,{children:s.jsx(d,{variant:"body1",sx:{padding:"16px 0",maxHeight:"545px",whiteSpace:"pre-wrap",overflow:"auto"},children:t})})})})})}}}}));
//# sourceMappingURL=index-legacy-DoNuPRHJ.js.map
