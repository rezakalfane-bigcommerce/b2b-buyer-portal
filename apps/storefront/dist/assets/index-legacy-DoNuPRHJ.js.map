{"version":3,"file":"index-legacy-DoNuPRHJ.js","sources":["../../src/pages/QuoteDetail/index.tsx","../../../../node_modules/toggle-selection/index.js","../../../../node_modules/copy-to-clipboard/index.js","../../../../node_modules/@mui/icons-material/ArrowUpward.js","../../src/pages/quote/components/Message.tsx","../../src/pages/quote/utils/quoteCheckout.ts","../../src/pages/quote/components/QuoteDetailFooter.tsx","../../src/pages/quote/components/QuoteDetailHeader.tsx","../../src/pages/quote/components/QuoteDetailSummary.tsx","../../src/pages/quote/components/QuoteDetailTableCard.tsx","../../src/pages/quote/components/QuoteDetailTable.tsx","../../src/pages/quote/components/QuoteTermsAndConditions.tsx"],"sourcesContent":["import { useCallback, useContext, useEffect, useMemo, useState } from 'react';\nimport { useLocation, useNavigate, useParams } from 'react-router-dom';\nimport { useB3Lang } from '@b3/lang';\nimport { Box, Button, Grid } from '@mui/material';\nimport copy from 'copy-to-clipboard';\nimport { get } from 'lodash-es';\n\nimport B3Spin from '@/components/spin/B3Spin';\nimport { useMobile } from '@/hooks';\nimport useScrollBar from '@/hooks/useScrollBar';\nimport { GlobalContext } from '@/shared/global';\nimport {\n  exportB2BQuotePdf,\n  exportBcQuotePdf,\n  getB2BQuoteDetail,\n  getBcQuoteDetail,\n  searchB2BProducts,\n  searchBcProducts,\n} from '@/shared/service/b2b';\nimport {\n  activeCurrencyInfoSelector,\n  isB2BUserSelector,\n  rolePermissionSelector,\n  TaxZoneRates,\n  useAppSelector,\n} from '@/store';\nimport { QuoteExtraFieldsData } from '@/types/quotes';\nimport { snackbar, verifyLevelPermission } from '@/utils';\nimport { b2bPermissionsMap } from '@/utils/b3CheckPermissions/config';\nimport { getVariantInfoOOSAndPurchase } from '@/utils/b3Product/b3Product';\nimport { conversionProductsList } from '@/utils/b3Product/shared/config';\nimport { getSearchVal } from '@/utils/loginInfo';\n\nimport Message from '../quote/components/Message';\nimport QuoteAttachment from '../quote/components/QuoteAttachment';\nimport QuoteDetailFooter from '../quote/components/QuoteDetailFooter';\nimport QuoteDetailHeader from '../quote/components/QuoteDetailHeader';\nimport QuoteDetailSummary from '../quote/components/QuoteDetailSummary';\nimport QuoteDetailTable from '../quote/components/QuoteDetailTable';\nimport QuoteInfo from '../quote/components/QuoteInfo';\nimport QuoteNote from '../quote/components/QuoteNote';\nimport QuoteTermsAndConditions from '../quote/components/QuoteTermsAndConditions';\nimport { ProductInfoProps } from '../quote/shared/config';\nimport getB2BQuoteExtraFields from '../quote/utils/getQuoteExtraFields';\nimport { handleQuoteCheckout } from '../quote/utils/quoteCheckout';\n\nfunction useData() {\n  const { id = '' } = useParams();\n\n  const {\n    state: { bcLanguage, quoteConfig },\n  } = useContext(GlobalContext);\n  const companyId = useAppSelector(({ company }) => company.companyInfo.id);\n  const emailAddress = useAppSelector(({ company }) => company.customer.emailAddress);\n  const customerGroupId = useAppSelector(({ company }) => company.customer.customerGroupId);\n  const role = useAppSelector(({ company }) => company.customer.role);\n\n  const isB2BUser = useAppSelector(isB2BUserSelector);\n  const { selectCompanyHierarchyId } = useAppSelector(\n    ({ company }) => company.companyHierarchyInfo,\n  );\n\n  const isAgenting = useAppSelector(({ b2bFeatures }) => b2bFeatures.masqueradeCompany.isAgenting);\n\n  const { currency_code: currencyCode } = useAppSelector(activeCurrencyInfoSelector);\n  const taxZoneRates = useAppSelector(({ global }) => global.taxZoneRates);\n  const enteredInclusiveTax = useAppSelector(\n    ({ storeConfigs }) => storeConfigs.currencies.enteredInclusiveTax,\n  );\n  const isEnableProduct = useAppSelector(\n    ({ global }) => global.blockPendingQuoteNonPurchasableOOS?.isEnableProduct,\n  );\n\n  const { purchasabilityPermission } = useAppSelector(rolePermissionSelector);\n\n  const handleGetProductsById = async (listProducts: ProductInfoProps[]) => {\n    if (listProducts.length > 0) {\n      const productIds: number[] = [];\n\n      listProducts.forEach((item) => {\n        if (!productIds.includes(item.productId)) {\n          productIds.push(item.productId);\n        }\n      });\n\n      const options = { productIds, currencyCode, companyId, customerGroupId };\n\n      const { productsSearch } = await (isB2BUser\n        ? searchB2BProducts(options)\n        : searchBcProducts(options));\n\n      const newProductsSearch = conversionProductsList(productsSearch);\n\n      listProducts.forEach((item) => {\n        const listProduct = item;\n        const productInfo = newProductsSearch.find((search: CustomFieldItems) => {\n          const { id: productId } = search;\n\n          return Number(item.productId) === Number(productId);\n        });\n\n        listProduct.productsSearch = productInfo || {};\n      });\n\n      return listProducts;\n    }\n    return undefined;\n  };\n\n  const location = useLocation();\n\n  const getQuote = async () => {\n    const { search } = location;\n\n    const date = getSearchVal(search, 'date') || '';\n    const data = {\n      id: Number(id),\n      date: date.toString(),\n    };\n\n    const { quote } = await (Number(role) === 99\n      ? getBcQuoteDetail(data)\n      : getB2BQuoteDetail(data));\n\n    return quote;\n  };\n\n  return {\n    id,\n    bcLanguage,\n    quoteConfig,\n    role,\n    emailAddress,\n    isB2BUser,\n    selectCompanyHierarchyId,\n    isAgenting,\n    taxZoneRates,\n    enteredInclusiveTax,\n    isEnableProduct,\n    purchasabilityPermission,\n    handleGetProductsById,\n    getQuote,\n  };\n}\n\nfunction QuoteDetail() {\n  const navigate = useNavigate();\n\n  const {\n    id,\n    bcLanguage,\n    quoteConfig,\n    role,\n    emailAddress,\n    isB2BUser,\n    selectCompanyHierarchyId,\n    isAgenting,\n    taxZoneRates,\n    enteredInclusiveTax,\n    isEnableProduct,\n    purchasabilityPermission,\n    handleGetProductsById,\n    getQuote,\n  } = useData();\n\n  const [isMobile] = useMobile();\n\n  const b3Lang = useB3Lang();\n\n  const [quoteDetail, setQuoteDetail] = useState<any>({});\n  const [productList, setProductList] = useState<any>([]);\n  const [fileList, setFileList] = useState<any>([]);\n  const [isHandleApprove, setHandleApprove] = useState<boolean>(false);\n\n  const [isHideQuoteCheckout, setIsHideQuoteCheckout] = useState<boolean>(true);\n\n  const [quoteSummary, setQuoteSummary] = useState<any>({\n    originalSubtotal: 0,\n    discount: 0,\n    tax: 0,\n    shipping: 0,\n    totalAmount: 0,\n  });\n  const [isRequestLoading, setIsRequestLoading] = useState(false);\n  const [isShowFooter, setIsShowFooter] = useState(false);\n  const [quoteDetailTax, setQuoteDetailTax] = useState(0);\n  const [noBuyerProductName, setNoBuyerProductName] = useState({\n    oos: '',\n    nonPurchasable: '',\n  });\n\n  const [quotePurchasabilityPermissionInfo, setQuotePurchasabilityPermission] = useState({\n    quotePurchasabilityPermission: false,\n    quoteConvertToOrderPermission: false,\n  });\n\n  const [quoteCheckoutLoading, setQuoteCheckoutLoading] = useState<boolean>(false);\n\n  const location = useLocation();\n\n  useEffect(() => {\n    if (!quoteDetail?.id) return;\n\n    const { quoteConvertToOrderPermission: quoteCheckoutPermissionCode } = b2bPermissionsMap;\n\n    const getPurchasabilityAndConvertToOrderPermission = () => {\n      if (isB2BUser) {\n        const companyId = quoteDetail?.companyId?.id || null;\n        const userEmail = quoteDetail?.contactInfo?.email || '';\n        return {\n          quotePurchasabilityPermission: purchasabilityPermission,\n          quoteConvertToOrderPermission: verifyLevelPermission({\n            code: quoteCheckoutPermissionCode,\n            companyId,\n            userEmail,\n          }),\n        };\n      }\n\n      return {\n        quotePurchasabilityPermission: true,\n        quoteConvertToOrderPermission: true,\n      };\n    };\n\n    const { quotePurchasabilityPermission, quoteConvertToOrderPermission } =\n      getPurchasabilityAndConvertToOrderPermission();\n\n    setQuotePurchasabilityPermission({\n      quotePurchasabilityPermission,\n      quoteConvertToOrderPermission,\n    });\n  }, [isB2BUser, quoteDetail, selectCompanyHierarchyId, purchasabilityPermission]);\n\n  useEffect(() => {\n    let oosErrorList = '';\n    let nonPurchasableErrorList = '';\n\n    productList.forEach((item: CustomFieldItems) => {\n      const buyerInfo = getVariantInfoOOSAndPurchase(item);\n\n      if (buyerInfo?.type && isEnableProduct && !item?.purchaseHandled) {\n        if (buyerInfo.type === 'oos') {\n          oosErrorList += `${item.productName}${oosErrorList ? ',' : ''}`;\n        }\n\n        if (buyerInfo.type === 'non-purchasable') {\n          nonPurchasableErrorList += `${item.productName}${nonPurchasableErrorList ? ',' : ''}`;\n        }\n      }\n    });\n\n    const isHideCheckout = !!oosErrorList || !!nonPurchasableErrorList;\n    if (isEnableProduct && isHandleApprove && isHideCheckout) {\n      if (oosErrorList)\n        snackbar.error(\n          b3Lang('quoteDetail.message.insufficientStock', {\n            ProductName: oosErrorList,\n          }),\n        );\n\n      if (nonPurchasableErrorList)\n        snackbar.error(\n          b3Lang('quoteDetail.message.nonPurchasable', {\n            ProductName: nonPurchasableErrorList,\n          }),\n        );\n    }\n\n    setIsHideQuoteCheckout(isHideCheckout);\n\n    setNoBuyerProductName({\n      oos: oosErrorList,\n      nonPurchasable: nonPurchasableErrorList,\n    });\n    // disabling since b3Lang is a dependency that will trigger rendering issues\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isEnableProduct, isHandleApprove, productList]);\n\n  const proceedingCheckoutFn = useCallback(() => {\n    if (isHideQuoteCheckout) {\n      const { oos, nonPurchasable } = noBuyerProductName;\n      if (oos)\n        snackbar.error(\n          b3Lang('quoteDetail.message.insufficientStock', {\n            ProductName: oos,\n          }),\n        );\n\n      if (nonPurchasable)\n        snackbar.error(\n          b3Lang('quoteDetail.message.nonPurchasable', {\n            ProductName: nonPurchasable,\n          }),\n        );\n    }\n    return isHideQuoteCheckout;\n    // disabling as b3Lang is a dependency that will trigger rendering issues\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isHideQuoteCheckout, noBuyerProductName]);\n\n  const classRates: TaxZoneRates[] = [];\n  if (taxZoneRates?.length) {\n    const defaultTaxZone = taxZoneRates?.find((taxZone: { id: number }) => taxZone.id === 1);\n    if (defaultTaxZone) {\n      const { rates = [] } = defaultTaxZone;\n\n      if (rates[0] && rates[0].enabled && rates[0].classRates.length) {\n        rates[0].classRates.forEach((rate) => classRates.push(rate));\n      }\n    }\n  }\n\n  const getTaxRate = (taxClassId: number, variants: any) => {\n    if (variants.length) {\n      const taxExclusive = get(variants, '[0].bc_calculated_price.tax_exclusive', 0);\n      const taxInclusive = get(variants, '[0].bc_calculated_price.tax_inclusive', 0);\n      return taxExclusive > 0 ? (taxInclusive - taxExclusive) / taxExclusive : 0;\n    }\n    if (classRates.length) {\n      return (classRates.find((rate) => rate.taxClassId === taxClassId)?.rate || 0) / 100;\n    }\n    return 0;\n  };\n\n  const getQuoteExtraFields = async (currentExtraFields: QuoteExtraFieldsData[]) => {\n    const extraFieldsInfo = await getB2BQuoteExtraFields();\n    const quoteCurrentExtraFields: QuoteExtraFieldsData[] = [];\n    if (extraFieldsInfo.length) {\n      extraFieldsInfo.forEach((item) => {\n        const extraField = item;\n        const currentExtraField = currentExtraFields.find(\n          (field: QuoteExtraFieldsData) => field.fieldName === extraField.name,\n        );\n\n        quoteCurrentExtraFields.push({\n          fieldName: extraField.name || '',\n          fieldValue: currentExtraField?.fieldValue || extraField.default,\n        });\n      });\n    }\n\n    return quoteCurrentExtraFields;\n  };\n\n  const getQuoteDetail = async () => {\n    setIsRequestLoading(true);\n    setIsShowFooter(false);\n\n    try {\n      const quote = await getQuote();\n      const productsWithMoreInfo = await handleGetProductsById(quote.productsList).catch((err) => {\n        snackbar.error(err);\n\n        return undefined;\n      });\n      const quoteExtraFieldInfos = await getQuoteExtraFields(quote.extraFields);\n\n      setQuoteDetail({\n        ...quote,\n        extraFields: quoteExtraFieldInfos,\n      });\n      setQuoteSummary({\n        originalSubtotal: quote.subtotal,\n        discount: quote.discount,\n        tax: quote.taxTotal,\n        shipping: quote.shippingTotal,\n        totalAmount: quote.totalAmount,\n      });\n      setProductList(productsWithMoreInfo);\n\n      if (Number(quote.shippingTotal) === 0) {\n        setQuoteDetailTax(Number(quote.taxTotal));\n      } else {\n        let taxPrice = 0;\n        productsWithMoreInfo?.forEach((product) => {\n          const {\n            quantity,\n            offeredPrice,\n            productsSearch: { variants = [], taxClassId },\n          } = product;\n\n          const taxRate = getTaxRate(taxClassId, variants);\n          taxPrice += enteredInclusiveTax\n            ? ((Number(offeredPrice) * taxRate) / (1 + taxRate)) * Number(quantity)\n            : Number(offeredPrice) * taxRate * Number(quantity);\n        });\n\n        setQuoteDetailTax(taxPrice);\n      }\n\n      const {\n        backendAttachFiles = [],\n        storefrontAttachFiles = [],\n        salesRep,\n        salesRepEmail,\n      } = quote;\n\n      setHandleApprove(!!salesRep || !!salesRepEmail);\n\n      const newFileList: CustomFieldItems[] = [];\n      storefrontAttachFiles.forEach((file: CustomFieldItems) => {\n        newFileList.push({\n          fileName: file.fileName,\n          fileType: file.fileType,\n          fileUrl: file.fileUrl,\n          id: file.id,\n          hasDelete: quoteDetail.status !== 4,\n          title: b3Lang('quoteDetail.uploadedByCustomer', {\n            createdBy: file.createdBy,\n          }),\n        });\n      });\n\n      backendAttachFiles.forEach((file: CustomFieldItems) => {\n        newFileList.push({\n          fileName: file.fileName,\n          fileType: file.fileType,\n          fileUrl: file.fileUrl,\n          id: file.id,\n          title: b3Lang('quoteDetail.uploadedBySalesRep', {\n            createdBy: file.createdBy,\n          }),\n        });\n      });\n\n      setFileList(newFileList);\n\n      return quote;\n    } catch (err: any) {\n      snackbar.error(err);\n      throw err;\n    } finally {\n      setIsRequestLoading(false);\n      setIsShowFooter(true);\n    }\n  };\n\n  const fetchPdfUrl = async (bool: boolean) => {\n    setIsRequestLoading(true);\n    const { id, createdAt } = quoteDetail;\n    try {\n      const data = {\n        quoteId: Number(id),\n        createdAt,\n        isPreview: bool,\n        lang: bcLanguage,\n      };\n\n      const fn = Number(role) === 99 ? exportBcQuotePdf : exportB2BQuotePdf;\n\n      const quotePdf = await fn(data);\n\n      if (quotePdf) {\n        return {\n          url: quotePdf.quoteFrontendPdf.url,\n          content: quotePdf.quoteFrontendPdf.content,\n        };\n      }\n    } catch (err: any) {\n      snackbar.error(err);\n    }\n    return {\n      url: '',\n      content: '',\n    };\n  };\n\n  const exportPdf = async () => {\n    try {\n      const { url: quotePdfUrl } = await fetchPdfUrl(false);\n      if (quotePdfUrl) {\n        window.open(`${quotePdfUrl}`, '_blank');\n      }\n    } catch (err: any) {\n      snackbar.error(err);\n    } finally {\n      setIsRequestLoading(false);\n    }\n  };\n\n  const printQuote = async () => {\n    try {\n      const { content } = await fetchPdfUrl(true);\n\n      const iframe = document.createElement('iframe');\n      iframe.setAttribute('style', 'display:none;');\n      document.getElementById('bundle-container')?.appendChild(iframe);\n      iframe.contentDocument?.open();\n      iframe.contentDocument?.write(content);\n      iframe.contentDocument?.close();\n      setIsRequestLoading(false);\n      iframe.contentWindow?.print();\n    } catch (err: any) {\n      snackbar.error(err);\n    }\n  };\n\n  const getQuoteTableDetails = async (params: any) => {\n    let allProductsList: any[] = productList;\n\n    if (allProductsList.length === 0) {\n      const quote = await getQuoteDetail();\n      allProductsList = quote?.productsList || [];\n    }\n\n    const startIndex = Number(params.offset);\n    const endIndex = Number(params.first) + startIndex;\n\n    if (!allProductsList.length) {\n      return {\n        edges: [],\n        totalCount: 0,\n      };\n    }\n    const list = allProductsList.slice(startIndex, endIndex);\n\n    return {\n      edges: list,\n      totalCount: allProductsList.length,\n    };\n  };\n\n  useEffect(() => {\n    const { state } = location;\n\n    if (!state) return;\n    const tip = () => (\n      <Box\n        sx={{\n          display: 'flex',\n          alignItems: 'center',\n        }}\n      >\n        <Box\n          sx={{\n            mr: '15px',\n          }}\n        >\n          {Number(role) === 100\n            ? b3Lang('quoteDetail.submittedQuote')\n            : b3Lang('quoteDetail.quoteSubmitted')}\n        </Box>\n        <Button\n          onClick={() => {\n            if (Number(role) === 100) {\n              copy(window.location.href);\n              snackbar.success(b3Lang('quoteDetail.copySuccessful'));\n            } else {\n              navigate('/quotes');\n            }\n          }}\n          variant=\"text\"\n          sx={{\n            color: '#ffffff',\n            textAlign: 'left',\n            padding: 0,\n          }}\n        >\n          {Number(role) === 100\n            ? b3Lang('quoteDetail.copyQuoteLink')\n            : b3Lang('quoteDetail.reviewAllQuotes')}\n        </Button>\n      </Box>\n    );\n\n    setTimeout(() => {\n      snackbar.success('', {\n        jsx: () => tip(),\n        isClose: true,\n        duration: 30000,\n      });\n    }, 10);\n    location.state = null;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [location, navigate, role]);\n\n  const quoteGotoCheckout = async () => {\n    try {\n      setQuoteCheckoutLoading(true);\n      await handleQuoteCheckout({\n        quoteId: id,\n        proceedingCheckoutFn,\n        role,\n        location,\n        navigate,\n      });\n    } finally {\n      setQuoteCheckoutLoading(false);\n    }\n  };\n  useEffect(() => {\n    if (location.search.includes('isCheckout') && id) {\n      quoteGotoCheckout();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [id, location, proceedingCheckoutFn]);\n\n  const isAutoEnableQuoteCheckout = useMemo(() => {\n    const isAutoEnable =\n      quoteConfig.find((item) => item.key === 'quote_auto_quoting')?.value === '1';\n\n    if (!isAutoEnable && !isHandleApprove) return false;\n\n    return true;\n  }, [quoteConfig, isHandleApprove]);\n\n  const isEnableProductShowCheckout = () => {\n    if (isEnableProduct) {\n      if (isHandleApprove && isHideQuoteCheckout) return true;\n      if (!isHideQuoteCheckout) return true;\n\n      return false;\n    }\n\n    return true;\n  };\n\n  const quoteAndExtraFieldsInfo = useMemo(() => {\n    const currentExtraFields = quoteDetail?.extraFields?.map(\n      (field: { fieldName: string; fieldValue: string | number }) => ({\n        fieldName: field.fieldName,\n        value: field.fieldValue,\n      }),\n    );\n\n    return {\n      info: {\n        quoteTitle: quoteDetail?.quoteTitle || '',\n        referenceNumber: quoteDetail?.referenceNumber || '',\n      },\n      extraFields: currentExtraFields || [],\n      recipients: quoteDetail?.recipients || [],\n    };\n  }, [quoteDetail]);\n\n  useScrollBar(false);\n\n  const { quotePurchasabilityPermission, quoteConvertToOrderPermission } =\n    quotePurchasabilityPermissionInfo;\n\n  return (\n    <B3Spin isSpinning={isRequestLoading || quoteCheckoutLoading}>\n      <Box\n        sx={{\n          display: 'flex',\n          flexDirection: 'column',\n          flex: 1,\n        }}\n      >\n        <QuoteDetailHeader\n          status={quoteDetail.status}\n          quoteNumber={quoteDetail.quoteNumber}\n          issuedAt={quoteDetail.createdAt}\n          expirationDate={quoteDetail.expiredAt}\n          exportPdf={exportPdf}\n          printQuote={printQuote}\n          role={role}\n          salesRepInfo={quoteDetail.salesRepInfo}\n        />\n\n        <Box\n          sx={{\n            marginTop: '1rem',\n          }}\n        >\n          <QuoteInfo\n            quoteAndExtraFieldsInfo={quoteAndExtraFieldsInfo}\n            contactInfo={quoteDetail.contactInfo}\n            shippingAddress={quoteDetail.shippingAddress}\n            billingAddress={quoteDetail.billingAddress}\n          />\n        </Box>\n\n        <Grid\n          container\n          spacing={isMobile ? 2 : 0}\n          rowSpacing={0}\n          sx={{\n            overflow: 'auto',\n            flexWrap: isMobile ? 'wrap' : 'nowrap',\n            paddingBottom: '20px',\n            marginBottom: isMobile ? '6rem' : 0,\n            marginTop: !isMobile ? '1rem' : 0,\n            '@media print': {\n              overflow: 'hidden',\n            },\n          }}\n        >\n          <Grid\n            item\n            xs={isMobile ? 12 : 8}\n            rowSpacing={0}\n            sx={\n              isMobile\n                ? {\n                    flexBasis: '100%',\n                    pl: '16px',\n                  }\n                : {\n                    mr: '16px',\n                  }\n            }\n          >\n            <Box\n              sx={\n                isMobile\n                  ? {\n                      flexBasis: '100%',\n                    }\n                  : {}\n              }\n            >\n              <QuoteDetailTable\n                total={productList.length}\n                currency={quoteDetail.currency}\n                isHandleApprove={isHandleApprove}\n                getQuoteTableDetails={getQuoteTableDetails}\n                getTaxRate={getTaxRate}\n                displayDiscount={quoteDetail.displayDiscount}\n              />\n            </Box>\n          </Grid>\n\n          <Grid\n            item\n            xs={isMobile ? 12 : 4}\n            rowSpacing={0}\n            sx={\n              isMobile\n                ? {\n                    flexBasis: '100%',\n                  }\n                : {\n                    pl: 0,\n                  }\n            }\n          >\n            <Box\n              sx={{\n                marginBottom: '1rem',\n              }}\n            >\n              <QuoteDetailSummary\n                isHideQuoteCheckout={isHideQuoteCheckout}\n                quoteSummary={quoteSummary}\n                quoteDetailTax={quoteDetailTax}\n                status={quoteDetail.status}\n                quoteDetail={quoteDetail}\n              />\n            </Box>\n\n            {quoteDetail.notes && (\n              <Box\n                sx={{\n                  marginBottom: '1rem',\n                  displayPrint: 'none',\n                }}\n              >\n                <QuoteNote quoteNotes={quoteDetail.notes} />\n              </Box>\n            )}\n\n            <Box\n              sx={{\n                marginBottom: '1rem',\n                displayPrint: 'none',\n              }}\n            >\n              <Message\n                id={id}\n                status={quoteDetail.status}\n                isB2BUser={isB2BUser}\n                email={emailAddress || ''}\n                msgs={quoteDetail?.trackingHistory || []}\n              />\n            </Box>\n\n            <Box\n              sx={{\n                marginBottom: '1rem',\n                displayPrint: 'none',\n              }}\n            >\n              <QuoteAttachment\n                allowUpload={Number(quoteDetail.status) !== 4}\n                quoteId={quoteDetail.id}\n                status={quoteDetail.status}\n                defaultFileList={fileList}\n              />\n            </Box>\n\n            {quoteDetail.legalTerms && (\n              <Box\n                sx={{\n                  displayPrint: 'none',\n                }}\n              >\n                <QuoteTermsAndConditions quoteLegalTerms={quoteDetail.legalTerms} />\n              </Box>\n            )}\n          </Grid>\n        </Grid>\n\n        {quoteConvertToOrderPermission &&\n          quotePurchasabilityPermission &&\n          Number(quoteDetail.status) !== 4 &&\n          isShowFooter &&\n          quoteDetail?.allowCheckout &&\n          isAutoEnableQuoteCheckout &&\n          isEnableProductShowCheckout() && (\n            <QuoteDetailFooter\n              quoteId={quoteDetail.id}\n              role={role}\n              isAgenting={isAgenting}\n              status={quoteDetail.status}\n              proceedingCheckoutFn={proceedingCheckoutFn}\n            />\n          )}\n      </Box>\n    </B3Spin>\n  );\n}\n\nexport default QuoteDetail;\n","\nmodule.exports = function () {\n  var selection = document.getSelection();\n  if (!selection.rangeCount) {\n    return function () {};\n  }\n  var active = document.activeElement;\n\n  var ranges = [];\n  for (var i = 0; i < selection.rangeCount; i++) {\n    ranges.push(selection.getRangeAt(i));\n  }\n\n  switch (active.tagName.toUpperCase()) { // .toUpperCase handles XHTML\n    case 'INPUT':\n    case 'TEXTAREA':\n      active.blur();\n      break;\n\n    default:\n      active = null;\n      break;\n  }\n\n  selection.removeAllRanges();\n  return function () {\n    selection.type === 'Caret' &&\n    selection.removeAllRanges();\n\n    if (!selection.rangeCount) {\n      ranges.forEach(function(range) {\n        selection.addRange(range);\n      });\n    }\n\n    active &&\n    active.focus();\n  };\n};\n","\"use strict\";\n\nvar deselectCurrent = require(\"toggle-selection\");\n\nvar clipboardToIE11Formatting = {\n  \"text/plain\": \"Text\",\n  \"text/html\": \"Url\",\n  \"default\": \"Text\"\n}\n\nvar defaultMessage = \"Copy to clipboard: #{key}, Enter\";\n\nfunction format(message) {\n  var copyKey = (/mac os x/i.test(navigator.userAgent) ? \"âŒ˜\" : \"Ctrl\") + \"+C\";\n  return message.replace(/#{\\s*key\\s*}/g, copyKey);\n}\n\nfunction copy(text, options) {\n  var debug,\n    message,\n    reselectPrevious,\n    range,\n    selection,\n    mark,\n    success = false;\n  if (!options) {\n    options = {};\n  }\n  debug = options.debug || false;\n  try {\n    reselectPrevious = deselectCurrent();\n\n    range = document.createRange();\n    selection = document.getSelection();\n\n    mark = document.createElement(\"span\");\n    mark.textContent = text;\n    // avoid screen readers from reading out loud the text\n    mark.ariaHidden = \"true\"\n    // reset user styles for span element\n    mark.style.all = \"unset\";\n    // prevents scrolling to the end of the page\n    mark.style.position = \"fixed\";\n    mark.style.top = 0;\n    mark.style.clip = \"rect(0, 0, 0, 0)\";\n    // used to preserve spaces and line breaks\n    mark.style.whiteSpace = \"pre\";\n    // do not inherit user-select (it may be `none`)\n    mark.style.webkitUserSelect = \"text\";\n    mark.style.MozUserSelect = \"text\";\n    mark.style.msUserSelect = \"text\";\n    mark.style.userSelect = \"text\";\n    mark.addEventListener(\"copy\", function(e) {\n      e.stopPropagation();\n      if (options.format) {\n        e.preventDefault();\n        if (typeof e.clipboardData === \"undefined\") { // IE 11\n          debug && console.warn(\"unable to use e.clipboardData\");\n          debug && console.warn(\"trying IE specific stuff\");\n          window.clipboardData.clearData();\n          var format = clipboardToIE11Formatting[options.format] || clipboardToIE11Formatting[\"default\"]\n          window.clipboardData.setData(format, text);\n        } else { // all other browsers\n          e.clipboardData.clearData();\n          e.clipboardData.setData(options.format, text);\n        }\n      }\n      if (options.onCopy) {\n        e.preventDefault();\n        options.onCopy(e.clipboardData);\n      }\n    });\n\n    document.body.appendChild(mark);\n\n    range.selectNodeContents(mark);\n    selection.addRange(range);\n\n    var successful = document.execCommand(\"copy\");\n    if (!successful) {\n      throw new Error(\"copy command was unsuccessful\");\n    }\n    success = true;\n  } catch (err) {\n    debug && console.error(\"unable to copy using execCommand: \", err);\n    debug && console.warn(\"trying IE specific stuff\");\n    try {\n      window.clipboardData.setData(options.format || \"text\", text);\n      options.onCopy && options.onCopy(window.clipboardData);\n      success = true;\n    } catch (err) {\n      debug && console.error(\"unable to copy using clipboardData: \", err);\n      debug && console.error(\"falling back to prompt\");\n      message = format(\"message\" in options ? options.message : defaultMessage);\n      window.prompt(message, text);\n    }\n  } finally {\n    if (selection) {\n      if (typeof selection.removeRange == \"function\") {\n        selection.removeRange(range);\n      } else {\n        selection.removeAllRanges();\n      }\n    }\n\n    if (mark) {\n      document.body.removeChild(mark);\n    }\n    reselectPrevious();\n  }\n\n  return success;\n}\n\nmodule.exports = copy;\n","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8z\"\n}), 'ArrowUpward');","import {\n  KeyboardEvent,\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport { useB3Lang } from '@b3/lang';\nimport ArrowUpwardIcon from '@mui/icons-material/ArrowUpward';\nimport { Box, Card, CardContent, TextField, Tooltip, useTheme } from '@mui/material';\nimport { format, formatDistanceStrict } from 'date-fns';\n\nimport { B3CollapseContainer } from '@/components';\nimport B3Spin from '@/components/spin/B3Spin';\nimport { GlobalContext } from '@/shared/global';\nimport { updateB2BQuote, updateBCQuote } from '@/shared/service/b2b';\nimport { rolePermissionSelector, useAppSelector } from '@/store';\nimport { displayExtendedFormat, storeHash } from '@/utils';\n\ninterface MessageProps {\n  date?: number;\n  message?: string;\n  role?: string;\n  isCustomer?: boolean;\n  key?: number | string;\n  read?: number;\n  sendTime?: number;\n}\n\ninterface MsgsProps {\n  msgs: MessageProps[];\n  id: string | number;\n  email: string;\n  isB2BUser: boolean;\n  status: number;\n}\n\ninterface CustomerMessageProps {\n  msg: MessageProps;\n  isEndMessage?: boolean;\n  isCustomer?: boolean;\n}\n\nfunction ChatMessage({ msg, isEndMessage, isCustomer }: CustomerMessageProps) {\n  const b3Lang = useB3Lang();\n  return (\n    <Box\n      sx={{\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: isCustomer ? 'flex-end' : 'flex-start',\n        paddingTop: '5px',\n      }}\n    >\n      {msg?.role && (\n        <Box\n          sx={{\n            height: '14px',\n            fontWeight: 400,\n            lineHeight: '14px',\n            fontSize: '10px',\n            letterSpacing: '0.17px',\n            color: 'rgba(0, 0, 0, 0.38)',\n          }}\n        >\n          {msg.role}\n        </Box>\n      )}\n      {msg?.message && (\n        <Box\n          sx={{\n            display: 'inline-block',\n            lineHeight: '34px',\n            padding: '0 10px',\n            background: isCustomer ? 'rgba(25, 118, 210, 0.3)' : 'rgba(0, 0, 0, 0.12)',\n            borderRadius: '18px',\n            m: '1px',\n          }}\n        >\n          <Tooltip title={format((msg.sendTime || 0) * 1000, 'K:m aa')} placement=\"top\" arrow>\n            <Box\n              sx={{\n                wordBreak: 'break-word',\n              }}\n            >\n              {msg.message}\n            </Box>\n          </Tooltip>\n          {isEndMessage && (\n            <Box\n              sx={{\n                height: '14px',\n                fontWeight: 400,\n                lineHeight: '14px',\n                fontSize: '10px',\n                letterSpacing: '0.17px',\n                color: 'rgba(0, 0, 0, 0.38)',\n              }}\n            >\n              {`${b3Lang('quoteDetail.message.sent')} ${formatDistanceStrict(\n                new Date((msg.sendTime || 0) * 1000),\n                new Date(),\n                {\n                  addSuffix: true,\n                },\n              )}`}\n            </Box>\n          )}\n        </Box>\n      )}\n    </Box>\n  );\n}\n\ninterface DateMessageProps {\n  msg: MessageProps;\n}\n\nfunction DateMessage({ msg }: DateMessageProps) {\n  return (\n    <Box\n      sx={{\n        color: 'rgba(0, 0, 0, 0.6)',\n        textAlign: 'center',\n        height: '21px',\n        mb: '5px',\n      }}\n    >\n      {`${displayExtendedFormat(msg?.date || 0)}`}\n    </Box>\n  );\n}\n\nfunction Message({ msgs, id, isB2BUser, email, status }: MsgsProps) {\n  const { dispatch: globalDispatch } = useContext(GlobalContext);\n\n  const theme = useTheme();\n  const primaryColor = theme.palette.primary.main;\n  const b3Lang = useB3Lang();\n\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const changeReadRef = useRef(0);\n\n  const [messages, setMessages] = useState<MessageProps[]>([]);\n\n  const [read, setRead] = useState<number>(0);\n\n  const [message, setMessage] = useState<string>('');\n\n  const [loading, setLoading] = useState<boolean>(false);\n\n  const { quotesUpdateMessageActionsPermission } = useAppSelector(rolePermissionSelector);\n  const quotesUpdateMessagePermission = isB2BUser ? quotesUpdateMessageActionsPermission : true;\n\n  const convertedMsgs = (msgs: MessageProps[]) => {\n    let nextMsg: MessageProps = {};\n    const getNewMsgs: MessageProps[] = [];\n    let readNum = 0;\n    msgs.forEach((msg: MessageProps, index: number) => {\n      if (index === 0) {\n        getNewMsgs.push({\n          isCustomer: !msg.role?.includes('Sales rep:'),\n          date: msg?.date,\n          key: `${msg?.date}date`,\n        });\n        getNewMsgs.push({\n          isCustomer: !msg.role?.includes('Sales rep:'),\n          message: msg.message,\n          sendTime: msg.date,\n          role: msg.role,\n          key: msg?.date,\n        });\n        nextMsg = msg;\n        nextMsg.isCustomer = !msg.role?.includes('Sales rep:');\n      } else {\n        if ((msg?.date || 0) - (nextMsg?.date || 0) > 60 * 60) {\n          getNewMsgs.push({\n            isCustomer: !msg.role?.includes('Sales rep:'),\n            date: msg?.date,\n            key: `${msg?.date}date`,\n          });\n        }\n\n        if (nextMsg.isCustomer === !msg.role?.includes('Sales rep:')) {\n          getNewMsgs.push({\n            isCustomer: !msg.role?.includes('Sales rep:'),\n            message: msg.message,\n            sendTime: msg.date,\n            key: msg?.date,\n          });\n        } else {\n          getNewMsgs.push({\n            isCustomer: !msg.role?.includes('Sales rep:'),\n            message: msg.message,\n            role: msg.role,\n            sendTime: msg.date,\n            key: msg?.date,\n          });\n        }\n        nextMsg = msg;\n        nextMsg.isCustomer = !msg.role?.includes('Sales rep:');\n      }\n\n      if (msg.role?.includes('Sales rep:') && !msg.read) {\n        readNum += 1;\n      }\n    });\n\n    setRead(readNum);\n\n    setMessages(getNewMsgs);\n  };\n\n  const title = useMemo(\n    () => (\n      <Box\n        sx={{\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n        }}\n      >\n        {`${b3Lang('quoteDetail.message.message')} `}\n        {read !== 0 && (\n          <Box\n            sx={{\n              display: 'flex',\n              justifyContent: 'center',\n              alignItems: 'center',\n              width: '20px',\n              height: '20px',\n              borderRadius: '50%',\n              background: primaryColor || '#1976D2',\n              color: '#fff',\n              fontSize: '12px',\n              ml: '8px',\n            }}\n          >\n            {read}\n          </Box>\n        )}\n      </Box>\n    ),\n    // disabling this rule as b3Lang will cause rendering issues\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [primaryColor, read],\n  );\n\n  useEffect(() => {\n    convertedMsgs(msgs);\n  }, [msgs]);\n\n  useEffect(() => {\n    if (messagesEndRef.current && messages.length) {\n      messagesEndRef.current.scrollTop = messagesEndRef.current.scrollHeight;\n    }\n  }, [messages]);\n\n  const updateMsgs = async (msg: string) => {\n    try {\n      const fn = isB2BUser ? updateB2BQuote : updateBCQuote;\n      setLoading(true);\n      const {\n        quoteUpdate: {\n          quote: { trackingHistory },\n        },\n      } = await fn({\n        id: Number(id),\n        quoteData: {\n          message: msg,\n          lastMessage: parseInt(`${new Date().getTime() / 1000}`, 10),\n          userEmail: email || '',\n          storeHash,\n        },\n      });\n      setMessage('');\n      setRead(0);\n      convertedMsgs(trackingHistory);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const updateMessage = (e: KeyboardEvent) => {\n    if (e.key === 'Enter') {\n      updateMsgs((e.target as HTMLInputElement).value || '');\n    }\n  };\n\n  const handleOnChange = useCallback(\n    (open: boolean) => {\n      if (open) {\n        if (!quotesUpdateMessagePermission && isB2BUser) return;\n        const fn = isB2BUser ? updateB2BQuote : updateBCQuote;\n        if (changeReadRef.current === 0 && msgs.length) {\n          fn({\n            id: Number(id),\n            quoteData: {\n              lastMessage: msgs[msgs.length - 1]?.date,\n              userEmail: email || '',\n              storeHash,\n            },\n          });\n        }\n        setRead(0);\n        if (messagesEndRef.current) {\n          messagesEndRef.current.scrollTop = messagesEndRef.current.scrollHeight;\n        }\n        changeReadRef.current += 1;\n      }\n    },\n    [email, id, isB2BUser, msgs, quotesUpdateMessagePermission],\n  );\n\n  useEffect(() => {\n    globalDispatch({\n      type: 'common',\n      payload: {\n        quoteDetailHasNewMessages: read !== 0,\n      },\n    });\n    // Disabling this rule as dispatcher dep globalDispatch is the same between renders\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [read]);\n\n  return (\n    <Card>\n      <CardContent\n        sx={{\n          p: '16px !important',\n        }}\n      >\n        <B3CollapseContainer handleOnChange={handleOnChange} title={title}>\n          <Box\n            sx={{\n              padding: '16px 0',\n            }}\n          >\n            <Box\n              sx={{\n                position: 'relative',\n                color: 'rgba(0, 0, 0, 0.6)',\n                opacity: 0.6,\n                textAlign: 'left',\n                width: '100%',\n                fontSize: '14px',\n              }}\n            >\n              {b3Lang('quoteDetail.message.merchantAnswers')}\n            </Box>\n            <Box\n              ref={messagesEndRef}\n              sx={{\n                mt: '20px',\n                maxHeight: '280px',\n                overflowY: 'auto',\n                '&::-webkit-scrollbar': {\n                  display: 'none',\n                },\n              }}\n            >\n              {messages.map((item: MessageProps, index: number) => (\n                <Box key={item.key}>\n                  <ChatMessage\n                    msg={item}\n                    isEndMessage={index === messages.length - 1}\n                    isCustomer={!!item.isCustomer}\n                  />\n                  {item.date && <DateMessage msg={item} />}\n                </Box>\n              ))}\n            </Box>\n          </Box>\n\n          {status !== 4 && quotesUpdateMessagePermission && (\n            <B3Spin\n              isSpinning={loading}\n              spinningHeight={50}\n              size={10}\n              isCloseLoading\n              tip=\"waiting..\"\n            >\n              <Box\n                sx={{\n                  display: 'flex',\n                  width: '100%',\n                }}\n              >\n                <TextField\n                  onKeyDown={updateMessage}\n                  sx={{\n                    width: '100%',\n                    '& .MuiFormLabel-root': {\n                      color: 'rgba(0, 0, 0, 0.38)',\n                    },\n                    '& input': {\n                      padding: '1.5rem 0.7rem 0.5rem',\n                    },\n                  }}\n                  value={message}\n                  onChange={(event) => {\n                    setMessage(event.target.value);\n                  }}\n                  size=\"small\"\n                  label={b3Lang('quoteDetail.message.typeMessage')}\n                  variant=\"filled\"\n                />\n                <Box\n                  onClick={() => updateMsgs(message)}\n                  sx={{\n                    width: '42px',\n                    height: '36px',\n                    margin: '10px 0 0 10px',\n                    background: '#BAD6F2',\n                    borderRadius: '50%',\n                  }}\n                >\n                  <ArrowUpwardIcon\n                    sx={{\n                      height: '18px',\n                      width: '18px',\n                      margin: '8px 0 0 9px',\n                      color: '#0000008A',\n                    }}\n                    fontSize=\"small\"\n                  />\n                </Box>\n              </Box>\n            </B3Spin>\n          )}\n        </B3CollapseContainer>\n      </CardContent>\n    </Card>\n  );\n}\n\nexport default Message;\n","import { Location, NavigateFunction } from 'react-router-dom';\n\nimport {\n  b2bQuoteCheckout,\n  bcQuoteCheckout,\n  getBCStorefrontProductSettings,\n} from '@/shared/service/b2b';\nimport { setQuoteDetailToCheckoutUrl, store } from '@/store';\nimport { attemptCheckoutLoginAndRedirect, setQuoteToStorage } from '@/utils/b3checkout';\nimport b2bLogger from '@/utils/b3Logger';\nimport { platform } from '@/utils/basicConfig';\nimport { getSearchVal } from '@/utils/loginInfo';\n\ninterface QuoteCheckout {\n  role: string | number;\n  proceedingCheckoutFn: () => boolean;\n  location: Location;\n  quoteId: string;\n  navigate?: NavigateFunction;\n}\n\nexport const handleQuoteCheckout = async ({\n  role,\n  proceedingCheckoutFn,\n  location,\n  quoteId,\n  navigate,\n}: QuoteCheckout) => {\n  try {\n    store.dispatch(setQuoteDetailToCheckoutUrl(''));\n\n    const isHideQuoteCheckout = proceedingCheckoutFn();\n\n    if (isHideQuoteCheckout) return;\n\n    const {\n      storefrontProductSettings: { hidePriceFromGuests },\n    } = await getBCStorefrontProductSettings();\n\n    if (hidePriceFromGuests && Number(role) === 100 && navigate) {\n      store.dispatch(setQuoteDetailToCheckoutUrl(location.pathname + location.search));\n      navigate('/login');\n      return;\n    }\n\n    const fn = Number(role) === 99 ? bcQuoteCheckout : b2bQuoteCheckout;\n    const date = getSearchVal(location.search, 'date');\n\n    const res = await fn({\n      id: Number(quoteId),\n    });\n\n    setQuoteToStorage(quoteId, date);\n    const {\n      quoteCheckout: {\n        quoteCheckout: { checkoutUrl, cartId },\n      },\n    } = res;\n\n    if (platform === 'bigcommerce') {\n      window.location.href = checkoutUrl;\n      return;\n    }\n\n    await attemptCheckoutLoginAndRedirect(cartId, checkoutUrl as string);\n  } catch (err) {\n    b2bLogger.error(err);\n  }\n};\n\nexport default handleQuoteCheckout;\n","import { useLocation, useNavigate } from 'react-router-dom';\nimport { useB3Lang } from '@b3/lang';\nimport { Box } from '@mui/material';\n\nimport CustomButton from '@/components/button/CustomButton';\nimport { useMobile } from '@/hooks';\n\nimport { handleQuoteCheckout } from '../utils/quoteCheckout';\n\ninterface QuoteDetailFooterProps {\n  quoteId: string;\n  role: string | number;\n  isAgenting: boolean;\n  status: number;\n  proceedingCheckoutFn: () => boolean;\n}\n\nfunction QuoteDetailFooter(props: QuoteDetailFooterProps) {\n  const { quoteId, role, isAgenting, status, proceedingCheckoutFn } = props;\n  const [isMobile] = useMobile();\n  const b3Lang = useB3Lang();\n  const location = useLocation();\n  const navigate = useNavigate();\n\n  const containerStyle = isMobile\n    ? {\n        alignItems: 'flex-end',\n        flexDirection: 'column',\n      }\n    : {\n        alignItems: 'center',\n      };\n\n  return status !== 5 ? (\n    <Box\n      sx={{\n        position: 'fixed',\n        bottom: isMobile && isAgenting ? '52px' : 0,\n        left: 0,\n        backgroundColor: '#fff',\n        width: '100%',\n        padding: '0.8rem 1rem',\n        height: 'auto',\n        display: 'flex',\n        zIndex: '999',\n        justifyContent: isMobile ? 'center' : 'flex-end',\n        displayPrint: 'none',\n        ...containerStyle,\n      }}\n    >\n      <CustomButton\n        variant=\"contained\"\n        onClick={() => {\n          handleQuoteCheckout({\n            proceedingCheckoutFn,\n            role,\n            location,\n            quoteId,\n            navigate,\n          });\n        }}\n        sx={{\n          width: isMobile ? '100%' : 'auto',\n        }}\n      >\n        {b3Lang('quoteDetail.footer.proceedToCheckout')}\n      </CustomButton>\n    </Box>\n  ) : null;\n}\n\nexport default QuoteDetailFooter;\n","import { useContext } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useB3Lang } from '@b3/lang';\nimport { ArrowBackIosNew } from '@mui/icons-material';\nimport { Box, Grid, styled, Typography, useTheme } from '@mui/material';\n\nimport CustomButton from '@/components/button/CustomButton';\nimport { b3HexToRgb, getContrastColor } from '@/components/outSideComponents/utils/b3CustomStyles';\nimport { useMobile } from '@/hooks';\nimport { CustomStyleContext } from '@/shared/customStyleButton';\nimport { displayFormat } from '@/utils';\n\nimport QuoteStatus from './QuoteStatus';\n\nconst StyledCreateName = styled('div')(() => ({\n  display: 'flex',\n  alignItems: 'center',\n  marginTop: '0.5rem',\n}));\n\ninterface QuoteDetailHeaderProps {\n  status: string;\n  quoteNumber: string;\n  issuedAt: number;\n  expirationDate: number;\n  exportPdf: () => void;\n  printQuote: () => Promise<void>;\n  role: string | number;\n  salesRepInfo: { [key: string]: string };\n}\n\nfunction QuoteDetailHeader(props: QuoteDetailHeaderProps) {\n  const [isMobile] = useMobile();\n  const b3Lang = useB3Lang();\n\n  const {\n    status,\n    quoteNumber,\n    issuedAt,\n    expirationDate,\n    exportPdf,\n    printQuote,\n    role,\n    salesRepInfo,\n  } = props;\n\n  const {\n    state: {\n      portalStyle: { backgroundColor = '#FEF9F5' },\n    },\n  } = useContext(CustomStyleContext);\n\n  const customColor = getContrastColor(backgroundColor);\n\n  const theme = useTheme();\n\n  const primaryColor = theme.palette.primary.main;\n\n  const navigate = useNavigate();\n  const gridOptions = (xs: number) =>\n    isMobile\n      ? {}\n      : {\n          xs,\n        };\n\n  return (\n    <>\n      {Number(role) !== 100 && (\n        <Box\n          sx={{\n            marginBottom: '10px',\n            width: 'fit-content',\n            displayPrint: 'none',\n          }}\n        >\n          <Box\n            sx={{\n              color: '#1976d2',\n              cursor: 'pointer',\n              display: 'flex',\n              alignItems: 'center',\n            }}\n            onClick={() => {\n              navigate('/quotes');\n            }}\n          >\n            <ArrowBackIosNew\n              fontSize=\"small\"\n              sx={{\n                fontSize: '12px',\n                marginRight: '0.5rem',\n                color: primaryColor,\n              }}\n            />\n            <p\n              style={{\n                color: primaryColor,\n                margin: '0',\n              }}\n            >\n              {b3Lang('quoteDetail.header.backToQuoteLists')}\n            </p>\n          </Box>\n        </Box>\n      )}\n\n      <Grid\n        container\n        spacing={2}\n        sx={{\n          display: 'flex',\n          justifyContent: 'space-between',\n          flexDirection: isMobile ? 'column' : 'row',\n          mb: isMobile ? '16px' : '',\n        }}\n      >\n        <Grid\n          item\n          {...gridOptions(8)}\n          sx={{\n            color: customColor,\n          }}\n        >\n          <Box\n            sx={{\n              display: 'flex',\n              alignItems: isMobile ? 'start' : 'center',\n              flexDirection: isMobile ? 'column' : 'row',\n            }}\n          >\n            <Typography\n              sx={{\n                marginRight: '10px',\n                fontSize: '34px',\n                color: b3HexToRgb(customColor, 0.87),\n              }}\n            >\n              {b3Lang('quoteDetail.header.quoteNumber', {\n                quoteNumber: quoteNumber || '',\n              })}\n            </Typography>\n\n            <QuoteStatus code={status} />\n          </Box>\n          {(salesRepInfo?.salesRepName || salesRepInfo?.salesRepEmail) && (\n            <StyledCreateName>\n              <Typography\n                variant=\"subtitle2\"\n                sx={{\n                  marginRight: '0.5rem',\n                  fontSize: '16px',\n                }}\n              >\n                {b3Lang('quoteDetail.header.salesRep')}\n              </Typography>\n              <span>\n                {salesRepInfo?.salesRepEmail !== ''\n                  ? `${salesRepInfo?.salesRepName}(${salesRepInfo?.salesRepEmail})`\n                  : salesRepInfo?.salesRepName}\n              </span>\n            </StyledCreateName>\n          )}\n          <Box>\n            <StyledCreateName>\n              <Typography\n                variant=\"subtitle2\"\n                sx={{\n                  marginRight: '0.5rem',\n                  fontSize: '16px',\n                }}\n              >\n                {b3Lang('quoteDetail.header.issuedOn')}\n              </Typography>\n              <span>{`${issuedAt ? displayFormat(Number(issuedAt)) : ''}`}</span>\n            </StyledCreateName>\n            <StyledCreateName>\n              <Typography\n                variant=\"subtitle2\"\n                sx={{\n                  marginRight: '0.5rem',\n                  fontSize: '16px',\n                }}\n              >\n                {b3Lang('quoteDetail.header.expirationDate')}\n              </Typography>\n              <span>{`${expirationDate ? displayFormat(Number(expirationDate)) : ''}`}</span>\n            </StyledCreateName>\n          </Box>\n        </Grid>\n        {Number(role) !== 100 && (\n          <Grid\n            item\n            sx={{\n              textAlign: isMobile ? 'none' : 'end',\n              displayPrint: 'none',\n            }}\n            {...gridOptions(4)}\n          >\n            <Box>\n              <CustomButton\n                variant=\"outlined\"\n                sx={{\n                  marginRight: '1rem',\n                  displayPrint: 'none',\n                }}\n                onClick={printQuote}\n              >\n                {b3Lang('quoteDetail.header.print')}\n              </CustomButton>\n              <CustomButton variant=\"outlined\" onClick={exportPdf}>\n                {b3Lang('quoteDetail.header.downloadPDF')}\n              </CustomButton>\n            </Box>\n          </Grid>\n        )}\n      </Grid>\n    </>\n  );\n}\n\nexport default QuoteDetailHeader;\n","import { useB3Lang } from '@b3/lang';\nimport { Box, Card, CardContent, Grid, Typography } from '@mui/material';\n\nimport { useAppSelector } from '@/store';\nimport { currencyFormatConvert } from '@/utils';\n\ninterface Summary {\n  originalSubtotal: string | number;\n  discount: string | number;\n  tax: string | number;\n  shipping: string | number;\n  totalAmount: string | number;\n}\n\ninterface QuoteDetailSummaryProps {\n  quoteSummary: Summary;\n  quoteDetailTax: number;\n  status: string;\n  quoteDetail: CustomFieldItems;\n  isHideQuoteCheckout: boolean;\n}\n\nexport default function QuoteDetailSummary({\n  quoteSummary: { originalSubtotal, discount, tax, shipping, totalAmount },\n  quoteDetailTax = 0,\n  status,\n  quoteDetail,\n  isHideQuoteCheckout,\n}: QuoteDetailSummaryProps) {\n  const b3Lang = useB3Lang();\n  const enteredInclusiveTax = useAppSelector(\n    ({ storeConfigs }) => storeConfigs.currencies.enteredInclusiveTax,\n  );\n  const showInclusiveTaxPrice = useAppSelector(({ global }) => global.showInclusiveTaxPrice);\n\n  const getCurrentPrice = (price: number, quoteDetailTax: number) => {\n    if (enteredInclusiveTax) {\n      return showInclusiveTaxPrice ? price : price - quoteDetailTax;\n    }\n    return showInclusiveTaxPrice ? price + quoteDetailTax : price;\n  };\n\n  const priceFormat = (price: number) =>\n    currencyFormatConvert(price, {\n      currency: quoteDetail.currency,\n      isConversionRate: false,\n      useCurrentCurrency: !!quoteDetail.currency,\n    });\n\n  const getShippingAndTax = () => {\n    if (quoteDetail?.shippingMethod?.id) {\n      return {\n        shippingText: `${b3Lang('quoteDetail.summary.shipping')}(${\n          quoteDetail?.shippingMethod?.description || ''\n        })`,\n        shippingVal: priceFormat(Number(shipping)),\n        taxText: b3Lang('quoteDetail.summary.tax'),\n        taxVal: priceFormat(Number(tax)),\n      };\n    }\n\n    if (!quoteDetail?.salesRepEmail && !quoteDetail?.shippingMethod?.id && Number(status) === 1) {\n      return {\n        shippingText: b3Lang('quoteDetail.summary.shipping'),\n        shippingVal: b3Lang('quoteDetail.summary.tbd'),\n        taxText: b3Lang('quoteDetail.summary.estimatedTax'),\n        taxVal: priceFormat(Number(tax)),\n      };\n    }\n\n    if (\n      quoteDetail?.salesRepEmail &&\n      !quoteDetail?.shippingMethod?.id &&\n      (Number(status) === 1 || Number(status) === 5)\n    ) {\n      return {\n        shippingText: `${b3Lang('quoteDetail.summary.shipping')}(${b3Lang(\n          'quoteDetail.summary.quoteCheckout',\n        )})`,\n        shippingVal: b3Lang('quoteDetail.summary.tbd'),\n        taxText: b3Lang('quoteDetail.summary.tax'),\n        taxVal: b3Lang('quoteDetail.summary.tbd'),\n      };\n    }\n\n    return null;\n  };\n\n  const shippingAndTax = getShippingAndTax();\n\n  const showPrice = (price: string | number): string | number => {\n    if (isHideQuoteCheckout) return b3Lang('quoteDraft.quoteSummary.tbd');\n\n    return price;\n  };\n\n  const subtotalPrice = Number(originalSubtotal);\n  const quotedSubtotal = Number(originalSubtotal) - Number(discount);\n  return (\n    <Card>\n      <CardContent>\n        <Box>\n          <Typography variant=\"h5\">{b3Lang('quoteDetail.summary.quoteSummary')}</Typography>\n          <Box\n            sx={{\n              marginTop: '20px',\n              color: '#212121',\n            }}\n          >\n            {quoteDetail?.displayDiscount && (\n              <Grid\n                container\n                justifyContent=\"space-between\"\n                sx={{\n                  margin: '4px 0',\n                }}\n              >\n                <Typography>{b3Lang('quoteDetail.summary.originalSubtotal')}</Typography>\n                <Typography>\n                  {showPrice(priceFormat(getCurrentPrice(subtotalPrice, quoteDetailTax)))}\n                </Typography>\n              </Grid>\n            )}\n\n            {!quoteDetail?.salesRepEmail && Number(status) === 1 ? null : (\n              <Grid\n                container\n                justifyContent=\"space-between\"\n                sx={{\n                  margin: '4px 0',\n                  display: quoteDetail?.displayDiscount ? '' : 'none',\n                }}\n              >\n                <Typography>{b3Lang('quoteDetail.summary.discountAmount')}</Typography>\n                <Typography>\n                  {Number(discount) > 0\n                    ? `-${priceFormat(Number(discount))}`\n                    : priceFormat(Number(discount))}\n                </Typography>\n              </Grid>\n            )}\n\n            <Grid\n              container\n              justifyContent=\"space-between\"\n              sx={{\n                margin: '4px 0',\n              }}\n            >\n              <Typography\n                sx={{\n                  fontWeight: 'bold',\n                  color: '#212121',\n                }}\n              >\n                {b3Lang('quoteDetail.summary.quotedSubtotal')}\n              </Typography>\n              <Typography\n                sx={{\n                  fontWeight: 'bold',\n                  color: '#212121',\n                }}\n              >\n                {showPrice(priceFormat(getCurrentPrice(quotedSubtotal, quoteDetailTax)))}\n              </Typography>\n            </Grid>\n\n            {shippingAndTax && (\n              <>\n                <Grid\n                  container\n                  justifyContent=\"space-between\"\n                  sx={{\n                    margin: '4px 0',\n                  }}\n                >\n                  <Typography\n                    sx={{\n                      maxWidth: '70%',\n                      wordBreak: 'break-word',\n                    }}\n                  >\n                    {shippingAndTax.shippingText}\n                  </Typography>\n                  <Typography>{showPrice(shippingAndTax.shippingVal)}</Typography>\n                </Grid>\n                <Grid\n                  container\n                  justifyContent=\"space-between\"\n                  sx={{\n                    margin: '4px 0',\n                  }}\n                >\n                  <Typography>{shippingAndTax.taxText}</Typography>\n                  <Typography>{showPrice(shippingAndTax.taxVal)}</Typography>\n                </Grid>\n              </>\n            )}\n\n            <Grid\n              container\n              justifyContent=\"space-between\"\n              sx={{\n                margin: '24px 0 0',\n              }}\n            >\n              <Typography\n                sx={{\n                  fontWeight: 'bold',\n                  color: '#212121',\n                }}\n              >\n                {b3Lang('quoteDetail.summary.grandTotal')}\n              </Typography>\n              <Typography\n                sx={{\n                  fontWeight: 'bold',\n                  color: '#212121',\n                }}\n              >\n                {showPrice(priceFormat(Number(totalAmount)))}\n              </Typography>\n            </Grid>\n          </Box>\n        </Box>\n      </CardContent>\n    </Card>\n  );\n}\n","import { useB3Lang } from '@b3/lang';\nimport { Box, CardContent, styled, Typography } from '@mui/material';\n\nimport { PRODUCT_DEFAULT_IMAGE } from '@/constants';\nimport { useAppSelector } from '@/store';\nimport { currencyFormatConvert } from '@/utils';\nimport { getBCPrice } from '@/utils/b3Product/b3Product';\n\ninterface QuoteTableCardProps {\n  item: any;\n  len: number;\n  getTaxRate: (taxClassId: number, variants: any) => number;\n  itemIndex?: number;\n  showPrice: (price: string, row: CustomFieldItems) => string | number;\n  displayDiscount: boolean;\n  currency: CurrencyProps;\n}\n\nconst StyledImage = styled('img')(() => ({\n  maxWidth: '60px',\n  height: 'auto',\n  marginRight: '0.5rem',\n}));\n\nfunction QuoteDetailTableCard(props: QuoteTableCardProps) {\n  const {\n    item: quoteTableItem,\n    len,\n    itemIndex,\n    getTaxRate,\n    showPrice,\n    currency,\n    displayDiscount,\n  } = props;\n  const b3Lang = useB3Lang();\n  const enteredInclusiveTax = useAppSelector(\n    ({ storeConfigs }) => storeConfigs.currencies.enteredInclusiveTax,\n  );\n\n  const {\n    basePrice,\n    quantity,\n    imageUrl,\n    productName,\n    options,\n    sku,\n    notes,\n    offeredPrice,\n    productsSearch: { productUrl, variants = [], taxClassId },\n  } = quoteTableItem;\n\n  const taxRate = getTaxRate(taxClassId, variants);\n  const taxPrice = enteredInclusiveTax\n    ? (Number(basePrice) * taxRate) / (1 + taxRate)\n    : Number(basePrice) * taxRate;\n  const discountTaxPrice = enteredInclusiveTax\n    ? (Number(offeredPrice) * taxRate) / (1 + taxRate)\n    : Number(offeredPrice) * taxRate;\n\n  const price = getBCPrice(Number(basePrice), taxPrice);\n  const discountPrice = getBCPrice(Number(offeredPrice), discountTaxPrice);\n\n  const isDiscount = Number(basePrice) - Number(offeredPrice) > 0 && displayDiscount;\n\n  const total = Number(price) * Number(quantity);\n  const totalWithDiscount = discountPrice * Number(quantity);\n\n  return (\n    <Box\n      key={quoteTableItem.id}\n      width=\"100%\"\n      sx={{\n        borderTop: '1px solid #D9DCE9',\n        borderBottom: itemIndex === len - 1 ? '1px solid #D9DCE9' : '',\n      }}\n    >\n      <CardContent\n        sx={{\n          color: '#313440',\n          display: 'flex',\n          pl: 0,\n        }}\n      >\n        <Box>\n          <StyledImage src={imageUrl || PRODUCT_DEFAULT_IMAGE} alt=\"Product-img\" loading=\"lazy\" />\n        </Box>\n        <Box\n          sx={{\n            flex: 1,\n          }}\n        >\n          <Typography\n            variant=\"body1\"\n            color=\"#212121\"\n            onClick={() => {\n              const {\n                location: { origin },\n              } = window;\n\n              if (productUrl) {\n                window.location.href = `${origin}${productUrl}`;\n              }\n            }}\n            sx={{\n              cursor: 'pointer',\n            }}\n          >\n            {productName}\n          </Typography>\n          <Typography variant=\"body1\" color=\"#616161\">\n            {sku}\n          </Typography>\n          <Box\n            sx={{\n              margin: '1rem 0',\n            }}\n          >\n            {options.length > 0 && (\n              <Box>\n                {options.map((option: any) => (\n                  <Typography\n                    sx={{\n                      fontSize: '0.75rem',\n                      lineHeight: '1.5',\n                      color: '#455A64',\n                    }}\n                    key={option.optionName}\n                  >\n                    {`${option.optionName}: ${option.optionLabel}`}\n                  </Typography>\n                ))}\n              </Box>\n            )}\n          </Box>\n          <Typography variant=\"body1\" color=\"#616161\">\n            {notes}\n          </Typography>\n\n          <Typography\n            sx={{\n              fontSize: '14px',\n            }}\n          >\n            {b3Lang('quoteDetail.tableCard.price')}\n            {isDiscount && (\n              <span\n                style={{\n                  marginLeft: '5px',\n                  textDecoration: 'line-through',\n                }}\n              >\n                {`${showPrice(\n                  currencyFormatConvert(price, {\n                    currency,\n                  }),\n                  quoteTableItem,\n                )}`}\n              </span>\n            )}\n            <span\n              style={{\n                marginLeft: '5px',\n                color: isDiscount ? '#2E7D32' : '#212121',\n              }}\n            >\n              {`${showPrice(\n                currencyFormatConvert(offeredPrice, {\n                  currency,\n                }),\n                quoteTableItem,\n              )}`}\n            </span>\n          </Typography>\n\n          <Typography\n            sx={{\n              padding: '12px 0',\n              fontSize: '14px',\n            }}\n          >\n            {b3Lang('quoteDetail.tableCard.qty', { quantity })}\n          </Typography>\n\n          <Typography\n            sx={{\n              fontSize: '14px',\n            }}\n          >\n            {b3Lang('quoteDetail.tableCard.total')}\n            {isDiscount && (\n              <span\n                style={{\n                  marginLeft: '5px',\n                  textDecoration: 'line-through',\n                }}\n              >\n                {`${showPrice(\n                  currencyFormatConvert(total, {\n                    currency,\n                  }),\n                  quoteTableItem,\n                )}`}\n              </span>\n            )}\n            <span\n              style={{\n                marginLeft: '5px',\n                color: isDiscount ? '#2E7D32' : '#212121',\n              }}\n            >\n              {`${showPrice(\n                currencyFormatConvert(totalWithDiscount, {\n                  currency,\n                }),\n                quoteTableItem,\n              )}`}\n            </span>\n          </Typography>\n        </Box>\n      </CardContent>\n    </Box>\n  );\n}\n\nexport default QuoteDetailTableCard;\n","import { forwardRef, Ref, useImperativeHandle, useRef, useState } from 'react';\nimport { useB3Lang } from '@b3/lang';\nimport { Box, styled, Typography } from '@mui/material';\n\nimport { B3PaginationTable, GetRequestList } from '@/components/table/B3PaginationTable';\nimport { TableColumnItem } from '@/components/table/B3Table';\nimport { PRODUCT_DEFAULT_IMAGE } from '@/constants';\nimport { useAppSelector } from '@/store';\nimport { currencyFormatConvert } from '@/utils';\nimport { getBCPrice, getDisplayPrice } from '@/utils/b3Product/b3Product';\n\nimport QuoteDetailTableCard from './QuoteDetailTableCard';\n\ninterface ProductInfoProps {\n  basePrice: number | string;\n  baseSku: string;\n  createdAt: number;\n  discount: number | string;\n  enteredInclusive: boolean;\n  id: number | string;\n  itemId: number;\n  optionList: string;\n  primaryImage: string;\n  productId: number;\n  productName: string;\n  productUrl: string;\n  quantity: number | string;\n  tax: number | string;\n  updatedAt: number;\n  variantId: number;\n  variantSku: string;\n  productsSearch: CustomFieldItems;\n  offeredPrice: number | string;\n}\n\ninterface ListItemProps {\n  node: ProductInfoProps;\n}\n\ninterface ShoppingDetailTableProps {\n  total: number;\n  getQuoteTableDetails: GetRequestList<SearchProps, ProductInfoProps>;\n  isHandleApprove: boolean;\n  getTaxRate: (taxClassId: number, variants: any) => number;\n  displayDiscount: boolean;\n  currency: CurrencyProps;\n}\n\ninterface SearchProps {\n  first?: number;\n  offset?: number;\n}\n\ninterface OptionProps {\n  optionId: number;\n  optionLabel: string;\n  optionName: string;\n  optionValue: string | number;\n}\n\ninterface PaginationTableRefProps extends HTMLInputElement {\n  getList: () => void;\n  setList: (items?: ListItemProps[]) => void;\n  getSelectedValue: () => void;\n}\n\nconst StyledQuoteTableContainer = styled('div')(() => ({\n  backgroundColor: '#FFFFFF',\n  padding: '1rem',\n  width: '100%',\n  border: '1px solid #E0E0E0',\n  boxShadow:\n    '0px 2px 1px -1px rgba(0, 0, 0, 0.2), 0px 1px 1px rgba(0, 0, 0, 0.14), 0px 1px 3px rgba(0, 0, 0, 0.12)',\n  borderRadius: '4px',\n\n  '& tbody': {\n    '& tr': {\n      '& td': {\n        verticalAlign: 'top',\n      },\n      '& td: first-of-type': {\n        verticalAlign: 'inherit',\n      },\n    },\n    '& tr: hover': {\n      '& #shoppingList-actionList': {\n        opacity: 1,\n      },\n    },\n  },\n}));\n\nconst StyledImage = styled('img')(() => ({\n  maxWidth: '60px',\n  height: 'auto',\n  marginRight: '0.5rem',\n}));\n\nfunction QuoteDetailTable(props: ShoppingDetailTableProps, ref: Ref<unknown>) {\n  const b3Lang = useB3Lang();\n  const { total, getQuoteTableDetails, getTaxRate, isHandleApprove, displayDiscount, currency } =\n    props;\n\n  const isEnableProduct = useAppSelector(\n    ({ global }) => global.blockPendingQuoteNonPurchasableOOS.isEnableProduct,\n  );\n  const enteredInclusiveTax = useAppSelector(\n    ({ storeConfigs }) => storeConfigs.currencies.enteredInclusiveTax,\n  );\n\n  const paginationTableRef = useRef<PaginationTableRefProps | null>(null);\n\n  const [search, setSearch] = useState<SearchProps>({\n    first: 12,\n    offset: 0,\n  });\n\n  useImperativeHandle(ref, () => ({\n    getList: () => paginationTableRef.current?.getList(),\n    refreshList: () => {\n      setSearch({\n        offset: 0,\n      });\n    },\n  }));\n\n  const showPrice = (price: string, row: CustomFieldItems): string | number => {\n    if (isEnableProduct) {\n      if (isHandleApprove) return price;\n      return getDisplayPrice({\n        price,\n        productInfo: row,\n        showText: b3Lang('quoteDraft.quoteSummary.tbd'),\n      });\n    }\n    return price;\n  };\n  const columnItems: TableColumnItem<ProductInfoProps>[] = [\n    {\n      key: 'Product',\n      title: b3Lang('quoteDetail.table.product'),\n      render: (row: CustomFieldItems) => {\n        const optionsValue = row.options;\n        const productUrl = row.productsSearch?.productUrl;\n\n        return (\n          <Box\n            sx={{\n              display: 'flex',\n              alignItems: 'flex-start',\n            }}\n          >\n            <StyledImage\n              src={row.imageUrl || PRODUCT_DEFAULT_IMAGE}\n              alt=\"Product-img\"\n              loading=\"lazy\"\n            />\n            <Box>\n              <Typography\n                variant=\"body1\"\n                color=\"#212121\"\n                onClick={() => {\n                  const {\n                    location: { origin },\n                  } = window;\n                  if (productUrl) {\n                    window.location.href = `${origin}${productUrl}`;\n                  }\n                }}\n                sx={{\n                  cursor: 'pointer',\n                }}\n              >\n                {row.productName}\n              </Typography>\n              <Typography variant=\"body1\" color=\"#616161\">\n                {row.sku}\n              </Typography>\n              {optionsValue.length > 0 && (\n                <Box>\n                  {optionsValue.map(\n                    (option: OptionProps) =>\n                      option.optionLabel && (\n                        <Typography\n                          sx={{\n                            fontSize: '0.75rem',\n                            lineHeight: '1.5',\n                            color: '#455A64',\n                          }}\n                          key={`${option.optionName}_${option.optionLabel}`}\n                        >\n                          {`${option.optionName}: ${option.optionLabel}`}\n                        </Typography>\n                      ),\n                  )}\n                </Box>\n              )}\n              {row.notes && (\n                <Typography\n                  variant=\"body1\"\n                  color=\"#ED6C02\"\n                  sx={{\n                    fontSize: '0.9rem',\n                    whiteSpace: 'pre-wrap',\n                    wordBreak: 'break-word',\n                  }}\n                >\n                  <span>Notes: </span>\n                  {row.notes}\n                </Typography>\n              )}\n            </Box>\n          </Box>\n        );\n      },\n      width: '40%',\n    },\n    {\n      key: 'Price',\n      title: b3Lang('quoteDetail.table.price'),\n      render: (row: CustomFieldItems) => {\n        const {\n          basePrice,\n          offeredPrice,\n          productsSearch: { variants = [], taxClassId },\n        } = row;\n\n        const taxRate = getTaxRate(taxClassId, variants);\n        const taxPrice = enteredInclusiveTax\n          ? (Number(basePrice) * taxRate) / (1 + taxRate)\n          : Number(basePrice) * taxRate;\n        const discountTaxPrice = enteredInclusiveTax\n          ? (Number(offeredPrice) * taxRate) / (1 + taxRate)\n          : Number(offeredPrice) * taxRate;\n\n        const price = getBCPrice(Number(basePrice), taxPrice);\n        const discountPrice = getBCPrice(Number(offeredPrice), discountTaxPrice);\n\n        const isDiscount = Number(basePrice) - Number(offeredPrice) > 0 && displayDiscount;\n        return (\n          <>\n            {isDiscount && (\n              <Typography\n                sx={{\n                  padding: '12px 0 0 0',\n                  textDecoration: 'line-through',\n                }}\n              >\n                {showPrice(\n                  currencyFormatConvert(price, {\n                    currency,\n                    isConversionRate: false,\n                    useCurrentCurrency: !!currency,\n                  }),\n                  row,\n                )}\n              </Typography>\n            )}\n\n            <Typography\n              sx={{\n                padding: isDiscount ? '0' : '12px 0 0 0',\n                color: isDiscount ? '#2E7D32' : '#212121',\n              }}\n            >\n              {showPrice(\n                currencyFormatConvert(discountPrice, {\n                  currency,\n                  isConversionRate: false,\n                  useCurrentCurrency: !!currency,\n                }),\n                row,\n              )}\n            </Typography>\n          </>\n        );\n      },\n      width: '15%',\n      style: {\n        textAlign: 'right',\n      },\n    },\n    {\n      key: 'Qty',\n      title: b3Lang('quoteDetail.table.qty'),\n      render: (row) => (\n        <Typography\n          sx={{\n            padding: '12px 0',\n          }}\n        >\n          {row.quantity}\n        </Typography>\n      ),\n      width: '15%',\n      style: {\n        textAlign: 'right',\n      },\n    },\n    {\n      key: 'Total',\n      title: b3Lang('quoteDetail.table.total'),\n      render: (row: CustomFieldItems) => {\n        const {\n          basePrice,\n          quantity,\n          offeredPrice,\n          productsSearch: { variants = [], taxClassId },\n        } = row;\n\n        const taxRate = getTaxRate(taxClassId, variants);\n        const taxPrice = enteredInclusiveTax\n          ? (Number(basePrice) * taxRate) / (1 + taxRate)\n          : Number(basePrice) * taxRate;\n        const discountTaxPrice = enteredInclusiveTax\n          ? (Number(offeredPrice) * taxRate) / (1 + taxRate)\n          : Number(offeredPrice) * taxRate;\n\n        const price = getBCPrice(Number(basePrice), taxPrice);\n        const discountPrice = getBCPrice(Number(offeredPrice), discountTaxPrice);\n        const isDiscount = Number(basePrice) - Number(offeredPrice) > 0 && displayDiscount;\n\n        const total = price * Number(quantity);\n        const totalWithDiscount = discountPrice * Number(quantity);\n\n        return (\n          <Box>\n            {isDiscount && (\n              <Typography\n                sx={{\n                  padding: '12px 0 0 0',\n                  textDecoration: 'line-through',\n                }}\n              >\n                {showPrice(\n                  currencyFormatConvert(total, {\n                    currency,\n                    isConversionRate: false,\n                    useCurrentCurrency: !!currency,\n                  }),\n                  row,\n                )}\n              </Typography>\n            )}\n            <Typography\n              sx={{\n                padding: isDiscount ? '0' : '12px 0 0 0',\n                color: isDiscount ? '#2E7D32' : '#212121',\n              }}\n            >\n              {showPrice(\n                currencyFormatConvert(totalWithDiscount, {\n                  currency,\n                  isConversionRate: false,\n                  useCurrentCurrency: !!currency,\n                }),\n                row,\n              )}\n            </Typography>\n          </Box>\n        );\n      },\n      width: '20%',\n      style: {\n        textAlign: 'right',\n      },\n    },\n  ];\n\n  return (\n    <StyledQuoteTableContainer>\n      <Box\n        sx={{\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'space-between',\n          margin: '0.5rem 0 1rem 0',\n        }}\n      >\n        <Typography\n          sx={{\n            fontSize: '24px',\n          }}\n        >\n          {b3Lang('quoteDetail.table.totalProducts', { total: total || 0 })}\n        </Typography>\n      </Box>\n      <B3PaginationTable\n        ref={paginationTableRef}\n        columnItems={columnItems}\n        rowsPerPageOptions={[12, 24, 36]}\n        getRequestList={getQuoteTableDetails}\n        isCustomRender={false}\n        hover\n        searchParams={search}\n        labelRowsPerPage={b3Lang('quoteDetail.table.perPage')}\n        showBorder={false}\n        itemIsMobileSpacing={0}\n        noDataText={b3Lang('quoteDetail.table.noProducts')}\n        tableKey=\"productId\"\n        renderItem={(row, index) => (\n          <QuoteDetailTableCard\n            len={total || 0}\n            item={row}\n            showPrice={showPrice}\n            itemIndex={index}\n            currency={currency}\n            displayDiscount={displayDiscount}\n            getTaxRate={getTaxRate}\n          />\n        )}\n      />\n    </StyledQuoteTableContainer>\n  );\n}\n\nexport default forwardRef(QuoteDetailTable);\n","import { useState } from 'react';\nimport { useB3Lang } from '@b3/lang';\nimport { Box, Card, CardContent, Typography } from '@mui/material';\n\nimport { B3CollapseContainer } from '@/components';\n\ninterface QuoteTermsAndConditionsProps {\n  quoteLegalTerms: string;\n}\n\nexport default function QuoteTermsAndConditions(props: QuoteTermsAndConditionsProps) {\n  const { quoteLegalTerms = '' } = props;\n\n  const [isOpen, setIsOpen] = useState(false);\n\n  const b3Lang = useB3Lang();\n\n  const handleOnChange = (open: boolean) => {\n    setIsOpen(open);\n  };\n\n  return (\n    <Card\n      sx={{\n        '.MuiCardContent-root': {\n          maxHeight: isOpen ? '637px' : 'auto',\n        },\n      }}\n    >\n      <CardContent\n        sx={{\n          p: '16px !important',\n        }}\n      >\n        <B3CollapseContainer\n          title={b3Lang('quoteDetail.termsAndConditions')}\n          handleOnChange={handleOnChange}\n        >\n          <Box>\n            <Typography\n              variant=\"body1\"\n              sx={{\n                padding: '16px 0',\n                maxHeight: '545px',\n                whiteSpace: 'pre-wrap',\n                overflow: 'auto',\n              }}\n            >\n              {quoteLegalTerms}\n            </Typography>\n          </Box>\n        </B3CollapseContainer>\n      </CardContent>\n    </Card>\n  );\n}\n"],"names":["navigate","useNavigate","id","bcLanguage","quoteConfig","role","emailAddress","isB2BUser","selectCompanyHierarchyId","isAgenting","taxZoneRates","enteredInclusiveTax","isEnableProduct","purchasabilityPermission","handleGetProductsById","getQuote","useParams","state","useContext","GlobalContext","companyId","useAppSelector","company","companyInfo","customer","customerGroupId","isB2BUserSelector","companyHierarchyInfo","b2bFeatures","masqueradeCompany","currency_code","currencyCode","activeCurrencyInfoSelector","global","storeConfigs","currencies","blockPendingQuoteNonPurchasableOOS","rolePermissionSelector","async","listProducts","length","productIds","forEach","item","includes","productId","push","options","productsSearch","searchB2BProducts","searchBcProducts","newProductsSearch","conversionProductsList","listProduct","productInfo","find","search","Number","location","useLocation","date","getSearchVal","data","toString","quote","getBcQuoteDetail","getB2BQuoteDetail","useData","isMobile","useMobile","b3Lang","useB3Lang","quoteDetail","setQuoteDetail","useState","productList","setProductList","fileList","setFileList","isHandleApprove","setHandleApprove","isHideQuoteCheckout","setIsHideQuoteCheckout","quoteSummary","setQuoteSummary","originalSubtotal","discount","tax","shipping","totalAmount","isRequestLoading","setIsRequestLoading","isShowFooter","setIsShowFooter","quoteDetailTax","setQuoteDetailTax","noBuyerProductName","setNoBuyerProductName","oos","nonPurchasable","quotePurchasabilityPermissionInfo","setQuotePurchasabilityPermission","quotePurchasabilityPermission","quoteConvertToOrderPermission","quoteCheckoutLoading","setQuoteCheckoutLoading","useEffect","quoteCheckoutPermissionCode","b2bPermissionsMap","verifyLevelPermission","code","userEmail","contactInfo","email","oosErrorList","nonPurchasableErrorList","buyerInfo","getVariantInfoOOSAndPurchase","type","purchaseHandled","productName","isHideCheckout","snackbar","error","ProductName","proceedingCheckoutFn","useCallback","classRates","defaultTaxZone","taxZone","rates","enabled","rate","getTaxRate","taxClassId","variants","taxExclusive","get","taxInclusive","getQuoteDetail","productsWithMoreInfo","productsList","catch","err","quoteExtraFieldInfos","extraFieldsInfo","getB2BQuoteExtraFields","quoteCurrentExtraFields","extraField","currentExtraField","currentExtraFields","field","fieldName","name","fieldValue","default","getQuoteExtraFields","extraFields","subtotal","taxTotal","shippingTotal","taxPrice","product","quantity","offeredPrice","taxRate","backendAttachFiles","storefrontAttachFiles","salesRep","salesRepEmail","newFileList","file","fileName","fileType","fileUrl","hasDelete","status","title","createdBy","fetchPdfUrl","createdAt","quoteId","isPreview","bool","lang","fn","exportBcQuotePdf","exportB2BQuotePdf","quotePdf","url","quoteFrontendPdf","content","setTimeout","success","jsx","jsxs","Box","sx","display","alignItems","children","mr","Button","onClick","copy","window","href","variant","color","textAlign","padding","isClose","duration","handleQuoteCheckout","quoteGotoCheckout","isAutoEnableQuoteCheckout","useMemo","key","value","quoteAndExtraFieldsInfo","map","info","quoteTitle","referenceNumber","recipients","useScrollBar","B3Spin","isSpinning","flexDirection","flex","QuoteDetailHeader","quoteNumber","issuedAt","expirationDate","expiredAt","exportPdf","quotePdfUrl","open","printQuote","iframe","document","createElement","setAttribute","getElementById","appendChild","contentDocument","write","close","contentWindow","print","salesRepInfo","marginTop","QuoteInfo","shippingAddress","billingAddress","Grid","container","spacing","rowSpacing","overflow","flexWrap","paddingBottom","marginBottom","xs","flexBasis","pl","QuoteDetailTable","total","currency","getQuoteTableDetails","allProductsList","startIndex","params","offset","endIndex","first","edges","slice","totalCount","displayDiscount","QuoteDetailSummary","notes","displayPrint","QuoteNote","quoteNotes","Message","msgs","trackingHistory","QuoteAttachment","allowUpload","defaultFileList","legalTerms","QuoteTermsAndConditions","quoteLegalTerms","allowCheckout","QuoteDetailFooter","deselectCurrent","selection","getSelection","rangeCount","active","activeElement","ranges","i","getRangeAt","tagName","toUpperCase","blur","removeAllRanges","range","addRange","focus","clipboardToIE11Formatting","copyToClipboard","text","debug","message","reselectPrevious","mark","createRange","textContent","ariaHidden","style","all","position","top","clip","whiteSpace","webkitUserSelect","MozUserSelect","msUserSelect","userSelect","addEventListener","e","stopPropagation","format","preventDefault","clipboardData","console","warn","clearData","setData","onCopy","body","selectNodeContents","execCommand","Error","copyKey","test","navigator","userAgent","replace","prompt","removeRange","removeChild","_interopRequireDefault","require$$0","Object","defineProperty","ArrowUpward","default_1","_createSvgIcon","require$$1","_jsxRuntime","require$$2","ChatMessage","msg","isEndMessage","isCustomer","paddingTop","height","fontWeight","lineHeight","fontSize","letterSpacing","background","borderRadius","m","Tooltip","sendTime","placement","arrow","wordBreak","formatDistanceStrict","Date","addSuffix","DateMessage","mb","displayExtendedFormat","dispatch","globalDispatch","primaryColor","useTheme","palette","primary","main","messagesEndRef","useRef","changeReadRef","messages","setMessages","read","setRead","setMessage","loading","setLoading","quotesUpdateMessageActionsPermission","quotesUpdateMessagePermission","convertedMsgs","nextMsg","getNewMsgs","readNum","index","justifyContent","width","ml","current","scrollTop","scrollHeight","updateMsgs","updateB2BQuote","updateBCQuote","quoteUpdate","quoteData","lastMessage","parseInt","getTime","storeHash","handleOnChange","payload","quoteDetailHasNewMessages","Card","CardContent","p","B3CollapseContainer","opacity","ref","mt","maxHeight","overflowY","spinningHeight","size","isCloseLoading","tip","TextField","onKeyDown","target","onChange","event","label","margin","ArrowUpwardIcon","d","store","setQuoteDetailToCheckoutUrl","storefrontProductSettings","hidePriceFromGuests","getBCStorefrontProductSettings","pathname","bcQuoteCheckout","b2bQuoteCheckout","res","setQuoteToStorage","quoteCheckout","checkoutUrl","cartId","platform","attemptCheckoutLoginAndRedirect","b2bLogger","props","containerStyle","bottom","left","backgroundColor","zIndex","CustomButton","StyledCreateName","styled","portalStyle","CustomStyleContext","customColor","getContrastColor","gridOptions","Fragment","cursor","ArrowBackIosNew","marginRight","Typography","b3HexToRgb","QuoteStatus","salesRepName","displayFormat","showInclusiveTaxPrice","getCurrentPrice","price","priceFormat","currencyFormatConvert","isConversionRate","useCurrentCurrency","shippingAndTax","shippingMethod","shippingText","description","shippingVal","taxText","taxVal","showPrice","subtotalPrice","quotedSubtotal","maxWidth","StyledImage","QuoteDetailTableCard","quoteTableItem","len","itemIndex","basePrice","imageUrl","sku","productUrl","discountTaxPrice","getBCPrice","discountPrice","isDiscount","totalWithDiscount","borderTop","borderBottom","src","PRODUCT_DEFAULT_IMAGE","alt","origin","option","optionName","optionLabel","marginLeft","textDecoration","StyledQuoteTableContainer","border","boxShadow","verticalAlign","forwardRef","paginationTableRef","setSearch","useImperativeHandle","getList","refreshList","row","getDisplayPrice","showText","columnItems","render","optionsValue","B3PaginationTable","rowsPerPageOptions","getRequestList","isCustomRender","hover","searchParams","labelRowsPerPage","showBorder","itemIsMobileSpacing","noDataText","tableKey","renderItem","isOpen","setIsOpen"],"mappings":"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","x_google_ignoreList":[1,2,3]}