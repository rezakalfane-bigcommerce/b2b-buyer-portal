{"version":3,"file":"login-legacy-DtKWtQeV.js","sources":["../../src/shared/service/bc/graphql/login.ts"],"sourcesContent":["import { platform } from '@/utils';\n\nimport B3Request from '../../request/b3Fetch';\n\ninterface LoginData {\n  loginData: {\n    storeHash: string;\n    email: string;\n    password: string;\n    channelId: number;\n  };\n}\n\ninterface UserLoginResult {\n  login: {\n    result: {\n      token: string;\n      storefrontLoginToken: string;\n      permissions: [\n        {\n          code: string;\n          permissionLevel: number;\n        },\n      ];\n    };\n    errors?: { message: string }[];\n  };\n}\n\nconst getbcLogin = () => `mutation Login($email: String!, $pass: String!) {\n  login(email: $email, password: $pass) {\n    result,\n    customer {\n      entityId,\n      phone,\n      firstName,\n      lastName,\n      email,\n      customerGroupId,\n    }\n  }\n}`;\n\nconst logoutLogin = () => `mutation Logout {\n  logout {\n    result\n  }\n}`;\n\nconst getB2bLogin = `mutation Login($loginData: UserLoginType!) {\n  login(loginData: $loginData) {\n    result{\n      storefrontLoginToken\n      token\n      permissions {\n        code\n        permissionLevel\n      }\n    }\n  }\n}`;\n// customMessage: field used to determine whether to use a custom message\nexport const b2bLogin = (variables: LoginData, customMessage = true): Promise<UserLoginResult> =>\n  B3Request.graphqlB2B(\n    {\n      query: getB2bLogin,\n      variables,\n    },\n    customMessage,\n  );\n\nexport const bcLogin = (data: CustomFieldItems) =>\n  platform === 'bigcommerce'\n    ? B3Request.graphqlBC({\n        query: getbcLogin(),\n        variables: data,\n      })\n    : B3Request.graphqlBCProxy({\n        query: getbcLogin(),\n        variables: data,\n      });\n\nexport const bcLogoutLogin = () =>\n  platform === 'bigcommerce'\n    ? B3Request.graphqlBC({\n        query: logoutLogin(),\n      })\n    : B3Request.graphqlBCProxy({\n        query: logoutLogin(),\n      });\n"],"names":["exports","variables","customMessage","B3Request","graphqlB2B","query","data","platform","graphqlBC","graphqlBCProxy"],"mappings":"kOA8DwBA,EAAA,KAAA,CAACC,EAAsBC,GAAgB,IAC7DC,EAAUC,WACR,CACEC,MAhBc,2NAiBdJ,aAEFC,YAGoBI,GACT,gBAAbC,EACIJ,EAAUK,UAAU,CAClBH,MA7CiB,mPA8CjBJ,UAAWK,IAEbH,EAAUM,eAAe,CACvBJ,MAjDiB,mPAkDjBJ,UAAWK,MAGUN,EAAA,KAAA,IACd,gBAAbO,EACIJ,EAAUK,UAAU,CAClBH,MA1CkB,sDA4CpBF,EAAUM,eAAe,CACvBJ,MA7CkB"}