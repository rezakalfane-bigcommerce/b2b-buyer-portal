{"version":3,"file":"masquerade-MPvJZ6LM.js","sources":["../../src/utils/masquerade.ts"],"sourcesContent":["import {\n  getAgentInfo,\n  superAdminBeginMasquerade,\n  superAdminEndMasquerade,\n} from '@/shared/service/b2b';\nimport { clearMasqueradeCompany, MasqueradeCompany, setMasqueradeCompany, store } from '@/store';\n\ninterface StartMasqueradeParams {\n  companyId: number;\n  customerId: string | number;\n}\n\nexport const startMasquerade = async ({ companyId, customerId }: StartMasqueradeParams) => {\n  // change group in bc through b2b api\n  await superAdminBeginMasquerade(companyId);\n\n  // get data to be saved on global\n  const data = await getAgentInfo(customerId);\n  if (!data?.superAdminMasquerading) return;\n  const { id, companyName, customerGroupId = 0 } = data.superAdminMasquerading;\n\n  const masqueradeCompany: MasqueradeCompany = {\n    masqueradeCompany: {\n      id,\n      isAgenting: true,\n      companyName,\n      customerGroupId,\n    },\n  };\n\n  store.dispatch(setMasqueradeCompany(masqueradeCompany));\n};\n\nexport const endMasquerade = async () => {\n  const { masqueradeCompany } = store.getState().b2bFeatures;\n  const salesRepCompanyId = masqueradeCompany.id;\n\n  // change group in bc through b2b api\n  await superAdminEndMasquerade(salesRepCompanyId);\n\n  store.dispatch(clearMasqueradeCompany());\n};\n"],"names":["startMasquerade","companyId","customerId","superAdminBeginMasquerade","data","getAgentInfo","id","companyName","customerGroupId","masqueradeCompany","store","setMasqueradeCompany","endMasquerade","salesRepCompanyId","superAdminEndMasquerade","clearMasqueradeCompany"],"mappings":"uLAYO,MAAMA,EAAkB,MAAO,CAAE,UAAAC,EAAW,WAAAC,KAAwC,CAEzF,MAAMC,EAA0BF,CAAS,EAGnC,MAAAG,EAAO,MAAMC,EAAaH,CAAU,EACtC,GAAA,EAACE,GAAA,MAAAA,EAAM,wBAAwB,OACnC,KAAM,CAAE,GAAAE,EAAI,YAAAC,EAAa,gBAAAC,EAAkB,CAAA,EAAMJ,EAAK,uBAEhDK,EAAuC,CAC3C,kBAAmB,CACjB,GAAAH,EACA,WAAY,GACZ,YAAAC,EACA,gBAAAC,CAAA,CAEJ,EAEME,EAAA,SAASC,EAAqBF,CAAiB,CAAC,CACxD,EAEaG,EAAgB,SAAY,CACvC,KAAM,CAAE,kBAAAH,CAAsB,EAAAC,EAAM,SAAW,EAAA,YACzCG,EAAoBJ,EAAkB,GAG5C,MAAMK,EAAwBD,CAAiB,EAEzCH,EAAA,SAASK,GAAwB,CACzC"}