{"version":3,"file":"masquerade-legacy-C_wOGbc0.js","sources":["../../src/utils/masquerade.ts"],"sourcesContent":["import {\n  getAgentInfo,\n  superAdminBeginMasquerade,\n  superAdminEndMasquerade,\n} from '@/shared/service/b2b';\nimport { clearMasqueradeCompany, MasqueradeCompany, setMasqueradeCompany, store } from '@/store';\n\ninterface StartMasqueradeParams {\n  companyId: number;\n  customerId: string | number;\n}\n\nexport const startMasquerade = async ({ companyId, customerId }: StartMasqueradeParams) => {\n  // change group in bc through b2b api\n  await superAdminBeginMasquerade(companyId);\n\n  // get data to be saved on global\n  const data = await getAgentInfo(customerId);\n  if (!data?.superAdminMasquerading) return;\n  const { id, companyName, customerGroupId = 0 } = data.superAdminMasquerading;\n\n  const masqueradeCompany: MasqueradeCompany = {\n    masqueradeCompany: {\n      id,\n      isAgenting: true,\n      companyName,\n      customerGroupId,\n    },\n  };\n\n  store.dispatch(setMasqueradeCompany(masqueradeCompany));\n};\n\nexport const endMasquerade = async () => {\n  const { masqueradeCompany } = store.getState().b2bFeatures;\n  const salesRepCompanyId = masqueradeCompany.id;\n\n  // change group in bc through b2b api\n  await superAdminEndMasquerade(salesRepCompanyId);\n\n  store.dispatch(clearMasqueradeCompany());\n};\n"],"names":["async","companyId","customerId","superAdminBeginMasquerade","data","getAgentInfo","superAdminMasquerading","id","companyName","customerGroupId","masqueradeCompany","isAgenting","store","dispatch","setMasqueradeCompany","getState","b2bFeatures","salesRepCompanyId","superAdminEndMasquerade","clearMasqueradeCompany"],"mappings":"6SAY+BA,OAASC,YAAWC,uBAE3CC,EAA0BF,GAG1B,MAAAG,QAAaC,EAAaH,GAC5B,IAACE,GAAME,uBAAwB,OACnC,MAAMC,GAAEA,EAAIC,YAAAA,EAAAC,gBAAaA,EAAkB,GAAML,EAAKE,uBAEhDI,EAAuC,CAC3CA,kBAAmB,CACjBH,KACAI,YAAY,EACZH,cACAC,oBAIEG,EAAAC,SAASC,EAAqBJ,GAAkB,WAG3BV,UAC3B,MAAMU,kBAAEA,GAAsBE,EAAMG,WAAWC,YACzCC,EAAoBP,EAAkBH,SAGtCW,EAAwBD,GAExBL,EAAAC,SAASM,IAAwB"}