System.register(["./assets/base-legacy-D2P4nFX7.js","./assets/global-legacy-B1EgakWG.js"],(function(e,t){"use strict";var n,r;return{setters:[e=>{n=e.g,r=e.b},null],execute:function(){const e="buyer-portal-scripts-headless";(async function(){(t=>{const n=(new DOMParser).parseFromString(t,"text/html").querySelectorAll("script");if(n.length>0){const t=document.querySelectorAll(`script.${e}`);t.length>0&&t.forEach((e=>{e.parentNode?.removeChild(e)})),n.forEach((t=>{const n=document.createElement("script");[...t.attributes].forEach((e=>{n.setAttribute(e.nodeName,e.nodeValue)})),n.innerHTML=t.innerHTML,n.className=e,document.body.appendChild(n)}))}})(await async function(e){const t=document.querySelector("script[data-storehash][data-channelid]"),r={siteUrl:e,storeHash:t?.dataset?.storehash??"",channelId:t?.dataset?.channelid??"",environment:t?.dataset?.environment},s=await fetch(`${n(r.environment)}/graphql`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({query:`\n          {\n            storefrontScript(\n              storeHash: "${r.storeHash}"\n              channelId: ${r.channelId}\n              siteUrl: "${r.siteUrl}"\n            ) {\n              script\n              storeHash\n              channelId\n            }\n          }`})});if(!s.ok)throw new Error("network error");const{data:{storefrontScript:a}}=await s.json();return a.script}(window.location.origin))})().catch((e=>{r.error("unexpected error during headless buyer portal initialization",e)}))}}}));
//# sourceMappingURL=headless-legacy.js.map
