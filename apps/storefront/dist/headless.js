import{g as d,b as f}from"./assets/base-BCVDEF8S.js";import"./assets/global-D7Yn0gGb.js";function g(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}const h="buyer-portal-scripts-headless";async function b(){const s=c=>{const r=new DOMParser().parseFromString(c,"text/html").querySelectorAll("script");if(r.length>0){const o=document.querySelectorAll("script.".concat(h));o.length>0&&o.forEach(n=>{var e;(e=n.parentNode)==null||e.removeChild(n)}),r.forEach(n=>{const e=document.createElement("script");[...n.attributes].forEach(a=>{e.setAttribute(a.nodeName,a.nodeValue)}),e.innerHTML=n.innerHTML,e.className=h,document.body.appendChild(e)})}};async function u(c){var e,a,i,p,l;const t=document.querySelector("script[data-storehash][data-channelid]"),r={siteUrl:c,storeHash:(a=(e=t==null?void 0:t.dataset)==null?void 0:e.storehash)!=null?a:"",channelId:(p=(i=t==null?void 0:t.dataset)==null?void 0:i.channelid)!=null?p:"",environment:(l=t==null?void 0:t.dataset)==null?void 0:l.environment},o=await fetch("".concat(d(r.environment),"/graphql"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({query:'\n          {\n            storefrontScript(\n              storeHash: "'.concat(r.storeHash,'"\n              channelId: ').concat(r.channelId,'\n              siteUrl: "').concat(r.siteUrl,'"\n            ) {\n              script\n              storeHash\n              channelId\n            }\n          }')})});if(!o.ok)throw new Error("network error");const{data:{storefrontScript:n}}=await o.json();return n.script}const m=await u(window.location.origin);s(m)}b().catch(s=>{f.error("unexpected error during headless buyer portal initialization",s)});export{g as __vite_legacy_guard};
//# sourceMappingURL=headless.js.map
